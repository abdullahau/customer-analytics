<!DOCTYPE html>

<html lang="en">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Polars_Test</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
 * Mozilla scrollbar styling
 */

/* use standard opaque scrollbars for most nodes */
[data-jp-theme-scrollbars='true'] {
  scrollbar-color: rgb(var(--jp-scrollbar-thumb-color))
    var(--jp-scrollbar-background-color);
}

/* for code nodes, use a transparent style of scrollbar. These selectors
 * will match lower in the tree, and so will override the above */
[data-jp-theme-scrollbars='true'] .CodeMirror-hscrollbar,
[data-jp-theme-scrollbars='true'] .CodeMirror-vscrollbar {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
}

/* tiny scrollbar */

.jp-scrollbar-tiny {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
  scrollbar-width: thin;
}

/* tiny scrollbar */

.jp-scrollbar-tiny::-webkit-scrollbar,
.jp-scrollbar-tiny::-webkit-scrollbar-corner {
  background-color: transparent;
  height: 4px;
  width: 4px;
}

.jp-scrollbar-tiny::-webkit-scrollbar-thumb {
  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:horizontal {
  border-left: 0 solid transparent;
  border-right: 0 solid transparent;
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:vertical {
  border-top: 0 solid transparent;
  border-bottom: 0 solid transparent;
}

/*
 * Lumino
 */

.lm-ScrollBar[data-orientation='horizontal'] {
  min-height: 16px;
  max-height: 16px;
  min-width: 45px;
  border-top: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] {
  min-width: 16px;
  max-width: 16px;
  min-height: 45px;
  border-left: 1px solid #a0a0a0;
}

.lm-ScrollBar-button {
  background-color: #f0f0f0;
  background-position: center center;
  min-height: 15px;
  max-height: 15px;
  min-width: 15px;
  max-width: 15px;
}

.lm-ScrollBar-button:hover {
  background-color: #dadada;
}

.lm-ScrollBar-button.lm-mod-active {
  background-color: #cdcdcd;
}

.lm-ScrollBar-track {
  background: #f0f0f0;
}

.lm-ScrollBar-thumb {
  background: #cdcdcd;
}

.lm-ScrollBar-thumb:hover {
  background: #bababa;
}

.lm-ScrollBar-thumb.lm-mod-active {
  background: #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal'] .lm-ScrollBar-thumb {
  height: 100%;
  min-width: 15px;
  border-left: 1px solid #a0a0a0;
  border-right: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] .lm-ScrollBar-thumb {
  width: 100%;
  min-height: 15px;
  border-top: 1px solid #a0a0a0;
  border-bottom: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-left);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-right);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-up);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-down);
  background-size: 17px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Widget {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
}

.lm-Widget.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.lm-AccordionPanel[data-orientation='horizontal'] > .lm-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  display: flex;
  flex-direction: column;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-CommandPalette-search {
  flex: 0 0 auto;
}

.lm-CommandPalette-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  min-height: 0;
  overflow: auto;
  list-style-type: none;
}

.lm-CommandPalette-header {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-CommandPalette-item {
  display: flex;
  flex-direction: row;
}

.lm-CommandPalette-itemIcon {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemContent {
  flex: 1 1 auto;
  overflow: hidden;
}

.lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemLabel {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-close-icon {
  border: 1px solid transparent;
  background-color: transparent;
  position: absolute;
  z-index: 1;
  right: 3%;
  top: 0;
  bottom: 0;
  margin: auto;
  padding: 7px 0;
  display: none;
  vertical-align: middle;
  outline: 0;
  cursor: pointer;
}
.lm-close-icon:after {
  content: 'X';
  display: block;
  width: 15px;
  height: 15px;
  text-align: center;
  color: #000;
  font-weight: normal;
  font-size: 12px;
  cursor: pointer;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-DockPanel {
  z-index: 0;
}

.lm-DockPanel-widget {
  z-index: 0;
}

.lm-DockPanel-tabBar {
  z-index: 1;
}

.lm-DockPanel-handle {
  z-index: 2;
}

.lm-DockPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-DockPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-DockPanel-handle[data-orientation='horizontal'] {
  cursor: ew-resize;
}

.lm-DockPanel-handle[data-orientation='vertical'] {
  cursor: ns-resize;
}

.lm-DockPanel-handle[data-orientation='horizontal']:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-DockPanel-handle[data-orientation='vertical']:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

.lm-DockPanel-overlay {
  z-index: 3;
  box-sizing: border-box;
  pointer-events: none;
}

.lm-DockPanel-overlay.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Menu {
  z-index: 10000;
  position: absolute;
  white-space: nowrap;
  overflow-x: hidden;
  overflow-y: auto;
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-Menu-content {
  margin: 0;
  padding: 0;
  display: table;
  list-style-type: none;
}

.lm-Menu-item {
  display: table-row;
}

.lm-Menu-item.lm-mod-hidden,
.lm-Menu-item.lm-mod-collapsed {
  display: none !important;
}

.lm-Menu-itemIcon,
.lm-Menu-itemSubmenuIcon {
  display: table-cell;
  text-align: center;
}

.lm-Menu-itemLabel {
  display: table-cell;
  text-align: left;
}

.lm-Menu-itemShortcut {
  display: table-cell;
  text-align: right;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-MenuBar {
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-MenuBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: row;
  list-style-type: none;
}

.lm-MenuBar-item {
  box-sizing: border-box;
}

.lm-MenuBar-itemIcon,
.lm-MenuBar-itemLabel {
  display: inline-block;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-ScrollBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-ScrollBar[data-orientation='horizontal'] {
  flex-direction: row;
}

.lm-ScrollBar[data-orientation='vertical'] {
  flex-direction: column;
}

.lm-ScrollBar-button {
  box-sizing: border-box;
  flex: 0 0 auto;
}

.lm-ScrollBar-track {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  flex: 1 1 auto;
}

.lm-ScrollBar-thumb {
  box-sizing: border-box;
  position: absolute;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-SplitPanel-child {
  z-index: 0;
}

.lm-SplitPanel-handle {
  z-index: 1;
}

.lm-SplitPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-SplitPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {
  cursor: ew-resize;
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {
  cursor: ns-resize;
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-TabBar[data-orientation='horizontal'] {
  flex-direction: row;
  align-items: flex-end;
}

.lm-TabBar[data-orientation='vertical'] {
  flex-direction: column;
  align-items: flex-end;
}

.lm-TabBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex: 1 1 auto;
  list-style-type: none;
}

.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {
  flex-direction: row;
}

.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {
  flex-direction: column;
}

.lm-TabBar-tab {
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
  overflow: hidden;
  touch-action: none; /* Disable native Drag/Drop */
}

.lm-TabBar-tabIcon,
.lm-TabBar-tabCloseIcon {
  flex: 0 0 auto;
}

.lm-TabBar-tabLabel {
  flex: 1 1 auto;
  overflow: hidden;
  white-space: nowrap;
}

.lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
}

.lm-TabBar-tab.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar-addButton.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {
  position: relative;
}

.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {
  left: 0;
  transition: left 150ms ease;
}

.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {
  top: 0;
  transition: top 150ms ease;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {
  transition: none;
}

.lm-TabBar-tabLabel .lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
  background: inherit;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabPanel-tabBar {
  z-index: 1;
}

.lm-TabPanel-stackedPanel {
  z-index: 0;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapse {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.jp-Collapse-header {
  padding: 1px 12px;
  background-color: var(--jp-layout-color1);
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  align-items: center;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  text-transform: uppercase;
  user-select: none;
}

.jp-Collapser-icon {
  height: 16px;
}

.jp-Collapse-header-collapsed .jp-Collapser-icon {
  transform: rotate(-90deg);
  margin: auto 0;
}

.jp-Collapser-title {
  line-height: 25px;
}

.jp-Collapse-contents {
  padding: 0 12px;
  background-color: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* This file was auto-generated by ensureUiComponents() in @jupyterlab/buildutils */

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

/* Icons urls */

:root {
  --jp-icon-add-above: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5MikiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik00Ljc1IDQuOTMwNjZINi42MjVWNi44MDU2NkM2LjYyNSA3LjAxMTkxIDYuNzkzNzUgNy4xODA2NiA3IDcuMTgwNjZDNy4yMDYyNSA3LjE4MDY2IDcuMzc1IDcuMDExOTEgNy4zNzUgNi44MDU2NlY0LjkzMDY2SDkuMjVDOS40NTYyNSA0LjkzMDY2IDkuNjI1IDQuNzYxOTEgOS42MjUgNC41NTU2NkM5LjYyNSA0LjM0OTQxIDkuNDU2MjUgNC4xODA2NiA5LjI1IDQuMTgwNjZINy4zNzVWMi4zMDU2NkM3LjM3NSAyLjA5OTQxIDcuMjA2MjUgMS45MzA2NiA3IDEuOTMwNjZDNi43OTM3NSAxLjkzMDY2IDYuNjI1IDIuMDk5NDEgNi42MjUgMi4zMDU2NlY0LjE4MDY2SDQuNzVDNC41NDM3NSA0LjE4MDY2IDQuMzc1IDQuMzQ5NDEgNC4zNzUgNC41NTU2NkM0LjM3NSA0Ljc2MTkxIDQuNTQzNzUgNC45MzA2NiA0Ljc1IDQuOTMwNjZaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC43Ii8+CjwvZz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjUgOS41VjExLjVMMi41IDExLjVWOS41TDExLjUgOS41Wk0xMiA4QzEyLjU1MjMgOCAxMyA4LjQ0NzcyIDEzIDlWMTJDMTMgMTIuNTUyMyAxMi41NTIzIDEzIDEyIDEzTDIgMTNDMS40NDc3MiAxMyAxIDEyLjU1MjMgMSAxMlY5QzEgOC40NDc3MiAxLjQ0NzcxIDggMiA4TDEyIDhaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5MiI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KC0xIDAgMCAxIDEwIDEuNTU1NjYpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==);
  --jp-icon-add-below: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5OCkiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik05LjI1IDEwLjA2OTNMNy4zNzUgMTAuMDY5M0w3LjM3NSA4LjE5NDM0QzcuMzc1IDcuOTg4MDkgNy4yMDYyNSA3LjgxOTM0IDcgNy44MTkzNEM2Ljc5Mzc1IDcuODE5MzQgNi42MjUgNy45ODgwOSA2LjYyNSA4LjE5NDM0TDYuNjI1IDEwLjA2OTNMNC43NSAxMC4wNjkzQzQuNTQzNzUgMTAuMDY5MyA0LjM3NSAxMC4yMzgxIDQuMzc1IDEwLjQ0NDNDNC4zNzUgMTAuNjUwNiA0LjU0Mzc1IDEwLjgxOTMgNC43NSAxMC44MTkzTDYuNjI1IDEwLjgxOTNMNi42MjUgMTIuNjk0M0M2LjYyNSAxMi45MDA2IDYuNzkzNzUgMTMuMDY5MyA3IDEzLjA2OTNDNy4yMDYyNSAxMy4wNjkzIDcuMzc1IDEyLjkwMDYgNy4zNzUgMTIuNjk0M0w3LjM3NSAxMC44MTkzTDkuMjUgMTAuODE5M0M5LjQ1NjI1IDEwLjgxOTMgOS42MjUgMTAuNjUwNiA5LjYyNSAxMC40NDQzQzkuNjI1IDEwLjIzODEgOS40NTYyNSAxMC4wNjkzIDkuMjUgMTAuMDY5M1oiIGZpbGw9IiM2MTYxNjEiIHN0cm9rZT0iIzYxNjE2MSIgc3Ryb2tlLXdpZHRoPSIwLjciLz4KPC9nPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMi41IDUuNUwyLjUgMy41TDExLjUgMy41TDExLjUgNS41TDIuNSA1LjVaTTIgN0MxLjQ0NzcyIDcgMSA2LjU1MjI4IDEgNkwxIDNDMSAyLjQ0NzcyIDEuNDQ3NzIgMiAyIDJMMTIgMkMxMi41NTIzIDIgMTMgMi40NDc3MiAxMyAzTDEzIDZDMTMgNi41NTIyOSAxMi41NTIzIDcgMTIgN0wyIDdaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5OCI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KDEgMS43NDg0NmUtMDcgMS43NDg0NmUtMDcgLTEgNCAxMy40NDQzKSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=);
  --jp-icon-add: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bell: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiPgogICA8cGF0aCBjbGFzcz0ianAtaWNvbjIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzMzMzMzIgogICAgICBkPSJtOCAwLjI5Yy0xLjQgMC0yLjcgMC43My0zLjYgMS44LTEuMiAxLjUtMS40IDMuNC0xLjUgNS4yLTAuMTggMi4yLTAuNDQgNC0yLjMgNS4zbDAuMjggMS4zaDVjMC4wMjYgMC42NiAwLjMyIDEuMSAwLjcxIDEuNSAwLjg0IDAuNjEgMiAwLjYxIDIuOCAwIDAuNTItMC40IDAuNi0xIDAuNzEtMS41aDVsMC4yOC0xLjNjLTEuOS0wLjk3LTIuMi0zLjMtMi4zLTUuMy0wLjEzLTEuOC0wLjI2LTMuNy0xLjUtNS4yLTAuODUtMS0yLjItMS44LTMuNi0xLjh6bTAgMS40YzAuODggMCAxLjkgMC41NSAyLjUgMS4zIDAuODggMS4xIDEuMSAyLjcgMS4yIDQuNCAwLjEzIDEuNyAwLjIzIDMuNiAxLjMgNS4yaC0xMGMxLjEtMS42IDEuMi0zLjQgMS4zLTUuMiAwLjEzLTEuNyAwLjMtMy4zIDEuMi00LjQgMC41OS0wLjcyIDEuNi0xLjMgMi41LTEuM3ptLTAuNzQgMTJoMS41Yy0wLjAwMTUgMC4yOCAwLjAxNSAwLjc5LTAuNzQgMC43OS0wLjczIDAuMDAxNi0wLjcyLTAuNTMtMC43NC0wLjc5eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-bug-dot: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiPgogICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuMTkgOEgyMFYxMEgxNy45MUMxNy45NiAxMC4zMyAxOCAxMC42NiAxOCAxMVYxMkgyMFYxNEgxOC41SDE4VjE0LjAyNzVDMTUuNzUgMTQuMjc2MiAxNCAxNi4xODM3IDE0IDE4LjVDMTQgMTkuMjA4IDE0LjE2MzUgMTkuODc3OSAxNC40NTQ5IDIwLjQ3MzlDMTMuNzA2MyAyMC44MTE3IDEyLjg3NTcgMjEgMTIgMjFDOS43OCAyMSA3Ljg1IDE5Ljc5IDYuODEgMThINFYxNkg2LjA5QzYuMDQgMTUuNjcgNiAxNS4zNCA2IDE1VjE0SDRWMTJINlYxMUM2IDEwLjY2IDYuMDQgMTAuMzMgNi4wOSAxMEg0VjhINi44MUM3LjI2IDcuMjIgNy44OCA2LjU1IDguNjIgNi4wNEw3IDQuNDFMOC40MSAzTDEwLjU5IDUuMTdDMTEuMDQgNS4wNiAxMS41MSA1IDEyIDVDMTIuNDkgNSAxMi45NiA1LjA2IDEzLjQyIDUuMTdMMTUuNTkgM0wxNyA0LjQxTDE1LjM3IDYuMDRDMTYuMTIgNi41NSAxNi43NCA3LjIyIDE3LjE5IDhaTTEwIDE2SDE0VjE0SDEwVjE2Wk0xMCAxMkgxNFYxMEgxMFYxMloiIGZpbGw9IiM2MTYxNjEiLz4KICAgICAgICA8cGF0aCBkPSJNMjIgMTguNUMyMiAyMC40MzMgMjAuNDMzIDIyIDE4LjUgMjJDMTYuNTY3IDIyIDE1IDIwLjQzMyAxNSAxOC41QzE1IDE2LjU2NyAxNi41NjcgMTUgMTguNSAxNUMyMC40MzMgMTUgMjIgMTYuNTY3IDIyIDE4LjVaIiBmaWxsPSIjNjE2MTYxIi8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bug: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-build: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE0LjkgMTcuNDVDMTYuMjUgMTcuNDUgMTcuMzUgMTYuMzUgMTcuMzUgMTVDMTcuMzUgMTMuNjUgMTYuMjUgMTIuNTUgMTQuOSAxMi41NUMxMy41NCAxMi41NSAxMi40NSAxMy42NSAxMi40NSAxNUMxMi40NSAxNi4zNSAxMy41NCAxNy40NSAxNC45IDE3LjQ1Wk0yMC4xIDE1LjY4TDIxLjU4IDE2Ljg0QzIxLjcxIDE2Ljk1IDIxLjc1IDE3LjEzIDIxLjY2IDE3LjI5TDIwLjI2IDE5LjcxQzIwLjE3IDE5Ljg2IDIwIDE5LjkyIDE5LjgzIDE5Ljg2TDE4LjA5IDE5LjE2QzE3LjczIDE5LjQ0IDE3LjMzIDE5LjY3IDE2LjkxIDE5Ljg1TDE2LjY0IDIxLjdDMTYuNjIgMjEuODcgMTYuNDcgMjIgMTYuMyAyMkgxMy41QzEzLjMyIDIyIDEzLjE4IDIxLjg3IDEzLjE1IDIxLjdMMTIuODkgMTkuODVDMTIuNDYgMTkuNjcgMTIuMDcgMTkuNDQgMTEuNzEgMTkuMTZMOS45NjAwMiAxOS44NkM5LjgxMDAyIDE5LjkyIDkuNjIwMDIgMTkuODYgOS41NDAwMiAxOS43MUw4LjE0MDAyIDE3LjI5QzguMDUwMDIgMTcuMTMgOC4wOTAwMiAxNi45NSA4LjIyMDAyIDE2Ljg0TDkuNzAwMDIgMTUuNjhMOS42NTAwMSAxNUw5LjcwMDAyIDE0LjMxTDguMjIwMDIgMTMuMTZDOC4wOTAwMiAxMy4wNSA4LjA1MDAyIDEyLjg2IDguMTQwMDIgMTIuNzFMOS41NDAwMiAxMC4yOUM5LjYyMDAyIDEwLjEzIDkuODEwMDIgMTAuMDcgOS45NjAwMiAxMC4xM0wxMS43MSAxMC44NEMxMi4wNyAxMC41NiAxMi40NiAxMC4zMiAxMi44OSAxMC4xNUwxMy4xNSA4LjI4OTk4QzEzLjE4IDguMTI5OTggMTMuMzIgNy45OTk5OCAxMy41IDcuOTk5OThIMTYuM0MxNi40NyA3Ljk5OTk4IDE2LjYyIDguMTI5OTggMTYuNjQgOC4yODk5OEwxNi45MSAxMC4xNUMxNy4zMyAxMC4zMiAxNy43MyAxMC41NiAxOC4wOSAxMC44NEwxOS44MyAxMC4xM0MyMCAxMC4wNyAyMC4xNyAxMC4xMyAyMC4yNiAxMC4yOUwyMS42NiAxMi43MUMyMS43NSAxMi44NiAyMS43MSAxMy4wNSAyMS41OCAxMy4xNkwyMC4xIDE0LjMxTDIwLjE1IDE1TDIwLjEgMTUuNjhaIi8+CiAgICA8cGF0aCBkPSJNNy4zMjk2NiA3LjQ0NDU0QzguMDgzMSA3LjAwOTU0IDguMzM5MzIgNi4wNTMzMiA3LjkwNDMyIDUuMjk5ODhDNy40NjkzMiA0LjU0NjQzIDYuNTA4MSA0LjI4MTU2IDUuNzU0NjYgNC43MTY1NkM1LjM5MTc2IDQuOTI2MDggNS4xMjY5NSA1LjI3MTE4IDUuMDE4NDkgNS42NzU5NEM0LjkxMDA0IDYuMDgwNzEgNC45NjY4MiA2LjUxMTk4IDUuMTc2MzQgNi44NzQ4OEM1LjYxMTM0IDcuNjI4MzIgNi41NzYyMiA3Ljg3OTU0IDcuMzI5NjYgNy40NDQ1NFpNOS42NTcxOCA0Ljc5NTkzTDEwLjg2NzIgNC45NTE3OUMxMC45NjI4IDQuOTc3NDEgMTEuMDQwMiA1LjA3MTMzIDExLjAzODIgNS4xODc5M0wxMS4wMzg4IDYuOTg4OTNDMTEuMDQ1NSA3LjEwMDU0IDEwLjk2MTYgNy4xOTUxOCAxMC44NTUgNy4yMTA1NEw5LjY2MDAxIDcuMzgwODNMOS4yMzkxNSA4LjEzMTg4TDkuNjY5NjEgOS4yNTc0NUM5LjcwNzI5IDkuMzYyNzEgOS42NjkzNCA5LjQ3Njk5IDkuNTc0MDggOS41MzE5OUw4LjAxNTIzIDEwLjQzMkM3LjkxMTMxIDEwLjQ5MiA3Ljc5MzM3IDEwLjQ2NzcgNy43MjEwNSAxMC4zODI0TDYuOTg3NDggOS40MzE4OEw2LjEwOTMxIDkuNDMwODNMNS4zNDcwNCAxMC4zOTA1QzUuMjg5MDkgMTAuNDcwMiA1LjE3MzgzIDEwLjQ5MDUgNS4wNzE4NyAxMC40MzM5TDMuNTEyNDUgOS41MzI5M0MzLjQxMDQ5IDkuNDc2MzMgMy4zNzY0NyA5LjM1NzQxIDMuNDEwNzUgOS4yNTY3OUwzLjg2MzQ3IDguMTQwOTNMMy42MTc0OSA3Ljc3NDg4TDMuNDIzNDcgNy4zNzg4M0wyLjIzMDc1IDcuMjEyOTdDMi4xMjY0NyA3LjE5MjM1IDIuMDQwNDkgNy4xMDM0MiAyLjA0MjQ1IDYuOTg2ODJMMi4wNDE4NyA1LjE4NTgyQzIuMDQzODMgNS4wNjkyMiAyLjExOTA5IDQuOTc5NTggMi4yMTcwNCA0Ljk2OTIyTDMuNDIwNjUgNC43OTM5M0wzLjg2NzQ5IDQuMDI3ODhMMy40MTEwNSAyLjkxNzMxQzMuMzczMzcgMi44MTIwNCAzLjQxMTMxIDIuNjk3NzYgMy41MTUyMyAyLjYzNzc2TDUuMDc0MDggMS43Mzc3NkM1LjE2OTM0IDEuNjgyNzYgNS4yODcyOSAxLjcwNzA0IDUuMzU5NjEgMS43OTIzMUw2LjExOTE1IDIuNzI3ODhMNi45ODAwMSAyLjczODkzTDcuNzI0OTYgMS43ODkyMkM3Ljc5MTU2IDEuNzA0NTggNy45MTU0OCAxLjY3OTIyIDguMDA4NzkgMS43NDA4Mkw5LjU2ODIxIDIuNjQxODJDOS42NzAxNyAyLjY5ODQyIDkuNzEyODUgMi44MTIzNCA5LjY4NzIzIDIuOTA3OTdMOS4yMTcxOCA0LjAzMzgzTDkuNDYzMTYgNC4zOTk4OEw5LjY1NzE4IDQuNzk1OTNaIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iOS45LDEzLjYgMy42LDcuNCA0LjQsNi42IDkuOSwxMi4yIDE1LjQsNi43IDE2LjEsNy40ICIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNS45TDksOS43bDMuOC0zLjhsMS4yLDEuMmwtNC45LDVsLTQuOS01TDUuMiw1Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNy41TDksMTEuMmwzLjgtMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-left: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik0xMC44LDEyLjhMNy4xLDlsMy44LTMuOGwwLDcuNkgxMC44eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-right: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik03LjIsNS4yTDEwLjksOWwtMy44LDMuOFY1LjJINy4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-up-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMTUuNCwxMy4zIDkuOSw3LjcgNC40LDEzLjIgMy42LDEyLjUgOS45LDYuMyAxNi4xLDEyLjYgIi8+Cgk8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-up: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik01LjIsMTAuNUw5LDYuOGwzLjgsMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-case-sensitive: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWFjY2VudDIiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTcuNiw4aDAuOWwzLjUsOGgtMS4xTDEwLDE0SDZsLTAuOSwySDRMNy42LDh6IE04LDkuMUw2LjQsMTNoMy4yTDgsOS4xeiIvPgogICAgPHBhdGggZD0iTTE2LjYsOS44Yy0wLjIsMC4xLTAuNCwwLjEtMC43LDAuMWMtMC4yLDAtMC40LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMi0wLjQtMC4yLTAuNyBjLTAuMywwLjMtMC42LDAuNS0wLjksMC43Yy0wLjMsMC4xLTAuNywwLjItMS4xLDAuMmMtMC4zLDAtMC41LDAtMC43LTAuMWMtMC4yLTAuMS0wLjQtMC4yLTAuNi0wLjNjLTAuMi0wLjEtMC4zLTAuMy0wLjQtMC41IGMtMC4xLTAuMi0wLjEtMC40LTAuMS0wLjdjMC0wLjMsMC4xLTAuNiwwLjItMC44YzAuMS0wLjIsMC4zLTAuNCwwLjQtMC41QzEyLDcsMTIuMiw2LjksMTIuNSw2LjhjMC4yLTAuMSwwLjUtMC4xLDAuNy0wLjIgYzAuMy0wLjEsMC41LTAuMSwwLjctMC4xYzAuMiwwLDAuNC0wLjEsMC42LTAuMWMwLjIsMCwwLjMtMC4xLDAuNC0wLjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjRjMC0xLTEuMS0xLTEuMy0xIGMtMC40LDAtMS40LDAtMS40LDEuMmgtMC45YzAtMC40LDAuMS0wLjcsMC4yLTFjMC4xLTAuMiwwLjMtMC40LDAuNS0wLjZjMC4yLTAuMiwwLjUtMC4zLDAuOC0wLjNDMTMuMyw0LDEzLjYsNCwxMy45LDQgYzAuMywwLDAuNSwwLDAuOCwwLjFjMC4zLDAsMC41LDAuMSwwLjcsMC4yYzAuMiwwLjEsMC40LDAuMywwLjUsMC41QzE2LDUsMTYsNS4yLDE2LDUuNnYyLjljMCwwLjIsMCwwLjQsMCwwLjUgYzAsMC4xLDAuMSwwLjIsMC4zLDAuMmMwLjEsMCwwLjIsMCwwLjMsMFY5Ljh6IE0xNS4yLDYuOWMtMS4yLDAuNi0zLjEsMC4yLTMuMSwxLjRjMCwxLjQsMy4xLDEsMy4xLTAuNVY2Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-circle-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-circle: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-clear: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8bWFzayBpZD0iZG9udXRIb2xlIj4KICAgIDxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSJibGFjayIvPgogIDwvbWFzaz4KCiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxyZWN0IGhlaWdodD0iMTgiIHdpZHRoPSIyIiB4PSIxMSIgeT0iMyIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1LCAxMiwgMTIpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgbWFzaz0idXJsKCNkb251dEhvbGUpIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-close: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1ub25lIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIGpwLWljb24zLWhvdmVyIiBmaWxsPSJub25lIj4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjExIi8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIGpwLWljb24tYWNjZW50Mi1ob3ZlciIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogIDwvZz4KCiAgPGcgY2xhc3M9ImpwLWljb24tbm9uZSBqcC1pY29uLWJ1c3kiIGZpbGw9Im5vbmUiPgogICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICA8cGF0aCBkPSJNNi41OSwzLjQxTDIsOEw2LjU5LDEyLjZMOCwxMS4xOEw0LjgyLDhMOCw0LjgyTDYuNTksMy40MU0xMi40MSwzLjQxTDExLDQuODJMMTQuMTgsOEwxMSwxMS4xOEwxMi40MSwxMi42TDE3LDhMMTIuNDEsMy40MU0yMS41OSwxMS41OUwxMy41LDE5LjY4TDkuODMsMTZMOC40MiwxNy40MUwxMy41LDIyLjVMMjMsMTNMMjEuNTksMTEuNTlaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTExLjQgMTguNkw2LjggMTRMMTEuNCA5LjRMMTAgOEw0IDE0TDEwIDIwTDExLjQgMTguNlpNMTYuNiAxOC42TDIxLjIgMTRMMTYuNiA5LjRMMTggOEwyNCAxNEwxOCAyMEwxNi42IDE4LjZWMTguNloiLz4KCTwvZz4KPC9zdmc+Cg==);
  --jp-icon-collapse-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNNiAxM3YyaDh2LTJ6IiAvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-console: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwMCAyMDAiPgogIDxnIGNsYXNzPSJqcC1jb25zb2xlLWljb24tYmFja2dyb3VuZC1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMjg4RDEiPgogICAgPHBhdGggZD0iTTIwIDE5LjhoMTYwdjE1OS45SDIweiIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtY29uc29sZS1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIj4KICAgIDxwYXRoIGQ9Ik0xMDUgMTI3LjNoNDB2MTIuOGgtNDB6TTUxLjEgNzdMNzQgOTkuOWwtMjMuMyAyMy4zIDEwLjUgMTAuNSAyMy4zLTIzLjNMOTUgOTkuOSA4NC41IDg5LjQgNjEuNiA2Ni41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copy: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTExLjksMUgzLjJDMi40LDEsMS43LDEuNywxLjcsMi41djEwLjJoMS41VjIuNWg4LjdWMXogTTE0LjEsMy45aC04Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjV2MTAuMmMwLDAuOCwwLjcsMS41LDEuNSwxLjVoOCBjMC44LDAsMS41LTAuNywxLjUtMS41VjUuNEMxNS41LDQuNiwxNC45LDMuOSwxNC4xLDMuOXogTTE0LjEsMTUuNWgtOFY1LjRoOFYxNS41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copyright: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+CiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0xMS44OCw5LjE0YzEuMjgsMC4wNiwxLjYxLDEuMTUsMS42MywxLjY2aDEuNzljLTAuMDgtMS45OC0xLjQ5LTMuMTktMy40NS0zLjE5QzkuNjQsNy42MSw4LDksOCwxMi4xNCBjMCwxLjk0LDAuOTMsNC4yNCwzLjg0LDQuMjRjMi4yMiwwLDMuNDEtMS42NSwzLjQ0LTIuOTVoLTEuNzljLTAuMDMsMC41OS0wLjQ1LDEuMzgtMS42MywxLjQ0QzEwLjU1LDE0LjgzLDEwLDEzLjgxLDEwLDEyLjE0IEMxMCw5LjI1LDExLjI4LDkuMTYsMTEuODgsOS4xNHogTTEyLDJDNi40OCwyLDIsNi40OCwyLDEyczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMFMxNy41MiwyLDEyLDJ6IE0xMiwyMGMtNC40MSwwLTgtMy41OS04LTggczMuNTktOCw4LThzOCwzLjU5LDgsOFMxNi40MSwyMCwxMiwyMHoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-cut: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkuNjQgNy42NGMuMjMtLjUuMzYtMS4wNS4zNi0xLjY0IDAtMi4yMS0xLjc5LTQtNC00UzIgMy43OSAyIDZzMS43OSA0IDQgNGMuNTkgMCAxLjE0LS4xMyAxLjY0LS4zNkwxMCAxMmwtMi4zNiAyLjM2QzcuMTQgMTQuMTMgNi41OSAxNCA2IDE0Yy0yLjIxIDAtNCAxLjc5LTQgNHMxLjc5IDQgNCA0IDQtMS43OSA0LTRjMC0uNTktLjEzLTEuMTQtLjM2LTEuNjRMMTIgMTRsNyA3aDN2LTFMOS42NCA3LjY0ek02IDhjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTAgMTJjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTYtNy41Yy0uMjggMC0uNS0uMjItLjUtLjVzLjIyLS41LjUtLjUuNS4yMi41LjUtLjIyLjUtLjUuNXpNMTkgM2wtNiA2IDIgMiA3LTdWM3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-delete: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiAvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjI2MjYyIiBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyek0xOSA0aC0zLjVsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-download: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-duplicate: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIuNzk5OTggMC44NzVIOC44OTU4MkM5LjIwMDYxIDAuODc1IDkuNDQ5OTggMS4xMzkxNCA5LjQ0OTk4IDEuNDYxOThDOS40NDk5OCAxLjc4NDgyIDkuMjAwNjEgMi4wNDg5NiA4Ljg5NTgyIDIuMDQ4OTZIMy4zNTQxNUMzLjA0OTM2IDIuMDQ4OTYgMi43OTk5OCAyLjMxMzEgMi43OTk5OCAyLjYzNTk0VjkuNjc5NjlDMi43OTk5OCAxMC4wMDI1IDIuNTUwNjEgMTAuMjY2NyAyLjI0NTgyIDEwLjI2NjdDMS45NDEwMyAxMC4yNjY3IDEuNjkxNjUgMTAuMDAyNSAxLjY5MTY1IDkuNjc5NjlWMi4wNDg5NkMxLjY5MTY1IDEuNDAzMjggMi4xOTA0IDAuODc1IDIuNzk5OTggMC44NzVaTTUuMzY2NjUgMTEuOVY0LjU1SDExLjA4MzNWMTEuOUg1LjM2NjY1Wk00LjE0MTY1IDQuMTQxNjdDNC4xNDE2NSAzLjY5MDYzIDQuNTA3MjggMy4zMjUgNC45NTgzMiAzLjMyNUgxMS40OTE3QzExLjk0MjcgMy4zMjUgMTIuMzA4MyAzLjY5MDYzIDEyLjMwODMgNC4xNDE2N1YxMi4zMDgzQzEyLjMwODMgMTIuNzU5NCAxMS45NDI3IDEzLjEyNSAxMS40OTE3IDEzLjEyNUg0Ljk1ODMyQzQuNTA3MjggMTMuMTI1IDQuMTQxNjUgMTIuNzU5NCA0LjE0MTY1IDEyLjMwODNWNC4xNDE2N1oiIGZpbGw9IiM2MTYxNjEiLz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNOS40MzU3NCA4LjI2NTA3SDguMzY0MzFWOS4zMzY1QzguMzY0MzEgOS40NTQzNSA4LjI2Nzg4IDkuNTUwNzggOC4xNTAwMiA5LjU1MDc4QzguMDMyMTcgOS41NTA3OCA3LjkzNTc0IDkuNDU0MzUgNy45MzU3NCA5LjMzNjVWOC4yNjUwN0g2Ljg2NDMxQzYuNzQ2NDUgOC4yNjUwNyA2LjY1MDAyIDguMTY4NjQgNi42NTAwMiA4LjA1MDc4QzYuNjUwMDIgNy45MzI5MiA2Ljc0NjQ1IDcuODM2NSA2Ljg2NDMxIDcuODM2NUg3LjkzNTc0VjYuNzY1MDdDNy45MzU3NCA2LjY0NzIxIDguMDMyMTcgNi41NTA3OCA4LjE1MDAyIDYuNTUwNzhDOC4yNjc4OCA2LjU1MDc4IDguMzY0MzEgNi42NDcyMSA4LjM2NDMxIDYuNzY1MDdWNy44MzY1SDkuNDM1NzRDOS41NTM2IDcuODM2NSA5LjY1MDAyIDcuOTMyOTIgOS42NTAwMiA4LjA1MDc4QzkuNjUwMDIgOC4xNjg2NCA5LjU1MzYgOC4yNjUwNyA5LjQzNTc0IDguMjY1MDdaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=);
  --jp-icon-edit: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRjLS4zOS0uMzktMS4wMi0uMzktMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-ellipses: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iNSIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjEyIiByPSIyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-error: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjE5IiByPSIyIi8+PHBhdGggZD0iTTEwIDNoNHYxMmgtNHoiLz48L2c+CjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiLz4KPC9zdmc+Cg==);
  --jp-icon-expand-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNMTEgMTBIOXYzSDZ2MmgzdjNoMnYtM2gzdi0yaC0zeiIgLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-extension: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwLjUgMTFIMTlWN2MwLTEuMS0uOS0yLTItMmgtNFYzLjVDMTMgMi4xMiAxMS44OCAxIDEwLjUgMVM4IDIuMTIgOCAzLjVWNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAydjMuOEgzLjVjMS40OSAwIDIuNyAxLjIxIDIuNyAyLjdzLTEuMjEgMi43LTIuNyAyLjdIMlYyMGMwIDEuMS45IDIgMiAyaDMuOHYtMS41YzAtMS40OSAxLjIxLTIuNyAyLjctMi43IDEuNDkgMCAyLjcgMS4yMSAyLjcgMi43VjIySDE3YzEuMSAwIDItLjkgMi0ydi00aDEuNWMxLjM4IDAgMi41LTEuMTIgMi41LTIuNVMyMS44OCAxMSAyMC41IDExeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-fast-forward: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTQgMThsOC41LTZMNCA2djEyem05LTEydjEybDguNS02TDEzIDZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-file-upload: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-file: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuMyA4LjJsLTUuNS01LjVjLS4zLS4zLS43LS41LTEuMi0uNUgzLjljLS44LjEtMS42LjktMS42IDEuOHYxNC4xYzAgLjkuNyAxLjYgMS42IDEuNmgxNC4yYy45IDAgMS42LS43IDEuNi0xLjZWOS40Yy4xLS41LS4xLS45LS40LTEuMnptLTUuOC0zLjNsMy40IDMuNmgtMy40VjQuOXptMy45IDEyLjdINC43Yy0uMSAwLS4yIDAtLjItLjJWNC43YzAtLjIuMS0uMy4yLS4zaDcuMnY0LjRzMCAuOC4zIDEuMWMuMy4zIDEuMS4zIDEuMS4zaDQuM3Y3LjJzLS4xLjItLjIuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-filter-dot: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWRvdCIgZmlsbD0iI0ZGRiI+CiAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE3IiByPSIzIj48L2NpcmNsZT4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-filter-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEwIDE4aDR2LTJoLTR2MnpNMyA2djJoMThWNkgzem0zIDdoMTJ2LTJINnYyeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-filter: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-folder-favorite: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggY2xhc3M9ImpwLWljb24zIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxNjE2MSIgZD0iTTIwIDZoLThsLTItMkg0Yy0xLjEgMC0yIC45LTIgMnYxMmMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJ6bS0yLjA2IDExTDE1IDE1LjI4IDEyLjA2IDE3bC43OC0zLjMzLTIuNTktMi4yNCAzLjQxLS4yOUwxNSA4bDEuMzQgMy4xNCAzLjQxLjI5LTIuNTkgMi4yNC43OCAzLjMzeiIvPgo8L3N2Zz4K);
  --jp-icon-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-home: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-html5: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMDAiIGQ9Ik0xMDguNCAwaDIzdjIyLjhoMjEuMlYwaDIzdjY5aC0yM1Y0NmgtMjF2MjNoLTIzLjJNMjA2IDIzaC0yMC4zVjBoNjMuN3YyM0gyMjl2NDZoLTIzbTUzLjUtNjloMjQuMWwxNC44IDI0LjNMMzEzLjIgMGgyNC4xdjY5aC0yM1YzNC44bC0xNi4xIDI0LjgtMTYuMS0yNC44VjY5aC0yMi42bTg5LjItNjloMjN2NDYuMmgzMi42VjY5aC01NS42Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2U0NGQyNiIgZD0iTTEwNy42IDQ3MWwtMzMtMzcwLjRoMzYyLjhsLTMzIDM3MC4yTDI1NS43IDUxMiIvPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNmMTY1MjkiIGQ9Ik0yNTYgNDgwLjVWMTMxaDE0OC4zTDM3NiA0NDciLz4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNlYmViZWIiIGQ9Ik0xNDIgMTc2LjNoMTE0djQ1LjRoLTY0LjJsNC4yIDQ2LjVoNjB2NDUuM0gxNTQuNG0yIDIyLjhIMjAybDMuMiAzNi4zIDUwLjggMTMuNnY0Ny40bC05My4yLTI2Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIiBkPSJNMzY5LjYgMTc2LjNIMjU1Ljh2NDUuNGgxMDkuNm0tNC4xIDQ2LjVIMjU1Ljh2NDUuNGg1NmwtNS4zIDU5LTUwLjcgMTMuNnY0Ny4ybDkzLTI1LjgiLz4KPC9zdmc+Cg==);
  --jp-icon-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1icmFuZDQganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNGRkYiIGQ9Ik0yLjIgMi4yaDE3LjV2MTcuNUgyLjJ6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzNGNTFCNSIgZD0iTTIuMiAyLjJ2MTcuNWgxNy41bC4xLTE3LjVIMi4yem0xMi4xIDIuMmMxLjIgMCAyLjIgMSAyLjIgMi4ycy0xIDIuMi0yLjIgMi4yLTIuMi0xLTIuMi0yLjIgMS0yLjIgMi4yLTIuMnpNNC40IDE3LjZsMy4zLTguOCAzLjMgNi42IDIuMi0zLjIgNC40IDUuNEg0LjR6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-info: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUwLjk3OCA1MC45NzgiPgoJPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KCQk8cGF0aCBkPSJNNDMuNTIsNy40NThDMzguNzExLDIuNjQ4LDMyLjMwNywwLDI1LjQ4OSwwQzE4LjY3LDAsMTIuMjY2LDIuNjQ4LDcuNDU4LDcuNDU4CgkJCWMtOS45NDMsOS45NDEtOS45NDMsMjYuMTE5LDAsMzYuMDYyYzQuODA5LDQuODA5LDExLjIxMiw3LjQ1NiwxOC4wMzEsNy40NThjMCwwLDAuMDAxLDAsMC4wMDIsMAoJCQljNi44MTYsMCwxMy4yMjEtMi42NDgsMTguMDI5LTcuNDU4YzQuODA5LTQuODA5LDcuNDU3LTExLjIxMiw3LjQ1Ny0xOC4wM0M1MC45NzcsMTguNjcsNDguMzI4LDEyLjI2Niw0My41Miw3LjQ1OHoKCQkJIE00Mi4xMDYsNDIuMTA1Yy00LjQzMiw0LjQzMS0xMC4zMzIsNi44NzItMTYuNjE1LDYuODcyaC0wLjAwMmMtNi4yODUtMC4wMDEtMTIuMTg3LTIuNDQxLTE2LjYxNy02Ljg3MgoJCQljLTkuMTYyLTkuMTYzLTkuMTYyLTI0LjA3MSwwLTMzLjIzM0MxMy4zMDMsNC40NCwxOS4yMDQsMiwyNS40ODksMmM2LjI4NCwwLDEyLjE4NiwyLjQ0LDE2LjYxNyw2Ljg3MgoJCQljNC40MzEsNC40MzEsNi44NzEsMTAuMzMyLDYuODcxLDE2LjYxN0M0OC45NzcsMzEuNzcyLDQ2LjUzNiwzNy42NzUsNDIuMTA2LDQyLjEwNXoiLz4KCQk8cGF0aCBkPSJNMjMuNTc4LDMyLjIxOGMtMC4wMjMtMS43MzQsMC4xNDMtMy4wNTksMC40OTYtMy45NzJjMC4zNTMtMC45MTMsMS4xMS0xLjk5NywyLjI3Mi0zLjI1MwoJCQljMC40NjgtMC41MzYsMC45MjMtMS4wNjIsMS4zNjctMS41NzVjMC42MjYtMC43NTMsMS4xMDQtMS40NzgsMS40MzYtMi4xNzVjMC4zMzEtMC43MDcsMC40OTUtMS41NDEsMC40OTUtMi41CgkJCWMwLTEuMDk2LTAuMjYtMi4wODgtMC43NzktMi45NzljLTAuNTY1LTAuODc5LTEuNTAxLTEuMzM2LTIuODA2LTEuMzY5Yy0xLjgwMiwwLjA1Ny0yLjk4NSwwLjY2Ny0zLjU1LDEuODMyCgkJCWMtMC4zMDEsMC41MzUtMC41MDMsMS4xNDEtMC42MDcsMS44MTRjLTAuMTM5LDAuNzA3LTAuMjA3LDEuNDMyLTAuMjA3LDIuMTc0aC0yLjkzN2MtMC4wOTEtMi4yMDgsMC40MDctNC4xMTQsMS40OTMtNS43MTkKCQkJYzEuMDYyLTEuNjQsMi44NTUtMi40ODEsNS4zNzgtMi41MjdjMi4xNiwwLjAyMywzLjg3NCwwLjYwOCw1LjE0MSwxLjc1OGMxLjI3OCwxLjE2LDEuOTI5LDIuNzY0LDEuOTUsNC44MTEKCQkJYzAsMS4xNDItMC4xMzcsMi4xMTEtMC40MSwyLjkxMWMtMC4zMDksMC44NDUtMC43MzEsMS41OTMtMS4yNjgsMi4yNDNjLTAuNDkyLDAuNjUtMS4wNjgsMS4zMTgtMS43MywyLjAwMgoJCQljLTAuNjUsMC42OTctMS4zMTMsMS40NzktMS45ODcsMi4zNDZjLTAuMjM5LDAuMzc3LTAuNDI5LDAuNzc3LTAuNTY1LDEuMTk5Yy0wLjE2LDAuOTU5LTAuMjE3LDEuOTUxLTAuMTcxLDIuOTc5CgkJCUMyNi41ODksMzIuMjE4LDIzLjU3OCwzMi4yMTgsMjMuNTc4LDMyLjIxOHogTTIzLjU3OCwzOC4yMnYtMy40ODRoMy4wNzZ2My40ODRIMjMuNTc4eiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-inspector: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaW5zcGVjdG9yLWljb24tY29sb3IganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxNEg0di00aDExdjR6bTAtNUg0VjloMTF2NHptNSA1aC00VjloNHY5eiIvPgo8L3N2Zz4K);
  --jp-icon-json: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtanNvbi1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0Y5QTgyNSI+CiAgICA8cGF0aCBkPSJNMjAuMiAxMS44Yy0xLjYgMC0xLjcuNS0xLjcgMSAwIC40LjEuOS4xIDEuMy4xLjUuMS45LjEgMS4zIDAgMS43LTEuNCAyLjMtMy41IDIuM2gtLjl2LTEuOWguNWMxLjEgMCAxLjQgMCAxLjQtLjggMC0uMyAwLS42LS4xLTEgMC0uNC0uMS0uOC0uMS0xLjIgMC0xLjMgMC0xLjggMS4zLTItMS4zLS4yLTEuMy0uNy0xLjMtMiAwLS40LjEtLjguMS0xLjIuMS0uNC4xLS43LjEtMSAwLS44LS40LS43LTEuNC0uOGgtLjVWNC4xaC45YzIuMiAwIDMuNS43IDMuNSAyLjMgMCAuNC0uMS45LS4xIDEuMy0uMS41LS4xLjktLjEgMS4zIDAgLjUuMiAxIDEuNyAxdjEuOHpNMS44IDEwLjFjMS42IDAgMS43LS41IDEuNy0xIDAtLjQtLjEtLjktLjEtMS4zLS4xLS41LS4xLS45LS4xLTEuMyAwLTEuNiAxLjQtMi4zIDMuNS0yLjNoLjl2MS45aC0uNWMtMSAwLTEuNCAwLTEuNC44IDAgLjMgMCAuNi4xIDEgMCAuMi4xLjYuMSAxIDAgMS4zIDAgMS44LTEuMyAyQzYgMTEuMiA2IDExLjcgNiAxM2MwIC40LS4xLjgtLjEgMS4yLS4xLjMtLjEuNy0uMSAxIDAgLjguMy44IDEuNC44aC41djEuOWgtLjljLTIuMSAwLTMuNS0uNi0zLjUtMi4zIDAtLjQuMS0uOS4xLTEuMy4xLS41LjEtLjkuMS0xLjMgMC0uNS0uMi0xLTEuNy0xdi0xLjl6Ii8+CiAgICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjEzLjgiIHI9IjIuMSIvPgogICAgPGNpcmNsZSBjeD0iMTEiIGN5PSI4LjIiIHI9IjIuMSIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-julia: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDMyNSAzMDAiPgogIDxnIGNsYXNzPSJqcC1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjY2IzYzMzIj4KICAgIDxwYXRoIGQ9Ik0gMTUwLjg5ODQzOCAyMjUgQyAxNTAuODk4NDM4IDI2Ni40MjE4NzUgMTE3LjMyMDMxMiAzMDAgNzUuODk4NDM4IDMwMCBDIDM0LjQ3NjU2MiAzMDAgMC44OTg0MzggMjY2LjQyMTg3NSAwLjg5ODQzOCAyMjUgQyAwLjg5ODQzOCAxODMuNTc4MTI1IDM0LjQ3NjU2MiAxNTAgNzUuODk4NDM4IDE1MCBDIDExNy4zMjAzMTIgMTUwIDE1MC44OTg0MzggMTgzLjU3ODEyNSAxNTAuODk4NDM4IDIyNSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzM4OTgyNiI+CiAgICA8cGF0aCBkPSJNIDIzNy41IDc1IEMgMjM3LjUgMTE2LjQyMTg3NSAyMDMuOTIxODc1IDE1MCAxNjIuNSAxNTAgQyAxMjEuMDc4MTI1IDE1MCA4Ny41IDExNi40MjE4NzUgODcuNSA3NSBDIDg3LjUgMzMuNTc4MTI1IDEyMS4wNzgxMjUgMCAxNjIuNSAwIEMgMjAzLjkyMTg3NSAwIDIzNy41IDMzLjU3ODEyNSAyMzcuNSA3NSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzk1NThiMiI+CiAgICA8cGF0aCBkPSJNIDMyNC4xMDE1NjIgMjI1IEMgMzI0LjEwMTU2MiAyNjYuNDIxODc1IDI5MC41MjM0MzggMzAwIDI0OS4xMDE1NjIgMzAwIEMgMjA3LjY3OTY4OCAzMDAgMTc0LjEwMTU2MiAyNjYuNDIxODc1IDE3NC4xMDE1NjIgMjI1IEMgMTc0LjEwMTU2MiAxODMuNTc4MTI1IDIwNy42Nzk2ODggMTUwIDI0OS4xMDE1NjIgMTUwIEMgMjkwLjUyMzQzOCAxNTAgMzI0LjEwMTU2MiAxODMuNTc4MTI1IDMyNC4xMDE1NjIgMjI1Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-jupyter-favicon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUyIiBoZWlnaHQ9IjE2NSIgdmlld0JveD0iMCAwIDE1MiAxNjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgPGcgY2xhc3M9ImpwLWp1cHl0ZXItaWNvbi1jb2xvciIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA3ODk0NywgMTEwLjU4MjkyNykiIGQ9Ik03NS45NDIyODQyLDI5LjU4MDQ1NjEgQzQzLjMwMjM5NDcsMjkuNTgwNDU2MSAxNC43OTY3ODMyLDE3LjY1MzQ2MzQgMCwwIEM1LjUxMDgzMjExLDE1Ljg0MDY4MjkgMTUuNzgxNTM4OSwyOS41NjY3NzMyIDI5LjM5MDQ5NDcsMzkuMjc4NDE3MSBDNDIuOTk5Nyw0OC45ODk4NTM3IDU5LjI3MzcsNTQuMjA2NzgwNSA3NS45NjA1Nzg5LDU0LjIwNjc4MDUgQzkyLjY0NzQ1NzksNTQuMjA2NzgwNSAxMDguOTIxNDU4LDQ4Ljk4OTg1MzcgMTIyLjUzMDY2MywzOS4yNzg0MTcxIEMxMzYuMTM5NDUzLDI5LjU2Njc3MzIgMTQ2LjQxMDI4NCwxNS44NDA2ODI5IDE1MS45MjExNTgsMCBDMTM3LjA4Nzg2OCwxNy42NTM0NjM0IDEwOC41ODI1ODksMjkuNTgwNDU2MSA3NS45NDIyODQyLDI5LjU4MDQ1NjEgTDc1Ljk0MjI4NDIsMjkuNTgwNDU2MSBaIiAvPgogICAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMzczNjgsIDAuNzA0ODc4KSIgZD0iTTc1Ljk3ODQ1NzksMjQuNjI2NDA3MyBDMTA4LjYxODc2MywyNC42MjY0MDczIDEzNy4xMjQ0NTgsMzYuNTUzNDQxNSAxNTEuOTIxMTU4LDU0LjIwNjc4MDUgQzE0Ni40MTAyODQsMzguMzY2MjIyIDEzNi4xMzk0NTMsMjQuNjQwMTMxNyAxMjIuNTMwNjYzLDE0LjkyODQ4NzggQzEwOC45MjE0NTgsNS4yMTY4NDM5IDkyLjY0NzQ1NzksMCA3NS45NjA1Nzg5LDAgQzU5LjI3MzcsMCA0Mi45OTk3LDUuMjE2ODQzOSAyOS4zOTA0OTQ3LDE0LjkyODQ4NzggQzE1Ljc4MTUzODksMjQuNjQwMTMxNyA1LjUxMDgzMjExLDM4LjM2NjIyMiAwLDU0LjIwNjc4MDUgQzE0LjgzMzA4MTYsMzYuNTg5OTI5MyA0My4zMzg1Njg0LDI0LjYyNjQwNzMgNzUuOTc4NDU3OSwyNC42MjY0MDczIEw3NS45Nzg0NTc5LDI0LjYyNjQwNzMgWiIgLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-jupyter: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzkiIGhlaWdodD0iNTEiIHZpZXdCb3g9IjAgMCAzOSA1MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYzOCAtMjI4MSkiPgogICAgIDxnIGNsYXNzPSJqcC1qdXB5dGVyLWljb24tY29sb3IiIGZpbGw9IiNGMzc3MjYiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5Ljc0IDIzMTEuOTgpIiBkPSJNIDE4LjI2NDYgNy4xMzQxMUMgMTAuNDE0NSA3LjEzNDExIDMuNTU4NzIgNC4yNTc2IDAgMEMgMS4zMjUzOSAzLjgyMDQgMy43OTU1NiA3LjEzMDgxIDcuMDY4NiA5LjQ3MzAzQyAxMC4zNDE3IDExLjgxNTIgMTQuMjU1NyAxMy4wNzM0IDE4LjI2OSAxMy4wNzM0QyAyMi4yODIzIDEzLjA3MzQgMjYuMTk2MyAxMS44MTUyIDI5LjQ2OTQgOS40NzMwM0MgMzIuNzQyNCA3LjEzMDgxIDM1LjIxMjYgMy44MjA0IDM2LjUzOCAwQyAzMi45NzA1IDQuMjU3NiAyNi4xMTQ4IDcuMTM0MTEgMTguMjY0NiA3LjEzNDExWiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5LjczIDIyODUuNDgpIiBkPSJNIDE4LjI3MzMgNS45MzkzMUMgMjYuMTIzNSA1LjkzOTMxIDMyLjk3OTMgOC44MTU4MyAzNi41MzggMTMuMDczNEMgMzUuMjEyNiA5LjI1MzAzIDMyLjc0MjQgNS45NDI2MiAyOS40Njk0IDMuNjAwNEMgMjYuMTk2MyAxLjI1ODE4IDIyLjI4MjMgMCAxOC4yNjkgMEMgMTQuMjU1NyAwIDEwLjM0MTcgMS4yNTgxOCA3LjA2ODYgMy42MDA0QyAzLjc5NTU2IDUuOTQyNjIgMS4zMjUzOSA5LjI1MzAzIDAgMTMuMDczNEMgMy41Njc0NSA4LjgyNDYzIDEwLjQyMzIgNS45MzkzMSAxOC4yNzMzIDUuOTM5MzFaIi8+CiAgICA8L2c+CiAgICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjY5LjMgMjI4MS4zMSkiIGQ9Ik0gNS44OTM1MyAyLjg0NEMgNS45MTg4OSAzLjQzMTY1IDUuNzcwODUgNC4wMTM2NyA1LjQ2ODE1IDQuNTE2NDVDIDUuMTY1NDUgNS4wMTkyMiA0LjcyMTY4IDUuNDIwMTUgNC4xOTI5OSA1LjY2ODUxQyAzLjY2NDMgNS45MTY4OCAzLjA3NDQ0IDYuMDAxNTEgMi40OTgwNSA1LjkxMTcxQyAxLjkyMTY2IDUuODIxOSAxLjM4NDYzIDUuNTYxNyAwLjk1NDg5OCA1LjE2NDAxQyAwLjUyNTE3IDQuNzY2MzMgMC4yMjIwNTYgNC4yNDkwMyAwLjA4MzkwMzcgMy42Nzc1N0MgLTAuMDU0MjQ4MyAzLjEwNjExIC0wLjAyMTIzIDIuNTA2MTcgMC4xNzg3ODEgMS45NTM2NEMgMC4zNzg3OTMgMS40MDExIDAuNzM2ODA5IDAuOTIwODE3IDEuMjA3NTQgMC41NzM1MzhDIDEuNjc4MjYgMC4yMjYyNTkgMi4yNDA1NSAwLjAyNzU5MTkgMi44MjMyNiAwLjAwMjY3MjI5QyAzLjYwMzg5IC0wLjAzMDcxMTUgNC4zNjU3MyAwLjI0OTc4OSA0Ljk0MTQyIDAuNzgyNTUxQyA1LjUxNzExIDEuMzE1MzEgNS44NTk1NiAyLjA1Njc2IDUuODkzNTMgMi44NDRaIi8+CiAgICAgIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MzkuOCAyMzIzLjgxKSIgZD0iTSA3LjQyNzg5IDMuNTgzMzhDIDcuNDYwMDggNC4zMjQzIDcuMjczNTUgNS4wNTgxOSA2Ljg5MTkzIDUuNjkyMTNDIDYuNTEwMzEgNi4zMjYwNyA1Ljk1MDc1IDYuODMxNTYgNS4yODQxMSA3LjE0NDZDIDQuNjE3NDcgNy40NTc2MyAzLjg3MzcxIDcuNTY0MTQgMy4xNDcwMiA3LjQ1MDYzQyAyLjQyMDMyIDcuMzM3MTIgMS43NDMzNiA3LjAwODcgMS4yMDE4NCA2LjUwNjk1QyAwLjY2MDMyOCA2LjAwNTIgMC4yNzg2MSA1LjM1MjY4IDAuMTA1MDE3IDQuNjMyMDJDIC0wLjA2ODU3NTcgMy45MTEzNSAtMC4wMjYyMzYxIDMuMTU0OTQgMC4yMjY2NzUgMi40NTg1NkMgMC40Nzk1ODcgMS43NjIxNyAwLjkzMTY5NyAxLjE1NzEzIDEuNTI1NzYgMC43MjAwMzNDIDIuMTE5ODMgMC4yODI5MzUgMi44MjkxNCAwLjAzMzQzOTUgMy41NjM4OSAwLjAwMzEzMzQ0QyA0LjU0NjY3IC0wLjAzNzQwMzMgNS41MDUyOSAwLjMxNjcwNiA2LjIyOTYxIDAuOTg3ODM1QyA2Ljk1MzkzIDEuNjU4OTYgNy4zODQ4NCAyLjU5MjM1IDcuNDI3ODkgMy41ODMzOEwgNy40Mjc4OSAzLjU4MzM4WiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM4LjM2IDIyODYuMDYpIiBkPSJNIDIuMjc0NzEgNC4zOTYyOUMgMS44NDM2MyA0LjQxNTA4IDEuNDE2NzEgNC4zMDQ0NSAxLjA0Nzk5IDQuMDc4NDNDIDAuNjc5MjY4IDMuODUyNCAwLjM4NTMyOCAzLjUyMTE0IDAuMjAzMzcxIDMuMTI2NTZDIDAuMDIxNDEzNiAyLjczMTk4IC0wLjA0MDM3OTggMi4yOTE4MyAwLjAyNTgxMTYgMS44NjE4MUMgMC4wOTIwMDMxIDEuNDMxOCAwLjI4MzIwNCAxLjAzMTI2IDAuNTc1MjEzIDAuNzEwODgzQyAwLjg2NzIyMiAwLjM5MDUxIDEuMjQ2OTEgMC4xNjQ3MDggMS42NjYyMiAwLjA2MjA1OTJDIDIuMDg1NTMgLTAuMDQwNTg5NyAyLjUyNTYxIC0wLjAxNTQ3MTQgMi45MzA3NiAwLjEzNDIzNUMgMy4zMzU5MSAwLjI4Mzk0MSAzLjY4NzkyIDAuNTUxNTA1IDMuOTQyMjIgMC45MDMwNkMgNC4xOTY1MiAxLjI1NDYyIDQuMzQxNjkgMS42NzQzNiA0LjM1OTM1IDIuMTA5MTZDIDQuMzgyOTkgMi42OTEwNyA0LjE3Njc4IDMuMjU4NjkgMy43ODU5NyAzLjY4NzQ2QyAzLjM5NTE2IDQuMTE2MjQgMi44NTE2NiA0LjM3MTE2IDIuMjc0NzEgNC4zOTYyOUwgMi4yNzQ3MSA0LjM5NjI5WiIvPgogICAgPC9nPgogIDwvZz4+Cjwvc3ZnPgo=);
  --jp-icon-jupyterlab-wordmark: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIHZpZXdCb3g9IjAgMCAxODYwLjggNDc1Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0RTRFNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MC4xMzY0MDEsIDY0LjI3MTQ5MykiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDU4Ljg3NTU2NikiPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA4NzYwMywgMC4xNDAyOTQpIj4KICAgICAgICA8cGF0aCBkPSJNLTQyNi45LDE2OS44YzAsNDguNy0zLjcsNjQuNy0xMy42LDc2LjRjLTEwLjgsMTAtMjUsMTUuNS0zOS43LDE1LjVsMy43LDI5IGMyMi44LDAuMyw0NC44LTcuOSw2MS45LTIzLjFjMTcuOC0xOC41LDI0LTQ0LjEsMjQtODMuM1YwSC00Mjd2MTcwLjFMLTQyNi45LDE2OS44TC00MjYuOSwxNjkuOHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU1LjA0NTI5NiwgNTYuODM3MTA0KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNTYyNDUzLCAxLjc5OTg0MikiPgogICAgICAgIDxwYXRoIGQ9Ik0tMzEyLDE0OGMwLDIxLDAsMzkuNSwxLjcsNTUuNGgtMzEuOGwtMi4xLTMzLjNoLTAuOGMtNi43LDExLjYtMTYuNCwyMS4zLTI4LDI3LjkgYy0xMS42LDYuNi0yNC44LDEwLTM4LjIsOS44Yy0zMS40LDAtNjktMTcuNy02OS04OVYwaDM2LjR2MTEyLjdjMCwzOC43LDExLjYsNjQuNyw0NC42LDY0LjdjMTAuMy0wLjIsMjAuNC0zLjUsMjguOS05LjQgYzguNS01LjksMTUuMS0xNC4zLDE4LjktMjMuOWMyLjItNi4xLDMuMy0xMi41LDMuMy0xOC45VjAuMmgzNi40VjE0OEgtMzEyTC0zMTIsMTQ4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTAuMDEzMzIyLCA1My40Nzk2MzgpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS43MDY0NTgsIDAuMjMxNDI1KSI+CiAgICAgICAgPHBhdGggZD0iTS00NzguNiw3MS40YzAtMjYtMC44LTQ3LTEuNy02Ni43aDMyLjdsMS43LDM0LjhoMC44YzcuMS0xMi41LDE3LjUtMjIuOCwzMC4xLTI5LjcgYzEyLjUtNywyNi43LTEwLjMsNDEtOS44YzQ4LjMsMCw4NC43LDQxLjcsODQuNywxMDMuM2MwLDczLjEtNDMuNywxMDkuMi05MSwxMDkuMmMtMTIuMSwwLjUtMjQuMi0yLjItMzUtNy44IGMtMTAuOC01LjYtMTkuOS0xMy45LTI2LjYtMjQuMmgtMC44VjI5MWgtMzZ2LTIyMEwtNDc4LjYsNzEuNEwtNDc4LjYsNzEuNHogTS00NDIuNiwxMjUuNmMwLjEsNS4xLDAuNiwxMC4xLDEuNywxNS4xIGMzLDEyLjMsOS45LDIzLjMsMTkuOCwzMS4xYzkuOSw3LjgsMjIuMSwxMi4xLDM0LjcsMTIuMWMzOC41LDAsNjAuNy0zMS45LDYwLjctNzguNWMwLTQwLjctMjEuMS03NS42LTU5LjUtNzUuNiBjLTEyLjksMC40LTI1LjMsNS4xLTM1LjMsMTMuNGMtOS45LDguMy0xNi45LDE5LjctMTkuNiwzMi40Yy0xLjUsNC45LTIuMywxMC0yLjUsMTUuMVYxMjUuNkwtNDQyLjYsMTI1LjZMLTQ0Mi42LDEyNS42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYuNzQwNzI2LCA1Ni44MzcxMDQpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NTEyMjYsIDEuOTg5Mjk5KSI+CiAgICAgICAgPHBhdGggZD0iTS00NDAuOCwwbDQzLjcsMTIwLjFjNC41LDEzLjQsOS41LDI5LjQsMTIuOCw0MS43aDAuOGMzLjctMTIuMiw3LjktMjcuNywxMi44LTQyLjQgbDM5LjctMTE5LjJoMzguNUwtMzQ2LjksMTQ1Yy0yNiw2OS43LTQzLjcsMTA1LjQtNjguNiwxMjcuMmMtMTIuNSwxMS43LTI3LjksMjAtNDQuNiwyMy45bC05LjEtMzEuMSBjMTEuNy0zLjksMjIuNS0xMC4xLDMxLjgtMTguMWMxMy4yLTExLjEsMjMuNy0yNS4yLDMwLjYtNDEuMmMxLjUtMi44LDIuNS01LjcsMi45LTguOGMtMC4zLTMuMy0xLjItNi42LTIuNS05LjdMLTQ4MC4yLDAuMSBoMzkuN0wtNDQwLjgsMEwtNDQwLjgsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODIyLjc0ODEwNCwgMC4wMDAwMDApIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40NjQwNTAsIDAuMzc4OTE0KSI+CiAgICAgICAgPHBhdGggZD0iTS00MTMuNywwdjU4LjNoNTJ2MjguMmgtNTJWMTk2YzAsMjUsNywzOS41LDI3LjMsMzkuNWM3LjEsMC4xLDE0LjItMC43LDIxLjEtMi41IGwxLjcsMjcuN2MtMTAuMywzLjctMjEuMyw1LjQtMzIuMiw1Yy03LjMsMC40LTE0LjYtMC43LTIxLjMtMy40Yy02LjgtMi43LTEyLjktNi44LTE3LjktMTIuMWMtMTAuMy0xMC45LTE0LjEtMjktMTQuMS01Mi45IFY4Ni41aC0zMVY1OC4zaDMxVjkuNkwtNDEzLjcsMEwtNDEzLjcsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTc0LjQzMzI4NiwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTkwMDM0LCAwLjYxMDMzOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDQ1LjgsMTEzYzAuOCw1MCwzMi4yLDcwLjYsNjguNiw3MC42YzE5LDAuNiwzNy45LTMsNTUuMy0xMC41bDYuMiwyNi40IGMtMjAuOSw4LjktNDMuNSwxMy4xLTY2LjIsMTIuNmMtNjEuNSwwLTk4LjMtNDEuMi05OC4zLTEwMi41Qy00ODAuMiw0OC4yLTQ0NC43LDAtMzg2LjUsMGM2NS4yLDAsODIuNyw1OC4zLDgyLjcsOTUuNyBjLTAuMSw1LjgtMC41LDExLjUtMS4yLDE3LjJoLTE0MC42SC00NDUuOEwtNDQ1LjgsMTEzeiBNLTMzOS4yLDg2LjZjMC40LTIzLjUtOS41LTYwLjEtNTAuNC02MC4xIGMtMzYuOCwwLTUyLjgsMzQuNC01NS43LDYwLjFILTMzOS4yTC0zMzkuMiw4Ni42TC0zMzkuMiw4Ni42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAxLjk2MTA1OCwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMTc5NjQwLCAwLjcwNTA2OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDc4LjYsNjhjMC0yMy45LTAuNC00NC41LTEuNy02My40aDMxLjhsMS4yLDM5LjloMS43YzkuMS0yNy4zLDMxLTQ0LjUsNTUuMy00NC41IGMzLjUtMC4xLDcsMC40LDEwLjMsMS4ydjM0LjhjLTQuMS0wLjktOC4yLTEuMy0xMi40LTEuMmMtMjUuNiwwLTQzLjcsMTkuNy00OC43LDQ3LjRjLTEsNS43LTEuNiwxMS41LTEuNywxNy4ydjEwOC4zaC0zNlY2OCBMLTQ3OC42LDY4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCBkPSJNMTM1Mi4zLDMyNi4yaDM3VjI4aC0zN1YzMjYuMnogTTE2MDQuOCwzMjYuMmMtMi41LTEzLjktMy40LTMxLjEtMy40LTQ4Ljd2LTc2IGMwLTQwLjctMTUuMS04My4xLTc3LjMtODMuMWMtMjUuNiwwLTUwLDcuMS02Ni44LDE4LjFsOC40LDI0LjRjMTQuMy05LjIsMzQtMTUuMSw1My0xNS4xYzQxLjYsMCw0Ni4yLDMwLjIsNDYuMiw0N3Y0LjIgYy03OC42LTAuNC0xMjIuMywyNi41LTEyMi4zLDc1LjZjMCwyOS40LDIxLDU4LjQsNjIuMiw1OC40YzI5LDAsNTAuOS0xNC4zLDYyLjItMzAuMmgxLjNsMi45LDI1LjZIMTYwNC44eiBNMTU2NS43LDI1Ny43IGMwLDMuOC0wLjgsOC0yLjEsMTEuOGMtNS45LDE3LjItMjIuNywzNC00OS4yLDM0Yy0xOC45LDAtMzQuOS0xMS4zLTM0LjktMzUuM2MwLTM5LjUsNDUuOC00Ni42LDg2LjItNDUuOFYyNTcuN3ogTTE2OTguNSwzMjYuMiBsMS43LTMzLjZoMS4zYzE1LjEsMjYuOSwzOC43LDM4LjIsNjguMSwzOC4yYzQ1LjQsMCw5MS4yLTM2LjEsOTEuMi0xMDguOGMwLjQtNjEuNy0zNS4zLTEwMy43LTg1LjctMTAzLjcgYy0zMi44LDAtNTYuMywxNC43LTY5LjMsMzcuNGgtMC44VjI4aC0zNi42djI0NS43YzAsMTguMS0wLjgsMzguNi0xLjcsNTIuNUgxNjk4LjV6IE0xNzA0LjgsMjA4LjJjMC01LjksMS4zLTEwLjksMi4xLTE1LjEgYzcuNi0yOC4xLDMxLjEtNDUuNCw1Ni4zLTQ1LjRjMzkuNSwwLDYwLjUsMzQuOSw2MC41LDc1LjZjMCw0Ni42LTIzLjEsNzguMS02MS44LDc4LjFjLTI2LjksMC00OC4zLTE3LjYtNTUuNS00My4zIGMtMC44LTQuMi0xLjctOC44LTEuNy0xMy40VjIwOC4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzYxNjE2MSIgZD0iTTE1IDlIOXY2aDZWOXptLTIgNGgtMnYtMmgydjJ6bTgtMlY5aC0yVjdjMC0xLjEtLjktMi0yLTJoLTJWM2gtMnYyaC0yVjNIOXYySDdjLTEuMSAwLTIgLjktMiAydjJIM3YyaDJ2MkgzdjJoMnYyYzAgMS4xLjkgMiAyIDJoMnYyaDJ2LTJoMnYyaDJ2LTJoMmMxLjEgMCAyLS45IDItMnYtMmgydi0yaC0ydi0yaDJ6bS00IDZIN1Y3aDEwdjEweiIvPgo8L3N2Zz4K);
  --jp-icon-keyboard: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMTdjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY3YzAtMS4xLS45LTItMi0yem0tOSAzaDJ2MmgtMlY4em0wIDNoMnYyaC0ydi0yek04IDhoMnYySDhWOHptMCAzaDJ2Mkg4di0yem0tMSAySDV2LTJoMnYyem0wLTNINVY4aDJ2MnptOSA3SDh2LTJoOHYyem0wLTRoLTJ2LTJoMnYyem0wLTNoLTJWOGgydjJ6bTMgM2gtMnYtMmgydjJ6bTAtM2gtMlY4aDJ2MnoiLz4KPC9zdmc+Cg==);
  --jp-icon-launch: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yNiwyOEg2YTIuMDAyNywyLjAwMjcsMCwwLDEtMi0yVjZBMi4wMDI3LDIuMDAyNywwLDAsMSw2LDRIMTZWNkg2VjI2SDI2VjE2aDJWMjZBMi4wMDI3LDIuMDAyNywwLDAsMSwyNiwyOFoiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMjAgMiAyMCA0IDI2LjU4NiA0IDE4IDEyLjU4NiAxOS40MTQgMTQgMjggNS40MTQgMjggMTIgMzAgMTIgMzAgMiAyMCAyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-launcher: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkgMTlINVY1aDdWM0g1YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiLz4KPC9zdmc+Cg==);
  --jp-icon-line-form: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IndoaXRlIiBkPSJNNS44OCA0LjEyTDEzLjc2IDEybC03Ljg4IDcuODhMOCAyMmwxMC0xMEw4IDJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-link: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMuOSAxMmMwLTEuNzEgMS4zOS0zLjEgMy4xLTMuMWg0VjdIN2MtMi43NiAwLTUgMi4yNC01IDVzMi4yNCA1IDUgNWg0di0xLjlIN2MtMS43MSAwLTMuMS0xLjM5LTMuMS0zLjF6TTggMTNoOHYtMkg4djJ6bTktNmgtNHYxLjloNGMxLjcxIDAgMy4xIDEuMzkgMy4xIDMuMXMtMS4zOSAzLjEtMy4xIDMuMWgtNFYxN2g0YzIuNzYgMCA1LTIuMjQgNS01cy0yLjI0LTUtNS01eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xOSA1djE0SDVWNWgxNG0xLjEtMkgzLjljLS41IDAtLjkuNC0uOS45djE2LjJjMCAuNC40LjkuOS45aDE2LjJjLjQgMCAuOS0uNS45LS45VjMuOWMwLS41LS41LS45LS45LS45ek0xMSA3aDZ2MmgtNlY3em0wIDRoNnYyaC02di0yem0wIDRoNnYyaC02ek03IDdoMnYySDd6bTAgNGgydjJIN3ptMCA0aDJ2Mkg3eiIvPgo8L3N2Zz4K);
  --jp-icon-markdown: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjN0IxRkEyIiBkPSJNNSAxNC45aDEybC02LjEgNnptOS40LTYuOGMwLTEuMy0uMS0yLjktLjEtNC41LS40IDEuNC0uOSAyLjktMS4zIDQuM2wtMS4zIDQuM2gtMkw4LjUgNy45Yy0uNC0xLjMtLjctMi45LTEtNC4zLS4xIDEuNi0uMSAzLjItLjIgNC42TDcgMTIuNEg0LjhsLjctMTFoMy4zTDEwIDVjLjQgMS4yLjcgMi43IDEgMy45LjMtMS4yLjctMi42IDEtMy45bDEuMi0zLjdoMy4zbC42IDExaC0yLjRsLS4zLTQuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-move-down: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMTIuNDcxIDcuNTI4OTlDMTIuNzYzMiA3LjIzNjg0IDEyLjc2MzIgNi43NjMxNiAxMi40NzEgNi40NzEwMVY2LjQ3MTAxQzEyLjE3OSA2LjE3OTA1IDExLjcwNTcgNi4xNzg4NCAxMS40MTM1IDYuNDcwNTRMNy43NSAxMC4xMjc1VjEuNzVDNy43NSAxLjMzNTc5IDcuNDE0MjEgMSA3IDFWMUM2LjU4NTc5IDEgNi4yNSAxLjMzNTc5IDYuMjUgMS43NVYxMC4xMjc1TDIuNTk3MjYgNi40NjgyMkMyLjMwMzM4IDYuMTczODEgMS44MjY0MSA2LjE3MzU5IDEuNTMyMjYgNi40Njc3NFY2LjQ2Nzc0QzEuMjM4MyA2Ljc2MTcgMS4yMzgzIDcuMjM4MyAxLjUzMjI2IDcuNTMyMjZMNi4yOTI4OSAxMi4yOTI5QzYuNjgzNDIgMTIuNjgzNCA3LjMxNjU4IDEyLjY4MzQgNy43MDcxMSAxMi4yOTI5TDEyLjQ3MSA3LjUyODk5WiIgZmlsbD0iIzYxNjE2MSIvPgo8L3N2Zz4K);
  --jp-icon-move-up: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMS41Mjg5OSA2LjQ3MTAxQzEuMjM2ODQgNi43NjMxNiAxLjIzNjg0IDcuMjM2ODQgMS41Mjg5OSA3LjUyODk5VjcuNTI4OTlDMS44MjA5NSA3LjgyMDk1IDIuMjk0MjYgNy44MjExNiAyLjU4NjQ5IDcuNTI5NDZMNi4yNSAzLjg3MjVWMTIuMjVDNi4yNSAxMi42NjQyIDYuNTg1NzkgMTMgNyAxM1YxM0M3LjQxNDIxIDEzIDcuNzUgMTIuNjY0MiA3Ljc1IDEyLjI1VjMuODcyNUwxMS40MDI3IDcuNTMxNzhDMTEuNjk2NiA3LjgyNjE5IDEyLjE3MzYgNy44MjY0MSAxMi40Njc3IDcuNTMyMjZWNy41MzIyNkMxMi43NjE3IDcuMjM4MyAxMi43NjE3IDYuNzYxNyAxMi40Njc3IDYuNDY3NzRMNy43MDcxMSAxLjcwNzExQzcuMzE2NTggMS4zMTY1OCA2LjY4MzQyIDEuMzE2NTggNi4yOTI4OSAxLjcwNzExTDEuNTI4OTkgNi40NzEwMVoiIGZpbGw9IiM2MTYxNjEiLz4KPC9zdmc+Cg==);
  --jp-icon-new-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjExIDAtMS45OS44OS0xLjk5IDJMMiAxOGMwIDEuMTEuODkgMiAyIDJoMTZjMS4xMSAwIDItLjg5IDItMlY4YzAtMS4xMS0uODktMi0yLTJ6bS0xIDhoLTN2M2gtMnYtM2gtM3YtMmgzVjloMnYzaDN2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-not-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI1IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMTkgMTcuMTg0NCAyLjk2OTY4IDE0LjMwMzIgMS44NjA5NCAxMS40NDA5WiIvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24yIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMTU5MiA5LjMyMDMxKSIgZD0iTTcuMzY4NDIgMEwwIDcuMzY0NzkiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMzE1OTIgMTYuNjgzNikgc2NhbGUoMSAtMSkiIGQ9Ik03LjM2ODQyIDBMMCA3LjM2NDc5Ii8+Cjwvc3ZnPgo=);
  --jp-icon-notebook: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtbm90ZWJvb2staWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNFRjZDMDAiPgogICAgPHBhdGggZD0iTTE4LjcgMy4zdjE1LjRIMy4zVjMuM2gxNS40bTEuNS0xLjVIMS44djE4LjNoMTguM2wuMS0xOC4zeiIvPgogICAgPHBhdGggZD0iTTE2LjUgMTYuNWwtNS40LTQuMy01LjYgNC4zdi0xMWgxMXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-numbering: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTQgMTlINlYxOS41SDVWMjAuNUg2VjIxSDRWMjJIN1YxOEg0VjE5Wk01IDEwSDZWNkg0VjdINVYxMFpNNCAxM0g1LjhMNCAxNS4xVjE2SDdWMTVINS4yTDcgMTIuOVYxMkg0VjEzWk05IDdWOUgyM1Y3SDlaTTkgMjFIMjNWMTlIOVYyMVpNOSAxNUgyM1YxM0g5VjE1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-offline-bolt: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDIuMDJjLTUuNTEgMC05Ljk4IDQuNDctOS45OCA5Ljk4czQuNDcgOS45OCA5Ljk4IDkuOTggOS45OC00LjQ3IDkuOTgtOS45OFMxNy41MSAyLjAyIDEyIDIuMDJ6TTExLjQ4IDIwdi02LjI2SDhMMTMgNHY2LjI2aDMuMzVMMTEuNDggMjB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-palette: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE4IDEzVjIwSDRWNkg5LjAyQzkuMDcgNS4yOSA5LjI0IDQuNjIgOS41IDRINEMyLjkgNCAyIDQuOSAyIDZWMjBDMiAyMS4xIDIuOSAyMiA0IDIySDE4QzE5LjEgMjIgMjAgMjEuMSAyMCAyMFYxNUwxOCAxM1pNMTkuMyA4Ljg5QzE5Ljc0IDguMTkgMjAgNy4zOCAyMCA2LjVDMjAgNC4wMSAxNy45OSAyIDE1LjUgMkMxMy4wMSAyIDExIDQuMDEgMTEgNi41QzExIDguOTkgMTMuMDEgMTEgMTUuNDkgMTFDMTYuMzcgMTEgMTcuMTkgMTAuNzQgMTcuODggMTAuM0wyMSAxMy40MkwyMi40MiAxMkwxOS4zIDguODlaTTE1LjUgOUMxNC4xMiA5IDEzIDcuODggMTMgNi41QzEzIDUuMTIgMTQuMTIgNCAxNS41IDRDMTYuODggNCAxOCA1LjEyIDE4IDYuNUMxOCA3Ljg4IDE2Ljg4IDkgMTUuNSA5WiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDZIOS4wMTg5NEM5LjAwNjM5IDYuMTY1MDIgOSA2LjMzMTc2IDkgNi41QzkgOC44MTU3NyAxMC4yMTEgMTAuODQ4NyAxMi4wMzQzIDEySDlWMTRIMTZWMTIuOTgxMUMxNi41NzAzIDEyLjkzNzcgMTcuMTIgMTIuODIwNyAxNy42Mzk2IDEyLjYzOTZMMTggMTNWMjBINFY2Wk04IDhINlYxMEg4VjhaTTYgMTJIOFYxNEg2VjEyWk04IDE2SDZWMThIOFYxNlpNOSAxNkgxNlYxOEg5VjE2WiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-paste: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE5IDJoLTQuMThDMTQuNC44NCAxMy4zIDAgMTIgMGMtMS4zIDAtMi40Ljg0LTIuODIgMkg1Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS03IDBjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXptNyAxOEg1VjRoMnYzaDEwVjRoMnYxNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-pdf: url(data:image/svg+xml;base64,PHN2ZwogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyMiIgd2lkdGg9IjE2Ij4KICAgIDxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDQ1KSIgY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0ZGMkEyQSIKICAgICAgIGQ9Im0gMjIuMzQ0MzY5LC0zLjAxNjM2NDIgaCA1LjYzODYwNCB2IDEuNTc5MjQzMyBoIC0zLjU0OTIyNyB2IDEuNTA4NjkyOTkgaCAzLjMzNzU3NiBWIDEuNjUwODE1NCBoIC0zLjMzNzU3NiB2IDMuNDM1MjYxMyBoIC0yLjA4OTM3NyB6IG0gLTcuMTM2NDQ0LDEuNTc5MjQzMyB2IDQuOTQzOTU0MyBoIDAuNzQ4OTIgcSAxLjI4MDc2MSwwIDEuOTUzNzAzLC0wLjYzNDk1MzUgMC42NzgzNjksLTAuNjM0OTUzNSAwLjY3ODM2OSwtMS44NDUxNjQxIDAsLTEuMjA0NzgzNTUgLTAuNjcyOTQyLC0xLjgzNDMxMDExIC0wLjY3Mjk0MiwtMC42Mjk1MjY1OSAtMS45NTkxMywtMC42Mjk1MjY1OSB6IG0gLTIuMDg5Mzc3LC0xLjU3OTI0MzMgaCAyLjIwMzM0MyBxIDEuODQ1MTY0LDAgMi43NDYwMzksMC4yNjU5MjA3IDAuOTA2MzAxLDAuMjYwNDkzNyAxLjU1MjEwOCwwLjg5MDAyMDMgMC41Njk4MywwLjU0ODEyMjMgMC44NDY2MDUsMS4yNjQ0ODAwNiAwLjI3Njc3NCwwLjcxNjM1NzgxIDAuMjc2Nzc0LDEuNjIyNjU4OTQgMCwwLjkxNzE1NTEgLTAuMjc2Nzc0LDEuNjM4OTM5OSAtMC4yNzY3NzUsMC43MTYzNTc4IC0wLjg0NjYwNSwxLjI2NDQ4IC0wLjY1MTIzNCwwLjYyOTUyNjYgLTEuNTYyOTYyLDAuODk1NDQ3MyAtMC45MTE3MjgsMC4yNjA0OTM3IC0yLjczNTE4NSwwLjI2MDQ5MzcgaCAtMi4yMDMzNDMgeiBtIC04LjE0NTg1NjUsMCBoIDMuNDY3ODIzIHEgMS41NDY2ODE2LDAgMi4zNzE1Nzg1LDAuNjg5MjIzIDAuODMwMzI0LDAuNjgzNzk2MSAwLjgzMDMyNCwxLjk1MzcwMzE0IDAsMS4yNzUzMzM5NyAtMC44MzAzMjQsMS45NjQ1NTcwNiBRIDkuOTg3MTk2MSwyLjI3NDkxNSA4LjQ0MDUxNDUsMi4yNzQ5MTUgSCA3LjA2MjA2ODQgViA1LjA4NjA3NjcgSCA0Ljk3MjY5MTUgWiBtIDIuMDg5Mzc2OSwxLjUxNDExOTkgdiAyLjI2MzAzOTQzIGggMS4xNTU5NDEgcSAwLjYwNzgxODgsMCAwLjkzODg2MjksLTAuMjkzMDU1NDcgMC4zMzEwNDQxLC0wLjI5ODQ4MjQxIDAuMzMxMDQ0MSwtMC44NDExNzc3MiAwLC0wLjU0MjY5NTMxIC0wLjMzMTA0NDEsLTAuODM1NzUwNzQgLTAuMzMxMDQ0MSwtMC4yOTMwNTU1IC0wLjkzODg2MjksLTAuMjkzMDU1NSB6IgovPgo8L3N2Zz4K);
  --jp-icon-python: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iLTEwIC0xMCAxMzEuMTYxMzYxNjk0MzM1OTQgMTMyLjM4ODk5OTkzODk2NDg0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzA2OTk4IiBkPSJNIDU0LjkxODc4NSw5LjE5Mjc0MjFlLTQgQyA1MC4zMzUxMzIsMC4wMjIyMTcyNyA0NS45NTc4NDYsMC40MTMxMzY5NyA0Mi4xMDYyODUsMS4wOTQ2NjkzIDMwLjc2MDA2OSwzLjA5OTE3MzEgMjguNzAwMDM2LDcuMjk0NzcxNCAyOC43MDAwMzUsMTUuMDMyMTY5IHYgMTAuMjE4NzUgaCAyNi44MTI1IHYgMy40MDYyNSBoIC0yNi44MTI1IC0xMC4wNjI1IGMgLTcuNzkyNDU5LDAgLTE0LjYxNTc1ODgsNC42ODM3MTcgLTE2Ljc0OTk5OTgsMTMuNTkzNzUgLTIuNDYxODE5OTgsMTAuMjEyOTY2IC0yLjU3MTAxNTA4LDE2LjU4NjAyMyAwLDI3LjI1IDEuOTA1OTI4Myw3LjkzNzg1MiA2LjQ1NzU0MzIsMTMuNTkzNzQ4IDE0LjI0OTk5OTgsMTMuNTkzNzUgaCA5LjIxODc1IHYgLTEyLjI1IGMgMCwtOC44NDk5MDIgNy42NTcxNDQsLTE2LjY1NjI0OCAxNi43NSwtMTYuNjU2MjUgaCAyNi43ODEyNSBjIDcuNDU0OTUxLDAgMTMuNDA2MjUzLC02LjEzODE2NCAxMy40MDYyNSwtMTMuNjI1IHYgLTI1LjUzMTI1IGMgMCwtNy4yNjYzMzg2IC02LjEyOTk4LC0xMi43MjQ3NzcxIC0xMy40MDYyNSwtMTMuOTM3NDk5NyBDIDY0LjI4MTU0OCwwLjMyNzk0Mzk3IDU5LjUwMjQzOCwtMC4wMjAzNzkwMyA1NC45MTg3ODUsOS4xOTI3NDIxZS00IFogbSAtMTQuNSw4LjIxODc1MDEyNTc5IGMgMi43Njk1NDcsMCA1LjAzMTI1LDIuMjk4NjQ1NiA1LjAzMTI1LDUuMTI0OTk5NiAtMmUtNiwyLjgxNjMzNiAtMi4yNjE3MDMsNS4wOTM3NSAtNS4wMzEyNSw1LjA5Mzc1IC0yLjc3OTQ3NiwtMWUtNiAtNS4wMzEyNSwtMi4yNzc0MTUgLTUuMDMxMjUsLTUuMDkzNzUgLTEwZS03LC0yLjgyNjM1MyAyLjI1MTc3NCwtNS4xMjQ5OTk2IDUuMDMxMjUsLTUuMTI0OTk5NiB6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2ZmZDQzYiIgZD0ibSA4NS42Mzc1MzUsMjguNjU3MTY5IHYgMTEuOTA2MjUgYyAwLDkuMjMwNzU1IC03LjgyNTg5NSwxNi45OTk5OTkgLTE2Ljc1LDE3IGggLTI2Ljc4MTI1IGMgLTcuMzM1ODMzLDAgLTEzLjQwNjI0OSw2LjI3ODQ4MyAtMTMuNDA2MjUsMTMuNjI1IHYgMjUuNTMxMjQ3IGMgMCw3LjI2NjM0NCA2LjMxODU4OCwxMS41NDAzMjQgMTMuNDA2MjUsMTMuNjI1MDA0IDguNDg3MzMxLDIuNDk1NjEgMTYuNjI2MjM3LDIuOTQ2NjMgMjYuNzgxMjUsMCA2Ljc1MDE1NSwtMS45NTQzOSAxMy40MDYyNTMsLTUuODg3NjEgMTMuNDA2MjUsLTEzLjYyNTAwNCBWIDg2LjUwMDkxOSBoIC0yNi43ODEyNSB2IC0zLjQwNjI1IGggMjYuNzgxMjUgMTMuNDA2MjU0IGMgNy43OTI0NjEsMCAxMC42OTYyNTEsLTUuNDM1NDA4IDEzLjQwNjI0MSwtMTMuNTkzNzUgMi43OTkzMywtOC4zOTg4ODYgMi42ODAyMiwtMTYuNDc1Nzc2IDAsLTI3LjI1IC0xLjkyNTc4LC03Ljc1NzQ0MSAtNS42MDM4NywtMTMuNTkzNzUgLTEzLjQwNjI0MSwtMTMuNTkzNzUgeiBtIC0xNS4wNjI1LDY0LjY1NjI1IGMgMi43Nzk0NzgsM2UtNiA1LjAzMTI1LDIuMjc3NDE3IDUuMDMxMjUsNS4wOTM3NDcgLTJlLTYsMi44MjYzNTQgLTIuMjUxNzc1LDUuMTI1MDA0IC01LjAzMTI1LDUuMTI1MDA0IC0yLjc2OTU1LDAgLTUuMDMxMjUsLTIuMjk4NjUgLTUuMDMxMjUsLTUuMTI1MDA0IDJlLTYsLTIuODE2MzMgMi4yNjE2OTcsLTUuMDkzNzQ3IDUuMDMxMjUsLTUuMDkzNzQ3IHoiLz4KPC9zdmc+Cg==);
  --jp-icon-r-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjE5NkYzIiBkPSJNNC40IDIuNWMxLjItLjEgMi45LS4zIDQuOS0uMyAyLjUgMCA0LjEuNCA1LjIgMS4zIDEgLjcgMS41IDEuOSAxLjUgMy41IDAgMi0xLjQgMy41LTIuOSA0LjEgMS4yLjQgMS43IDEuNiAyLjIgMyAuNiAxLjkgMSAzLjkgMS4zIDQuNmgtMy44Yy0uMy0uNC0uOC0xLjctMS4yLTMuN3MtMS4yLTIuNi0yLjYtMi42aC0uOXY2LjRINC40VjIuNXptMy43IDYuOWgxLjRjMS45IDAgMi45LS45IDIuOS0yLjNzLTEtMi4zLTIuOC0yLjNjLS43IDAtMS4zIDAtMS42LjJ2NC41aC4xdi0uMXoiLz4KPC9zdmc+Cg==);
  --jp-icon-react: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMTUwIDE1MCA1NDEuOSAyOTUuMyI+CiAgPGcgY2xhc3M9ImpwLWljb24tYnJhbmQyIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC43IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNC0xNC43IDI4LTMxLjQgNDEuMy00OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-redo: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4LjQgMTAuNkMxNi41NSA4Ljk5IDE0LjE1IDggMTEuNSA4Yy00LjY1IDAtOC41OCAzLjAzLTkuOTYgNy4yMkwzLjkgMTZjMS4wNS0zLjE5IDQuMDUtNS41IDcuNi01LjUgMS45NSAwIDMuNzMuNzIgNS4xMiAxLjg4TDEzIDE2aDlWN2wtMy42IDMuNnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-refresh: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTkgMTMuNWMtMi40OSAwLTQuNS0yLjAxLTQuNS00LjVTNi41MSA0LjUgOSA0LjVjMS4yNCAwIDIuMzYuNTIgMy4xNyAxLjMzTDEwIDhoNVYzbC0xLjc2IDEuNzZDMTIuMTUgMy42OCAxMC42NiAzIDkgMyA1LjY5IDMgMy4wMSA1LjY5IDMuMDEgOVM1LjY5IDE1IDkgMTVjMi45NyAwIDUuNDMtMi4xNiA1LjktNWgtMS41MmMtLjQ2IDItMi4yNCAzLjUtNC4zOCAzLjV6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-regex: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiBmaWxsPSIjRkZGIj4KICAgIDxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjUuNSIgY3k9IjE0LjUiIHI9IjEuNSIvPgogICAgPHJlY3QgeD0iMTIiIHk9IjQiIGNsYXNzPSJzdDIiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiLz4KICAgIDxyZWN0IHg9IjguNSIgeT0iNy41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiAtMC41IDAuNSAwLjg2NiAtMi4zMjU1IDcuMzIxOSkiIGNsYXNzPSJzdDIiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiLz4KICAgIDxyZWN0IHg9IjEyIiB5PSI0IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjUgLTAuODY2IDAuODY2IDAuNSAtMC42Nzc5IDE0LjgyNTIpIiBjbGFzcz0ic3QyIiB3aWR0aD0iMSIgaGVpZ2h0PSI4Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-run: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-running: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-save: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-search: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-settings: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVBLjQ4OC40ODggMCAwMDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==);
  --jp-icon-share: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTSAxOCAyIEMgMTYuMzU0OTkgMiAxNSAzLjM1NDk5MDQgMTUgNSBDIDE1IDUuMTkwOTUyOSAxNS4wMjE3OTEgNS4zNzcxMjI0IDE1LjA1NjY0MSA1LjU1ODU5MzggTCA3LjkyMTg3NSA5LjcyMDcwMzEgQyA3LjM5ODUzOTkgOS4yNzc4NTM5IDYuNzMyMDc3MSA5IDYgOSBDIDQuMzU0OTkwNCA5IDMgMTAuMzU0OTkgMyAxMiBDIDMgMTMuNjQ1MDEgNC4zNTQ5OTA0IDE1IDYgMTUgQyA2LjczMjA3NzEgMTUgNy4zOTg1Mzk5IDE0LjcyMjE0NiA3LjkyMTg3NSAxNC4yNzkyOTcgTCAxNS4wNTY2NDEgMTguNDM5NDUzIEMgMTUuMDIxNTU1IDE4LjYyMTUxNCAxNSAxOC44MDgzODYgMTUgMTkgQyAxNSAyMC42NDUwMSAxNi4zNTQ5OSAyMiAxOCAyMiBDIDE5LjY0NTAxIDIyIDIxIDIwLjY0NTAxIDIxIDE5IEMgMjEgMTcuMzU0OTkgMTkuNjQ1MDEgMTYgMTggMTYgQyAxNy4yNjc0OCAxNiAxNi42MDE1OTMgMTYuMjc5MzI4IDE2LjA3ODEyNSAxNi43MjI2NTYgTCA4Ljk0MzM1OTQgMTIuNTU4NTk0IEMgOC45NzgyMDk1IDEyLjM3NzEyMiA5IDEyLjE5MDk1MyA5IDEyIEMgOSAxMS44MDkwNDcgOC45NzgyMDk1IDExLjYyMjg3OCA4Ljk0MzM1OTQgMTEuNDQxNDA2IEwgMTYuMDc4MTI1IDcuMjc5Mjk2OSBDIDE2LjYwMTQ2IDcuNzIyMTQ2MSAxNy4yNjc5MjMgOCAxOCA4IEMgMTkuNjQ1MDEgOCAyMSA2LjY0NTAwOTYgMjEgNSBDIDIxIDMuMzU0OTkwNCAxOS42NDUwMSAyIDE4IDIgeiBNIDE4IDQgQyAxOC41NjQxMjkgNCAxOSA0LjQzNTg3MDYgMTkgNSBDIDE5IDUuNTY0MTI5NCAxOC41NjQxMjkgNiAxOCA2IEMgMTcuNDM1ODcxIDYgMTcgNS41NjQxMjk0IDE3IDUgQyAxNyA0LjQzNTg3MDYgMTcuNDM1ODcxIDQgMTggNCB6IE0gNiAxMSBDIDYuNTY0MTI5NCAxMSA3IDExLjQzNTg3MSA3IDEyIEMgNyAxMi41NjQxMjkgNi41NjQxMjk0IDEzIDYgMTMgQyA1LjQzNTg3MDYgMTMgNSAxMi41NjQxMjkgNSAxMiBDIDUgMTEuNDM1ODcxIDUuNDM1ODcwNiAxMSA2IDExIHogTSAxOCAxOCBDIDE4LjU2NDEyOSAxOCAxOSAxOC40MzU4NzEgMTkgMTkgQyAxOSAxOS41NjQxMjkgMTguNTY0MTI5IDIwIDE4IDIwIEMgMTcuNDM1ODcxIDIwIDE3IDE5LjU2NDEyOSAxNyAxOSBDIDE3IDE4LjQzNTg3MSAxNy40MzU4NzEgMTggMTggMTggeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-spreadsheet: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNENBRjUwIiBkPSJNMi4yIDIuMnYxNy42aDE3LjZWMi4ySDIuMnptMTUuNCA3LjdoLTUuNVY0LjRoNS41djUuNXpNOS45IDQuNHY1LjVINC40VjQuNGg1LjV6bS01LjUgNy43aDUuNXY1LjVINC40di01LjV6bTcuNyA1LjV2LTUuNWg1LjV2NS41aC01LjV6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-stop: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tab: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIxIDNIM2MtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxOGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE2SDNWNWgxMHY0aDh2MTB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-table-rows: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMSw4SDNWNGgxOFY4eiBNMjEsMTBIM3Y0aDE4VjEweiBNMjEsMTZIM3Y0aDE4VjE2eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-tag: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCA0MyAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTI4LjgzMzIgMTIuMzM0TDMyLjk5OTggMTYuNTAwN0wzNy4xNjY1IDEyLjMzNEgyOC44MzMyWiIvPgoJCTxwYXRoIGQ9Ik0xNi4yMDk1IDIxLjYxMDRDMTUuNjg3MyAyMi4xMjk5IDE0Ljg0NDMgMjIuMTI5OSAxNC4zMjQ4IDIxLjYxMDRMNi45ODI5IDE0LjcyNDVDNi41NzI0IDE0LjMzOTQgNi4wODMxMyAxMy42MDk4IDYuMDQ3ODYgMTMuMDQ4MkM1Ljk1MzQ3IDExLjUyODggNi4wMjAwMiA4LjYxOTQ0IDYuMDY2MjEgNy4wNzY5NUM2LjA4MjgxIDYuNTE0NzcgNi41NTU0OCA2LjA0MzQ3IDcuMTE4MDQgNi4wMzA1NUM5LjA4ODYzIDUuOTg0NzMgMTMuMjYzOCA1LjkzNTc5IDEzLjY1MTggNi4zMjQyNUwyMS43MzY5IDEzLjYzOUMyMi4yNTYgMTQuMTU4NSAyMS43ODUxIDE1LjQ3MjQgMjEuMjYyIDE1Ljk5NDZMMTYuMjA5NSAyMS42MTA0Wk05Ljc3NTg1IDguMjY1QzkuMzM1NTEgNy44MjU2NiA4LjYyMzUxIDcuODI1NjYgOC4xODI4IDguMjY1QzcuNzQzNDYgOC43MDU3MSA3Ljc0MzQ2IDkuNDE3MzMgOC4xODI4IDkuODU2NjdDOC42MjM4MiAxMC4yOTY0IDkuMzM1ODIgMTAuMjk2NCA5Ljc3NTg1IDkuODU2NjdDMTAuMjE1NiA5LjQxNzMzIDEwLjIxNTYgOC43MDUzMyA5Ljc3NTg1IDguMjY1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-terminal: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiA+CiAgICA8cmVjdCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1iYWNrZ3JvdW5kLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyIDIpIiBmaWxsPSIjMzMzMzMzIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUtaW52ZXJzZSIgZD0iTTUuMDU2NjQgOC43NjE3MkM1LjA1NjY0IDguNTk3NjYgNS4wMzEyNSA4LjQ1MzEyIDQuOTgwNDcgOC4zMjgxMkM0LjkzMzU5IDguMTk5MjIgNC44NTU0NyA4LjA4MjAzIDQuNzQ2MDkgNy45NzY1NkM0LjY0MDYyIDcuODcxMDkgNC41IDcuNzc1MzkgNC4zMjQyMiA3LjY4OTQ1QzQuMTUyMzQgNy41OTk2MSAzLjk0MzM2IDcuNTExNzIgMy42OTcyNyA3LjQyNTc4QzMuMzAyNzMgNy4yODUxNiAyLjk0MzM2IDcuMTM2NzIgMi42MTkxNCA2Ljk4MDQ3QzIuMjk0OTIgNi44MjQyMiAyLjAxNzU4IDYuNjQyNTggMS43ODcxMSA2LjQzNTU1QzEuNTYwNTUgNi4yMjg1MiAxLjM4NDc3IDUuOTg4MjggMS4yNTk3NyA1LjcxNDg0QzEuMTM0NzcgNS40Mzc1IDEuMDcyMjcgNS4xMDkzOCAxLjA3MjI3IDQuNzMwNDdDMS4wNzIyNyA0LjM5ODQ0IDEuMTI4OTEgNC4wOTU3IDEuMjQyMTkgMy44MjIyN0MxLjM1NTQ3IDMuNTQ0OTIgMS41MTU2MiAzLjMwNDY5IDEuNzIyNjYgMy4xMDE1NkMxLjkyOTY5IDIuODk4NDQgMi4xNzk2OSAyLjczNDM3IDIuNDcyNjYgMi42MDkzOEMyLjc2NTYyIDIuNDg0MzggMy4wOTE4IDIuNDA0MyAzLjQ1MTE3IDIuMzY5MTRWMS4xMDkzOEg0LjM4ODY3VjIuMzgwODZDNC43NDAyMyAyLjQyNzczIDUuMDU2NjQgMi41MjM0NCA1LjMzNzg5IDIuNjY3OTdDNS42MTkxNCAyLjgxMjUgNS44NTc0MiAzLjAwMTk1IDYuMDUyNzMgMy4yMzYzM0M2LjI1MTk1IDMuNDY2OCA2LjQwNDMgMy43NDAyMyA2LjUwOTc3IDQuMDU2NjRDNi42MTkxNCA0LjM2OTE0IDYuNjczODMgNC43MjA3IDYuNjczODMgNS4xMTEzM0g1LjA0NDkyQzUuMDQ0OTIgNC42Mzg2NyA0LjkzNzUgNC4yODEyNSA0LjcyMjY2IDQuMDM5MDZDNC41MDc4MSAzLjc5Mjk3IDQuMjE2OCAzLjY2OTkyIDMuODQ5NjEgMy42Njk5MkMzLjY1MDM5IDMuNjY5OTIgMy40NzY1NiAzLjY5NzI3IDMuMzI4MTIgMy43NTE5NUMzLjE4MzU5IDMuODAyNzMgMy4wNjQ0NSAzLjg3Njk1IDIuOTcwNyAzLjk3NDYxQzIuODc2OTUgNC4wNjgzNiAyLjgwNjY0IDQuMTc5NjkgMi43NTk3NyA0LjMwODU5QzIuNzE2OCA0LjQzNzUgMi42OTUzMSA0LjU3ODEyIDIuNjk1MzEgNC43MzA0N0MyLjY5NTMxIDQuODgyODEgMi43MTY4IDUuMDE5NTMgMi43NTk3NyA1LjE0MDYyQzIuODA2NjQgNS4yNTc4MSAyLjg4MjgxIDUuMzY3MTkgMi45ODgyOCA1LjQ2ODc1QzMuMDk3NjYgNS41NzAzMSAzLjI0MDIzIDUuNjY3OTcgMy40MTYwMiA1Ljc2MTcyQzMuNTkxOCA1Ljg1MTU2IDMuODEwNTUgNS45NDMzNiA0LjA3MjI3IDYuMDM3MTFDNC40NjY4IDYuMTg1NTUgNC44MjQyMiA2LjMzOTg0IDUuMTQ0NTMgNi41QzUuNDY0ODQgNi42NTYyNSA1LjczODI4IDYuODM5ODQgNS45NjQ4NCA3LjA1MDc4QzYuMTk1MzEgNy4yNTc4MSA2LjM3MTA5IDcuNSA2LjQ5MjE5IDcuNzc3MzRDNi42MTcxOSA4LjA1MDc4IDYuNjc5NjkgOC4zNzUgNi42Nzk2OSA4Ljc1QzYuNjc5NjkgOS4wOTM3NSA2LjYyMzA1IDkuNDA0MyA2LjUwOTc3IDkuNjgxNjRDNi4zOTY0OCA5Ljk1NTA4IDYuMjM0MzggMTAuMTkxNCA2LjAyMzQ0IDEwLjM5MDZDNS44MTI1IDEwLjU4OTggNS41NTg1OSAxMC43NSA1LjI2MTcyIDEwLjg3MTFDNC45NjQ4NCAxMC45ODgzIDQuNjMyODEgMTEuMDY0NSA0LjI2NTYyIDExLjA5OTZWMTIuMjQ4SDMuMzMzOThWMTEuMDk5NkMzLjAwMTk1IDExLjA2ODQgMi42Nzk2OSAxMC45OTYxIDIuMzY3MTkgMTAuODgyOEMyLjA1NDY5IDEwLjc2NTYgMS43NzczNCAxMC41OTc3IDEuNTM1MTYgMTAuMzc4OUMxLjI5Njg4IDEwLjE2MDIgMS4xMDU0NyA5Ljg4NDc3IDAuOTYwOTM4IDkuNTUyNzNDMC44MTY0MDYgOS4yMTY4IDAuNzQ0MTQxIDguODE0NDUgMC43NDQxNDEgOC4zNDU3SDIuMzc4OTFDMi4zNzg5MSA4LjYyNjk1IDIuNDE5OTIgOC44NjMyOCAyLjUwMTk1IDkuMDU0NjlDMi41ODM5OCA5LjI0MjE5IDIuNjg5NDUgOS4zOTI1OCAyLjgxODM2IDkuNTA1ODZDMi45NTExNyA5LjYxNTIzIDMuMTAxNTYgOS42OTMzNiAzLjI2OTUzIDkuNzQwMjNDMy40Mzc1IDkuNzg3MTEgMy42MDkzOCA5LjgxMDU1IDMuNzg1MTYgOS44MTA1NUM0LjIwMzEyIDkuODEwNTUgNC41MTk1MyA5LjcxMjg5IDQuNzM0MzggOS41MTc1OEM0Ljk0OTIyIDkuMzIyMjcgNS4wNTY2NCA5LjA3MDMxIDUuMDU2NjQgOC43NjE3MlpNMTMuNDE4IDEyLjI3MTVIOC4wNzQyMlYxMUgxMy40MThWMTIuMjcxNVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuOTUyNjQgNikiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=);
  --jp-icon-text-editor: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtdGV4dC1lZGl0b3ItaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xNSAxNUgzdjJoMTJ2LTJ6bTAtOEgzdjJoMTJWN3pNMyAxM2gxOHYtMkgzdjJ6bTAgOGgxOHYtMkgzdjJ6TTMgM3YyaDE4VjNIM3oiLz4KPC9zdmc+Cg==);
  --jp-icon-toc: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik03LDVIMjFWN0g3VjVNNywxM1YxMUgyMVYxM0g3TTQsNC41QTEuNSwxLjUgMCAwLDEgNS41LDZBMS41LDEuNSAwIDAsMSA0LDcuNUExLjUsMS41IDAgMCwxIDIuNSw2QTEuNSwxLjUgMCAwLDEgNCw0LjVNNCwxMC41QTEuNSwxLjUgMCAwLDEgNS41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMy41QTEuNSwxLjUgMCAwLDEgMi41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMC41TTcsMTlWMTdIMjFWMTlIN000LDE2LjVBMS41LDEuNSAwIDAsMSA1LjUsMThBMS41LDEuNSAwIDAsMSA0LDE5LjVBMS41LDEuNSAwIDAsMSAyLjUsMThBMS41LDEuNSAwIDAsMSA0LDE2LjVaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tree-view: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMiAxMVYzaC03djNIOVYzSDJ2OGg3VjhoMnYxMGg0djNoN3YtOGgtN3YzaC0yVjhoMnYzeiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMiAxNy4xODQ0IDIuOTY5NjggMTQuMzAzMiAxLjg2MDk0IDExLjQ0MDlaIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiMzMzMzMzMiIHN0cm9rZT0iIzMzMzMzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCA5Ljg2NzE5KSIgZD0iTTIuODYwMTUgNC44NjUzNUwwLjcyNjU0OSAyLjk5OTU5TDAgMy42MzA0NUwyLjg2MDE1IDYuMTMxNTdMOCAwLjYzMDg3Mkw3LjI3ODU3IDBMMi44NjAxNSA0Ljg2NTM1WiIvPgo8L3N2Zz4K);
  --jp-icon-undo: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-user: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE2IDdhNCA0IDAgMTEtOCAwIDQgNCAwIDAxOCAwek0xMiAxNGE3IDcgMCAwMC03IDdoMTRhNyA3IDAgMDAtNy03eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-users: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM2IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGcgY2xhc3M9ImpwLWljb24zIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjczMjcgMCAwIDEuNzMyNyAtMy42MjgyIC4wOTk1NzcpIiBmaWxsPSIjNjE2MTYxIj4KICA8cGF0aCB0cmFuc2Zvcm09Im1hdHJpeCgxLjUsMCwwLDEuNSwwLC02KSIgZD0ibTEyLjE4NiA3LjUwOThjLTEuMDUzNSAwLTEuOTc1NyAwLjU2NjUtMi40Nzg1IDEuNDEwMiAwLjc1MDYxIDAuMzEyNzcgMS4zOTc0IDAuODI2NDggMS44NzMgMS40NzI3aDMuNDg2M2MwLTEuNTkyLTEuMjg4OS0yLjg4MjgtMi44ODA5LTIuODgyOHoiLz4KICA8cGF0aCBkPSJtMjAuNDY1IDIuMzg5NWEyLjE4ODUgMi4xODg1IDAgMCAxLTIuMTg4NCAyLjE4ODUgMi4xODg1IDIuMTg4NSAwIDAgMS0yLjE4ODUtMi4xODg1IDIuMTg4NSAyLjE4ODUgMCAwIDEgMi4xODg1LTIuMTg4NSAyLjE4ODUgMi4xODg1IDAgMCAxIDIuMTg4NCAyLjE4ODV6Ii8+CiAgPHBhdGggdHJhbnNmb3JtPSJtYXRyaXgoMS41LDAsMCwxLjUsMCwtNikiIGQ9Im0zLjU4OTggOC40MjE5Yy0xLjExMjYgMC0yLjAxMzcgMC45MDExMS0yLjAxMzcgMi4wMTM3aDIuODE0NWMwLjI2Nzk3LTAuMzczMDkgMC41OTA3LTAuNzA0MzUgMC45NTg5OC0wLjk3ODUyLTAuMzQ0MzMtMC42MTY4OC0xLjAwMzEtMS4wMzUyLTEuNzU5OC0xLjAzNTJ6Ii8+CiAgPHBhdGggZD0ibTYuOTE1NCA0LjYyM2ExLjUyOTQgMS41Mjk0IDAgMCAxLTEuNTI5NCAxLjUyOTQgMS41Mjk0IDEuNTI5NCAwIDAgMS0xLjUyOTQtMS41Mjk0IDEuNTI5NCAxLjUyOTQgMCAwIDEgMS41Mjk0LTEuNTI5NCAxLjUyOTQgMS41Mjk0IDAgMCAxIDEuNTI5NCAxLjUyOTR6Ii8+CiAgPHBhdGggZD0ibTYuMTM1IDEzLjUzNWMwLTMuMjM5MiAyLjYyNTktNS44NjUgNS44NjUtNS44NjUgMy4yMzkyIDAgNS44NjUgMi42MjU5IDUuODY1IDUuODY1eiIvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMy43Njg1IiByPSIyLjk2ODUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-vega: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbjEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjEyMTIxIj4KICAgIDxwYXRoIGQ9Ik0xMC42IDUuNGwyLjItMy4ySDIuMnY3LjNsNC02LjZ6Ii8+CiAgICA8cGF0aCBkPSJNMTUuOCAyLjJsLTQuNCA2LjZMNyA2LjNsLTQuOCA4djUuNWgxNy42VjIuMmgtNHptLTcgMTUuNEg1LjV2LTQuNGgzLjN2NC40em00LjQgMEg5LjhWOS44aDMuNHY3Ljh6bTQuNCAwaC0zLjRWNi41aDMuNHYxMS4xeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-word: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KIDxnIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzQxNDE0MSI+CiAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiA8L2c+CiA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguNDMgLjA0MDEpIiBmaWxsPSIjZmZmIj4KICA8cGF0aCBkPSJtNC4xNCA4Ljc2cTAuMDY4Mi0xLjg5IDIuNDItMS44OSAxLjE2IDAgMS42OCAwLjQyIDAuNTY3IDAuNDEgMC41NjcgMS4xNnYzLjQ3cTAgMC40NjIgMC41MTQgMC40NjIgMC4xMDMgMCAwLjItMC4wMjMxdjAuNzE0cS0wLjM5OSAwLjEwMy0wLjY1MSAwLjEwMy0wLjQ1MiAwLTAuNjkzLTAuMjItMC4yMzEtMC4yLTAuMjg0LTAuNjYyLTAuOTU2IDAuODcyLTIgMC44NzItMC45MDMgMC0xLjQ3LTAuNDcyLTAuNTI1LTAuNDcyLTAuNTI1LTEuMjYgMC0wLjI2MiAwLjA0NTItMC40NzIgMC4wNTY3LTAuMjIgMC4xMTYtMC4zNzggMC4wNjgyLTAuMTY4IDAuMjMxLTAuMzA0IDAuMTU4LTAuMTQ3IDAuMjYyLTAuMjQyIDAuMTE2LTAuMDkxNCAwLjM2OC0wLjE2OCAwLjI2Mi0wLjA5MTQgMC4zOTktMC4xMjYgMC4xMzYtMC4wNDUyIDAuNDcyLTAuMTAzIDAuMzM2LTAuMDU3OCAwLjUwNC0wLjA3OTggMC4xNTgtMC4wMjMxIDAuNTY3LTAuMDc5OCAwLjU1Ni0wLjA2ODIgMC43NzctMC4yMjEgMC4yMi0wLjE1MiAwLjIyLTAuNDQxdi0wLjI1MnEwLTAuNDMtMC4zNTctMC42NjItMC4zMzYtMC4yMzEtMC45NzYtMC4yMzEtMC42NjIgMC0wLjk5OCAwLjI2Mi0wLjMzNiAwLjI1Mi0wLjM5OSAwLjc5OHptMS44OSAzLjY4cTAuNzg4IDAgMS4yNi0wLjQxIDAuNTA0LTAuNDIgMC41MDQtMC45MDN2LTEuMDVxLTAuMjg0IDAuMTM2LTAuODYxIDAuMjMxLTAuNTY3IDAuMDkxNC0wLjk4NyAwLjE1OC0wLjQyIDAuMDY4Mi0wLjc2NiAwLjMyNi0wLjMzNiAwLjI1Mi0wLjMzNiAwLjcwNHQwLjMwNCAwLjcwNCAwLjg2MSAwLjI1MnoiIHN0cm9rZS13aWR0aD0iMS4wNSIvPgogIDxwYXRoIGQ9Im0xMCA0LjU2aDAuOTQ1djMuMTVxMC42NTEtMC45NzYgMS44OS0wLjk3NiAxLjE2IDAgMS44OSAwLjg0IDAuNjgyIDAuODQgMC42ODIgMi4zMSAwIDEuNDctMC43MDQgMi40Mi0wLjcwNCAwLjg4Mi0xLjg5IDAuODgyLTEuMjYgMC0xLjg5LTEuMDJ2MC43NjZoLTAuODV6bTIuNjIgMy4wNHEtMC43NDYgMC0xLjE2IDAuNjQtMC40NTIgMC42My0wLjQ1MiAxLjY4IDAgMS4wNSAwLjQ1MiAxLjY4dDEuMTYgMC42M3EwLjc3NyAwIDEuMjYtMC42MyAwLjQ5NC0wLjY0IDAuNDk0LTEuNjggMC0xLjA1LTAuNDcyLTEuNjgtMC40NjItMC42NC0xLjI2LTAuNjR6IiBzdHJva2Utd2lkdGg9IjEuMDUiLz4KICA8cGF0aCBkPSJtMi43MyAxNS44IDEzLjYgMC4wMDgxYzAuMDA2OSAwIDAtMi42IDAtMi42IDAtMC4wMDc4LTEuMTUgMC0xLjE1IDAtMC4wMDY5IDAtMC4wMDgzIDEuNS0wLjAwODMgMS41LTJlLTMgLTAuMDAxNC0xMS4zLTAuMDAxNC0xMS4zLTAuMDAxNGwtMC4wMDU5Mi0xLjVjMC0wLjAwNzgtMS4xNyAwLjAwMTMtMS4xNyAwLjAwMTN6IiBzdHJva2Utd2lkdGg9Ii45NzUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-yaml: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1jb250cmFzdDIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjRDgxQjYwIj4KICAgIDxwYXRoIGQ9Ik03LjIgMTguNnYtNS40TDMgNS42aDMuM2wxLjQgMy4xYy4zLjkuNiAxLjYgMSAyLjUuMy0uOC42LTEuNiAxLTIuNWwxLjQtMy4xaDMuNGwtNC40IDcuNnY1LjVsLTIuOS0uMXoiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxNi41IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxMSIgcj0iMi4xIi8+CiAgPC9nPgo8L3N2Zz4K);
}

/* Icon CSS class declarations */

.jp-AddAboveIcon {
  background-image: var(--jp-icon-add-above);
}

.jp-AddBelowIcon {
  background-image: var(--jp-icon-add-below);
}

.jp-AddIcon {
  background-image: var(--jp-icon-add);
}

.jp-BellIcon {
  background-image: var(--jp-icon-bell);
}

.jp-BugDotIcon {
  background-image: var(--jp-icon-bug-dot);
}

.jp-BugIcon {
  background-image: var(--jp-icon-bug);
}

.jp-BuildIcon {
  background-image: var(--jp-icon-build);
}

.jp-CaretDownEmptyIcon {
  background-image: var(--jp-icon-caret-down-empty);
}

.jp-CaretDownEmptyThinIcon {
  background-image: var(--jp-icon-caret-down-empty-thin);
}

.jp-CaretDownIcon {
  background-image: var(--jp-icon-caret-down);
}

.jp-CaretLeftIcon {
  background-image: var(--jp-icon-caret-left);
}

.jp-CaretRightIcon {
  background-image: var(--jp-icon-caret-right);
}

.jp-CaretUpEmptyThinIcon {
  background-image: var(--jp-icon-caret-up-empty-thin);
}

.jp-CaretUpIcon {
  background-image: var(--jp-icon-caret-up);
}

.jp-CaseSensitiveIcon {
  background-image: var(--jp-icon-case-sensitive);
}

.jp-CheckIcon {
  background-image: var(--jp-icon-check);
}

.jp-CircleEmptyIcon {
  background-image: var(--jp-icon-circle-empty);
}

.jp-CircleIcon {
  background-image: var(--jp-icon-circle);
}

.jp-ClearIcon {
  background-image: var(--jp-icon-clear);
}

.jp-CloseIcon {
  background-image: var(--jp-icon-close);
}

.jp-CodeCheckIcon {
  background-image: var(--jp-icon-code-check);
}

.jp-CodeIcon {
  background-image: var(--jp-icon-code);
}

.jp-CollapseAllIcon {
  background-image: var(--jp-icon-collapse-all);
}

.jp-ConsoleIcon {
  background-image: var(--jp-icon-console);
}

.jp-CopyIcon {
  background-image: var(--jp-icon-copy);
}

.jp-CopyrightIcon {
  background-image: var(--jp-icon-copyright);
}

.jp-CutIcon {
  background-image: var(--jp-icon-cut);
}

.jp-DeleteIcon {
  background-image: var(--jp-icon-delete);
}

.jp-DownloadIcon {
  background-image: var(--jp-icon-download);
}

.jp-DuplicateIcon {
  background-image: var(--jp-icon-duplicate);
}

.jp-EditIcon {
  background-image: var(--jp-icon-edit);
}

.jp-EllipsesIcon {
  background-image: var(--jp-icon-ellipses);
}

.jp-ErrorIcon {
  background-image: var(--jp-icon-error);
}

.jp-ExpandAllIcon {
  background-image: var(--jp-icon-expand-all);
}

.jp-ExtensionIcon {
  background-image: var(--jp-icon-extension);
}

.jp-FastForwardIcon {
  background-image: var(--jp-icon-fast-forward);
}

.jp-FileIcon {
  background-image: var(--jp-icon-file);
}

.jp-FileUploadIcon {
  background-image: var(--jp-icon-file-upload);
}

.jp-FilterDotIcon {
  background-image: var(--jp-icon-filter-dot);
}

.jp-FilterIcon {
  background-image: var(--jp-icon-filter);
}

.jp-FilterListIcon {
  background-image: var(--jp-icon-filter-list);
}

.jp-FolderFavoriteIcon {
  background-image: var(--jp-icon-folder-favorite);
}

.jp-FolderIcon {
  background-image: var(--jp-icon-folder);
}

.jp-HomeIcon {
  background-image: var(--jp-icon-home);
}

.jp-Html5Icon {
  background-image: var(--jp-icon-html5);
}

.jp-ImageIcon {
  background-image: var(--jp-icon-image);
}

.jp-InfoIcon {
  background-image: var(--jp-icon-info);
}

.jp-InspectorIcon {
  background-image: var(--jp-icon-inspector);
}

.jp-JsonIcon {
  background-image: var(--jp-icon-json);
}

.jp-JuliaIcon {
  background-image: var(--jp-icon-julia);
}

.jp-JupyterFaviconIcon {
  background-image: var(--jp-icon-jupyter-favicon);
}

.jp-JupyterIcon {
  background-image: var(--jp-icon-jupyter);
}

.jp-JupyterlabWordmarkIcon {
  background-image: var(--jp-icon-jupyterlab-wordmark);
}

.jp-KernelIcon {
  background-image: var(--jp-icon-kernel);
}

.jp-KeyboardIcon {
  background-image: var(--jp-icon-keyboard);
}

.jp-LaunchIcon {
  background-image: var(--jp-icon-launch);
}

.jp-LauncherIcon {
  background-image: var(--jp-icon-launcher);
}

.jp-LineFormIcon {
  background-image: var(--jp-icon-line-form);
}

.jp-LinkIcon {
  background-image: var(--jp-icon-link);
}

.jp-ListIcon {
  background-image: var(--jp-icon-list);
}

.jp-MarkdownIcon {
  background-image: var(--jp-icon-markdown);
}

.jp-MoveDownIcon {
  background-image: var(--jp-icon-move-down);
}

.jp-MoveUpIcon {
  background-image: var(--jp-icon-move-up);
}

.jp-NewFolderIcon {
  background-image: var(--jp-icon-new-folder);
}

.jp-NotTrustedIcon {
  background-image: var(--jp-icon-not-trusted);
}

.jp-NotebookIcon {
  background-image: var(--jp-icon-notebook);
}

.jp-NumberingIcon {
  background-image: var(--jp-icon-numbering);
}

.jp-OfflineBoltIcon {
  background-image: var(--jp-icon-offline-bolt);
}

.jp-PaletteIcon {
  background-image: var(--jp-icon-palette);
}

.jp-PasteIcon {
  background-image: var(--jp-icon-paste);
}

.jp-PdfIcon {
  background-image: var(--jp-icon-pdf);
}

.jp-PythonIcon {
  background-image: var(--jp-icon-python);
}

.jp-RKernelIcon {
  background-image: var(--jp-icon-r-kernel);
}

.jp-ReactIcon {
  background-image: var(--jp-icon-react);
}

.jp-RedoIcon {
  background-image: var(--jp-icon-redo);
}

.jp-RefreshIcon {
  background-image: var(--jp-icon-refresh);
}

.jp-RegexIcon {
  background-image: var(--jp-icon-regex);
}

.jp-RunIcon {
  background-image: var(--jp-icon-run);
}

.jp-RunningIcon {
  background-image: var(--jp-icon-running);
}

.jp-SaveIcon {
  background-image: var(--jp-icon-save);
}

.jp-SearchIcon {
  background-image: var(--jp-icon-search);
}

.jp-SettingsIcon {
  background-image: var(--jp-icon-settings);
}

.jp-ShareIcon {
  background-image: var(--jp-icon-share);
}

.jp-SpreadsheetIcon {
  background-image: var(--jp-icon-spreadsheet);
}

.jp-StopIcon {
  background-image: var(--jp-icon-stop);
}

.jp-TabIcon {
  background-image: var(--jp-icon-tab);
}

.jp-TableRowsIcon {
  background-image: var(--jp-icon-table-rows);
}

.jp-TagIcon {
  background-image: var(--jp-icon-tag);
}

.jp-TerminalIcon {
  background-image: var(--jp-icon-terminal);
}

.jp-TextEditorIcon {
  background-image: var(--jp-icon-text-editor);
}

.jp-TocIcon {
  background-image: var(--jp-icon-toc);
}

.jp-TreeViewIcon {
  background-image: var(--jp-icon-tree-view);
}

.jp-TrustedIcon {
  background-image: var(--jp-icon-trusted);
}

.jp-UndoIcon {
  background-image: var(--jp-icon-undo);
}

.jp-UserIcon {
  background-image: var(--jp-icon-user);
}

.jp-UsersIcon {
  background-image: var(--jp-icon-users);
}

.jp-VegaIcon {
  background-image: var(--jp-icon-vega);
}

.jp-WordIcon {
  background-image: var(--jp-icon-word);
}

.jp-YamlIcon {
  background-image: var(--jp-icon-yaml);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

.jp-Icon,
.jp-MaterialIcon {
  background-position: center;
  background-repeat: no-repeat;
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-cover {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

/**
 * (DEPRECATED) Support for specific CSS icon sizes
 */

.jp-Icon-16 {
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-18 {
  background-size: 18px;
  min-width: 18px;
  min-height: 18px;
}

.jp-Icon-20 {
  background-size: 20px;
  min-width: 20px;
  min-height: 20px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.lm-TabBar .lm-TabBar-addButton {
  align-items: center;
  display: flex;
  padding: 4px;
  padding-bottom: 5px;
  margin-right: 1px;
  background-color: var(--jp-layout-color2);
}

.lm-TabBar .lm-TabBar-addButton:hover {
  background-color: var(--jp-layout-color1);
}

.lm-DockPanel-tabBar .lm-TabBar-tab {
  width: var(--jp-private-horizontal-tab-width);
}

.lm-DockPanel-tabBar .lm-TabBar-content {
  flex: unset;
}

.lm-DockPanel-tabBar[data-orientation='horizontal'] {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for icons as inline SVG HTMLElements
 */

/* recolor the primary elements of an icon */
.jp-icon0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-accent0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-accent1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-accent2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-accent3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-accent4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-accent0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-accent1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-accent2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-accent3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-accent4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-none[fill] {
  fill: none;
}

.jp-icon-none[stroke] {
  stroke: none;
}

/* brand icon colors. Same for light and dark */
.jp-icon-brand0[fill] {
  fill: var(--jp-brand-color0);
}

.jp-icon-brand1[fill] {
  fill: var(--jp-brand-color1);
}

.jp-icon-brand2[fill] {
  fill: var(--jp-brand-color2);
}

.jp-icon-brand3[fill] {
  fill: var(--jp-brand-color3);
}

.jp-icon-brand4[fill] {
  fill: var(--jp-brand-color4);
}

.jp-icon-brand0[stroke] {
  stroke: var(--jp-brand-color0);
}

.jp-icon-brand1[stroke] {
  stroke: var(--jp-brand-color1);
}

.jp-icon-brand2[stroke] {
  stroke: var(--jp-brand-color2);
}

.jp-icon-brand3[stroke] {
  stroke: var(--jp-brand-color3);
}

.jp-icon-brand4[stroke] {
  stroke: var(--jp-brand-color4);
}

/* warn icon colors. Same for light and dark */
.jp-icon-warn0[fill] {
  fill: var(--jp-warn-color0);
}

.jp-icon-warn1[fill] {
  fill: var(--jp-warn-color1);
}

.jp-icon-warn2[fill] {
  fill: var(--jp-warn-color2);
}

.jp-icon-warn3[fill] {
  fill: var(--jp-warn-color3);
}

.jp-icon-warn0[stroke] {
  stroke: var(--jp-warn-color0);
}

.jp-icon-warn1[stroke] {
  stroke: var(--jp-warn-color1);
}

.jp-icon-warn2[stroke] {
  stroke: var(--jp-warn-color2);
}

.jp-icon-warn3[stroke] {
  stroke: var(--jp-warn-color3);
}

/* icon colors that contrast well with each other and most backgrounds */
.jp-icon-contrast0[fill] {
  fill: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[fill] {
  fill: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[fill] {
  fill: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[fill] {
  fill: var(--jp-icon-contrast-color3);
}

.jp-icon-contrast0[stroke] {
  stroke: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[stroke] {
  stroke: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[stroke] {
  stroke: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[stroke] {
  stroke: var(--jp-icon-contrast-color3);
}

.jp-icon-dot[fill] {
  fill: var(--jp-warn-color0);
}

.jp-jupyter-icon-color[fill] {
  fill: var(--jp-jupyter-icon-color, var(--jp-warn-color0));
}

.jp-notebook-icon-color[fill] {
  fill: var(--jp-notebook-icon-color, var(--jp-warn-color0));
}

.jp-json-icon-color[fill] {
  fill: var(--jp-json-icon-color, var(--jp-warn-color1));
}

.jp-console-icon-color[fill] {
  fill: var(--jp-console-icon-color, white);
}

.jp-console-icon-background-color[fill] {
  fill: var(--jp-console-icon-background-color, var(--jp-brand-color1));
}

.jp-terminal-icon-color[fill] {
  fill: var(--jp-terminal-icon-color, var(--jp-layout-color2));
}

.jp-terminal-icon-background-color[fill] {
  fill: var(
    --jp-terminal-icon-background-color,
    var(--jp-inverse-layout-color2)
  );
}

.jp-text-editor-icon-color[fill] {
  fill: var(--jp-text-editor-icon-color, var(--jp-inverse-layout-color3));
}

.jp-inspector-icon-color[fill] {
  fill: var(--jp-inspector-icon-color, var(--jp-inverse-layout-color3));
}

/* CSS for icons in selected filebrowser listing items */
.jp-DirListing-item.jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

.jp-DirListing-item.jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* stylelint-disable selector-max-class, selector-max-compound-selectors */

/**
* TODO: come up with non css-hack solution for showing the busy icon on top
*  of the close icon
* CSS for complex behavior of close icon of tabs in the main area tabbar
*/
.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon3[fill] {
  fill: none;
}

.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: var(--jp-inverse-layout-color3);
}

/* stylelint-enable selector-max-class, selector-max-compound-selectors */

/* CSS for icons in status bar */
#jp-main-statusbar .jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

#jp-main-statusbar .jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* special handling for splash icon CSS. While the theme CSS reloads during
   splash, the splash icon can loose theming. To prevent that, we set a
   default for its color variable */
:root {
  --jp-warn-color0: var(--md-orange-700);
}

/* not sure what to do with this one, used in filebrowser listing */
.jp-DragIcon {
  margin-right: 4px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for alt colors for icons as inline SVG HTMLElements
 */

/* alt recolor the primary elements of an icon */
.jp-icon-alt .jp-icon0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-alt .jp-icon0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* alt recolor the accent elements of an icon */
.jp-icon-alt .jp-icon-accent0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-alt .jp-icon-accent0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-icon-hoverShow:not(:hover) .jp-icon-hoverShow-content {
  display: none !important;
}

/**
 * Support for hover colors for icons as inline SVG HTMLElements
 */

/**
 * regular colors
 */

/* recolor the primary elements of an icon */
.jp-icon-hover :hover .jp-icon0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-hover :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-hover :hover .jp-icon-none-hover[fill] {
  fill: none;
}

.jp-icon-hover :hover .jp-icon-none-hover[stroke] {
  stroke: none;
}

/**
 * inverse colors
 */

/* inverse recolor the primary elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* inverse recolor the accent elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-IFrame {
  width: 100%;
  height: 100%;
}

.jp-IFrame > iframe {
  border: none;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-IFrame {
  position: relative;
}

body.lm-mod-override-cursor .jp-IFrame::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-HoverBox {
  position: fixed;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FormGroup-content fieldset {
  border: none;
  padding: 0;
  min-width: 0;
  width: 100%;
}

/* stylelint-disable selector-max-type */

.jp-FormGroup-content fieldset .jp-inputFieldWrapper input,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper select,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper textarea {
  font-size: var(--jp-content-font-size2);
  border-color: var(--jp-input-border-color);
  border-style: solid;
  border-radius: var(--jp-border-radius);
  border-width: 1px;
  padding: 6px 8px;
  background: none;
  color: var(--jp-ui-font-color0);
  height: inherit;
}

.jp-FormGroup-content fieldset input[type='checkbox'] {
  position: relative;
  top: 2px;
  margin-left: 0;
}

.jp-FormGroup-content button.jp-mod-styled {
  cursor: pointer;
}

.jp-FormGroup-content .checkbox label {
  cursor: pointer;
  font-size: var(--jp-content-font-size1);
}

.jp-FormGroup-content .jp-root > fieldset > legend {
  display: none;
}

.jp-FormGroup-content .jp-root > fieldset > p {
  display: none;
}

/** copy of `input.jp-mod-styled:focus` style */
.jp-FormGroup-content fieldset input:focus,
.jp-FormGroup-content fieldset select:focus {
  -moz-outline-radius: unset;
  outline: var(--jp-border-width) solid var(--md-blue-500);
  outline-offset: -1px;
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-FormGroup-content fieldset input:hover:not(:focus),
.jp-FormGroup-content fieldset select:hover:not(:focus) {
  background-color: var(--jp-border-color2);
}

/* stylelint-enable selector-max-type */

.jp-FormGroup-content .checkbox .field-description {
  /* Disable default description field for checkbox:
   because other widgets do not have description fields,
   we add descriptions to each widget on the field level.
  */
  display: none;
}

.jp-FormGroup-content #root__description {
  display: none;
}

.jp-FormGroup-content .jp-modifiedIndicator {
  width: 5px;
  background-color: var(--jp-brand-color2);
  margin-top: 0;
  margin-left: calc(var(--jp-private-settingeditor-modifier-indent) * -1);
  flex-shrink: 0;
}

.jp-FormGroup-content .jp-modifiedIndicator.jp-errorIndicator {
  background-color: var(--jp-error-color0);
  margin-right: 0.5em;
}

/* RJSF ARRAY style */

.jp-arrayFieldWrapper legend {
  font-size: var(--jp-content-font-size2);
  color: var(--jp-ui-font-color0);
  flex-basis: 100%;
  padding: 4px 0;
  font-weight: var(--jp-content-heading-font-weight);
  border-bottom: 1px solid var(--jp-border-color2);
}

.jp-arrayFieldWrapper .field-description {
  padding: 4px 0;
  white-space: pre-wrap;
}

.jp-arrayFieldWrapper .array-item {
  width: 100%;
  border: 1px solid var(--jp-border-color2);
  border-radius: 4px;
  margin: 4px;
}

.jp-ArrayOperations {
  display: flex;
  margin-left: 8px;
}

.jp-ArrayOperationsButton {
  margin: 2px;
}

.jp-ArrayOperationsButton .jp-icon3[fill] {
  fill: var(--jp-ui-font-color0);
}

button.jp-ArrayOperationsButton.jp-mod-styled:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* RJSF form validation error */

.jp-FormGroup-content .validationErrors {
  color: var(--jp-error-color0);
}

/* Hide panel level error as duplicated the field level error */
.jp-FormGroup-content .panel.errors {
  display: none;
}

/* RJSF normal content (settings-editor) */

.jp-FormGroup-contentNormal {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-FormGroup-contentItem {
  margin-left: 7px;
  color: var(--jp-ui-font-color0);
}

.jp-FormGroup-contentNormal .jp-FormGroup-description {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-default {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-fieldLabel {
  font-size: var(--jp-content-font-size1);
  font-weight: normal;
  min-width: 120px;
}

.jp-FormGroup-contentNormal fieldset:not(:first-child) {
  margin-left: 7px;
}

.jp-FormGroup-contentNormal .field-array-of-string .array-item {
  /* Display `jp-ArrayOperations` buttons side-by-side with content except
    for small screens where flex-wrap will place them one below the other.
  */
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-objectFieldWrapper .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

/* RJSF compact content (metadata-form) */

.jp-FormGroup-content.jp-FormGroup-contentCompact {
  width: 100%;
}

.jp-FormGroup-contentCompact .form-group {
  display: flex;
  padding: 0.5em 0.2em 0.5em 0;
}

.jp-FormGroup-contentCompact
  .jp-FormGroup-compactTitle
  .jp-FormGroup-description {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color2);
}

.jp-FormGroup-contentCompact .jp-FormGroup-fieldLabel {
  padding-bottom: 0.3em;
}

.jp-FormGroup-contentCompact .jp-inputFieldWrapper .form-control {
  width: 100%;
  box-sizing: border-box;
}

.jp-FormGroup-contentCompact .jp-arrayFieldWrapper .jp-FormGroup-compactTitle {
  padding-bottom: 7px;
}

.jp-FormGroup-contentCompact
  .jp-objectFieldWrapper
  .jp-objectFieldWrapper
  .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

.jp-FormGroup-contentCompact ul.error-detail {
  margin-block-start: 0.5em;
  margin-block-end: 0.5em;
  padding-inline-start: 1em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-SidePanel {
  display: flex;
  flex-direction: column;
  min-width: var(--jp-sidebar-min-width);
  overflow-y: auto;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  font-size: var(--jp-ui-font-size1);
}

.jp-SidePanel-header {
  flex: 0 0 auto;
  display: flex;
  border-bottom: var(--jp-border-width) solid var(--jp-border-color2);
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin: 0;
  padding: 2px;
  text-transform: uppercase;
}

.jp-SidePanel-toolbar {
  flex: 0 0 auto;
}

.jp-SidePanel-content {
  flex: 1 1 auto;
}

.jp-SidePanel-toolbar,
.jp-AccordionPanel-toolbar {
  height: var(--jp-private-toolbar-height);
}

.jp-SidePanel-toolbar.jp-Toolbar-micro {
  display: none;
}

.lm-AccordionPanel .jp-AccordionPanel-title {
  box-sizing: border-box;
  line-height: 25px;
  margin: 0;
  display: flex;
  align-items: center;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  font-size: var(--jp-ui-font-size0);
}

.jp-AccordionPanel-title {
  cursor: pointer;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  text-transform: uppercase;
}

.lm-AccordionPanel[data-orientation='horizontal'] > .jp-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleLabel {
  user-select: none;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleCollapser {
  transform: rotate(-90deg);
  margin: auto 0;
  height: 16px;
}

.jp-AccordionPanel-title.lm-mod-expanded .lm-AccordionPanel-titleCollapser {
  transform: rotate(0deg);
}

.lm-AccordionPanel .jp-AccordionPanel-toolbar {
  background: none;
  box-shadow: none;
  border: none;
  margin-left: auto;
}

.lm-AccordionPanel .lm-SplitPanel-handle:hover {
  background: var(--jp-layout-color3);
}

.jp-text-truncated {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Spinner {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-layout-color0);
  outline: none;
}

.jp-SpinnerContent {
  font-size: 10px;
  margin: 50px auto;
  text-indent: -9999em;
  width: 3em;
  height: 3em;
  border-radius: 50%;
  background: var(--jp-brand-color3);
  background: linear-gradient(
    to right,
    #f37626 10%,
    rgba(255, 255, 255, 0) 42%
  );
  position: relative;
  animation: load3 1s infinite linear, fadeIn 1s;
}

.jp-SpinnerContent::before {
  width: 50%;
  height: 50%;
  background: #f37626;
  border-radius: 100% 0 0;
  position: absolute;
  top: 0;
  left: 0;
  content: '';
}

.jp-SpinnerContent::after {
  background: var(--jp-layout-color0);
  width: 75%;
  height: 75%;
  border-radius: 50%;
  content: '';
  margin: auto;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes load3 {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

button.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: none;
  box-sizing: border-box;
  text-align: center;
  line-height: 32px;
  height: 32px;
  padding: 0 12px;
  letter-spacing: 0.8px;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input.jp-mod-styled {
  background: var(--jp-input-background);
  height: 28px;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color1);
  padding-left: 7px;
  padding-right: 7px;
  font-size: var(--jp-ui-font-size2);
  color: var(--jp-ui-font-color0);
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input[type='checkbox'].jp-mod-styled {
  appearance: checkbox;
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  height: auto;
}

input.jp-mod-styled:focus {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-select-wrapper {
  display: flex;
  position: relative;
  flex-direction: column;
  padding: 1px;
  background-color: var(--jp-layout-color1);
  box-sizing: border-box;
  margin-bottom: 12px;
}

.jp-select-wrapper:not(.multiple) {
  height: 28px;
}

.jp-select-wrapper.jp-mod-focused select.jp-mod-styled {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-input-active-background);
}

select.jp-mod-styled:hover {
  cursor: pointer;
  color: var(--jp-ui-font-color0);
  background-color: var(--jp-input-hover-background);
  box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.5);
}

select.jp-mod-styled {
  flex: 1 1 auto;
  width: 100%;
  font-size: var(--jp-ui-font-size2);
  background: var(--jp-input-background);
  color: var(--jp-ui-font-color0);
  padding: 0 25px 0 8px;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

select.jp-mod-styled:not([multiple]) {
  height: 32px;
}

select.jp-mod-styled[multiple] {
  max-height: 200px;
  overflow-y: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-switch {
  display: flex;
  align-items: center;
  padding-left: 4px;
  padding-right: 4px;
  font-size: var(--jp-ui-font-size1);
  background-color: transparent;
  color: var(--jp-ui-font-color1);
  border: none;
  height: 20px;
}

.jp-switch:hover {
  background-color: var(--jp-layout-color2);
}

.jp-switch-label {
  margin-right: 5px;
  font-family: var(--jp-ui-font-family);
}

.jp-switch-track {
  cursor: pointer;
  background-color: var(--jp-switch-color, var(--jp-border-color1));
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 34px;
  height: 16px;
  width: 35px;
  position: relative;
}

.jp-switch-track::before {
  content: '';
  position: absolute;
  height: 10px;
  width: 10px;
  margin: 3px;
  left: 0;
  background-color: var(--jp-ui-inverse-font-color1);
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 50%;
}

.jp-switch[aria-checked='true'] .jp-switch-track {
  background-color: var(--jp-switch-true-position-color, var(--jp-warn-color0));
}

.jp-switch[aria-checked='true'] .jp-switch-track::before {
  /* track width (35) - margins (3 + 3) - thumb width (10) */
  left: 19px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toolbar-height: calc(
    28px + var(--jp-border-width)
  ); /* leave 28px for content */
}

.jp-Toolbar {
  color: var(--jp-ui-font-color1);
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: 2px;
  z-index: 8;
  overflow-x: hidden;
}

/* Toolbar items */

.jp-Toolbar > .jp-Toolbar-item.jp-Toolbar-spacer {
  flex-grow: 1;
  flex-shrink: 1;
}

.jp-Toolbar-item.jp-Toolbar-kernelStatus {
  display: inline-block;
  width: 32px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 16px;
}

.jp-Toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  display: flex;
  padding-left: 1px;
  padding-right: 1px;
  font-size: var(--jp-ui-font-size1);
  line-height: var(--jp-private-toolbar-height);
  height: 100%;
}

/* Toolbar buttons */

/* This is the div we use to wrap the react component into a Widget */
div.jp-ToolbarButton {
  color: transparent;
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0;
  margin: 0;
}

button.jp-ToolbarButtonComponent {
  background: var(--jp-layout-color1);
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0 6px;
  margin: 0;
  height: 24px;
  border-radius: var(--jp-border-radius);
  display: flex;
  align-items: center;
  text-align: center;
  font-size: 14px;
  min-width: unset;
  min-height: unset;
}

button.jp-ToolbarButtonComponent:disabled {
  opacity: 0.4;
}

button.jp-ToolbarButtonComponent > span {
  padding: 0;
  flex: 0 0 auto;
}

button.jp-ToolbarButtonComponent .jp-ToolbarButtonComponent-label {
  font-size: var(--jp-ui-font-size1);
  line-height: 100%;
  padding-left: 2px;
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar.jp-Toolbar-micro {
  padding: 0;
  min-height: 0;
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar {
  border: none;
  box-shadow: none;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-WindowedPanel-outer {
  position: relative;
  overflow-y: auto;
}

.jp-WindowedPanel-inner {
  position: relative;
}

.jp-WindowedPanel-window {
  position: absolute;
  left: 0;
  right: 0;
  overflow: visible;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* Sibling imports */

body {
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
}

/* Disable native link decoration styles everywhere outside of dialog boxes */
a {
  text-decoration: unset;
  color: unset;
}

a:hover {
  text-decoration: unset;
  color: unset;
}

/* Accessibility for links inside dialog box text */
.jp-Dialog-content a {
  text-decoration: revert;
  color: var(--jp-content-link-color);
}

.jp-Dialog-content a:hover {
  text-decoration: revert;
}

/* Styles for ui-components */
.jp-Button {
  color: var(--jp-ui-font-color2);
  border-radius: var(--jp-border-radius);
  padding: 0 12px;
  font-size: var(--jp-ui-font-size1);

  /* Copy from blueprint 3 */
  display: inline-flex;
  flex-direction: row;
  border: none;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  text-align: left;
  vertical-align: middle;
  min-height: 30px;
  min-width: 30px;
}

.jp-Button:disabled {
  cursor: not-allowed;
}

.jp-Button:empty {
  padding: 0 !important;
}

.jp-Button.jp-mod-small {
  min-height: 24px;
  min-width: 24px;
  font-size: 12px;
  padding: 0 7px;
}

/* Use our own theme for hover styles */
.jp-Button.jp-mod-minimal:hover {
  background-color: var(--jp-layout-color2);
}

.jp-Button.jp-mod-minimal {
  background: none;
}

.jp-InputGroup {
  display: block;
  position: relative;
}

.jp-InputGroup input {
  box-sizing: border-box;
  border: none;
  border-radius: 0;
  background-color: transparent;
  color: var(--jp-ui-font-color0);
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
  padding-bottom: 0;
  padding-top: 0;
  padding-left: 10px;
  padding-right: 28px;
  position: relative;
  width: 100%;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  font-size: 14px;
  font-weight: 400;
  height: 30px;
  line-height: 30px;
  outline: none;
  vertical-align: middle;
}

.jp-InputGroup input:focus {
  box-shadow: inset 0 0 0 var(--jp-border-width)
      var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-InputGroup input:disabled {
  cursor: not-allowed;
  resize: block;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input:disabled ~ span {
  cursor: not-allowed;
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input::placeholder,
input::placeholder {
  color: var(--jp-ui-font-color2);
}

.jp-InputGroupAction {
  position: absolute;
  bottom: 1px;
  right: 0;
  padding: 6px;
}

.jp-HTMLSelect.jp-DefaultStyle select {
  background-color: initial;
  border: none;
  border-radius: 0;
  box-shadow: none;
  color: var(--jp-ui-font-color0);
  display: block;
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  height: 24px;
  line-height: 14px;
  padding: 0 25px 0 10px;
  text-align: left;
  -moz-appearance: none;
  -webkit-appearance: none;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
  cursor: not-allowed;
  resize: block;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled ~ span {
  cursor: not-allowed;
}

/* Use our own theme for hover and option styles */
/* stylelint-disable-next-line selector-max-type */
.jp-HTMLSelect.jp-DefaultStyle select:hover,
.jp-HTMLSelect.jp-DefaultStyle select > option {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color0);
}

select {
  box-sizing: border-box;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-StatusBar-Widget {
  display: flex;
  align-items: center;
  background: var(--jp-layout-color2);
  min-height: var(--jp-statusbar-height);
  justify-content: space-between;
  padding: 0 10px;
}

.jp-StatusBar-Left {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-StatusBar-Middle {
  display: flex;
  align-items: center;
}

.jp-StatusBar-Right {
  display: flex;
  align-items: center;
  flex-direction: row-reverse;
}

.jp-StatusBar-Item {
  max-height: var(--jp-statusbar-height);
  margin: 0 2px;
  height: var(--jp-statusbar-height);
  white-space: nowrap;
  text-overflow: ellipsis;
  color: var(--jp-ui-font-color1);
  padding: 0 6px;
}

.jp-mod-highlighted:hover {
  background-color: var(--jp-layout-color3);
}

.jp-mod-clicked {
  background-color: var(--jp-brand-color1);
}

.jp-mod-clicked:hover {
  background-color: var(--jp-brand-color0);
}

.jp-mod-clicked .jp-StatusBar-TextItem {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-StatusBar-HoverItem {
  box-shadow: '0px 4px 4px rgba(0, 0, 0, 0.25)';
}

.jp-StatusBar-TextItem {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  line-height: 24px;
  color: var(--jp-ui-font-color1);
}

.jp-StatusBar-GroupItem {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-Statusbar-ProgressCircle svg {
  display: block;
  margin: 0 auto;
  width: 16px;
  height: 24px;
  align-self: normal;
}

.jp-Statusbar-ProgressCircle path {
  fill: var(--jp-inverse-layout-color3);
}

.jp-Statusbar-ProgressBar-progress-bar {
  height: 10px;
  width: 100px;
  border: solid 0.25px var(--jp-brand-color2);
  border-radius: 3px;
  overflow: hidden;
  align-self: center;
}

.jp-Statusbar-ProgressBar-progress-bar > div {
  background-color: var(--jp-brand-color2);
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.2) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.2) 75%,
    transparent 75%,
    transparent
  );
  background-size: 40px 40px;
  float: left;
  width: 0%;
  height: 100%;
  font-size: 12px;
  line-height: 14px;
  color: #fff;
  text-align: center;
  animation: jp-Statusbar-ExecutionTime-progress-bar 2s linear infinite;
}

.jp-Statusbar-ProgressBar-progress-bar p {
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  line-height: 10px;
  width: 100px;
}

@keyframes jp-Statusbar-ExecutionTime-progress-bar {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 40px 40px;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-commandpalette-search-height: 28px;
}

/*-----------------------------------------------------------------------------
| Overall styles
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  padding-bottom: 0;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Modal variant
|----------------------------------------------------------------------------*/

.jp-ModalCommandPalette {
  position: absolute;
  z-index: 10000;
  top: 38px;
  left: 30%;
  margin: 0;
  padding: 4px;
  width: 40%;
  box-shadow: var(--jp-elevation-z4);
  border-radius: 4px;
  background: var(--jp-layout-color0);
}

.jp-ModalCommandPalette .lm-CommandPalette {
  max-height: 40vh;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-close-icon::after {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-header {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-item {
  margin-left: 4px;
  margin-right: 4px;
}

.jp-ModalCommandPalette
  .lm-CommandPalette
  .lm-CommandPalette-item.lm-mod-disabled {
  display: none;
}

/*-----------------------------------------------------------------------------
| Search
|----------------------------------------------------------------------------*/

.lm-CommandPalette-search {
  padding: 4px;
  background-color: var(--jp-layout-color1);
  z-index: 2;
}

.lm-CommandPalette-wrapper {
  overflow: overlay;
  padding: 0 9px;
  background-color: var(--jp-input-active-background);
  height: 30px;
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
}

.lm-CommandPalette.lm-mod-focused .lm-CommandPalette-wrapper {
  box-shadow: inset 0 0 0 1px var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-SearchIconGroup {
  color: white;
  background-color: var(--jp-brand-color1);
  position: absolute;
  top: 4px;
  right: 4px;
  padding: 5px 5px 1px;
}

.jp-SearchIconGroup svg {
  height: 20px;
  width: 20px;
}

.jp-SearchIconGroup .jp-icon3[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-input {
  background: transparent;
  width: calc(100% - 18px);
  float: left;
  border: none;
  outline: none;
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  line-height: var(--jp-private-commandpalette-search-height);
}

.lm-CommandPalette-input::-webkit-input-placeholder,
.lm-CommandPalette-input::-moz-placeholder,
.lm-CommandPalette-input:-ms-input-placeholder {
  color: var(--jp-ui-font-color2);
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Results
|----------------------------------------------------------------------------*/

.lm-CommandPalette-header:first-child {
  margin-top: 0;
}

.lm-CommandPalette-header {
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin-top: 8px;
  padding: 8px 0 8px 12px;
  text-transform: uppercase;
}

.lm-CommandPalette-header.lm-mod-active {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-header > mark {
  background-color: transparent;
  font-weight: bold;
  color: var(--jp-ui-font-color1);
}

.lm-CommandPalette-item {
  padding: 4px 12px 4px 4px;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  font-weight: 400;
  display: flex;
}

.lm-CommandPalette-item.lm-mod-disabled {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item.lm-mod-active {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item.lm-mod-active .lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-inverse-font-color0);
}

.lm-CommandPalette-item.lm-mod-active .jp-icon-selectable[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-item.lm-mod-active:hover:not(.lm-mod-disabled) {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled) {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-itemContent {
  overflow: hidden;
}

.lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.lm-CommandPalette-item.lm-mod-disabled mark {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item .lm-CommandPalette-itemIcon {
  margin: 0 4px 0 0;
  position: relative;
  width: 16px;
  top: 2px;
  flex: 0 0 auto;
}

.lm-CommandPalette-item.lm-mod-disabled .lm-CommandPalette-itemIcon {
  opacity: 0.6;
}

.lm-CommandPalette-item .lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemCaption {
  display: none;
}

.lm-CommandPalette-content {
  background-color: var(--jp-layout-color1);
}

.lm-CommandPalette-content:empty::after {
  content: 'No results';
  margin: auto;
  margin-top: 20px;
  width: 100px;
  display: block;
  font-size: var(--jp-ui-font-size2);
  font-family: var(--jp-ui-font-family);
  font-weight: lighter;
}

.lm-CommandPalette-emptyMessage {
  text-align: center;
  margin-top: 24px;
  line-height: 1.32;
  padding: 0 8px;
  color: var(--jp-content-font-color3);
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Dialog {
  position: absolute;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-dialog-background);
}

.jp-Dialog-content {
  display: flex;
  flex-direction: column;
  margin-left: auto;
  margin-right: auto;
  background: var(--jp-layout-color1);
  padding: 24px 24px 12px;
  min-width: 300px;
  min-height: 150px;
  max-width: 1000px;
  max-height: 500px;
  box-sizing: border-box;
  box-shadow: var(--jp-elevation-z20);
  word-wrap: break-word;
  border-radius: var(--jp-border-radius);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color1);
  resize: both;
}

.jp-Dialog-content.jp-Dialog-content-small {
  max-width: 500px;
}

.jp-Dialog-button {
  overflow: visible;
}

button.jp-Dialog-button:focus {
  outline: 1px solid var(--jp-brand-color1);
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button:focus::-moz-focus-inner {
  border: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus {
  outline: 1px solid var(--jp-accept-color-normal, var(--jp-brand-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus {
  outline: 1px solid var(--jp-warn-color-normal, var(--jp-error-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline: 1px solid var(--jp-reject-color-normal, var(--md-grey-600));
}

button.jp-Dialog-close-button {
  padding: 0;
  height: 100%;
  min-width: unset;
  min-height: unset;
}

.jp-Dialog-header {
  display: flex;
  justify-content: space-between;
  flex: 0 0 auto;
  padding-bottom: 12px;
  font-size: var(--jp-ui-font-size3);
  font-weight: 400;
  color: var(--jp-ui-font-color1);
}

.jp-Dialog-body {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  font-size: var(--jp-ui-font-size1);
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

.jp-Dialog-footer {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  align-items: center;
  flex: 0 0 auto;
  margin-left: -12px;
  margin-right: -12px;
  padding: 12px;
}

.jp-Dialog-checkbox {
  padding-right: 5px;
}

.jp-Dialog-checkbox > input:focus-visible {
  outline: 1px solid var(--jp-input-active-border-color);
  outline-offset: 1px;
}

.jp-Dialog-spacer {
  flex: 1 1 auto;
}

.jp-Dialog-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.jp-Dialog-body > .jp-select-wrapper {
  width: 100%;
}

.jp-Dialog-body > button {
  padding: 0 16px;
}

.jp-Dialog-body > label {
  line-height: 1.4;
  color: var(--jp-ui-font-color0);
}

.jp-Dialog-button.jp-mod-styled:not(:last-child) {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Input-Boolean-Dialog {
  flex-direction: row-reverse;
  align-items: end;
  width: 100%;
}

.jp-Input-Boolean-Dialog > label {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MainAreaWidget > :focus {
  outline: none;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error {
  padding: 6px;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error > pre {
  width: auto;
  padding: 10px;
  background: var(--jp-error-color3);
  border: var(--jp-border-width) solid var(--jp-error-color1);
  border-radius: var(--jp-border-radius);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  white-space: pre-wrap;
  word-wrap: break-word;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/**
 * google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 */
:root {
  --md-red-50: #ffebee;
  --md-red-100: #ffcdd2;
  --md-red-200: #ef9a9a;
  --md-red-300: #e57373;
  --md-red-400: #ef5350;
  --md-red-500: #f44336;
  --md-red-600: #e53935;
  --md-red-700: #d32f2f;
  --md-red-800: #c62828;
  --md-red-900: #b71c1c;
  --md-red-A100: #ff8a80;
  --md-red-A200: #ff5252;
  --md-red-A400: #ff1744;
  --md-red-A700: #d50000;
  --md-pink-50: #fce4ec;
  --md-pink-100: #f8bbd0;
  --md-pink-200: #f48fb1;
  --md-pink-300: #f06292;
  --md-pink-400: #ec407a;
  --md-pink-500: #e91e63;
  --md-pink-600: #d81b60;
  --md-pink-700: #c2185b;
  --md-pink-800: #ad1457;
  --md-pink-900: #880e4f;
  --md-pink-A100: #ff80ab;
  --md-pink-A200: #ff4081;
  --md-pink-A400: #f50057;
  --md-pink-A700: #c51162;
  --md-purple-50: #f3e5f5;
  --md-purple-100: #e1bee7;
  --md-purple-200: #ce93d8;
  --md-purple-300: #ba68c8;
  --md-purple-400: #ab47bc;
  --md-purple-500: #9c27b0;
  --md-purple-600: #8e24aa;
  --md-purple-700: #7b1fa2;
  --md-purple-800: #6a1b9a;
  --md-purple-900: #4a148c;
  --md-purple-A100: #ea80fc;
  --md-purple-A200: #e040fb;
  --md-purple-A400: #d500f9;
  --md-purple-A700: #a0f;
  --md-deep-purple-50: #ede7f6;
  --md-deep-purple-100: #d1c4e9;
  --md-deep-purple-200: #b39ddb;
  --md-deep-purple-300: #9575cd;
  --md-deep-purple-400: #7e57c2;
  --md-deep-purple-500: #673ab7;
  --md-deep-purple-600: #5e35b1;
  --md-deep-purple-700: #512da8;
  --md-deep-purple-800: #4527a0;
  --md-deep-purple-900: #311b92;
  --md-deep-purple-A100: #b388ff;
  --md-deep-purple-A200: #7c4dff;
  --md-deep-purple-A400: #651fff;
  --md-deep-purple-A700: #6200ea;
  --md-indigo-50: #e8eaf6;
  --md-indigo-100: #c5cae9;
  --md-indigo-200: #9fa8da;
  --md-indigo-300: #7986cb;
  --md-indigo-400: #5c6bc0;
  --md-indigo-500: #3f51b5;
  --md-indigo-600: #3949ab;
  --md-indigo-700: #303f9f;
  --md-indigo-800: #283593;
  --md-indigo-900: #1a237e;
  --md-indigo-A100: #8c9eff;
  --md-indigo-A200: #536dfe;
  --md-indigo-A400: #3d5afe;
  --md-indigo-A700: #304ffe;
  --md-blue-50: #e3f2fd;
  --md-blue-100: #bbdefb;
  --md-blue-200: #90caf9;
  --md-blue-300: #64b5f6;
  --md-blue-400: #42a5f5;
  --md-blue-500: #2196f3;
  --md-blue-600: #1e88e5;
  --md-blue-700: #1976d2;
  --md-blue-800: #1565c0;
  --md-blue-900: #0d47a1;
  --md-blue-A100: #82b1ff;
  --md-blue-A200: #448aff;
  --md-blue-A400: #2979ff;
  --md-blue-A700: #2962ff;
  --md-light-blue-50: #e1f5fe;
  --md-light-blue-100: #b3e5fc;
  --md-light-blue-200: #81d4fa;
  --md-light-blue-300: #4fc3f7;
  --md-light-blue-400: #29b6f6;
  --md-light-blue-500: #03a9f4;
  --md-light-blue-600: #039be5;
  --md-light-blue-700: #0288d1;
  --md-light-blue-800: #0277bd;
  --md-light-blue-900: #01579b;
  --md-light-blue-A100: #80d8ff;
  --md-light-blue-A200: #40c4ff;
  --md-light-blue-A400: #00b0ff;
  --md-light-blue-A700: #0091ea;
  --md-cyan-50: #e0f7fa;
  --md-cyan-100: #b2ebf2;
  --md-cyan-200: #80deea;
  --md-cyan-300: #4dd0e1;
  --md-cyan-400: #26c6da;
  --md-cyan-500: #00bcd4;
  --md-cyan-600: #00acc1;
  --md-cyan-700: #0097a7;
  --md-cyan-800: #00838f;
  --md-cyan-900: #006064;
  --md-cyan-A100: #84ffff;
  --md-cyan-A200: #18ffff;
  --md-cyan-A400: #00e5ff;
  --md-cyan-A700: #00b8d4;
  --md-teal-50: #e0f2f1;
  --md-teal-100: #b2dfdb;
  --md-teal-200: #80cbc4;
  --md-teal-300: #4db6ac;
  --md-teal-400: #26a69a;
  --md-teal-500: #009688;
  --md-teal-600: #00897b;
  --md-teal-700: #00796b;
  --md-teal-800: #00695c;
  --md-teal-900: #004d40;
  --md-teal-A100: #a7ffeb;
  --md-teal-A200: #64ffda;
  --md-teal-A400: #1de9b6;
  --md-teal-A700: #00bfa5;
  --md-green-50: #e8f5e9;
  --md-green-100: #c8e6c9;
  --md-green-200: #a5d6a7;
  --md-green-300: #81c784;
  --md-green-400: #66bb6a;
  --md-green-500: #4caf50;
  --md-green-600: #43a047;
  --md-green-700: #388e3c;
  --md-green-800: #2e7d32;
  --md-green-900: #1b5e20;
  --md-green-A100: #b9f6ca;
  --md-green-A200: #69f0ae;
  --md-green-A400: #00e676;
  --md-green-A700: #00c853;
  --md-light-green-50: #f1f8e9;
  --md-light-green-100: #dcedc8;
  --md-light-green-200: #c5e1a5;
  --md-light-green-300: #aed581;
  --md-light-green-400: #9ccc65;
  --md-light-green-500: #8bc34a;
  --md-light-green-600: #7cb342;
  --md-light-green-700: #689f38;
  --md-light-green-800: #558b2f;
  --md-light-green-900: #33691e;
  --md-light-green-A100: #ccff90;
  --md-light-green-A200: #b2ff59;
  --md-light-green-A400: #76ff03;
  --md-light-green-A700: #64dd17;
  --md-lime-50: #f9fbe7;
  --md-lime-100: #f0f4c3;
  --md-lime-200: #e6ee9c;
  --md-lime-300: #dce775;
  --md-lime-400: #d4e157;
  --md-lime-500: #cddc39;
  --md-lime-600: #c0ca33;
  --md-lime-700: #afb42b;
  --md-lime-800: #9e9d24;
  --md-lime-900: #827717;
  --md-lime-A100: #f4ff81;
  --md-lime-A200: #eeff41;
  --md-lime-A400: #c6ff00;
  --md-lime-A700: #aeea00;
  --md-yellow-50: #fffde7;
  --md-yellow-100: #fff9c4;
  --md-yellow-200: #fff59d;
  --md-yellow-300: #fff176;
  --md-yellow-400: #ffee58;
  --md-yellow-500: #ffeb3b;
  --md-yellow-600: #fdd835;
  --md-yellow-700: #fbc02d;
  --md-yellow-800: #f9a825;
  --md-yellow-900: #f57f17;
  --md-yellow-A100: #ffff8d;
  --md-yellow-A200: #ff0;
  --md-yellow-A400: #ffea00;
  --md-yellow-A700: #ffd600;
  --md-amber-50: #fff8e1;
  --md-amber-100: #ffecb3;
  --md-amber-200: #ffe082;
  --md-amber-300: #ffd54f;
  --md-amber-400: #ffca28;
  --md-amber-500: #ffc107;
  --md-amber-600: #ffb300;
  --md-amber-700: #ffa000;
  --md-amber-800: #ff8f00;
  --md-amber-900: #ff6f00;
  --md-amber-A100: #ffe57f;
  --md-amber-A200: #ffd740;
  --md-amber-A400: #ffc400;
  --md-amber-A700: #ffab00;
  --md-orange-50: #fff3e0;
  --md-orange-100: #ffe0b2;
  --md-orange-200: #ffcc80;
  --md-orange-300: #ffb74d;
  --md-orange-400: #ffa726;
  --md-orange-500: #ff9800;
  --md-orange-600: #fb8c00;
  --md-orange-700: #f57c00;
  --md-orange-800: #ef6c00;
  --md-orange-900: #e65100;
  --md-orange-A100: #ffd180;
  --md-orange-A200: #ffab40;
  --md-orange-A400: #ff9100;
  --md-orange-A700: #ff6d00;
  --md-deep-orange-50: #fbe9e7;
  --md-deep-orange-100: #ffccbc;
  --md-deep-orange-200: #ffab91;
  --md-deep-orange-300: #ff8a65;
  --md-deep-orange-400: #ff7043;
  --md-deep-orange-500: #ff5722;
  --md-deep-orange-600: #f4511e;
  --md-deep-orange-700: #e64a19;
  --md-deep-orange-800: #d84315;
  --md-deep-orange-900: #bf360c;
  --md-deep-orange-A100: #ff9e80;
  --md-deep-orange-A200: #ff6e40;
  --md-deep-orange-A400: #ff3d00;
  --md-deep-orange-A700: #dd2c00;
  --md-brown-50: #efebe9;
  --md-brown-100: #d7ccc8;
  --md-brown-200: #bcaaa4;
  --md-brown-300: #a1887f;
  --md-brown-400: #8d6e63;
  --md-brown-500: #795548;
  --md-brown-600: #6d4c41;
  --md-brown-700: #5d4037;
  --md-brown-800: #4e342e;
  --md-brown-900: #3e2723;
  --md-grey-50: #fafafa;
  --md-grey-100: #f5f5f5;
  --md-grey-200: #eee;
  --md-grey-300: #e0e0e0;
  --md-grey-400: #bdbdbd;
  --md-grey-500: #9e9e9e;
  --md-grey-600: #757575;
  --md-grey-700: #616161;
  --md-grey-800: #424242;
  --md-grey-900: #212121;
  --md-blue-grey-50: #eceff1;
  --md-blue-grey-100: #cfd8dc;
  --md-blue-grey-200: #b0bec5;
  --md-blue-grey-300: #90a4ae;
  --md-blue-grey-400: #78909c;
  --md-blue-grey-500: #607d8b;
  --md-blue-grey-600: #546e7a;
  --md-blue-grey-700: #455a64;
  --md-blue-grey-800: #37474f;
  --md-blue-grey-900: #263238;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| RenderedText
|----------------------------------------------------------------------------*/

:root {
  /* This is the padding value to fill the gaps between lines containing spans with background color. */
  --jp-private-code-span-padding: calc(
    (var(--jp-code-line-height) - 1) * var(--jp-code-font-size) / 2
  );
}

.jp-RenderedText {
  text-align: left;
  padding-left: var(--jp-code-padding);
  line-height: var(--jp-code-line-height);
  font-family: var(--jp-code-font-family);
}

.jp-RenderedText pre,
.jp-RenderedJavaScript pre,
.jp-RenderedHTMLCommon pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
  border: none;
  margin: 0;
  padding: 0;
}

.jp-RenderedText pre a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* console foregrounds and backgrounds */
.jp-RenderedText pre .ansi-black-fg {
  color: #3e424d;
}

.jp-RenderedText pre .ansi-red-fg {
  color: #e75c58;
}

.jp-RenderedText pre .ansi-green-fg {
  color: #00a250;
}

.jp-RenderedText pre .ansi-yellow-fg {
  color: #ddb62b;
}

.jp-RenderedText pre .ansi-blue-fg {
  color: #208ffb;
}

.jp-RenderedText pre .ansi-magenta-fg {
  color: #d160c4;
}

.jp-RenderedText pre .ansi-cyan-fg {
  color: #60c6c8;
}

.jp-RenderedText pre .ansi-white-fg {
  color: #c5c1b4;
}

.jp-RenderedText pre .ansi-black-bg {
  background-color: #3e424d;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-bg {
  background-color: #e75c58;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-bg {
  background-color: #00a250;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-bg {
  background-color: #ddb62b;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-bg {
  background-color: #208ffb;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-bg {
  background-color: #d160c4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-bg {
  background-color: #60c6c8;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-bg {
  background-color: #c5c1b4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-black-intense-fg {
  color: #282c36;
}

.jp-RenderedText pre .ansi-red-intense-fg {
  color: #b22b31;
}

.jp-RenderedText pre .ansi-green-intense-fg {
  color: #007427;
}

.jp-RenderedText pre .ansi-yellow-intense-fg {
  color: #b27d12;
}

.jp-RenderedText pre .ansi-blue-intense-fg {
  color: #0065ca;
}

.jp-RenderedText pre .ansi-magenta-intense-fg {
  color: #a03196;
}

.jp-RenderedText pre .ansi-cyan-intense-fg {
  color: #258f8f;
}

.jp-RenderedText pre .ansi-white-intense-fg {
  color: #a1a6b2;
}

.jp-RenderedText pre .ansi-black-intense-bg {
  background-color: #282c36;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-intense-bg {
  background-color: #b22b31;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-intense-bg {
  background-color: #007427;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-intense-bg {
  background-color: #b27d12;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-intense-bg {
  background-color: #0065ca;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-intense-bg {
  background-color: #a03196;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-intense-bg {
  background-color: #258f8f;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-intense-bg {
  background-color: #a1a6b2;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-default-inverse-fg {
  color: var(--jp-ui-inverse-font-color0);
}

.jp-RenderedText pre .ansi-default-inverse-bg {
  background-color: var(--jp-inverse-layout-color0);
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-bold {
  font-weight: bold;
}

.jp-RenderedText pre .ansi-underline {
  text-decoration: underline;
}

.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] {
  background: var(--jp-rendermime-error-background);
  padding-top: var(--jp-code-padding);
}

/*-----------------------------------------------------------------------------
| RenderedLatex
|----------------------------------------------------------------------------*/

.jp-RenderedLatex {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);
}

/* Left-justify outputs.*/
.jp-OutputArea-output.jp-RenderedLatex {
  padding: var(--jp-code-padding);
  text-align: left;
}

/*-----------------------------------------------------------------------------
| RenderedHTML
|----------------------------------------------------------------------------*/

.jp-RenderedHTMLCommon {
  color: var(--jp-content-font-color1);
  font-family: var(--jp-content-font-family);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);

  /* Give a bit more R padding on Markdown text to keep line lengths reasonable */
  padding-right: 20px;
}

.jp-RenderedHTMLCommon em {
  font-style: italic;
}

.jp-RenderedHTMLCommon strong {
  font-weight: bold;
}

.jp-RenderedHTMLCommon u {
  text-decoration: underline;
}

.jp-RenderedHTMLCommon a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* Headings */

.jp-RenderedHTMLCommon h1,
.jp-RenderedHTMLCommon h2,
.jp-RenderedHTMLCommon h3,
.jp-RenderedHTMLCommon h4,
.jp-RenderedHTMLCommon h5,
.jp-RenderedHTMLCommon h6 {
  line-height: var(--jp-content-heading-line-height);
  font-weight: var(--jp-content-heading-font-weight);
  font-style: normal;
  margin: var(--jp-content-heading-margin-top) 0
    var(--jp-content-heading-margin-bottom) 0;
}

.jp-RenderedHTMLCommon h1:first-child,
.jp-RenderedHTMLCommon h2:first-child,
.jp-RenderedHTMLCommon h3:first-child,
.jp-RenderedHTMLCommon h4:first-child,
.jp-RenderedHTMLCommon h5:first-child,
.jp-RenderedHTMLCommon h6:first-child {
  margin-top: calc(0.5 * var(--jp-content-heading-margin-top));
}

.jp-RenderedHTMLCommon h1:last-child,
.jp-RenderedHTMLCommon h2:last-child,
.jp-RenderedHTMLCommon h3:last-child,
.jp-RenderedHTMLCommon h4:last-child,
.jp-RenderedHTMLCommon h5:last-child,
.jp-RenderedHTMLCommon h6:last-child {
  margin-bottom: calc(0.5 * var(--jp-content-heading-margin-bottom));
}

.jp-RenderedHTMLCommon h1 {
  font-size: var(--jp-content-font-size5);
}

.jp-RenderedHTMLCommon h2 {
  font-size: var(--jp-content-font-size4);
}

.jp-RenderedHTMLCommon h3 {
  font-size: var(--jp-content-font-size3);
}

.jp-RenderedHTMLCommon h4 {
  font-size: var(--jp-content-font-size2);
}

.jp-RenderedHTMLCommon h5 {
  font-size: var(--jp-content-font-size1);
}

.jp-RenderedHTMLCommon h6 {
  font-size: var(--jp-content-font-size0);
}

/* Lists */

/* stylelint-disable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon ul:not(.list-inline),
.jp-RenderedHTMLCommon ol:not(.list-inline) {
  padding-left: 2em;
}

.jp-RenderedHTMLCommon ul {
  list-style: disc;
}

.jp-RenderedHTMLCommon ul ul {
  list-style: square;
}

.jp-RenderedHTMLCommon ul ul ul {
  list-style: circle;
}

.jp-RenderedHTMLCommon ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol ol {
  list-style: upper-alpha;
}

.jp-RenderedHTMLCommon ol ol ol {
  list-style: lower-alpha;
}

.jp-RenderedHTMLCommon ol ol ol ol {
  list-style: lower-roman;
}

.jp-RenderedHTMLCommon ol ol ol ol ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol,
.jp-RenderedHTMLCommon ul {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon ul ul,
.jp-RenderedHTMLCommon ul ol,
.jp-RenderedHTMLCommon ol ul,
.jp-RenderedHTMLCommon ol ol {
  margin-bottom: 0;
}

/* stylelint-enable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon hr {
  color: var(--jp-border-color2);
  background-color: var(--jp-border-color1);
  margin-top: 1em;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon > pre {
  margin: 1.5em 2em;
}

.jp-RenderedHTMLCommon pre,
.jp-RenderedHTMLCommon code {
  border: 0;
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  line-height: var(--jp-code-line-height);
  padding: 0;
  white-space: pre-wrap;
}

.jp-RenderedHTMLCommon :not(pre) > code {
  background-color: var(--jp-layout-color2);
  padding: 1px 5px;
}

/* Tables */

.jp-RenderedHTMLCommon table {
  border-collapse: collapse;
  border-spacing: 0;
  border: none;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  table-layout: fixed;
  margin-left: auto;
  margin-bottom: 1em;
  margin-right: auto;
}

.jp-RenderedHTMLCommon thead {
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  vertical-align: bottom;
}

.jp-RenderedHTMLCommon td,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon tr {
  vertical-align: middle;
  padding: 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}

.jp-RenderedMarkdown.jp-RenderedHTMLCommon td,
.jp-RenderedMarkdown.jp-RenderedHTMLCommon th {
  max-width: none;
}

:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon td,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon th,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon tr {
  text-align: right;
}

.jp-RenderedHTMLCommon th {
  font-weight: bold;
}

.jp-RenderedHTMLCommon tbody tr:nth-child(odd) {
  background: var(--jp-layout-color0);
}

.jp-RenderedHTMLCommon tbody tr:nth-child(even) {
  background: var(--jp-rendermime-table-row-background);
}

.jp-RenderedHTMLCommon tbody tr:hover {
  background: var(--jp-rendermime-table-row-hover-background);
}

.jp-RenderedHTMLCommon p {
  text-align: left;
  margin: 0;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon img {
  -moz-force-broken-image-icon: 1;
}

/* Restrict to direct children as other images could be nested in other content. */
.jp-RenderedHTMLCommon > img {
  display: block;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: 1em;
}

/* Change color behind transparent images if they need it... */
[data-jp-theme-light='false'] .jp-RenderedImage img.jp-needs-light-background {
  background-color: var(--jp-inverse-layout-color1);
}

[data-jp-theme-light='true'] .jp-RenderedImage img.jp-needs-dark-background {
  background-color: var(--jp-inverse-layout-color1);
}

.jp-RenderedHTMLCommon img,
.jp-RenderedImage img,
.jp-RenderedHTMLCommon svg,
.jp-RenderedSVG svg {
  max-width: 100%;
  height: auto;
}

.jp-RenderedHTMLCommon img.jp-mod-unconfined,
.jp-RenderedImage img.jp-mod-unconfined,
.jp-RenderedHTMLCommon svg.jp-mod-unconfined,
.jp-RenderedSVG svg.jp-mod-unconfined {
  max-width: none;
}

.jp-RenderedHTMLCommon .alert {
  padding: var(--jp-notebook-padding);
  border: var(--jp-border-width) solid transparent;
  border-radius: var(--jp-border-radius);
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon .alert-info {
  color: var(--jp-info-color0);
  background-color: var(--jp-info-color3);
  border-color: var(--jp-info-color2);
}

.jp-RenderedHTMLCommon .alert-info hr {
  border-color: var(--jp-info-color3);
}

.jp-RenderedHTMLCommon .alert-info > p:last-child,
.jp-RenderedHTMLCommon .alert-info > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-warning {
  color: var(--jp-warn-color0);
  background-color: var(--jp-warn-color3);
  border-color: var(--jp-warn-color2);
}

.jp-RenderedHTMLCommon .alert-warning hr {
  border-color: var(--jp-warn-color3);
}

.jp-RenderedHTMLCommon .alert-warning > p:last-child,
.jp-RenderedHTMLCommon .alert-warning > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-success {
  color: var(--jp-success-color0);
  background-color: var(--jp-success-color3);
  border-color: var(--jp-success-color2);
}

.jp-RenderedHTMLCommon .alert-success hr {
  border-color: var(--jp-success-color3);
}

.jp-RenderedHTMLCommon .alert-success > p:last-child,
.jp-RenderedHTMLCommon .alert-success > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-danger {
  color: var(--jp-error-color0);
  background-color: var(--jp-error-color3);
  border-color: var(--jp-error-color2);
}

.jp-RenderedHTMLCommon .alert-danger hr {
  border-color: var(--jp-error-color3);
}

.jp-RenderedHTMLCommon .alert-danger > p:last-child,
.jp-RenderedHTMLCommon .alert-danger > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon blockquote {
  margin: 1em 2em;
  padding: 0 1em;
  border-left: 5px solid var(--jp-border-color2);
}

a.jp-InternalAnchorLink {
  visibility: hidden;
  margin-left: 8px;
  color: var(--md-blue-800);
}

h1:hover .jp-InternalAnchorLink,
h2:hover .jp-InternalAnchorLink,
h3:hover .jp-InternalAnchorLink,
h4:hover .jp-InternalAnchorLink,
h5:hover .jp-InternalAnchorLink,
h6:hover .jp-InternalAnchorLink {
  visibility: visible;
}

.jp-RenderedHTMLCommon kbd {
  background-color: var(--jp-rendermime-table-row-background);
  border: 1px solid var(--jp-border-color0);
  border-bottom-color: var(--jp-border-color2);
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  display: inline-block;
  font-size: var(--jp-ui-font-size0);
  line-height: 1em;
  padding: 0.2em 0.5em;
}

/* Most direct children of .jp-RenderedHTMLCommon have a margin-bottom of 1.0.
 * At the bottom of cells this is a bit too much as there is also spacing
 * between cells. Going all the way to 0 gets too tight between markdown and
 * code cells.
 */
.jp-RenderedHTMLCommon > *:last-child {
  margin-bottom: 0.5em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-cursor-backdrop {
  position: fixed;
  width: 200px;
  height: 200px;
  margin-top: -100px;
  margin-left: -100px;
  will-change: transform;
  z-index: 100;
}

.lm-mod-drag-image {
  will-change: transform;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-lineFormSearch {
  padding: 4px 12px;
  background-color: var(--jp-layout-color2);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
  font-size: var(--jp-ui-font-size1);
}

.jp-lineFormCaption {
  font-size: var(--jp-ui-font-size0);
  line-height: var(--jp-ui-font-size1);
  margin-top: 4px;
  color: var(--jp-ui-font-color0);
}

.jp-baseLineForm {
  border: none;
  border-radius: 0;
  position: absolute;
  background-size: 16px;
  background-repeat: no-repeat;
  background-position: center;
  outline: none;
}

.jp-lineFormButtonContainer {
  top: 4px;
  right: 8px;
  height: 24px;
  padding: 0 12px;
  width: 12px;
}

.jp-lineFormButtonIcon {
  top: 0;
  right: 0;
  background-color: var(--jp-brand-color1);
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 4px 6px;
}

.jp-lineFormButton {
  top: 0;
  right: 0;
  background-color: transparent;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}

.jp-lineFormWrapper {
  overflow: hidden;
  padding: 0 8px;
  border: 1px solid var(--jp-border-color0);
  background-color: var(--jp-input-active-background);
  height: 22px;
}

.jp-lineFormWrapperFocusWithin {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-lineFormInput {
  background: transparent;
  width: 200px;
  height: 100%;
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  line-height: 28px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-JSONEditor {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.jp-JSONEditor-host {
  flex: 1 1 auto;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  background: var(--jp-layout-color0);
  min-height: 50px;
  padding: 1px;
}

.jp-JSONEditor.jp-mod-error .jp-JSONEditor-host {
  border-color: red;
  outline-color: red;
}

.jp-JSONEditor-header {
  display: flex;
  flex: 1 0 auto;
  padding: 0 0 0 12px;
}

.jp-JSONEditor-header label {
  flex: 0 0 auto;
}

.jp-JSONEditor-commitButton {
  height: 16px;
  width: 16px;
  background-size: 18px;
  background-repeat: no-repeat;
  background-position: center;
}

.jp-JSONEditor-host.jp-mod-focused {
  background-color: var(--jp-input-active-background);
  border: 1px solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

.jp-Editor.jp-mod-dropTarget {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/
.jp-DocumentSearch-input {
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  font-size: var(--jp-ui-font-size1);
  background-color: var(--jp-layout-color0);
  font-family: var(--jp-ui-font-family);
  padding: 2px 1px;
  resize: none;
}

.jp-DocumentSearch-overlay {
  position: absolute;
  background-color: var(--jp-toolbar-background);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  border-left: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  top: 0;
  right: 0;
  z-index: 7;
  min-width: 405px;
  padding: 2px;
  font-size: var(--jp-ui-font-size1);

  --jp-private-document-search-button-height: 20px;
}

.jp-DocumentSearch-overlay button {
  background-color: var(--jp-toolbar-background);
  outline: 0;
}

.jp-DocumentSearch-overlay button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-overlay button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-overlay-row {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
}

.jp-DocumentSearch-button-content {
  display: inline-block;
  cursor: pointer;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-button-content svg {
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-input-wrapper {
  border: var(--jp-border-width) solid var(--jp-border-color0);
  display: flex;
  background-color: var(--jp-layout-color0);
  margin: 2px;
}

.jp-DocumentSearch-input-wrapper:focus-within {
  border-color: var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper {
  all: initial;
  overflow: hidden;
  display: inline-block;
  border: none;
  box-sizing: border-box;
}

.jp-DocumentSearch-toggle-wrapper {
  width: 14px;
  height: 14px;
}

.jp-DocumentSearch-button-wrapper {
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
}

.jp-DocumentSearch-toggle-wrapper:focus,
.jp-DocumentSearch-button-wrapper:focus {
  outline: var(--jp-border-width) solid
    var(--jp-cell-editor-active-border-color);
  outline-offset: -1px;
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper,
.jp-DocumentSearch-button-content:focus {
  outline: none;
}

.jp-DocumentSearch-toggle-placeholder {
  width: 5px;
}

.jp-DocumentSearch-input-button::before {
  display: block;
  padding-top: 100%;
}

.jp-DocumentSearch-input-button-off {
  opacity: var(--jp-search-toggle-off-opacity);
}

.jp-DocumentSearch-input-button-off:hover {
  opacity: var(--jp-search-toggle-hover-opacity);
}

.jp-DocumentSearch-input-button-on {
  opacity: var(--jp-search-toggle-on-opacity);
}

.jp-DocumentSearch-index-counter {
  padding-left: 10px;
  padding-right: 10px;
  user-select: none;
  min-width: 35px;
  display: inline-block;
}

.jp-DocumentSearch-up-down-wrapper {
  display: inline-block;
  padding-right: 2px;
  margin-left: auto;
  white-space: nowrap;
}

.jp-DocumentSearch-spacer {
  margin-left: auto;
}

.jp-DocumentSearch-up-down-wrapper button {
  outline: 0;
  border: none;
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
  vertical-align: middle;
  margin: 1px 5px 2px;
}

.jp-DocumentSearch-up-down-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-up-down-button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-filter-button {
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-filter-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled:hover {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-search-options {
  padding: 0 8px;
  margin-left: 3px;
  width: 100%;
  display: grid;
  justify-content: start;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  justify-items: stretch;
}

.jp-DocumentSearch-search-filter-disabled {
  color: var(--jp-ui-font-color2);
}

.jp-DocumentSearch-search-filter {
  display: flex;
  align-items: center;
  user-select: none;
}

.jp-DocumentSearch-regex-error {
  color: var(--jp-error-color0);
}

.jp-DocumentSearch-replace-button-wrapper {
  overflow: hidden;
  display: inline-block;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color0);
  margin: auto 2px;
  padding: 1px 4px;
  height: calc(var(--jp-private-document-search-button-height) + 2px);
}

.jp-DocumentSearch-replace-button-wrapper:focus {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-replace-button {
  display: inline-block;
  text-align: center;
  cursor: pointer;
  box-sizing: border-box;
  color: var(--jp-ui-font-color1);

  /* height - 2 * (padding of wrapper) */
  line-height: calc(var(--jp-private-document-search-button-height) - 2px);
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-replace-button:focus {
  outline: none;
}

.jp-DocumentSearch-replace-wrapper-class {
  margin-left: 14px;
  display: flex;
}

.jp-DocumentSearch-replace-toggle {
  border: none;
  background-color: var(--jp-toolbar-background);
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-replace-toggle:hover {
  background-color: var(--jp-layout-color2);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.cm-editor {
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  border: 0;
  border-radius: 0;
  height: auto;

  /* Changed to auto to autogrow */
}

.cm-editor pre {
  padding: 0 var(--jp-code-padding);
}

.jp-CodeMirrorEditor[data-type='inline'] .cm-dialog {
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
}

.jp-CodeMirrorEditor {
  cursor: text;
}

/* When zoomed out 67% and 33% on a screen of 1440 width x 900 height */
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width1) solid
      var(--jp-editor-cursor-color);
  }
}

/* When zoomed out less than 33% */
@media screen and (min-width: 4320px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width2) solid
      var(--jp-editor-cursor-color);
  }
}

.cm-editor.jp-mod-readOnly .cm-cursor {
  display: none;
}

.jp-CollaboratorCursor {
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: none;
  border-bottom: 3px solid;
  background-clip: content-box;
  margin-left: -5px;
  margin-right: -5px;
}

.cm-searching,
.cm-searching span {
  /* `.cm-searching span`: we need to override syntax highlighting */
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.cm-searching::selection,
.cm-searching span::selection {
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.jp-current-match > .cm-searching,
.jp-current-match > .cm-searching span,
.cm-searching > .jp-current-match,
.cm-searching > .jp-current-match span {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.jp-current-match > .cm-searching::selection,
.cm-searching > .jp-current-match::selection,
.jp-current-match > .cm-searching span::selection {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.cm-trailingspace {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAsElEQVQIHQGlAFr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7+r3zKmT0/+pk9P/7+r3zAAAAAAAAAAABAAAAAAAAAAA6OPzM+/q9wAAAAAA6OPzMwAAAAAAAAAAAgAAAAAAAAAAGR8NiRQaCgAZIA0AGR8NiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQyoYJ/SY80UAAAAASUVORK5CYII=);
  background-position: center left;
  background-repeat: repeat-x;
}

.jp-CollaboratorCursor-hover {
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  color: white;
  border-radius: 3px;
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 1px;
  padding-bottom: 1px;
  text-align: center;
  font-size: var(--jp-ui-font-size1);
  white-space: nowrap;
}

.jp-CodeMirror-ruler {
  border-left: 1px dashed var(--jp-border-color2);
}

/* Styles for shared cursors (remote cursor locations and selected ranges) */
.jp-CodeMirrorEditor .cm-ySelectionCaret {
  position: relative;
  border-left: 1px solid black;
  margin-left: -1px;
  margin-right: -1px;
  box-sizing: border-box;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret > .cm-ySelectionInfo {
  white-space: nowrap;
  position: absolute;
  top: -1.15em;
  padding-bottom: 0.05em;
  left: -1px;
  font-size: 0.95em;
  font-family: var(--jp-ui-font-family);
  font-weight: bold;
  line-height: normal;
  user-select: none;
  color: white;
  padding-left: 2px;
  padding-right: 2px;
  z-index: 101;
  transition: opacity 0.3s ease-in-out;
}

.jp-CodeMirrorEditor .cm-ySelectionInfo {
  transition-delay: 0.7s;
  opacity: 0;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret:hover > .cm-ySelectionInfo {
  opacity: 1;
  transition-delay: 0s;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MimeDocument {
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-filebrowser-button-height: 28px;
  --jp-private-filebrowser-button-width: 48px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FileBrowser .jp-SidePanel-content {
  display: flex;
  flex-direction: column;
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  flex-wrap: wrap;
  row-gap: 12px;
  border-bottom: none;
  height: auto;
  margin: 8px 12px 0;
  box-shadow: none;
  padding: 0;
  justify-content: flex-start;
}

.jp-FileBrowser-Panel {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
}

.jp-BreadCrumbs {
  flex: 0 0 auto;
  margin: 8px 12px;
}

.jp-BreadCrumbs-item {
  margin: 0 2px;
  padding: 0 2px;
  border-radius: var(--jp-border-radius);
  cursor: pointer;
}

.jp-BreadCrumbs-item:hover {
  background-color: var(--jp-layout-color2);
}

.jp-BreadCrumbs-item:first-child {
  margin-left: 0;
}

.jp-BreadCrumbs-item.jp-mod-dropTarget {
  background-color: var(--jp-brand-color2);
  opacity: 0.7;
}

/*-----------------------------------------------------------------------------
| Buttons
|----------------------------------------------------------------------------*/

.jp-FileBrowser-toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  padding-left: 0;
  padding-right: 2px;
  align-items: center;
  height: unset;
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item .jp-ToolbarButtonComponent {
  width: 40px;
}

/*-----------------------------------------------------------------------------
| Other styles
|----------------------------------------------------------------------------*/

.jp-FileDialog.jp-mod-conflict input {
  color: var(--jp-error-color1);
}

.jp-FileDialog .jp-new-name-title {
  margin-top: 12px;
}

.jp-LastModified-hidden {
  display: none;
}

.jp-FileSize-hidden {
  display: none;
}

.jp-FileBrowser .lm-AccordionPanel > h3:first-child {
  display: none;
}

/*-----------------------------------------------------------------------------
| DirListing
|----------------------------------------------------------------------------*/

.jp-DirListing {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  outline: 0;
}

.jp-DirListing-header {
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  border-top: var(--jp-border-width) solid var(--jp-border-color2);
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
}

.jp-DirListing-headerItem {
  padding: 4px 12px 2px;
  font-weight: 500;
}

.jp-DirListing-headerItem:hover {
  background: var(--jp-layout-color2);
}

.jp-DirListing-headerItem.jp-id-name {
  flex: 1 0 84px;
}

.jp-DirListing-headerItem.jp-id-modified {
  flex: 0 0 112px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-DirListing-headerItem.jp-id-filesize {
  flex: 0 0 75px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-id-narrow {
  display: none;
  flex: 0 0 5px;
  padding: 4px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
  color: var(--jp-border-color2);
}

.jp-DirListing-narrow .jp-id-narrow {
  display: block;
}

.jp-DirListing-narrow .jp-id-modified,
.jp-DirListing-narrow .jp-DirListing-itemModified {
  display: none;
}

.jp-DirListing-headerItem.jp-mod-selected {
  font-weight: 600;
}

/* increase specificity to override bundled default */
.jp-DirListing-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  list-style-type: none;
  overflow: auto;
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-content mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.jp-DirListing-content .jp-DirListing-item.jp-mod-selected mark {
  color: var(--jp-ui-inverse-font-color0);
}

/* Style the directory listing content when a user drops a file to upload */
.jp-DirListing.jp-mod-native-drop .jp-DirListing-content {
  outline: 5px dashed rgba(128, 128, 128, 0.5);
  outline-offset: -10px;
  cursor: copy;
}

.jp-DirListing-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-DirListing-checkboxWrapper {
  /* Increases hit area of checkbox. */
  padding: 4px;
}

.jp-DirListing-header
  .jp-DirListing-checkboxWrapper
  + .jp-DirListing-headerItem {
  padding-left: 4px;
}

.jp-DirListing-content .jp-DirListing-checkboxWrapper {
  position: relative;
  left: -4px;
  margin: -4px 0 -4px -8px;
}

.jp-DirListing-checkboxWrapper.jp-mod-visible {
  visibility: visible;
}

/* For devices that support hovering, hide checkboxes until hovered, selected...
*/
@media (hover: hover) {
  .jp-DirListing-checkboxWrapper {
    visibility: hidden;
  }

  .jp-DirListing-item:hover .jp-DirListing-checkboxWrapper,
  .jp-DirListing-item.jp-mod-selected .jp-DirListing-checkboxWrapper {
    visibility: visible;
  }
}

.jp-DirListing-item[data-is-dot] {
  opacity: 75%;
}

.jp-DirListing-item.jp-mod-selected {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.jp-DirListing-item.jp-mod-dropTarget {
  background: var(--jp-brand-color3);
}

.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: var(--jp-layout-color2);
}

.jp-DirListing-itemIcon {
  flex: 0 0 20px;
  margin-right: 4px;
}

.jp-DirListing-itemText {
  flex: 1 0 64px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.jp-DirListing-itemText:focus {
  outline-width: 2px;
  outline-color: var(--jp-inverse-layout-color1);
  outline-style: solid;
  outline-offset: 1px;
}

.jp-DirListing-item.jp-mod-selected .jp-DirListing-itemText:focus {
  outline-color: var(--jp-layout-color1);
}

.jp-DirListing-itemModified {
  flex: 0 0 125px;
  text-align: right;
}

.jp-DirListing-itemFileSize {
  flex: 0 0 90px;
  text-align: right;
}

.jp-DirListing-editor {
  flex: 1 0 64px;
  outline: none;
  border: none;
  color: var(--jp-ui-font-color1);
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon::before {
  color: var(--jp-success-color1);
  content: '\25CF';
  font-size: 8px;
  position: absolute;
  left: -8px;
}

.jp-DirListing-item.jp-mod-running.jp-mod-selected
  .jp-DirListing-itemIcon::before {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-DirListing-item.lm-mod-drag-image,
.jp-DirListing-item.jp-mod-selected.lm-mod-drag-image {
  font-size: var(--jp-ui-font-size1);
  padding-left: 4px;
  margin-left: 4px;
  width: 160px;
  background-color: var(--jp-ui-inverse-font-color2);
  box-shadow: var(--jp-elevation-z2);
  border-radius: 0;
  color: var(--jp-ui-font-color1);
  transform: translateX(-40%) translateY(-58%);
}

.jp-Document {
  min-width: 120px;
  min-height: 120px;
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Main OutputArea
| OutputArea has a list of Outputs
|----------------------------------------------------------------------------*/

.jp-OutputArea {
  overflow-y: auto;
}

.jp-OutputArea-child {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-OutputPrompt {
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-outprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
  opacity: var(--jp-cell-prompt-opacity);

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-OutputArea-prompt {
  display: table-cell;
  vertical-align: top;
}

.jp-OutputArea-output {
  display: table-cell;
  width: 100%;
  height: auto;
  overflow: auto;
  user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
}

.jp-OutputArea .jp-RenderedText {
  padding-left: 1ch;
}

/**
 * Prompt overlay.
 */

.jp-OutputArea-promptOverlay {
  position: absolute;
  top: 0;
  width: var(--jp-cell-prompt-width);
  height: 100%;
  opacity: 0.5;
}

.jp-OutputArea-promptOverlay:hover {
  background: var(--jp-layout-color2);
  box-shadow: inset 0 0 1px var(--jp-inverse-layout-color0);
  cursor: zoom-out;
}

.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay:hover {
  cursor: zoom-in;
}

/**
 * Isolated output.
 */
.jp-OutputArea-output.jp-mod-isolated {
  width: 100%;
  display: block;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated {
  position: relative;
}

body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/* pre */

.jp-OutputArea-output pre {
  border: none;
  margin: 0;
  padding: 0;
  overflow-x: auto;
  overflow-y: auto;
  word-break: break-all;
  word-wrap: break-word;
  white-space: pre-wrap;
}

/* tables */

.jp-OutputArea-output.jp-RenderedHTMLCommon table {
  margin-left: 0;
  margin-right: 0;
}

/* description lists */

.jp-OutputArea-output dl,
.jp-OutputArea-output dt,
.jp-OutputArea-output dd {
  display: block;
}

.jp-OutputArea-output dl {
  width: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dt {
  font-weight: bold;
  float: left;
  width: 20%;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dd {
  float: left;
  width: 80%;
  padding: 0;
  margin: 0;
}

.jp-TrimmedOutputs pre {
  background: var(--jp-layout-color3);
  font-size: calc(var(--jp-code-font-size) * 1.4);
  text-align: center;
  text-transform: uppercase;
}

/* Hide the gutter in case of
 *  - nested output areas (e.g. in the case of output widgets)
 *  - mirrored output areas
 */
.jp-OutputArea .jp-OutputArea .jp-OutputArea-prompt {
  display: none;
}

/* Hide empty lines in the output area, for instance due to cleared widgets */
.jp-OutputArea-prompt:empty {
  padding: 0;
  border: 0;
}

/*-----------------------------------------------------------------------------
| executeResult is added to any Output-result for the display of the object
| returned by a cell
|----------------------------------------------------------------------------*/

.jp-OutputArea-output.jp-OutputArea-executeResult {
  margin-left: 0;
  width: 100%;
}

/* Text output with the Out[] prompt needs a top padding to match the
 * alignment of the Out[] prompt itself.
 */
.jp-OutputArea-executeResult .jp-RenderedText.jp-OutputArea-output {
  padding-top: var(--jp-code-padding);
  border-top: var(--jp-border-width) solid transparent;
}

/*-----------------------------------------------------------------------------
| The Stdin output
|----------------------------------------------------------------------------*/

.jp-Stdin-prompt {
  color: var(--jp-content-font-color0);
  padding-right: var(--jp-code-padding);
  vertical-align: baseline;
  flex: 0 0 auto;
}

.jp-Stdin-input {
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  color: inherit;
  background-color: inherit;
  width: 42%;
  min-width: 200px;

  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;

  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0 0.25em;
  margin: 0 0.25em;
  flex: 0 0 70%;
}

.jp-Stdin-input::placeholder {
  opacity: 0;
}

.jp-Stdin-input:focus {
  box-shadow: none;
}

.jp-Stdin-input:focus::placeholder {
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Output Area View
|----------------------------------------------------------------------------*/

.jp-LinkedOutputView .jp-OutputArea {
  height: 100%;
  display: block;
}

.jp-LinkedOutputView .jp-OutputArea-output:only-child {
  height: 100%;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

@media print {
  .jp-OutputArea-child {
    break-inside: avoid-page;
  }
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-OutputPrompt {
    display: table-row;
    text-align: left;
  }

  .jp-OutputArea-child .jp-OutputArea-output {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }
}

/* Trimmed outputs warning */
.jp-TrimmedOutputs > a {
  margin: 10px;
  text-decoration: none;
  cursor: pointer;
}

.jp-TrimmedOutputs > a:hover {
  text-decoration: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Table of Contents
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toc-active-width: 4px;
}

.jp-TableOfContents {
  display: flex;
  flex-direction: column;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  height: 100%;
}

.jp-TableOfContents-placeholder {
  text-align: center;
}

.jp-TableOfContents-placeholderContent {
  color: var(--jp-content-font-color2);
  padding: 8px;
}

.jp-TableOfContents-placeholderContent > h3 {
  margin-bottom: var(--jp-content-heading-margin-bottom);
}

.jp-TableOfContents .jp-SidePanel-content {
  overflow-y: auto;
}

.jp-TableOfContents-tree {
  margin: 4px;
}

.jp-TableOfContents ol {
  list-style-type: none;
}

/* stylelint-disable-next-line selector-max-type */
.jp-TableOfContents li > ol {
  /* Align left border with triangle icon center */
  padding-left: 11px;
}

.jp-TableOfContents-content {
  /* left margin for the active heading indicator */
  margin: 0 0 0 var(--jp-private-toc-active-width);
  padding: 0;
  background-color: var(--jp-layout-color1);
}

.jp-tocItem {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-tocItem-heading {
  display: flex;
  cursor: pointer;
}

.jp-tocItem-heading:hover {
  background-color: var(--jp-layout-color2);
}

.jp-tocItem-content {
  display: block;
  padding: 4px 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow-x: hidden;
}

.jp-tocItem-collapser {
  height: 20px;
  margin: 2px 2px 0;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
}

.jp-tocItem-collapser:hover {
  background-color: var(--jp-layout-color3);
}

/* Active heading indicator */

.jp-tocItem-heading::before {
  content: ' ';
  background: transparent;
  width: var(--jp-private-toc-active-width);
  height: 24px;
  position: absolute;
  left: 0;
  border-radius: var(--jp-border-radius);
}

.jp-tocItem-heading.jp-tocItem-active::before {
  background-color: var(--jp-brand-color1);
}

.jp-tocItem-heading:hover.jp-tocItem-active::before {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapser {
  flex: 0 0 var(--jp-cell-collapser-width);
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
  border-radius: var(--jp-border-radius);
  opacity: 1;
}

.jp-Collapser-child {
  display: block;
  width: 100%;
  box-sizing: border-box;

  /* height: 100% doesn't work because the height of its parent is computed from content */
  position: absolute;
  top: 0;
  bottom: 0;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Hiding collapsers in print mode.

Note: input and output wrappers have "display: block" propery in print mode.
*/

@media print {
  .jp-Collapser {
    display: none;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Header/Footer
|----------------------------------------------------------------------------*/

/* Hidden by zero height by default */
.jp-CellHeader,
.jp-CellFooter {
  height: 0;
  width: 100%;
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Input
|----------------------------------------------------------------------------*/

/* All input areas */
.jp-InputArea {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-InputArea-editor {
  display: table-cell;
  overflow: hidden;
  vertical-align: top;

  /* This is the non-active, default styling */
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  background: var(--jp-cell-editor-background);
}

.jp-InputPrompt {
  display: table-cell;
  vertical-align: top;
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-inprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  opacity: var(--jp-cell-prompt-opacity);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-InputArea-editor {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }

  .jp-InputPrompt {
    display: table-row;
    text-align: left;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Placeholder {
  display: table;
  table-layout: fixed;
  width: 100%;
}

.jp-Placeholder-prompt {
  display: table-cell;
  box-sizing: border-box;
}

.jp-Placeholder-content {
  display: table-cell;
  padding: 4px 6px;
  border: 1px solid transparent;
  border-radius: 0;
  background: none;
  box-sizing: border-box;
  cursor: pointer;
}

.jp-Placeholder-contentContainer {
  display: flex;
}

.jp-Placeholder-content:hover,
.jp-InputPlaceholder > .jp-Placeholder-content:hover {
  border-color: var(--jp-layout-color3);
}

.jp-Placeholder-content .jp-MoreHorizIcon {
  width: 32px;
  height: 16px;
  border: 1px solid transparent;
  border-radius: var(--jp-border-radius);
}

.jp-Placeholder-content .jp-MoreHorizIcon:hover {
  border: 1px solid var(--jp-border-color1);
  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.25);
  background-color: var(--jp-layout-color0);
}

.jp-PlaceholderText {
  white-space: nowrap;
  overflow-x: hidden;
  color: var(--jp-inverse-layout-color3);
  font-family: var(--jp-code-font-family);
}

.jp-InputPlaceholder > .jp-Placeholder-content {
  border-color: var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-cell-scrolling-output-offset: 5px;
}

/*-----------------------------------------------------------------------------
| Cell
|----------------------------------------------------------------------------*/

.jp-Cell {
  padding: var(--jp-cell-padding);
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Common input/output
|----------------------------------------------------------------------------*/

.jp-Cell-inputWrapper,
.jp-Cell-outputWrapper {
  display: flex;
  flex-direction: row;
  padding: 0;
  margin: 0;

  /* Added to reveal the box-shadow on the input and output collapsers. */
  overflow: visible;
}

/* Only input/output areas inside cells */
.jp-Cell-inputArea,
.jp-Cell-outputArea {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Collapser
|----------------------------------------------------------------------------*/

/* Make the output collapser disappear when there is not output, but do so
 * in a manner that leaves it in the layout and preserves its width.
 */
.jp-Cell.jp-mod-noOutputs .jp-Cell-outputCollapser {
  border: none !important;
  background: transparent !important;
}

.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputCollapser {
  min-height: var(--jp-cell-collapser-min-height);
}

/*-----------------------------------------------------------------------------
| Output
|----------------------------------------------------------------------------*/

/* Put a space between input and output when there IS output */
.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 5px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea {
  overflow-y: auto;
  max-height: 24em;
  margin-left: var(--jp-private-cell-scrolling-output-offset);
  resize: vertical;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea[style*='height'] {
  max-height: unset;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea::after {
  content: ' ';
  box-shadow: inset 0 0 6px 2px rgb(0 0 0 / 30%);
  width: 100%;
  height: 100%;
  position: sticky;
  bottom: 0;
  top: 0;
  margin-top: -50%;
  float: left;
  display: block;
  pointer-events: none;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-child {
  padding-top: 6px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt {
  width: calc(
    var(--jp-cell-prompt-width) - var(--jp-private-cell-scrolling-output-offset)
  );
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay {
  left: calc(-1 * var(--jp-private-cell-scrolling-output-offset));
}

/*-----------------------------------------------------------------------------
| CodeCell
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| MarkdownCell
|----------------------------------------------------------------------------*/

.jp-MarkdownOutput {
  display: table-cell;
  width: 100%;
  margin-top: 0;
  margin-bottom: 0;
  padding-left: var(--jp-code-padding);
}

.jp-MarkdownOutput.jp-RenderedHTMLCommon {
  overflow: auto;
}

/* collapseHeadingButton (show always if hiddenCellsButton is _not_ shown) */
.jp-collapseHeadingButton {
  display: flex;
  min-height: var(--jp-cell-collapser-min-height);
  font-size: var(--jp-code-font-size);
  position: absolute;
  background-color: transparent;
  background-size: 25px;
  background-repeat: no-repeat;
  background-position-x: center;
  background-position-y: top;
  background-image: var(--jp-icon-caret-down);
  right: 0;
  top: 0;
  bottom: 0;
}

.jp-collapseHeadingButton.jp-mod-collapsed {
  background-image: var(--jp-icon-caret-right);
}

/*
 set the container font size to match that of content
 so that the nested collapse buttons have the right size
*/
.jp-MarkdownCell .jp-InputPrompt {
  font-size: var(--jp-content-font-size1);
}

/*
  Align collapseHeadingButton with cell top header
  The font sizes are identical to the ones in packages/rendermime/style/base.css
*/
.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='1'] {
  font-size: var(--jp-content-font-size5);
  background-position-y: calc(0.3 * var(--jp-content-font-size5));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='2'] {
  font-size: var(--jp-content-font-size4);
  background-position-y: calc(0.3 * var(--jp-content-font-size4));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='3'] {
  font-size: var(--jp-content-font-size3);
  background-position-y: calc(0.3 * var(--jp-content-font-size3));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='4'] {
  font-size: var(--jp-content-font-size2);
  background-position-y: calc(0.3 * var(--jp-content-font-size2));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='5'] {
  font-size: var(--jp-content-font-size1);
  background-position-y: top;
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='6'] {
  font-size: var(--jp-content-font-size0);
  background-position-y: top;
}

/* collapseHeadingButton (show only on (hover,active) if hiddenCellsButton is shown) */
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-collapseHeadingButton {
  display: none;
}

.jp-Notebook.jp-mod-showHiddenCellsButton
  :is(.jp-MarkdownCell:hover, .jp-mod-active)
  .jp-collapseHeadingButton {
  display: flex;
}

/* showHiddenCellsButton (only show if jp-mod-showHiddenCellsButton is set, which
is a consequence of the showHiddenCellsButton option in Notebook Settings)*/
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton {
  margin-left: calc(var(--jp-cell-prompt-width) + 2 * var(--jp-code-padding));
  margin-top: var(--jp-code-padding);
  border: 1px solid var(--jp-border-color2);
  background-color: var(--jp-border-color3) !important;
  color: var(--jp-content-font-color0) !important;
  display: flex;
}

.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton:hover {
  background-color: var(--jp-border-color2) !important;
}

.jp-showHiddenCellsButton {
  display: none;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Using block instead of flex to allow the use of the break-inside CSS property for
cell outputs.
*/

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-notebook-toolbar-padding: 2px 5px 2px 2px;
}

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-NotebookPanel-toolbar {
  padding: var(--jp-notebook-toolbar-padding);

  /* disable paint containment from lumino 2.0 default strict CSS containment */
  contain: style size !important;
}

.jp-Toolbar-item.jp-Notebook-toolbarCellType .jp-select-wrapper.jp-mod-focused {
  border: none;
  box-shadow: none;
}

.jp-Notebook-toolbarCellTypeDropdown select {
  height: 24px;
  font-size: var(--jp-ui-font-size1);
  line-height: 14px;
  border-radius: 0;
  display: block;
}

.jp-Notebook-toolbarCellTypeDropdown span {
  top: 5px !important;
}

.jp-Toolbar-responsive-popup {
  position: absolute;
  height: fit-content;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-end;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: var(--jp-notebook-toolbar-padding);
  z-index: 1;
  right: 0;
  top: 0;
}

.jp-Toolbar > .jp-Toolbar-responsive-opener {
  margin-left: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-Notebook-ExecutionIndicator {
  position: relative;
  display: inline-block;
  height: 100%;
  z-index: 9997;
}

.jp-Notebook-ExecutionIndicator-tooltip {
  visibility: hidden;
  height: auto;
  width: max-content;
  width: -moz-max-content;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color1);
  text-align: justify;
  border-radius: 6px;
  padding: 0 5px;
  position: fixed;
  display: table;
}

.jp-Notebook-ExecutionIndicator-tooltip.up {
  transform: translateX(-50%) translateY(-100%) translateY(-32px);
}

.jp-Notebook-ExecutionIndicator-tooltip.down {
  transform: translateX(calc(-100% + 16px)) translateY(5px);
}

.jp-Notebook-ExecutionIndicator-tooltip.hidden {
  display: none;
}

.jp-Notebook-ExecutionIndicator:hover .jp-Notebook-ExecutionIndicator-tooltip {
  visibility: visible;
}

.jp-Notebook-ExecutionIndicator span {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  color: var(--jp-ui-font-color1);
  line-height: 24px;
  display: block;
}

.jp-Notebook-ExecutionIndicator-progress-bar {
  display: flex;
  justify-content: center;
  height: 100%;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*
 * Execution indicator
 */
.jp-tocItem-content::after {
  content: '';

  /* Must be identical to form a circle */
  width: 12px;
  height: 12px;
  background: none;
  border: none;
  position: absolute;
  right: 0;
}

.jp-tocItem-content[data-running='0']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background: none;
}

.jp-tocItem-content[data-running='1']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background-color: var(--jp-inverse-layout-color3);
}

.jp-tocItem-content[data-running='0'],
.jp-tocItem-content[data-running='1'] {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Notebook-footer {
  height: 27px;
  margin-left: calc(
    var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
      var(--jp-cell-padding)
  );
  width: calc(
    100% -
      (
        var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
          var(--jp-cell-padding) + var(--jp-cell-padding)
      )
  );
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  color: var(--jp-ui-font-color3);
  margin-top: 6px;
  background: none;
  cursor: pointer;
}

.jp-Notebook-footer:focus {
  border-color: var(--jp-cell-editor-active-border-color);
}

/* For devices that support hovering, hide footer until hover */
@media (hover: hover) {
  .jp-Notebook-footer {
    opacity: 0;
  }

  .jp-Notebook-footer:focus,
  .jp-Notebook-footer:hover {
    opacity: 1;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Imports
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-side-by-side-output-size: 1fr;
  --jp-side-by-side-resized-cell: var(--jp-side-by-side-output-size);
  --jp-private-notebook-dragImage-width: 304px;
  --jp-private-notebook-dragImage-height: 36px;
  --jp-private-notebook-selected-color: var(--md-blue-400);
  --jp-private-notebook-active-color: var(--md-green-400);
}

/*-----------------------------------------------------------------------------
| Notebook
|----------------------------------------------------------------------------*/

/* stylelint-disable selector-max-class */

.jp-NotebookPanel {
  display: block;
  height: 100%;
}

.jp-NotebookPanel.jp-Document {
  min-width: 240px;
  min-height: 120px;
}

.jp-Notebook {
  padding: var(--jp-notebook-padding);
  outline: none;
  overflow: auto;
  background: var(--jp-layout-color0);
}

.jp-Notebook.jp-mod-scrollPastEnd::after {
  display: block;
  content: '';
  min-height: var(--jp-notebook-scroll-padding);
}

.jp-MainAreaWidget-ContainStrict .jp-Notebook * {
  contain: strict;
}

.jp-Notebook .jp-Cell {
  overflow: visible;
}

.jp-Notebook .jp-Cell .jp-InputPrompt {
  cursor: move;
}

/*-----------------------------------------------------------------------------
| Notebook state related styling
|
| The notebook and cells each have states, here are the possibilities:
|
| - Notebook
|   - Command
|   - Edit
| - Cell
|   - None
|   - Active (only one can be active)
|   - Selected (the cells actions are applied to)
|   - Multiselected (when multiple selected, the cursor)
|   - No outputs
|----------------------------------------------------------------------------*/

/* Command or edit modes */

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-InputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-OutputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

/* cell is active */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser {
  background: var(--jp-brand-color1);
}

/* cell is dirty */
.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt {
  color: var(--jp-warn-color1);
}

.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt::before {
  color: var(--jp-warn-color1);
  content: '•';
}

.jp-Notebook .jp-Cell.jp-mod-active.jp-mod-dirty .jp-Collapser {
  background: var(--jp-warn-color1);
}

/* collapser is hovered */
.jp-Notebook .jp-Cell .jp-Collapser:hover {
  box-shadow: var(--jp-elevation-z2);
  background: var(--jp-brand-color1);
  opacity: var(--jp-cell-collapser-not-active-hover-opacity);
}

/* cell is active and collapser is hovered */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser:hover {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/* Command mode */

.jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-selected {
  background: var(--jp-notebook-multiselected-color);
}

.jp-Notebook.jp-mod-commandMode
  .jp-Cell.jp-mod-active.jp-mod-selected:not(.jp-mod-multiSelected) {
  background: transparent;
}

/* Edit mode */

.jp-Notebook.jp-mod-editMode .jp-Cell.jp-mod-active .jp-InputArea-editor {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-cell-editor-active-background);
}

/*-----------------------------------------------------------------------------
| Notebook drag and drop
|----------------------------------------------------------------------------*/

.jp-Notebook-cell.jp-mod-dropSource {
  opacity: 0.5;
}

.jp-Notebook-cell.jp-mod-dropTarget,
.jp-Notebook.jp-mod-commandMode
  .jp-Notebook-cell.jp-mod-active.jp-mod-selected.jp-mod-dropTarget {
  border-top-color: var(--jp-private-notebook-selected-color);
  border-top-style: solid;
  border-top-width: 2px;
}

.jp-dragImage {
  display: block;
  flex-direction: row;
  width: var(--jp-private-notebook-dragImage-width);
  height: var(--jp-private-notebook-dragImage-height);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
  overflow: visible;
}

.jp-dragImage-singlePrompt {
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

.jp-dragImage .jp-dragImage-content {
  flex: 1 1 auto;
  z-index: 2;
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  line-height: var(--jp-code-line-height);
  padding: var(--jp-code-padding);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background-color);
  color: var(--jp-content-font-color3);
  text-align: left;
  margin: 4px 4px 4px 0;
}

.jp-dragImage .jp-dragImage-prompt {
  flex: 0 0 auto;
  min-width: 36px;
  color: var(--jp-cell-inprompt-font-color);
  padding: var(--jp-code-padding);
  padding-left: 12px;
  font-family: var(--jp-cell-prompt-font-family);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: 1.9;
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
}

.jp-dragImage-multipleBack {
  z-index: -1;
  position: absolute;
  height: 32px;
  width: 300px;
  top: 8px;
  left: 8px;
  background: var(--jp-layout-color2);
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

/*-----------------------------------------------------------------------------
| Cell toolbar
|----------------------------------------------------------------------------*/

.jp-NotebookTools {
  display: block;
  min-width: var(--jp-sidebar-min-width);
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
    * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  overflow: auto;
}

.jp-ActiveCellTool {
  padding: 12px 0;
  display: flex;
}

.jp-ActiveCellTool-Content {
  flex: 1 1 auto;
}

.jp-ActiveCellTool .jp-ActiveCellTool-CellContent {
  background: var(--jp-cell-editor-background);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  min-height: 29px;
}

.jp-ActiveCellTool .jp-InputPrompt {
  min-width: calc(var(--jp-cell-prompt-width) * 0.75);
}

.jp-ActiveCellTool-CellContent > pre {
  padding: 5px 4px;
  margin: 0;
  white-space: normal;
}

.jp-MetadataEditorTool {
  flex-direction: column;
  padding: 12px 0;
}

.jp-RankedPanel > :not(:first-child) {
  margin-top: 12px;
}

.jp-KeySelector select.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: var(--jp-border-width) solid var(--jp-border-color1);
}

.jp-KeySelector label,
.jp-MetadataEditorTool label,
.jp-NumberSetter label {
  line-height: 1.4;
}

.jp-NotebookTools .jp-select-wrapper {
  margin-top: 4px;
  margin-bottom: 0;
}

.jp-NumberSetter input {
  width: 100%;
  margin-top: 4px;
}

.jp-NotebookTools .jp-Collapse {
  margin-top: 16px;
}

/*-----------------------------------------------------------------------------
| Presentation Mode (.jp-mod-presentationMode)
|----------------------------------------------------------------------------*/

.jp-mod-presentationMode .jp-Notebook {
  --jp-content-font-size1: var(--jp-content-presentation-font-size1);
  --jp-code-font-size: var(--jp-code-presentation-font-size);
}

.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-InputPrompt,
.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-OutputPrompt {
  flex: 0 0 110px;
}

/*-----------------------------------------------------------------------------
| Side-by-side Mode (.jp-mod-sideBySide)
|----------------------------------------------------------------------------*/
.jp-mod-sideBySide.jp-Notebook .jp-Notebook-cell {
  margin-top: 3em;
  margin-bottom: 3em;
  margin-left: 5%;
  margin-right: 5%;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell {
  display: grid;
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-output-size)
    );
  grid-template-rows: auto minmax(0, 1fr) auto;
  grid-template-areas:
    'header header header'
    'input handle output'
    'footer footer footer';
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell.jp-mod-resizedCell {
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-resized-cell)
    );
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellHeader {
  grid-area: header;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-inputWrapper {
  grid-area: input;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-outputWrapper {
  /* overwrite the default margin (no vertical separation needed in side by side move */
  margin-top: 0;
  grid-area: output;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellFooter {
  grid-area: footer;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle {
  grid-area: handle;
  user-select: none;
  display: block;
  height: 100%;
  cursor: ew-resize;
  padding: 0 var(--jp-cell-padding);
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle::after {
  content: '';
  display: block;
  background: var(--jp-border-color2);
  height: 100%;
  width: 5px;
}

.jp-mod-sideBySide.jp-Notebook
  .jp-CodeCell.jp-mod-resizedCell
  .jp-CellResizeHandle::after {
  background: var(--jp-border-color0);
}

.jp-CellResizeHandle {
  display: none;
}

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Cell-Placeholder {
  padding-left: 55px;
}

.jp-Cell-Placeholder-wrapper {
  background: #fff;
  border: 1px solid;
  border-color: #e5e6e9 #dfe0e4 #d0d1d5;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  margin: 10px 15px;
}

.jp-Cell-Placeholder-wrapper-inner {
  padding: 15px;
  position: relative;
}

.jp-Cell-Placeholder-wrapper-body {
  background-repeat: repeat;
  background-size: 50% auto;
}

.jp-Cell-Placeholder-wrapper-body div {
  background: #f6f7f8;
  background-image: -webkit-linear-gradient(
    left,
    #f6f7f8 0%,
    #edeef1 20%,
    #f6f7f8 40%,
    #f6f7f8 100%
  );
  background-repeat: no-repeat;
  background-size: 800px 104px;
  height: 104px;
  position: absolute;
  right: 15px;
  left: 15px;
  top: 15px;
}

div.jp-Cell-Placeholder-h1 {
  top: 20px;
  height: 20px;
  left: 15px;
  width: 150px;
}

div.jp-Cell-Placeholder-h2 {
  left: 15px;
  top: 50px;
  height: 10px;
  width: 100px;
}

div.jp-Cell-Placeholder-content-1,
div.jp-Cell-Placeholder-content-2,
div.jp-Cell-Placeholder-content-3 {
  left: 15px;
  right: 15px;
  height: 10px;
}

div.jp-Cell-Placeholder-content-1 {
  top: 100px;
}

div.jp-Cell-Placeholder-content-2 {
  top: 120px;
}

div.jp-Cell-Placeholder-content-3 {
  top: 140px;
}

</style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
The following CSS variables define the main, public API for styling JupyterLab.
These variables should be used by all plugins wherever possible. In other
words, plugins should not define custom colors, sizes, etc unless absolutely
necessary. This enables users to change the visual theme of JupyterLab
by changing these variables.

Many variables appear in an ordered sequence (0,1,2,3). These sequences
are designed to work well together, so for example, `--jp-border-color1` should
be used with `--jp-layout-color1`. The numbers have the following meanings:

* 0: super-primary, reserved for special emphasis
* 1: primary, most important under normal situations
* 2: secondary, next most important under normal situations
* 3: tertiary, next most important under normal situations

Throughout JupyterLab, we are mostly following principles from Google's
Material Design when selecting colors. We are not, however, following
all of MD as it is not optimized for dense, information rich UIs.
*/

:root {
  /* Elevation
   *
   * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here:
   *
   * https://github.com/material-components/material-components-web
   * https://material-components-web.appspot.com/elevation.html
   */

  --jp-shadow-base-lightness: 0;
  --jp-shadow-umbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.2
  );
  --jp-shadow-penumbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.14
  );
  --jp-shadow-ambient-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.12
  );
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0 2px 1px -1px var(--jp-shadow-umbra-color),
    0 1px 1px 0 var(--jp-shadow-penumbra-color),
    0 1px 3px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z2: 0 3px 1px -2px var(--jp-shadow-umbra-color),
    0 2px 2px 0 var(--jp-shadow-penumbra-color),
    0 1px 5px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z4: 0 2px 4px -1px var(--jp-shadow-umbra-color),
    0 4px 5px 0 var(--jp-shadow-penumbra-color),
    0 1px 10px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z6: 0 3px 5px -1px var(--jp-shadow-umbra-color),
    0 6px 10px 0 var(--jp-shadow-penumbra-color),
    0 1px 18px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z8: 0 5px 5px -3px var(--jp-shadow-umbra-color),
    0 8px 10px 1px var(--jp-shadow-penumbra-color),
    0 3px 14px 2px var(--jp-shadow-ambient-color);
  --jp-elevation-z12: 0 7px 8px -4px var(--jp-shadow-umbra-color),
    0 12px 17px 2px var(--jp-shadow-penumbra-color),
    0 5px 22px 4px var(--jp-shadow-ambient-color);
  --jp-elevation-z16: 0 8px 10px -5px var(--jp-shadow-umbra-color),
    0 16px 24px 2px var(--jp-shadow-penumbra-color),
    0 6px 30px 5px var(--jp-shadow-ambient-color);
  --jp-elevation-z20: 0 10px 13px -6px var(--jp-shadow-umbra-color),
    0 20px 31px 3px var(--jp-shadow-penumbra-color),
    0 8px 38px 7px var(--jp-shadow-ambient-color);
  --jp-elevation-z24: 0 11px 15px -7px var(--jp-shadow-umbra-color),
    0 24px 38px 3px var(--jp-shadow-penumbra-color),
    0 9px 46px 8px var(--jp-shadow-ambient-color);

  /* Borders
   *
   * The following variables, specify the visual styling of borders in JupyterLab.
   */

  --jp-border-width: 1px;
  --jp-border-color0: var(--md-grey-400);
  --jp-border-color1: var(--md-grey-400);
  --jp-border-color2: var(--md-grey-300);
  --jp-border-color3: var(--md-grey-200);
  --jp-inverse-border-color: var(--md-grey-600);
  --jp-border-radius: 2px;

  /* UI Fonts
   *
   * The UI font CSS variables are used for the typography all of the JupyterLab
   * user interface elements that are not directly user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-ui-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px; /* Base font size */
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;
  --jp-ui-font-family: system-ui, -apple-system, blinkmacsystemfont, 'Segoe UI',
    helvetica, arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol';

  /*
   * Use these font colors against the corresponding main layout colors.
   * In a light theme, these go from dark to light.
   */

  /* Defaults use Material Design specification */
  --jp-ui-font-color0: rgba(0, 0, 0, 1);
  --jp-ui-font-color1: rgba(0, 0, 0, 0.87);
  --jp-ui-font-color2: rgba(0, 0, 0, 0.54);
  --jp-ui-font-color3: rgba(0, 0, 0, 0.38);

  /*
   * Use these against the brand/accent/warn/error colors.
   * These will typically go from light to darker, in both a dark and light theme.
   */

  --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7);
  --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5);

  /* Content Fonts
   *
   * Content font variables are used for typography of user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-content-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px; /* Base font size */
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-content-presentation-font-size1: 17px;
  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;

  /* Defaults use Material Design specification */
  --jp-content-font-color0: rgba(0, 0, 0, 1);
  --jp-content-font-color1: rgba(0, 0, 0, 0.87);
  --jp-content-font-color2: rgba(0, 0, 0, 0.54);
  --jp-content-font-color3: rgba(0, 0, 0, 0.38);
  --jp-content-link-color: var(--md-blue-900);
  --jp-content-font-family: system-ui, -apple-system, blinkmacsystemfont,
    'Segoe UI', helvetica, arial, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol';

  /*
   * Code Fonts
   *
   * Code font variables are used for typography of code and other monospaces content.
   */

  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.3077; /* 17px for 13px base */
  --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */
  --jp-code-font-family-default: menlo, consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-code-presentation-font-size: 16px;

  /* may need to tweak cursor width if you change font size */
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* Layout
   *
   * The following are the main layout colors use in JupyterLab. In a light
   * theme these would go from light to dark.
   */

  --jp-layout-color0: white;
  --jp-layout-color1: white;
  --jp-layout-color2: var(--md-grey-200);
  --jp-layout-color3: var(--md-grey-400);
  --jp-layout-color4: var(--md-grey-600);

  /* Inverse Layout
   *
   * The following are the inverse layout colors use in JupyterLab. In a light
   * theme these would go from dark to light.
   */

  --jp-inverse-layout-color0: #111;
  --jp-inverse-layout-color1: var(--md-grey-900);
  --jp-inverse-layout-color2: var(--md-grey-800);
  --jp-inverse-layout-color3: var(--md-grey-700);
  --jp-inverse-layout-color4: var(--md-grey-600);

  /* Brand/accent */

  --jp-brand-color0: var(--md-blue-900);
  --jp-brand-color1: var(--md-blue-700);
  --jp-brand-color2: var(--md-blue-300);
  --jp-brand-color3: var(--md-blue-100);
  --jp-brand-color4: var(--md-blue-50);
  --jp-accent-color0: var(--md-green-900);
  --jp-accent-color1: var(--md-green-700);
  --jp-accent-color2: var(--md-green-300);
  --jp-accent-color3: var(--md-green-100);

  /* State colors (warn, error, success, info) */

  --jp-warn-color0: var(--md-orange-900);
  --jp-warn-color1: var(--md-orange-700);
  --jp-warn-color2: var(--md-orange-300);
  --jp-warn-color3: var(--md-orange-100);
  --jp-error-color0: var(--md-red-900);
  --jp-error-color1: var(--md-red-700);
  --jp-error-color2: var(--md-red-300);
  --jp-error-color3: var(--md-red-100);
  --jp-success-color0: var(--md-green-900);
  --jp-success-color1: var(--md-green-700);
  --jp-success-color2: var(--md-green-300);
  --jp-success-color3: var(--md-green-100);
  --jp-info-color0: var(--md-cyan-900);
  --jp-info-color1: var(--md-cyan-700);
  --jp-info-color2: var(--md-cyan-300);
  --jp-info-color3: var(--md-cyan-100);

  /* Cell specific styles */

  --jp-cell-padding: 5px;
  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;
  --jp-cell-editor-background: var(--md-grey-100);
  --jp-cell-editor-border-color: var(--md-grey-300);
  --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-cell-editor-active-background: var(--jp-layout-color0);
  --jp-cell-editor-active-border-color: var(--jp-brand-color1);
  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 0.5;
  --jp-cell-prompt-not-active-font-color: var(--md-grey-700);

  /* A custom blend of MD grey and blue 600
   * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */
  --jp-cell-inprompt-font-color: #307fc1;

  /* A custom blend of MD grey and orange 600
   * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */
  --jp-cell-outprompt-font-color: #bf5b3d;

  /* Notebook specific styles */

  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color1);
  --jp-notebook-multiselected-color: var(--md-blue-50);

  /* The scroll padding is calculated to fill enough space at the bottom of the
  notebook to show one single-line cell (with appropriate padding) at the top
  when the notebook is scrolled all the way to the bottom. We also subtract one
  pixel so that no scrollbar appears if we have just one single-line cell in the
  notebook. This padding is to enable a 'scroll past end' feature in a notebook.
  */
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );

  /* Rendermime styles */

  --jp-rendermime-error-background: #fdd;
  --jp-rendermime-table-row-background: var(--md-grey-100);
  --jp-rendermime-table-row-hover-background: var(--md-light-blue-50);

  /* Dialog specific styles */

  --jp-dialog-background: rgba(0, 0, 0, 0.25);

  /* Console specific styles */

  --jp-console-padding: 10px;

  /* Toolbar specific styles */

  --jp-toolbar-border-color: var(--jp-border-color1);
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: var(--jp-layout-color1);
  --jp-toolbar-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.24);
  --jp-toolbar-header-margin: 4px 4px 0 4px;
  --jp-toolbar-active-background: var(--md-grey-300);

  /* Statusbar specific styles */

  --jp-statusbar-height: 24px;

  /* Input field styles */

  --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-input-active-background: var(--jp-layout-color1);
  --jp-input-hover-background: var(--jp-layout-color1);
  --jp-input-background: var(--md-grey-100);
  --jp-input-border-color: var(--jp-inverse-border-color);
  --jp-input-active-border-color: var(--jp-brand-color1);
  --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3);

  /* General editor styles */

  --jp-editor-selected-background: #d9d9d9;
  --jp-editor-selected-focused-background: #d7d4f0;
  --jp-editor-cursor-color: var(--jp-ui-font-color0);

  /* Code mirror specific styles */

  --jp-mirror-editor-keyword-color: #008000;
  --jp-mirror-editor-atom-color: #88f;
  --jp-mirror-editor-number-color: #080;
  --jp-mirror-editor-def-color: #00f;
  --jp-mirror-editor-variable-color: var(--md-grey-900);
  --jp-mirror-editor-variable-2-color: rgb(0, 54, 109);
  --jp-mirror-editor-variable-3-color: #085;
  --jp-mirror-editor-punctuation-color: #05a;
  --jp-mirror-editor-property-color: #05a;
  --jp-mirror-editor-operator-color: #a2f;
  --jp-mirror-editor-comment-color: #408080;
  --jp-mirror-editor-string-color: #ba2121;
  --jp-mirror-editor-string-2-color: #708;
  --jp-mirror-editor-meta-color: #a2f;
  --jp-mirror-editor-qualifier-color: #555;
  --jp-mirror-editor-builtin-color: #008000;
  --jp-mirror-editor-bracket-color: #997;
  --jp-mirror-editor-tag-color: #170;
  --jp-mirror-editor-attribute-color: #00c;
  --jp-mirror-editor-header-color: blue;
  --jp-mirror-editor-quote-color: #090;
  --jp-mirror-editor-link-color: #00c;
  --jp-mirror-editor-error-color: #f00;
  --jp-mirror-editor-hr-color: #999;

  /*
    RTC user specific colors.
    These colors are used for the cursor, username in the editor,
    and the icon of the user.
  */

  --jp-collaborator-color1: #ffad8e;
  --jp-collaborator-color2: #dac83d;
  --jp-collaborator-color3: #72dd76;
  --jp-collaborator-color4: #00e4d0;
  --jp-collaborator-color5: #45d4ff;
  --jp-collaborator-color6: #e2b1ff;
  --jp-collaborator-color7: #ff9de6;

  /* Vega extension styles */

  --jp-vega-background: white;

  /* Sidebar-related styles */

  --jp-sidebar-min-width: 250px;

  /* Search-related styles */

  --jp-search-toggle-off-opacity: 0.5;
  --jp-search-toggle-hover-opacity: 0.8;
  --jp-search-toggle-on-opacity: 1;
  --jp-search-selected-match-background-color: rgb(245, 200, 0);
  --jp-search-selected-match-color: black;
  --jp-search-unselected-match-background-color: var(
    --jp-inverse-layout-color0
  );
  --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0);

  /* Icon colors that work well with light or dark backgrounds */
  --jp-icon-contrast-color0: var(--md-purple-600);
  --jp-icon-contrast-color1: var(--md-green-600);
  --jp-icon-contrast-color2: var(--md-pink-600);
  --jp-icon-contrast-color3: var(--md-blue-600);

  /* Button colors */
  --jp-accept-color-normal: var(--md-blue-700);
  --jp-accept-color-hover: var(--md-blue-800);
  --jp-accept-color-active: var(--md-blue-900);
  --jp-warn-color-normal: var(--md-red-700);
  --jp-warn-color-hover: var(--md-red-800);
  --jp-warn-color-active: var(--md-red-900);
  --jp-reject-color-normal: var(--md-grey-600);
  --jp-reject-color-hover: var(--md-grey-700);
  --jp-reject-color-active: var(--md-grey-800);

  /* File or activity icons and switch semantic variables */
  --jp-jupyter-icon-color: #f37626;
  --jp-notebook-icon-color: #f37626;
  --jp-json-icon-color: var(--md-orange-700);
  --jp-console-icon-background-color: var(--md-blue-700);
  --jp-console-icon-color: white;
  --jp-terminal-icon-background-color: var(--md-grey-800);
  --jp-terminal-icon-color: var(--md-grey-200);
  --jp-text-editor-icon-color: var(--md-grey-700);
  --jp-inspector-icon-color: var(--md-grey-700);
  --jp-switch-color: var(--md-grey-400);
  --jp-switch-true-position-color: var(--md-orange-900);
}
</style>
<style type="text/css">
/* Force rendering true colors when outputing to pdf */
* {
  -webkit-print-color-adjust: exact;
}

/* Misc */
a.anchor-link {
  display: none;
}

/* Input area styling */
.jp-InputArea {
  overflow: hidden;
}

.jp-InputArea-editor {
  overflow: hidden;
}

.cm-editor.cm-s-jupyter .highlight pre {
/* weird, but --jp-code-padding defined to be 5px but 4px horizontal padding is hardcoded for pre.cm-line */
  padding: var(--jp-code-padding) 4px;
  margin: 0;

  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;

}

.jp-OutputArea-output pre {
  line-height: inherit;
  font-family: inherit;
}

.jp-RenderedText pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
}

/* Hiding the collapser by default */
.jp-Collapser {
  display: none;
}

@page {
    margin: 0.5in; /* Margin for each printed piece of paper */
}

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}
</style>
<!-- Load mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"> </script>
<!-- MathJax configuration -->
<script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
<!-- End of mathjax configuration --><script type="module">
  document.addEventListener("DOMContentLoaded", async () => {
    const diagrams = document.querySelectorAll(".jp-Mermaid > pre.mermaid");
    // do not load mermaidjs if not needed
    if (!diagrams.length) {
      return;
    }
    const mermaid = (await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs")).default;
    const parser = new DOMParser();

    mermaid.initialize({
      maxTextSize: 100000,
      maxEdges: 100000,
      startOnLoad: false,
      fontFamily: window
        .getComputedStyle(document.body)
        .getPropertyValue("--jp-ui-font-family"),
      theme: document.querySelector("body[data-jp-theme-light='true']")
        ? "default"
        : "dark",
    });

    let _nextMermaidId = 0;

    function makeMermaidImage(svg) {
      const img = document.createElement("img");
      const doc = parser.parseFromString(svg, "image/svg+xml");
      const svgEl = doc.querySelector("svg");
      const { maxWidth } = svgEl?.style || {};
      const firstTitle = doc.querySelector("title");
      const firstDesc = doc.querySelector("desc");

      img.setAttribute("src", `data:image/svg+xml,${encodeURIComponent(svg)}`);
      if (maxWidth) {
        img.width = parseInt(maxWidth);
      }
      if (firstTitle) {
        img.setAttribute("alt", firstTitle.textContent);
      }
      if (firstDesc) {
        const caption = document.createElement("figcaption");
        caption.className = "sr-only";
        caption.textContent = firstDesc.textContent;
        return [img, caption];
      }
      return [img];
    }

    async function makeMermaidError(text) {
      let errorMessage = "";
      try {
        await mermaid.parse(text);
      } catch (err) {
        errorMessage = `${err}`;
      }

      const result = document.createElement("details");
      result.className = 'jp-RenderedMermaid-Details';
      const summary = document.createElement("summary");
      summary.className = 'jp-RenderedMermaid-Summary';
      const pre = document.createElement("pre");
      const code = document.createElement("code");
      code.innerText = text;
      pre.appendChild(code);
      summary.appendChild(pre);
      result.appendChild(summary);

      const warning = document.createElement("pre");
      warning.innerText = errorMessage;
      result.appendChild(warning);
      return [result];
    }

    async function renderOneMarmaid(src) {
      const id = `jp-mermaid-${_nextMermaidId++}`;
      const parent = src.parentNode;
      let raw = src.textContent.trim();
      const el = document.createElement("div");
      el.style.visibility = "hidden";
      document.body.appendChild(el);
      let results = null;
      let output = null;
      try {
        let { svg } = await mermaid.render(id, raw, el);
        svg = cleanMermaidSvg(svg);
        results = makeMermaidImage(svg);
        output = document.createElement("figure");
        results.map(output.appendChild, output);
      } catch (err) {
        parent.classList.add("jp-mod-warning");
        results = await makeMermaidError(raw);
        output = results[0];
      } finally {
        el.remove();
      }
      parent.classList.add("jp-RenderedMermaid");
      parent.appendChild(output);
    }


    /**
     * Post-process to ensure mermaid diagrams contain only valid SVG and XHTML.
     */
    function cleanMermaidSvg(svg) {
      return svg.replace(RE_VOID_ELEMENT, replaceVoidElement);
    }


    /**
     * A regular expression for all void elements, which may include attributes and
     * a slash.
     *
     * @see https://developer.mozilla.org/en-US/docs/Glossary/Void_element
     *
     * Of these, only `<br>` is generated by Mermaid in place of `\n`,
     * but _any_ "malformed" tag will break the SVG rendering entirely.
     */
    const RE_VOID_ELEMENT =
      /<\s*(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)\s*([^>]*?)\s*>/gi;

    /**
     * Ensure a void element is closed with a slash, preserving any attributes.
     */
    function replaceVoidElement(match, tag, rest) {
      rest = rest.trim();
      if (!rest.endsWith('/')) {
        rest = `${rest} /`;
      }
      return `<${tag} ${rest}>`;
    }

    void Promise.all([...diagrams].map(renderOneMarmaid));
  });
</script>
<style>
  .jp-Mermaid:not(.jp-RenderedMermaid) {
    display: none;
  }

  .jp-RenderedMermaid {
    overflow: auto;
    display: flex;
  }

  .jp-RenderedMermaid.jp-mod-warning {
    width: auto;
    padding: 0.5em;
    margin-top: 0.5em;
    border: var(--jp-border-width) solid var(--jp-warn-color2);
    border-radius: var(--jp-border-radius);
    color: var(--jp-ui-font-color1);
    font-size: var(--jp-ui-font-size1);
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .jp-RenderedMermaid figure {
    margin: 0;
    overflow: auto;
    max-width: 100%;
  }

  .jp-RenderedMermaid img {
    max-width: 100%;
  }

  .jp-RenderedMermaid-Details > pre {
    margin-top: 1em;
  }

  .jp-RenderedMermaid-Summary {
    color: var(--jp-warn-color2);
  }

  .jp-RenderedMermaid:not(.jp-mod-warning) pre {
    display: none;
  }

  .jp-RenderedMermaid-Summary > pre {
    display: inline-block;
    white-space: normal;
  }
</style>
<!-- End of mermaid configuration --></head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<main>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Analysing-Buyer-Behaviour-Using-Consumer-Panel-Data"><span style="color:#956bbf">Analysing Buyer Behaviour Using Consumer Panel Data</span><a class="anchor-link" href="#Analysing-Buyer-Behaviour-Using-Consumer-Panel-Data">¶</a></h2><hr/>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Introduction"><span style="color:#956bbf">Introduction</span><a class="anchor-link" href="#Introduction">¶</a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>This is a python implementation of Bruce G.S. Hardie's <a href="https://www.brucehardie.com/notes/042/">An Excel-based Introduction to Analysing Buyer Behaviour Using Consumer Panel Data</a> using <a href="https://pola.rs">Polars</a>.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Several leading market research firms (e.g., Kantar, IRI, Nielsen) collect so called consumer panel data and sell reports and analyses based on these data to interested parties. A large number of households are recruited to join the panel and they record all their grocery/HBA purchases. The idea of a panel is that we have repeated observations of the same people. The ability to track what individual households are purchasing over time can give important insights into what behavioural changes lie beneath observed changes in aggregate sales data. (terms panellist and household are used interchangeably) Nowadays, it is common for panellists to record their purchasing by scanning product barcodes via an app on their smartphones.</p>
<p>The objective of this notebook is to provide an introduction to basic analyses we can undertake using panel data. After briefing <strong>describing the data</strong> we will be working with, we present some preliminary <strong>aggregate-level analyses</strong>. Next we introduce some basic <strong>brand performance measures</strong> and consider the simple analyses that describe the <strong>variation we observe in buyer behaviour</strong> in a given time period. This analysis focuses on one brand at a time; next we consider some basic analyses that describe consumers’ <strong>buying of multiple brands in a category</strong>. We finish with some basic analyses that describe <strong>how buyer behaviour evolves over time</strong>, both for established products and new products.</p>
<p>Note: Whereas consumer panel data gives us information on the purchasing of a sample of customers for the whole category, the data in a firm’s transaction database gives us complete information on the purchasing of our products (but not those of our competitors). At a fundamental level, the types of reports developed by market research firms over the past 60+ years are a good starting point for the types of reports a firm should create as it seeks to understand the buying behaviour of its customers.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>A traditional consumer panel works in the following manner.</p>
<ol>
<li>When an individual first joins the panel, they complete a detailed questionnaire. A section of this questionnaire focuses on the demographics of their household. (This is typically updated once a year.)</li>
<li>After each shopping trip, each panellist records their purchases, scanning the barcode associated with each product and recording other information such as where the purchase was made (store or channel), the price paid, and the use of promotional deals. Twenty years ago, this would have been done using a custom handheld barcode scanner provided by the market research firm. These days, it is more common to use a smartphone app.</li>
<li>These data are uploaded to the research firm’s servers and merged with the purchases records of the other panellists. Each barcode is matched with detailed product information (e.g., category, brand, size, flavour) and this information is also stored in the database. The analyst can then create (typically product-category-specific) datasets for further analysis that tell us what each panellist purchased, when and where, and associated transaction- and/or product-specific data that may be of interest.</li>
<li>Panellists drop out of the panel all the time, and the research firm will be recruiting replacement households on a regular basis. When creating a dataset for further analysis, it is generally desirable to work with a so-called static sample of panellists, which comprises all those panellists active using the time period of interest; new panellists, as well as those that dropped out during the given time period, are excluded.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Imports"><span style="color:#956bbf">Imports</span><a class="anchor-link" href="#Imports">¶</a></h3><hr/>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Import-Packages">Import Packages<a class="anchor-link" href="#Import-Packages">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [2]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">polars</span> <span class="k">as</span> <span class="nn">pl</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">great_tables</span> <span class="kn">import</span> <span class="n">GT</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">md</span>
<span class="kn">import</span> <span class="nn">gc</span>

<span class="c1"># https://altair-viz.github.io/user_guide/display_frontends.html#displaying-in-jupyterlab</span>
<span class="n">alt</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="s1">'html'</span><span class="p">)</span>
<span class="c1"># alt.JupyterChart.enable_offline()</span>
<span class="c1"># alt.renderers.enable("jupyter", offline=True)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[2]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>RendererRegistry.enable('html')</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Import-Panel-Data">Import Panel Data<a class="anchor-link" href="#Import-Panel-Data">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We will make use of two datasets as we explore the basic types of summaries of buyer behaviour that can be created using consumer panel data. The first contains data on the purchasing of established brands in a mature product category, while the second contains data on the purchasing of a new product. Both datasets were created using static samples. While these are small datasets and contain a subset of the information available in the research firm’s databases, they are more than sufficient to convey the logic of creating the key summaries of buyer behaviour. Neither dataset includes data on the demographics of each panellist. As such, we will not consider how to create reports that explore how behaviours differ across demographic groups (e.g., by age or geography). However, anyone comfortable with the analyses undertaken in this note should be able to work out how to create such reports for themselves.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Dataset 1</strong></p>
<p>The file <code>edible_grocery.csv</code> contains two years of data from a panel of 5021 households on their purchasing in an unnamed edible grocery product category. (We intentionally do not identity the category and the associated brand names.) There are 119 SKUs in this category. 91 SKUs are associated with the four largest brands in the category, which we have named Alpha, Bravo, Charlie, and Delta. The remaining SKUs belong to very low-share brands and we grouped them under the brand Other.</p>
<p><em>Note</em>: SKU - A stock-keeping unit (SKU) is a unique combination of the attributes (e.g., brand, package type, package size, flavour) that define the products in the category.</p>
<p>Each record in this file consists of seven fields:</p>
<ul>
<li><code>panel_id</code> A unique identifier for each household.</li>
<li><code>trans_id</code> A unique identifier for the purchase occasion.</li>
<li><code>week</code> The week number in which the purchase occurred. Week 1 corresponds to the calendar week starting on January 1, 20xy. Week 53 corresponds to the calendar week starting on December 31, 20xy.</li>
<li><code>sku_id</code> The SKU code.</li>
<li><code>units</code> The number of units purchased on the particular purchase occasion.</li>
<li><code>price</code> The price per unit paid at the point of purchase.</li>
<li><code>brand</code> The brand associated with the SKU purchased.</li>
</ul>
<p>The associated file <code>sku_weight.csv</code> gives us the weight (in grams) of each SKU. There are two fields: <code>sku_id</code> and <code>weight</code>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [3]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">grocery_lf</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">scan_csv</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">"data/panel-datasets/edible_grocery.csv"</span><span class="p">,</span>
                         <span class="n">has_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">separator</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span>
                         <span class="n">schema</span><span class="o">=</span><span class="p">{</span><span class="s1">'panel_id'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">,</span>
                                 <span class="s1">'trans_id'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int32</span><span class="p">,</span>
                                 <span class="s1">'week'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">,</span>
                                 <span class="s1">'sku_id'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">UInt8</span><span class="p">,</span>
                                 <span class="s1">'units'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int16</span><span class="p">,</span>
                                 <span class="s1">'price'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float32</span><span class="p">,</span>
                                 <span class="s1">'brand'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Categorical</span><span class="p">})</span>
<span class="n">grocery_lf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[3]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (5, 7)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>trans_id</th><th>week</th><th>sku_id</th><th>units</th><th>price</th><th>brand</th></tr><tr><td>u32</td><td>i32</td><td>u16</td><td>u8</td><td>i16</td><td>f32</td><td>cat</td></tr></thead><tbody><tr><td>3102011</td><td>1569</td><td>6</td><td>19</td><td>1</td><td>2.79</td><td>"Alpha"</td></tr><tr><td>3102012</td><td>4301</td><td>15</td><td>15</td><td>1</td><td>3.19</td><td>"Alpha"</td></tr><tr><td>3102012</td><td>4301</td><td>15</td><td>15</td><td>1</td><td>3.19</td><td>"Alpha"</td></tr><tr><td>3102012</td><td>4301</td><td>15</td><td>38</td><td>1</td><td>3.49</td><td>"Bravo"</td></tr><tr><td>3102012</td><td>4301</td><td>15</td><td>44</td><td>1</td><td>3.49</td><td>"Bravo"</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [4]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">sku_lf</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">scan_csv</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">"data/panel-datasets/sku_weight.csv"</span><span class="p">,</span>
                         <span class="n">has_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">separator</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span>
                         <span class="n">schema</span><span class="o">=</span><span class="p">{</span><span class="s1">'sku_id'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">UInt8</span><span class="p">,</span>
                                 <span class="s1">'weight'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int16</span><span class="p">})</span>
<span class="n">sku_lf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[4]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (5, 2)</small><table border="1" class="dataframe"><thead><tr><th>sku_id</th><th>weight</th></tr><tr><td>u8</td><td>i16</td></tr></thead><tbody><tr><td>1</td><td>400</td></tr><tr><td>2</td><td>400</td></tr><tr><td>3</td><td>400</td></tr><tr><td>4</td><td>250</td></tr><tr><td>5</td><td>1000</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [5]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">panel_size</span> <span class="o">=</span> <span class="mi">5021</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Dataset 2</strong></p>
<p>“Kiwi Bubbles” is a masked name for a shelf-stable juice drink, aimed primarily at children, which is sold as a multipack with several single-serve containers bundled together. Prior to national launch, it underwent a year-long test conducted in two of IRI’s BehaviorScan markets. The file <code>kiwibubbles_trans.csv</code> contains purchasing data for the new product, drawn from 1300 panellists in Market 1 and 1499 panellists in Market 2. (The purchasing of other brands in the category has been excluded from the dataset.)</p>
<p>Each record in this file consists of five fields:
purchased on the particular purchase occasion.</p>
<ul>
<li><code>ID</code> A unique identifier for each household.</li>
<li><code>Market</code> 1 or 2.</li>
<li><code>Week</code> The week in which the purchase occurred.</li>
<li><code>Day</code> The day of the week in which the purchase occurred. (The product was launched on day 1 of week 1.)</li>
<li><code>Units</code> The number of units of the new product</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [6]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">kiwi_lf</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">scan_csv</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">"data/panel-datasets/kiwibubbles_trans.csv"</span><span class="p">,</span>
                      <span class="n">has_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">separator</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span>
                      <span class="n">schema</span><span class="o">=</span><span class="p">{</span><span class="s1">'ID'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">,</span>
                              <span class="s1">'Market'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">UInt8</span><span class="p">,</span>
                              <span class="s1">'Week'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int16</span><span class="p">,</span>
                              <span class="s1">'Day'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int16</span><span class="p">,</span>
                              <span class="s1">'Units'</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int16</span><span class="p">})</span>
<span class="n">kiwi_lf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[6]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (5, 5)</small><table border="1" class="dataframe"><thead><tr><th>ID</th><th>Market</th><th>Week</th><th>Day</th><th>Units</th></tr><tr><td>u16</td><td>u8</td><td>i16</td><td>i16</td><td>i16</td></tr></thead><tbody><tr><td>10001</td><td>1</td><td>19</td><td>3</td><td>1</td></tr><tr><td>10002</td><td>1</td><td>12</td><td>5</td><td>1</td></tr><tr><td>10003</td><td>1</td><td>37</td><td>7</td><td>1</td></tr><tr><td>10004</td><td>1</td><td>30</td><td>6</td><td>1</td></tr><tr><td>10004</td><td>1</td><td>47</td><td>3</td><td>1</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Reusable-Functions">Reusable Functions<a class="anchor-link" href="#Reusable-Functions">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [7]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Weekly Grocery Sales LazyFrame (Query Plan): Weekly 'spend' by 'Category', 'Brand' or 'All'</span>
<span class="k">def</span> <span class="nf">weekly_spend_summary</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">lf</span><span class="p">):</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">lf</span>
        <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'units'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">])</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">))</span>
    <span class="p">)</span>
    
    <span class="k">if</span> <span class="n">brand</span> <span class="o">==</span> <span class="s1">'Category'</span><span class="p">:</span> <span class="c1"># Return LazyFrame of total category</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">brand</span> <span class="o">==</span> <span class="s1">'All'</span><span class="p">:</span> <span class="c1"># Return LazyFrame of all brands</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># Return LazyFrame of specified brand</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="n">brand</span>
        <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">)</span>
        
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"spend"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Weekly Spend'</span><span class="p">)</span> 
    <span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [8]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Weekly Grocery Volume Sales LazyFrame (Query Plan): Weekly 'volume' by 'Brand' or 'All'</span>
<span class="k">def</span> <span class="nf">weekly_vol_summary</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">lf</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span>
        <span class="n">lf</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">lf</span>
            <span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">other</span><span class="o">=</span><span class="n">sku_lf</span><span class="p">,</span>
                <span class="n">left_on</span><span class="o">=</span><span class="s2">"sku_id"</span><span class="p">,</span>
                <span class="n">right_on</span><span class="o">=</span><span class="s2">"sku_id"</span>            
            <span class="p">)</span>
            <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'units'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">,</span> <span class="s1">'weight'</span><span class="p">])</span>
        <span class="p">)</span>
        
        <span class="k">if</span> <span class="n">brand</span> <span class="o">!=</span> <span class="s1">'All'</span><span class="p">:</span> 
            <span class="n">brand</span> <span class="o">=</span> <span class="p">[</span><span class="n">brand</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">brand</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span> <span class="k">else</span> <span class="n">brand</span>
            <span class="n">lf</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">brand</span><span class="p">])</span>
            <span class="p">)</span>
            
        <span class="n">summary</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">))</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"volume"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Weekly Volume'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [9]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Altair Weekly Line Plot</span>
<span class="k">def</span> <span class="nf">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">pct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    
    <span class="c1"># Configure the color encoding only if color is provided</span>
    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">color_encoding</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">:N'</span><span class="p">,</span>  <span class="c1"># N = a discrete unordered category</span>
            <span class="n">legend</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">color</span><span class="p">)</span> <span class="k">if</span> <span class="n">legend</span> <span class="k">else</span> <span class="kc">None</span>  <span class="c1"># Add legend conditionally</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">color_encoding</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">()</span>  <span class="c1"># No color encoding    </span>
    
    <span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">strokeWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span>
            <span class="s1">'week'</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span>
                <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">year</span><span class="o">*</span><span class="mi">52</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="c1"># Explicitly specify quarter-end weeks</span>
                <span class="n">labelExpr</span><span class="o">=</span><span class="s2">"datum.value"</span><span class="p">,</span> <span class="c1"># Show only these labels</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">'Week'</span>
            <span class="p">)</span>
        <span class="p">),</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">:Q'</span><span class="p">,</span> <span class="c1"># Q = a continuous real-valued quantity</span>
            <span class="n">title</span><span class="o">=</span><span class="n">y_axis_label</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">"$,.0f"</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">pct</span> <span class="k">else</span> <span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">",.0%"</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">color_encoding</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span>
    <span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span>
        <span class="n">stroke</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span><span class="o">.</span><span class="n">configure_axisY</span><span class="p">(</span>
        <span class="c1"># grid=False # turn off y-axis grid if required</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">chart</span> <span class="c1"># alt.JupyterChart(chart)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [10]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Annual Sales Summary LazyFrame for All Brands</span>
<span class="k">def</span> <span class="nf">annual_sales_summary</span><span class="p">():</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">weekly_spend_summary</span><span class="p">(</span><span class="s1">'All'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"week"</span><span class="p">)</span> <span class="o">/</span> <span class="mi">52</span><span class="p">)</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'year'</span><span class="p">))</span>
        <span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s1">'year'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">])</span>
        <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"Weekly Spend"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Yearly Sales'</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [11]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span> 
    <span class="n">column</span><span class="p">,</span> 
    <span class="n">bin_edges</span><span class="p">,</span> 
    <span class="n">labels</span><span class="p">,</span> 
    <span class="n">x_title</span><span class="p">,</span> 
    <span class="n">y_title</span><span class="p">,</span> 
    <span class="n">chart_title</span><span class="p">,</span> 
    <span class="n">subtitle</span><span class="p">,</span> 
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span> 
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> 
    <span class="n">label_angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
    <span class="n">left_closed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">compute_rel_freq</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Creates a standardized Altair bar chart for relative frequency distribution plots.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - data (Polars LazyFrame or DataFrame): Input dataset.</span>
<span class="sd">    - column (str): Column to analyze for distribution.</span>
<span class="sd">    - bin_edges (array-like): Edges for binning.</span>
<span class="sd">    - labels (list of str): Labels for the bins.</span>
<span class="sd">    - x_title (str): Title for the x-axis.</span>
<span class="sd">    - y_title (str): Title for the y-axis.</span>
<span class="sd">    - chart_title (str): Main title for the chart.</span>
<span class="sd">    - subtitle (str): Subtitle for the chart.</span>
<span class="sd">    - width (int, optional): Width of the chart. Default is 650.</span>
<span class="sd">    - height (int, optional): Height of the chart. Default is 250.</span>
<span class="sd">    - label_angle (int, optional): Angle for x-axis labels. Default is 0.</span>
<span class="sd">    - left_closed (bool, optional): Whether bins are left-closed. Default is True.</span>
<span class="sd">    - compute_rel_freq (bool, optional): Whether to compute relative frequencies. Default is True.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - alt.Chart: The generated Altair chart.</span>
<span class="sd">    """</span>
    <span class="c1"># Apply binning to the data</span>
    <span class="n">binned_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">bin_edges</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">left_closed</span><span class="o">=</span><span class="n">left_closed</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"cut"</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Optionally compute relative frequencies</span>
    <span class="k">if</span> <span class="n">compute_rel_freq</span><span class="p">:</span>
        <span class="n">binned_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">binned_data</span>
            <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">"cut"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"cut"</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Frequency"</span><span class="p">))</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"Frequency"</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"Frequency"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Total"</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="c1"># Create the Altair chart</span>
    <span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">binned_data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"cut:O"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="n">label_angle</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">x_title</span><span class="p">),</span> <span class="n">sort</span><span class="o">=</span><span class="n">labels</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Total:Q"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">".0%"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">y_title</span><span class="p">)),</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s2">"text"</span><span class="p">:</span> <span class="n">chart_title</span><span class="p">,</span> <span class="s2">"subtitle"</span><span class="p">:</span> <span class="n">subtitle</span><span class="p">},</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">chart</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Preliminaries"><span style="color:#956bbf">Preliminaries</span><a class="anchor-link" href="#Preliminaries">¶</a></h3><hr/>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Before we start analysing household-level behaviour, let us first get a sense of the general sales patterns observed in this category.</p>
<p>Our initial objective is to plot weekly revenue for all the brands and the overall category, respectively, and then plot weekly (volume) market shares for target brands.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Weekly-Sales-Pattern">Weekly Sales Pattern<a class="anchor-link" href="#Weekly-Sales-Pattern">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [12]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Weekly Sales Pivot Table - Polars DataFrame</span>
<span class="c1"># For visualizing and inspecting only</span>
<span class="n">weekly_spend_summary</span><span class="p">(</span><span class="s1">'All'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
    <span class="n">on</span><span class="o">=</span><span class="s2">"brand"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s2">"week"</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s2">"Weekly Spend"</span><span class="p">,</span>
    <span class="n">sort_columns</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'week'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Total"</span><span class="p">)</span> <span class="c1"># Row total</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">"week"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[12]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (104, 7)</small><table border="1" class="dataframe"><thead><tr><th>week</th><th>Alpha</th><th>Bravo</th><th>Charlie</th><th>Delta</th><th>Other</th><th>Total</th></tr><tr><td>u16</td><td>f32</td><td>f32</td><td>f32</td><td>f32</td><td>f32</td><td>f32</td></tr></thead><tbody><tr><td>1</td><td>331.460114</td><td>247.780121</td><td>51.790005</td><td>17.639999</td><td>18.75</td><td>667.420227</td></tr><tr><td>2</td><td>567.249939</td><td>398.640137</td><td>45.429996</td><td>34.190002</td><td>23.23</td><td>1068.740112</td></tr><tr><td>3</td><td>497.96994</td><td>639.980103</td><td>51.110001</td><td>39.389999</td><td>14.550001</td><td>1243.000122</td></tr><tr><td>4</td><td>1389.95752</td><td>472.5</td><td>51.869999</td><td>85.039993</td><td>39.779995</td><td>2039.147461</td></tr><tr><td>5</td><td>358.240204</td><td>252.540115</td><td>40.209995</td><td>69.540001</td><td>45.929993</td><td>766.460327</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>100</td><td>692.479919</td><td>420.479706</td><td>69.599991</td><td>54.590004</td><td>47.969997</td><td>1285.119629</td></tr><tr><td>101</td><td>265.770081</td><td>264.660065</td><td>64.029999</td><td>35.049999</td><td>26.880001</td><td>656.390198</td></tr><tr><td>102</td><td>379.610168</td><td>456.789429</td><td>43.499996</td><td>20.4</td><td>43.609993</td><td>943.909607</td></tr><tr><td>103</td><td>532.5</td><td>440.999725</td><td>76.400002</td><td>40.440006</td><td>45.549999</td><td>1135.889771</td></tr><tr><td>104</td><td>394.889984</td><td>233.190048</td><td>53.18</td><td>68.259995</td><td>36.68</td><td>786.200012</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [13]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">weekly_spend_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'Weekly Spend'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Category - Weekly Revenue'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Spend ($)'</span><span class="p">,</span>
            <span class="n">pct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[13]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-d676d301a50946a3ae2f2484b0d982fe.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d676d301a50946a3ae2f2484b0d982fe.vega-embed details,
  #altair-viz-d676d301a50946a3ae2f2484b0d982fe.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d676d301a50946a3ae2f2484b0d982fe"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d676d301a50946a3ae2f2484b0d982fe") {
      outputDiv = document.getElementById("altair-viz-d676d301a50946a3ae2f2484b0d982fe");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {}}, "data": {"name": "data-3c6781c07275ad30e41553e282381cfb"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.0f"}, "field": "Weekly Spend", "title": "Spend ($)", "type": "quantitative"}}, "height": 250, "title": "Category - Weekly Revenue", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-3c6781c07275ad30e41553e282381cfb": [{"week": 1, "Weekly Spend": 667.4200439453125}, {"week": 2, "Weekly Spend": 1068.73974609375}, {"week": 3, "Weekly Spend": 1242.99951171875}, {"week": 4, "Weekly Spend": 2039.14599609375}, {"week": 5, "Weekly Spend": 766.4600830078125}, {"week": 6, "Weekly Spend": 767.8800048828125}, {"week": 7, "Weekly Spend": 827.3706665039062}, {"week": 8, "Weekly Spend": 776.9105834960938}, {"week": 9, "Weekly Spend": 808.4098510742188}, {"week": 10, "Weekly Spend": 997.0902099609375}, {"week": 11, "Weekly Spend": 1054.7008056640625}, {"week": 12, "Weekly Spend": 1540.7889404296875}, {"week": 13, "Weekly Spend": 1109.699951171875}, {"week": 14, "Weekly Spend": 1557.7591552734375}, {"week": 15, "Weekly Spend": 1420.4002685546875}, {"week": 16, "Weekly Spend": 1046.9998779296875}, {"week": 17, "Weekly Spend": 1109.679931640625}, {"week": 18, "Weekly Spend": 1524.669677734375}, {"week": 19, "Weekly Spend": 1409.84033203125}, {"week": 20, "Weekly Spend": 2037.128173828125}, {"week": 21, "Weekly Spend": 2782.602783203125}, {"week": 22, "Weekly Spend": 1370.781005859375}, {"week": 23, "Weekly Spend": 1325.490234375}, {"week": 24, "Weekly Spend": 1605.070556640625}, {"week": 25, "Weekly Spend": 1332.1307373046875}, {"week": 26, "Weekly Spend": 3843.102783203125}, {"week": 27, "Weekly Spend": 2046.250732421875}, {"week": 28, "Weekly Spend": 1380.5003662109375}, {"week": 29, "Weekly Spend": 1149.76025390625}, {"week": 30, "Weekly Spend": 1269.869384765625}, {"week": 31, "Weekly Spend": 1659.677978515625}, {"week": 32, "Weekly Spend": 1904.1939697265625}, {"week": 33, "Weekly Spend": 1225.130126953125}, {"week": 34, "Weekly Spend": 2115.731201171875}, {"week": 35, "Weekly Spend": 2329.2080078125}, {"week": 36, "Weekly Spend": 1210.6890869140625}, {"week": 37, "Weekly Spend": 916.25048828125}, {"week": 38, "Weekly Spend": 903.5802001953125}, {"week": 39, "Weekly Spend": 972.730224609375}, {"week": 40, "Weekly Spend": 1057.2900390625}, {"week": 41, "Weekly Spend": 1131.1595458984375}, {"week": 42, "Weekly Spend": 1177.1988525390625}, {"week": 43, "Weekly Spend": 1246.218505859375}, {"week": 44, "Weekly Spend": 2063.510986328125}, {"week": 45, "Weekly Spend": 787.4898071289062}, {"week": 46, "Weekly Spend": 1276.1793212890625}, {"week": 47, "Weekly Spend": 1578.0477294921875}, {"week": 48, "Weekly Spend": 856.590087890625}, {"week": 49, "Weekly Spend": 1106.7196044921875}, {"week": 50, "Weekly Spend": 1652.017822265625}, {"week": 51, "Weekly Spend": 1869.1966552734375}, {"week": 52, "Weekly Spend": 1183.358642578125}, {"week": 53, "Weekly Spend": 872.9097900390625}, {"week": 54, "Weekly Spend": 1069.8692626953125}, {"week": 55, "Weekly Spend": 1556.05517578125}, {"week": 56, "Weekly Spend": 1607.6275634765625}, {"week": 57, "Weekly Spend": 1860.2530517578125}, {"week": 58, "Weekly Spend": 729.7400512695312}, {"week": 59, "Weekly Spend": 953.4902954101562}, {"week": 60, "Weekly Spend": 860.6207275390625}, {"week": 61, "Weekly Spend": 933.5899658203125}, {"week": 62, "Weekly Spend": 956.6499633789062}, {"week": 63, "Weekly Spend": 1082.530029296875}, {"week": 64, "Weekly Spend": 1346.1380615234375}, {"week": 65, "Weekly Spend": 1204.1385498046875}, {"week": 66, "Weekly Spend": 960.3594970703125}, {"week": 67, "Weekly Spend": 834.2498779296875}, {"week": 68, "Weekly Spend": 1326.308837890625}, {"week": 69, "Weekly Spend": 1446.9766845703125}, {"week": 70, "Weekly Spend": 1008.9203491210938}, {"week": 71, "Weekly Spend": 1214.859130859375}, {"week": 72, "Weekly Spend": 1971.1353759765625}, {"week": 73, "Weekly Spend": 3568.181884765625}, {"week": 74, "Weekly Spend": 1207.1785888671875}, {"week": 75, "Weekly Spend": 1235.1295166015625}, {"week": 76, "Weekly Spend": 1347.2489013671875}, {"week": 77, "Weekly Spend": 1998.2535400390625}, {"week": 78, "Weekly Spend": 3666.67578125}, {"week": 79, "Weekly Spend": 2465.878173828125}, {"week": 80, "Weekly Spend": 1234.1397705078125}, {"week": 81, "Weekly Spend": 1378.548095703125}, {"week": 82, "Weekly Spend": 1199.768798828125}, {"week": 83, "Weekly Spend": 1184.139404296875}, {"week": 84, "Weekly Spend": 1118.800048828125}, {"week": 85, "Weekly Spend": 1645.0155029296875}, {"week": 86, "Weekly Spend": 1805.47412109375}, {"week": 87, "Weekly Spend": 2821.316162109375}, {"week": 88, "Weekly Spend": 1381.0576171875}, {"week": 89, "Weekly Spend": 693.5901489257812}, {"week": 90, "Weekly Spend": 983.8609619140625}, {"week": 91, "Weekly Spend": 1039.7010498046875}, {"week": 92, "Weekly Spend": 942.4304809570312}, {"week": 93, "Weekly Spend": 751.2203369140625}, {"week": 94, "Weekly Spend": 820.3405151367188}, {"week": 95, "Weekly Spend": 904.3005981445312}, {"week": 96, "Weekly Spend": 1038.4700927734375}, {"week": 97, "Weekly Spend": 1631.4844970703125}, {"week": 98, "Weekly Spend": 2632.84765625}, {"week": 99, "Weekly Spend": 1361.9095458984375}, {"week": 100, "Weekly Spend": 1285.1180419921875}, {"week": 101, "Weekly Spend": 656.3902587890625}, {"week": 102, "Weekly Spend": 943.9097900390625}, {"week": 103, "Weekly Spend": 1135.8892822265625}, {"week": 104, "Weekly Spend": 786.1997680664062}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [14]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">weekly_spend_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'Weekly Spend'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Weekly Revenue'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Spend ($)'</span><span class="p">,</span>
            <span class="n">pct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[14]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-2333a87d67df4b019b3718aae701f4b0.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-2333a87d67df4b019b3718aae701f4b0.vega-embed details,
  #altair-viz-2333a87d67df4b019b3718aae701f4b0.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-2333a87d67df4b019b3718aae701f4b0"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2333a87d67df4b019b3718aae701f4b0") {
      outputDiv = document.getElementById("altair-viz-2333a87d67df4b019b3718aae701f4b0");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {}}, "data": {"name": "data-d30e90f8f3f3f0bb3e2f040b912a493a"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.0f"}, "field": "Weekly Spend", "title": "Spend ($)", "type": "quantitative"}}, "height": 250, "title": "Alpha - Weekly Revenue", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-d30e90f8f3f3f0bb3e2f040b912a493a": [{"week": 1, "brand": "Alpha", "Weekly Spend": 331.4601135253906}, {"week": 2, "brand": "Alpha", "Weekly Spend": 567.2499389648438}, {"week": 3, "brand": "Alpha", "Weekly Spend": 497.9699401855469}, {"week": 4, "brand": "Alpha", "Weekly Spend": 1389.95751953125}, {"week": 5, "brand": "Alpha", "Weekly Spend": 358.2402038574219}, {"week": 6, "brand": "Alpha", "Weekly Spend": 364.0600280761719}, {"week": 7, "brand": "Alpha", "Weekly Spend": 412.34014892578125}, {"week": 8, "brand": "Alpha", "Weekly Spend": 307.6201171875}, {"week": 9, "brand": "Alpha", "Weekly Spend": 290.580078125}, {"week": 10, "brand": "Alpha", "Weekly Spend": 442.64019775390625}, {"week": 11, "brand": "Alpha", "Weekly Spend": 258.6200256347656}, {"week": 12, "brand": "Alpha", "Weekly Spend": 912.5907592773438}, {"week": 13, "brand": "Alpha", "Weekly Spend": 443.6502380371094}, {"week": 14, "brand": "Alpha", "Weekly Spend": 853.830322265625}, {"week": 15, "brand": "Alpha", "Weekly Spend": 446.1503601074219}, {"week": 16, "brand": "Alpha", "Weekly Spend": 579.4600830078125}, {"week": 17, "brand": "Alpha", "Weekly Spend": 410.93023681640625}, {"week": 18, "brand": "Alpha", "Weekly Spend": 703.3102416992188}, {"week": 19, "brand": "Alpha", "Weekly Spend": 607.4000244140625}, {"week": 20, "brand": "Alpha", "Weekly Spend": 801.2600708007812}, {"week": 21, "brand": "Alpha", "Weekly Spend": 903.2706298828125}, {"week": 22, "brand": "Alpha", "Weekly Spend": 672.1006469726562}, {"week": 23, "brand": "Alpha", "Weekly Spend": 620.7203369140625}, {"week": 24, "brand": "Alpha", "Weekly Spend": 702.7504272460938}, {"week": 25, "brand": "Alpha", "Weekly Spend": 509.1305236816406}, {"week": 26, "brand": "Alpha", "Weekly Spend": 1977.66455078125}, {"week": 27, "brand": "Alpha", "Weekly Spend": 1180.6121826171875}, {"week": 28, "brand": "Alpha", "Weekly Spend": 486.72039794921875}, {"week": 29, "brand": "Alpha", "Weekly Spend": 507.5603332519531}, {"week": 30, "brand": "Alpha", "Weekly Spend": 596.3203125}, {"week": 31, "brand": "Alpha", "Weekly Spend": 604.0001831054688}, {"week": 32, "brand": "Alpha", "Weekly Spend": 611.1402587890625}, {"week": 33, "brand": "Alpha", "Weekly Spend": 614.9400634765625}, {"week": 34, "brand": "Alpha", "Weekly Spend": 1535.922119140625}, {"week": 35, "brand": "Alpha", "Weekly Spend": 1571.509521484375}, {"week": 36, "brand": "Alpha", "Weekly Spend": 587.4197387695312}, {"week": 37, "brand": "Alpha", "Weekly Spend": 426.87005615234375}, {"week": 38, "brand": "Alpha", "Weekly Spend": 383.8000793457031}, {"week": 39, "brand": "Alpha", "Weekly Spend": 465.72003173828125}, {"week": 40, "brand": "Alpha", "Weekly Spend": 447.0300598144531}, {"week": 41, "brand": "Alpha", "Weekly Spend": 421.7700500488281}, {"week": 42, "brand": "Alpha", "Weekly Spend": 364.6600036621094}, {"week": 43, "brand": "Alpha", "Weekly Spend": 389.4200744628906}, {"week": 44, "brand": "Alpha", "Weekly Spend": 408.33001708984375}, {"week": 45, "brand": "Alpha", "Weekly Spend": 311.08013916015625}, {"week": 46, "brand": "Alpha", "Weekly Spend": 575.3999633789062}, {"week": 47, "brand": "Alpha", "Weekly Spend": 1188.458740234375}, {"week": 48, "brand": "Alpha", "Weekly Spend": 434.8900451660156}, {"week": 49, "brand": "Alpha", "Weekly Spend": 365.0300598144531}, {"week": 50, "brand": "Alpha", "Weekly Spend": 1164.7088623046875}, {"week": 51, "brand": "Alpha", "Weekly Spend": 773.2094116210938}, {"week": 52, "brand": "Alpha", "Weekly Spend": 789.46923828125}, {"week": 53, "brand": "Alpha", "Weekly Spend": 386.7501525878906}, {"week": 54, "brand": "Alpha", "Weekly Spend": 586.9396362304688}, {"week": 55, "brand": "Alpha", "Weekly Spend": 1045.8380126953125}, {"week": 56, "brand": "Alpha", "Weekly Spend": 939.5099487304688}, {"week": 57, "brand": "Alpha", "Weekly Spend": 1040.8994140625}, {"week": 58, "brand": "Alpha", "Weekly Spend": 308.9900817871094}, {"week": 59, "brand": "Alpha", "Weekly Spend": 547.6300048828125}, {"week": 60, "brand": "Alpha", "Weekly Spend": 363.9002380371094}, {"week": 61, "brand": "Alpha", "Weekly Spend": 476.6103515625}, {"week": 62, "brand": "Alpha", "Weekly Spend": 484.7003173828125}, {"week": 63, "brand": "Alpha", "Weekly Spend": 359.43017578125}, {"week": 64, "brand": "Alpha", "Weekly Spend": 472.2302551269531}, {"week": 65, "brand": "Alpha", "Weekly Spend": 665.6598510742188}, {"week": 66, "brand": "Alpha", "Weekly Spend": 413.5800476074219}, {"week": 67, "brand": "Alpha", "Weekly Spend": 364.3900146484375}, {"week": 68, "brand": "Alpha", "Weekly Spend": 636.039794921875}, {"week": 69, "brand": "Alpha", "Weekly Spend": 356.2501525878906}, {"week": 70, "brand": "Alpha", "Weekly Spend": 433.2401428222656}, {"week": 71, "brand": "Alpha", "Weekly Spend": 507.04010009765625}, {"week": 72, "brand": "Alpha", "Weekly Spend": 1328.038330078125}, {"week": 73, "brand": "Alpha", "Weekly Spend": 2070.157958984375}, {"week": 74, "brand": "Alpha", "Weekly Spend": 606.7600708007812}, {"week": 75, "brand": "Alpha", "Weekly Spend": 629.2600708007812}, {"week": 76, "brand": "Alpha", "Weekly Spend": 611.8903198242188}, {"week": 77, "brand": "Alpha", "Weekly Spend": 1198.6287841796875}, {"week": 78, "brand": "Alpha", "Weekly Spend": 2345.435791015625}, {"week": 79, "brand": "Alpha", "Weekly Spend": 1447.2288818359375}, {"week": 80, "brand": "Alpha", "Weekly Spend": 531.5003662109375}, {"week": 81, "brand": "Alpha", "Weekly Spend": 570.05029296875}, {"week": 82, "brand": "Alpha", "Weekly Spend": 431.1202087402344}, {"week": 83, "brand": "Alpha", "Weekly Spend": 529.820068359375}, {"week": 84, "brand": "Alpha", "Weekly Spend": 582.5802001953125}, {"week": 85, "brand": "Alpha", "Weekly Spend": 802.8195190429688}, {"week": 86, "brand": "Alpha", "Weekly Spend": 985.1090698242188}, {"week": 87, "brand": "Alpha", "Weekly Spend": 1304.2593994140625}, {"week": 88, "brand": "Alpha", "Weekly Spend": 991.0695190429688}, {"week": 89, "brand": "Alpha", "Weekly Spend": 309.98016357421875}, {"week": 90, "brand": "Alpha", "Weekly Spend": 477.5602722167969}, {"week": 91, "brand": "Alpha", "Weekly Spend": 406.980224609375}, {"week": 92, "brand": "Alpha", "Weekly Spend": 390.3000793457031}, {"week": 93, "brand": "Alpha", "Weekly Spend": 306.7400817871094}, {"week": 94, "brand": "Alpha", "Weekly Spend": 376.9102478027344}, {"week": 95, "brand": "Alpha", "Weekly Spend": 383.11016845703125}, {"week": 96, "brand": "Alpha", "Weekly Spend": 674.090087890625}, {"week": 97, "brand": "Alpha", "Weekly Spend": 840.3900756835938}, {"week": 98, "brand": "Alpha", "Weekly Spend": 1079.0780029296875}, {"week": 99, "brand": "Alpha", "Weekly Spend": 384.9902038574219}, {"week": 100, "brand": "Alpha", "Weekly Spend": 692.4799194335938}, {"week": 101, "brand": "Alpha", "Weekly Spend": 265.77008056640625}, {"week": 102, "brand": "Alpha", "Weekly Spend": 379.61016845703125}, {"week": 103, "brand": "Alpha", "Weekly Spend": 532.5}, {"week": 104, "brand": "Alpha", "Weekly Spend": 394.8899841308594}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [15]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">weekly_spend_summary</span><span class="p">(</span><span class="s1">'Bravo'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'Weekly Spend'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Bravo - Weekly Revenue'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Spend ($)'</span><span class="p">,</span>
            <span class="n">pct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[15]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-45fb57df17f44a3da9da493ee8be467e.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-45fb57df17f44a3da9da493ee8be467e.vega-embed details,
  #altair-viz-45fb57df17f44a3da9da493ee8be467e.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-45fb57df17f44a3da9da493ee8be467e"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-45fb57df17f44a3da9da493ee8be467e") {
      outputDiv = document.getElementById("altair-viz-45fb57df17f44a3da9da493ee8be467e");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {}}, "data": {"name": "data-31ddc573a7c8035b0322ff5845bca10a"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.0f"}, "field": "Weekly Spend", "title": "Spend ($)", "type": "quantitative"}}, "height": 250, "title": "Bravo - Weekly Revenue", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-31ddc573a7c8035b0322ff5845bca10a": [{"week": 1, "brand": "Bravo", "Weekly Spend": 247.78012084960938}, {"week": 2, "brand": "Bravo", "Weekly Spend": 398.64013671875}, {"week": 3, "brand": "Bravo", "Weekly Spend": 639.9801025390625}, {"week": 4, "brand": "Bravo", "Weekly Spend": 472.5}, {"week": 5, "brand": "Bravo", "Weekly Spend": 252.5401153564453}, {"week": 6, "brand": "Bravo", "Weekly Spend": 239.8101348876953}, {"week": 7, "brand": "Bravo", "Weekly Spend": 271.9801330566406}, {"week": 8, "brand": "Bravo", "Weekly Spend": 295.7101135253906}, {"week": 9, "brand": "Bravo", "Weekly Spend": 384.36993408203125}, {"week": 10, "brand": "Bravo", "Weekly Spend": 454.2200622558594}, {"week": 11, "brand": "Bravo", "Weekly Spend": 695.2700805664062}, {"week": 12, "brand": "Bravo", "Weekly Spend": 492.880126953125}, {"week": 13, "brand": "Bravo", "Weekly Spend": 501.13006591796875}, {"week": 14, "brand": "Bravo", "Weekly Spend": 385.23004150390625}, {"week": 15, "brand": "Bravo", "Weekly Spend": 804.3599853515625}, {"week": 16, "brand": "Bravo", "Weekly Spend": 365.9801940917969}, {"week": 17, "brand": "Bravo", "Weekly Spend": 458.4902038574219}, {"week": 18, "brand": "Bravo", "Weekly Spend": 475.3800964355469}, {"week": 19, "brand": "Bravo", "Weekly Spend": 455.2801208496094}, {"week": 20, "brand": "Bravo", "Weekly Spend": 929.7398071289062}, {"week": 21, "brand": "Bravo", "Weekly Spend": 1675.4091796875}, {"week": 22, "brand": "Bravo", "Weekly Spend": 557.880126953125}, {"week": 23, "brand": "Bravo", "Weekly Spend": 508.0301208496094}, {"week": 24, "brand": "Bravo", "Weekly Spend": 508.1401672363281}, {"week": 25, "brand": "Bravo", "Weekly Spend": 635.4301147460938}, {"week": 26, "brand": "Bravo", "Weekly Spend": 1674.229736328125}, {"week": 27, "brand": "Bravo", "Weekly Spend": 592.81005859375}, {"week": 28, "brand": "Bravo", "Weekly Spend": 697.8102416992188}, {"week": 29, "brand": "Bravo", "Weekly Spend": 474.2400207519531}, {"week": 30, "brand": "Bravo", "Weekly Spend": 411.25982666015625}, {"week": 31, "brand": "Bravo", "Weekly Spend": 751.1602783203125}, {"week": 32, "brand": "Bravo", "Weekly Spend": 1065.2103271484375}, {"week": 33, "brand": "Bravo", "Weekly Spend": 418.6598815917969}, {"week": 34, "brand": "Bravo", "Weekly Spend": 410.7998352050781}, {"week": 35, "brand": "Bravo", "Weekly Spend": 624.1898803710938}, {"week": 36, "brand": "Bravo", "Weekly Spend": 389.6098937988281}, {"week": 37, "brand": "Bravo", "Weekly Spend": 333.65997314453125}, {"week": 38, "brand": "Bravo", "Weekly Spend": 371.73992919921875}, {"week": 39, "brand": "Bravo", "Weekly Spend": 283.4500732421875}, {"week": 40, "brand": "Bravo", "Weekly Spend": 440.0198974609375}, {"week": 41, "brand": "Bravo", "Weekly Spend": 477.6198425292969}, {"week": 42, "brand": "Bravo", "Weekly Spend": 647.0596313476562}, {"week": 43, "brand": "Bravo", "Weekly Spend": 714.1895141601562}, {"week": 44, "brand": "Bravo", "Weekly Spend": 1532.925048828125}, {"week": 45, "brand": "Bravo", "Weekly Spend": 352.96990966796875}, {"week": 46, "brand": "Bravo", "Weekly Spend": 447.6199035644531}, {"week": 47, "brand": "Bravo", "Weekly Spend": 234.7301025390625}, {"week": 48, "brand": "Bravo", "Weekly Spend": 261.1400451660156}, {"week": 49, "brand": "Bravo", "Weekly Spend": 505.4093322753906}, {"week": 50, "brand": "Bravo", "Weekly Spend": 301.8601379394531}, {"week": 51, "brand": "Bravo", "Weekly Spend": 833.8690795898438}, {"week": 52, "brand": "Bravo", "Weekly Spend": 248.94007873535156}, {"week": 53, "brand": "Bravo", "Weekly Spend": 335.02996826171875}, {"week": 54, "brand": "Bravo", "Weekly Spend": 343.7998962402344}, {"week": 55, "brand": "Bravo", "Weekly Spend": 359.259765625}, {"week": 56, "brand": "Bravo", "Weekly Spend": 503.6197509765625}, {"week": 57, "brand": "Bravo", "Weekly Spend": 661.1296997070312}, {"week": 58, "brand": "Bravo", "Weekly Spend": 264.38006591796875}, {"week": 59, "brand": "Bravo", "Weekly Spend": 206.18002319335938}, {"week": 60, "brand": "Bravo", "Weekly Spend": 318.56988525390625}, {"week": 61, "brand": "Bravo", "Weekly Spend": 310.31982421875}, {"week": 62, "brand": "Bravo", "Weekly Spend": 314.0199890136719}, {"week": 63, "brand": "Bravo", "Weekly Spend": 575.7496337890625}, {"week": 64, "brand": "Bravo", "Weekly Spend": 707.979736328125}, {"week": 65, "brand": "Bravo", "Weekly Spend": 454.1295471191406}, {"week": 66, "brand": "Bravo", "Weekly Spend": 393.760009765625}, {"week": 67, "brand": "Bravo", "Weekly Spend": 306.22998046875}, {"week": 68, "brand": "Bravo", "Weekly Spend": 516.4496459960938}, {"week": 69, "brand": "Bravo", "Weekly Spend": 950.017822265625}, {"week": 70, "brand": "Bravo", "Weekly Spend": 373.329833984375}, {"week": 71, "brand": "Bravo", "Weekly Spend": 483.2296142578125}, {"week": 72, "brand": "Bravo", "Weekly Spend": 418.2997131347656}, {"week": 73, "brand": "Bravo", "Weekly Spend": 1304.5775146484375}, {"week": 74, "brand": "Bravo", "Weekly Spend": 436.1696472167969}, {"week": 75, "brand": "Bravo", "Weekly Spend": 415.1798400878906}, {"week": 76, "brand": "Bravo", "Weekly Spend": 471.5396728515625}, {"week": 77, "brand": "Bravo", "Weekly Spend": 584.8995361328125}, {"week": 78, "brand": "Bravo", "Weekly Spend": 1157.298828125}, {"week": 79, "brand": "Bravo", "Weekly Spend": 826.6701049804688}, {"week": 80, "brand": "Bravo", "Weekly Spend": 546.2295532226562}, {"week": 81, "brand": "Bravo", "Weekly Spend": 599.6500244140625}, {"week": 82, "brand": "Bravo", "Weekly Spend": 593.8698120117188}, {"week": 83, "brand": "Bravo", "Weekly Spend": 455.30963134765625}, {"week": 84, "brand": "Bravo", "Weekly Spend": 379.28985595703125}, {"week": 85, "brand": "Bravo", "Weekly Spend": 542.0896606445312}, {"week": 86, "brand": "Bravo", "Weekly Spend": 619.7496337890625}, {"week": 87, "brand": "Bravo", "Weekly Spend": 1420.11767578125}, {"week": 88, "brand": "Bravo", "Weekly Spend": 284.7098693847656}, {"week": 89, "brand": "Bravo", "Weekly Spend": 327.39996337890625}, {"week": 90, "brand": "Bravo", "Weekly Spend": 334.7599182128906}, {"week": 91, "brand": "Bravo", "Weekly Spend": 510.32958984375}, {"week": 92, "brand": "Bravo", "Weekly Spend": 399.28973388671875}, {"week": 93, "brand": "Bravo", "Weekly Spend": 241.13009643554688}, {"week": 94, "brand": "Bravo", "Weekly Spend": 317.2098693847656}, {"week": 95, "brand": "Bravo", "Weekly Spend": 393.6097412109375}, {"week": 96, "brand": "Bravo", "Weekly Spend": 232.68003845214844}, {"week": 97, "brand": "Bravo", "Weekly Spend": 676.0797729492188}, {"week": 98, "brand": "Bravo", "Weekly Spend": 1464.9161376953125}, {"week": 99, "brand": "Bravo", "Weekly Spend": 780.4902954101562}, {"week": 100, "brand": "Bravo", "Weekly Spend": 420.4797058105469}, {"week": 101, "brand": "Bravo", "Weekly Spend": 264.6600646972656}, {"week": 102, "brand": "Bravo", "Weekly Spend": 456.7894287109375}, {"week": 103, "brand": "Bravo", "Weekly Spend": 440.9997253417969}, {"week": 104, "brand": "Bravo", "Weekly Spend": 233.19004821777344}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Weekly-(Volume)-Market-Share">Weekly (Volume) Market Share<a class="anchor-link" href="#Weekly-(Volume)-Market-Share">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [16]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Weekly (volume) market share</span>
<span class="n">pct_volume</span> <span class="o">=</span><span class="p">(</span>
    <span class="n">weekly_vol_summary</span><span class="p">(</span><span class="s1">'All'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'week'</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'Weekly Volume'</span><span class="p">,</span>
        <span class="n">sort_columns</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"*"</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s2">"week"</span><span class="p">))</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'week'</span><span class="p">))</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">pct_volume</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[16]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (104, 6)</small><table border="1" class="dataframe"><thead><tr><th>week</th><th>Alpha</th><th>Bravo</th><th>Charlie</th><th>Delta</th><th>Other</th></tr><tr><td>u16</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td></tr></thead><tbody><tr><td>1</td><td>0.481077</td><td>0.355011</td><td>0.11194</td><td>0.02532</td><td>0.026652</td></tr><tr><td>2</td><td>0.524953</td><td>0.371525</td><td>0.059391</td><td>0.029696</td><td>0.014435</td></tr><tr><td>3</td><td>0.389338</td><td>0.508812</td><td>0.060676</td><td>0.032505</td><td>0.008668</td></tr><tr><td>4</td><td>0.677032</td><td>0.230511</td><td>0.036686</td><td>0.044984</td><td>0.010787</td></tr><tr><td>5</td><td>0.428735</td><td>0.324306</td><td>0.07574</td><td>0.119348</td><td>0.051871</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>100</td><td>0.545707</td><td>0.31711</td><td>0.080381</td><td>0.039087</td><td>0.017715</td></tr><tr><td>101</td><td>0.36891</td><td>0.40552</td><td>0.140805</td><td>0.059138</td><td>0.025627</td></tr><tr><td>102</td><td>0.342581</td><td>0.543494</td><td>0.071147</td><td>0.019689</td><td>0.023089</td></tr><tr><td>103</td><td>0.424609</td><td>0.415495</td><td>0.100574</td><td>0.042429</td><td>0.016893</td></tr><tr><td>104</td><td>0.457298</td><td>0.290104</td><td>0.110032</td><td>0.112969</td><td>0.029598</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [17]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span>
    <span class="n">pct_volume_plot</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">weekly_vol_summary</span><span class="p">(</span><span class="s1">'All'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span>
        <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>
        <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Weekly Volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Total Weekly Volume'</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">other</span><span class="o">=</span><span class="n">weekly_vol_summary</span><span class="p">([</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">],</span> <span class="n">grocery_lf</span><span class="p">),</span>
            <span class="n">on</span><span class="o">=</span><span class="s1">'week'</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">]))</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="c1"># compute brand wise % of total volume sale</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Weekly Volume'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Total Weekly Volume'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'pct_volume'</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">pct_volume_plot</span><span class="p">,</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'pct_volume'</span><span class="p">,</span> 
            <span class="n">color</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s2">"Volume Market Share - Alpha vs. Bravo"</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Weekly Total"</span><span class="p">,</span> 
            <span class="n">pct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
            <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[17]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-b438997a7ae84d46a1bbe7cf44a75a31.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b438997a7ae84d46a1bbe7cf44a75a31.vega-embed details,
  #altair-viz-b438997a7ae84d46a1bbe7cf44a75a31.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b438997a7ae84d46a1bbe7cf44a75a31"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b438997a7ae84d46a1bbe7cf44a75a31") {
      outputDiv = document.getElementById("altair-viz-b438997a7ae84d46a1bbe7cf44a75a31");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {}}, "data": {"name": "data-a5d47f575dbbe109f1546dea04f177c3"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"field": "brand", "legend": {"title": "brand"}, "type": "nominal"}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": ",.0%"}, "field": "pct_volume", "title": "% of Weekly Total", "type": "quantitative"}}, "height": 250, "title": "Volume Market Share - Alpha vs. Bravo", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-a5d47f575dbbe109f1546dea04f177c3": [{"week": 1, "Total Weekly Volume": 187.59999999999997, "brand": "Alpha", "Weekly Volume": 90.24999999999999, "pct_volume": 0.4810767590618337}, {"week": 1, "Total Weekly Volume": 187.59999999999997, "brand": "Bravo", "Weekly Volume": 66.6, "pct_volume": 0.35501066098081024}, {"week": 2, "Total Weekly Volume": 303.075, "brand": "Bravo", "Weekly Volume": 112.6, "pct_volume": 0.3715252000329951}, {"week": 2, "Total Weekly Volume": 303.075, "brand": "Alpha", "Weekly Volume": 159.1, "pct_volume": 0.5249525694959993}, {"week": 3, "Total Weekly Volume": 346.1, "brand": "Bravo", "Weekly Volume": 176.10000000000002, "pct_volume": 0.5088124819416354}, {"week": 3, "Total Weekly Volume": 346.1, "brand": "Alpha", "Weekly Volume": 134.75, "pct_volume": 0.38933834151979196}, {"week": 4, "Total Weekly Volume": 572.425, "brand": "Bravo", "Weekly Volume": 131.95, "pct_volume": 0.230510547233262}, {"week": 4, "Total Weekly Volume": 572.425, "brand": "Alpha", "Weekly Volume": 387.55000000000007, "pct_volume": 0.6770319255797704}, {"week": 5, "Total Weekly Volume": 217.85, "brand": "Alpha", "Weekly Volume": 93.39999999999999, "pct_volume": 0.4287353683727335}, {"week": 5, "Total Weekly Volume": 217.85, "brand": "Bravo", "Weekly Volume": 70.65, "pct_volume": 0.32430571494147353}, {"week": 6, "Total Weekly Volume": 224.45, "brand": "Bravo", "Weekly Volume": 67.4, "pct_volume": 0.30028959679215866}, {"week": 6, "Total Weekly Volume": 224.45, "brand": "Alpha", "Weekly Volume": 99.64999999999999, "pct_volume": 0.4439741590554689}, {"week": 7, "Total Weekly Volume": 235.65, "brand": "Alpha", "Weekly Volume": 111.64999999999999, "pct_volume": 0.47379588372586456}, {"week": 7, "Total Weekly Volume": 235.65, "brand": "Bravo", "Weekly Volume": 74.85, "pct_volume": 0.31763208147676636}, {"week": 8, "Total Weekly Volume": 234.39999999999998, "brand": "Alpha", "Weekly Volume": 85.64999999999998, "pct_volume": 0.36540102389078494}, {"week": 8, "Total Weekly Volume": 234.39999999999998, "brand": "Bravo", "Weekly Volume": 85.25, "pct_volume": 0.3636945392491468}, {"week": 9, "Total Weekly Volume": 231.8, "brand": "Bravo", "Weekly Volume": 112.7, "pct_volume": 0.48619499568593616}, {"week": 9, "Total Weekly Volume": 231.8, "brand": "Alpha", "Weekly Volume": 75.1, "pct_volume": 0.32398619499568587}, {"week": 10, "Total Weekly Volume": 279.6, "brand": "Bravo", "Weekly Volume": 130.2, "pct_volume": 0.46566523605150206}, {"week": 10, "Total Weekly Volume": 279.6, "brand": "Alpha", "Weekly Volume": 118.1, "pct_volume": 0.4223891273247496}, {"week": 11, "Total Weekly Volume": 299.67499999999995, "brand": "Bravo", "Weekly Volume": 200.15, "pct_volume": 0.6678902143989323}, {"week": 11, "Total Weekly Volume": 299.67499999999995, "brand": "Alpha", "Weekly Volume": 70.44999999999999, "pct_volume": 0.2350880120130141}, {"week": 12, "Total Weekly Volume": 448.25, "brand": "Alpha", "Weekly Volume": 251.55000000000004, "pct_volume": 0.5611823759063024}, {"week": 12, "Total Weekly Volume": 448.25, "brand": "Bravo", "Weekly Volume": 144.29999999999998, "pct_volume": 0.32191857222532066}, {"week": 13, "Total Weekly Volume": 326.925, "brand": "Alpha", "Weekly Volume": 122.19999999999997, "pct_volume": 0.3737860365527261}, {"week": 13, "Total Weekly Volume": 326.925, "brand": "Bravo", "Weekly Volume": 145.05, "pct_volume": 0.443679743060335}, {"week": 14, "Total Weekly Volume": 444.5, "brand": "Bravo", "Weekly Volume": 111.94999999999997, "pct_volume": 0.2518560179977502}, {"week": 14, "Total Weekly Volume": 444.5, "brand": "Alpha", "Weekly Volume": 248.4, "pct_volume": 0.558830146231721}, {"week": 15, "Total Weekly Volume": 405.75000000000006, "brand": "Bravo", "Weekly Volume": 229.05000000000007, "pct_volume": 0.5645101663585953}, {"week": 15, "Total Weekly Volume": 405.75000000000006, "brand": "Alpha", "Weekly Volume": 121.19999999999999, "pct_volume": 0.29870609981515706}, {"week": 16, "Total Weekly Volume": 307.475, "brand": "Alpha", "Weekly Volume": 165.05, "pct_volume": 0.5367916090739084}, {"week": 16, "Total Weekly Volume": 307.475, "brand": "Bravo", "Weekly Volume": 106.29999999999998, "pct_volume": 0.3457191641596877}, {"week": 17, "Total Weekly Volume": 355.7, "brand": "Alpha", "Weekly Volume": 114.19999999999999, "pct_volume": 0.3210570705650829}, {"week": 17, "Total Weekly Volume": 355.7, "brand": "Bravo", "Weekly Volume": 128.75, "pct_volume": 0.3619623278043295}, {"week": 18, "Total Weekly Volume": 446.65000000000003, "brand": "Bravo", "Weekly Volume": 132.45, "pct_volume": 0.29654091570580987}, {"week": 18, "Total Weekly Volume": 446.65000000000003, "brand": "Alpha", "Weekly Volume": 194.20000000000002, "pct_volume": 0.43479234299787306}, {"week": 19, "Total Weekly Volume": 419.09999999999997, "brand": "Bravo", "Weekly Volume": 126.89999999999996, "pct_volume": 0.30279169649248383}, {"week": 19, "Total Weekly Volume": 419.09999999999997, "brand": "Alpha", "Weekly Volume": 170.3, "pct_volume": 0.4063469339059891}, {"week": 20, "Total Weekly Volume": 608.6, "brand": "Bravo", "Weekly Volume": 270.00000000000006, "pct_volume": 0.4436411436082814}, {"week": 20, "Total Weekly Volume": 608.6, "brand": "Alpha", "Weekly Volume": 227.35, "pct_volume": 0.37356227407163983}, {"week": 21, "Total Weekly Volume": 817.8250000000003, "brand": "Alpha", "Weekly Volume": 260.00000000000006, "pct_volume": 0.317916424662978}, {"week": 21, "Total Weekly Volume": 817.8250000000003, "brand": "Bravo", "Weekly Volume": 488.40000000000015, "pct_volume": 0.5971937761746094}, {"week": 22, "Total Weekly Volume": 391.25, "brand": "Alpha", "Weekly Volume": 183.8, "pct_volume": 0.46977635782747607}, {"week": 22, "Total Weekly Volume": 391.25, "brand": "Bravo", "Weekly Volume": 161.5, "pct_volume": 0.412779552715655}, {"week": 23, "Total Weekly Volume": 379.525, "brand": "Bravo", "Weekly Volume": 143.84999999999997, "pct_volume": 0.3790264145971938}, {"week": 23, "Total Weekly Volume": 379.525, "brand": "Alpha", "Weekly Volume": 168.70000000000002, "pct_volume": 0.44450299716751207}, {"week": 24, "Total Weekly Volume": 492.09999999999997, "brand": "Alpha", "Weekly Volume": 186.89999999999998, "pct_volume": 0.379800853485064}, {"week": 24, "Total Weekly Volume": 492.09999999999997, "brand": "Bravo", "Weekly Volume": 164.2, "pct_volume": 0.3336720178825442}, {"week": 25, "Total Weekly Volume": 379.20000000000005, "brand": "Alpha", "Weekly Volume": 134.8, "pct_volume": 0.35548523206751054}, {"week": 25, "Total Weekly Volume": 379.20000000000005, "brand": "Bravo", "Weekly Volume": 178.3, "pct_volume": 0.47020042194092826}, {"week": 26, "Total Weekly Volume": 1095.6000000000004, "brand": "Alpha", "Weekly Volume": 559.0500000000001, "pct_volume": 0.5102683461117195}, {"week": 26, "Total Weekly Volume": 1095.6000000000004, "brand": "Bravo", "Weekly Volume": 474.25000000000017, "pct_volume": 0.43286783497626874}, {"week": 27, "Total Weekly Volume": 596.225, "brand": "Bravo", "Weekly Volume": 162.75, "pct_volume": 0.2729674200176108}, {"week": 27, "Total Weekly Volume": 596.225, "brand": "Alpha", "Weekly Volume": 334.70000000000005, "pct_volume": 0.5613652564048808}, {"week": 28, "Total Weekly Volume": 395.02500000000003, "brand": "Bravo", "Weekly Volume": 190.25000000000006, "pct_volume": 0.4816150876526803}, {"week": 28, "Total Weekly Volume": 395.02500000000003, "brand": "Alpha", "Weekly Volume": 128.64999999999998, "pct_volume": 0.3256755901525219}, {"week": 29, "Total Weekly Volume": 329.17499999999995, "brand": "Bravo", "Weekly Volume": 133.19999999999996, "pct_volume": 0.404647983595352}, {"week": 29, "Total Weekly Volume": 329.17499999999995, "brand": "Alpha", "Weekly Volume": 133.95, "pct_volume": 0.40692640692640697}, {"week": 30, "Total Weekly Volume": 356.72499999999997, "brand": "Bravo", "Weekly Volume": 110.99999999999999, "pct_volume": 0.3111640619524844}, {"week": 30, "Total Weekly Volume": 356.72499999999997, "brand": "Alpha", "Weekly Volume": 154.99999999999997, "pct_volume": 0.43450837479851423}, {"week": 31, "Total Weekly Volume": 483.70000000000005, "brand": "Alpha", "Weekly Volume": 163.25, "pct_volume": 0.3375025842464337}, {"week": 31, "Total Weekly Volume": 483.70000000000005, "brand": "Bravo", "Weekly Volume": 212.10000000000002, "pct_volume": 0.4384949348769899}, {"week": 32, "Total Weekly Volume": 554.0500000000001, "brand": "Alpha", "Weekly Volume": 160.20000000000002, "pct_volume": 0.2891435790993593}, {"week": 32, "Total Weekly Volume": 554.0500000000001, "brand": "Bravo", "Weekly Volume": 315.1000000000001, "pct_volume": 0.5687212345456187}, {"week": 33, "Total Weekly Volume": 331.05, "brand": "Alpha", "Weekly Volume": 161.50000000000003, "pct_volume": 0.48784171575290747}, {"week": 33, "Total Weekly Volume": 331.05, "brand": "Bravo", "Weekly Volume": 111.14999999999995, "pct_volume": 0.33574988672405964}, {"week": 34, "Total Weekly Volume": 592.2250000000001, "brand": "Alpha", "Weekly Volume": 432.90000000000015, "pct_volume": 0.730972181181139}, {"week": 34, "Total Weekly Volume": 592.2250000000001, "brand": "Bravo", "Weekly Volume": 108.94999999999993, "pct_volume": 0.18396724217991456}, {"week": 35, "Total Weekly Volume": 657.9500000000002, "brand": "Bravo", "Weekly Volume": 182.40000000000003, "pct_volume": 0.2772247131240976}, {"week": 35, "Total Weekly Volume": 657.9500000000002, "brand": "Alpha", "Weekly Volume": 432.6500000000001, "pct_volume": 0.6575727638878334}, {"week": 36, "Total Weekly Volume": 346.875, "brand": "Alpha", "Weekly Volume": 152.25, "pct_volume": 0.43891891891891893}, {"week": 36, "Total Weekly Volume": 346.875, "brand": "Bravo", "Weekly Volume": 109.64999999999998, "pct_volume": 0.316108108108108}, {"week": 37, "Total Weekly Volume": 266.0249999999999, "brand": "Alpha", "Weekly Volume": 113.14999999999999, "pct_volume": 0.4253359646649752}, {"week": 37, "Total Weekly Volume": 266.0249999999999, "brand": "Bravo", "Weekly Volume": 93.64999999999998, "pct_volume": 0.3520345832158632}, {"week": 38, "Total Weekly Volume": 260.4, "brand": "Alpha", "Weekly Volume": 98.44999999999999, "pct_volume": 0.3780721966205837}, {"week": 38, "Total Weekly Volume": 260.4, "brand": "Bravo", "Weekly Volume": 110.45, "pct_volume": 0.4241551459293395}, {"week": 39, "Total Weekly Volume": 270.94999999999993, "brand": "Alpha", "Weekly Volume": 124.35, "pct_volume": 0.45894076397859396}, {"week": 39, "Total Weekly Volume": 270.94999999999993, "brand": "Bravo", "Weekly Volume": 78.19999999999999, "pct_volume": 0.28861413544934494}, {"week": 40, "Total Weekly Volume": 295.2249999999999, "brand": "Bravo", "Weekly Volume": 120.04999999999998, "pct_volume": 0.40663900414937765}, {"week": 40, "Total Weekly Volume": 295.2249999999999, "brand": "Alpha", "Weekly Volume": 116.79999999999995, "pct_volume": 0.3956304513506647}, {"week": 41, "Total Weekly Volume": 330.29999999999995, "brand": "Bravo", "Weekly Volume": 134.04999999999998, "pct_volume": 0.40584317287314564}, {"week": 41, "Total Weekly Volume": 330.29999999999995, "brand": "Alpha", "Weekly Volume": 111.35, "pct_volume": 0.3371177717226764}, {"week": 42, "Total Weekly Volume": 329.80000000000007, "brand": "Bravo", "Weekly Volume": 182.00000000000003, "pct_volume": 0.55184960582171}, {"week": 42, "Total Weekly Volume": 329.80000000000007, "brand": "Alpha", "Weekly Volume": 94.65, "pct_volume": 0.2869921164342025}, {"week": 43, "Total Weekly Volume": 365.775, "brand": "Alpha", "Weekly Volume": 99.44999999999996, "pct_volume": 0.2718884560180438}, {"week": 43, "Total Weekly Volume": 365.775, "brand": "Bravo", "Weekly Volume": 225.6, "pct_volume": 0.6167726061103137}, {"week": 44, "Total Weekly Volume": 653.8500000000001, "brand": "Bravo", "Weekly Volume": 509.90000000000003, "pct_volume": 0.7798424715148733}, {"week": 44, "Total Weekly Volume": 653.8500000000001, "brand": "Alpha", "Weekly Volume": 108.44999999999999, "pct_volume": 0.16586373021335163}, {"week": 45, "Total Weekly Volume": 223.84999999999997, "brand": "Bravo", "Weekly Volume": 105.64999999999999, "pct_volume": 0.47196783560419925}, {"week": 45, "Total Weekly Volume": 223.84999999999997, "brand": "Alpha", "Weekly Volume": 81.94999999999999, "pct_volume": 0.3660933660933661}, {"week": 46, "Total Weekly Volume": 363.25, "brand": "Alpha", "Weekly Volume": 155.25, "pct_volume": 0.42739160357880246}, {"week": 46, "Total Weekly Volume": 363.25, "brand": "Bravo", "Weekly Volume": 124.59999999999998, "pct_volume": 0.3430144528561596}, {"week": 47, "Total Weekly Volume": 438.25, "brand": "Bravo", "Weekly Volume": 65.3, "pct_volume": 0.14900171135196805}, {"week": 47, "Total Weekly Volume": 438.25, "brand": "Alpha", "Weekly Volume": 327.3, "pct_volume": 0.7468339988590987}, {"week": 48, "Total Weekly Volume": 244.79999999999998, "brand": "Bravo", "Weekly Volume": 74.64999999999999, "pct_volume": 0.3049428104575163}, {"week": 48, "Total Weekly Volume": 244.79999999999998, "brand": "Alpha", "Weekly Volume": 113.24999999999999, "pct_volume": 0.4626225490196078}, {"week": 49, "Total Weekly Volume": 324.325, "brand": "Alpha", "Weekly Volume": 94.19999999999999, "pct_volume": 0.2904493948970939}, {"week": 49, "Total Weekly Volume": 324.325, "brand": "Bravo", "Weekly Volume": 155.25, "pct_volume": 0.47868650273645263}, {"week": 50, "Total Weekly Volume": 464.42500000000007, "brand": "Alpha", "Weekly Volume": 319.7500000000001, "pct_volume": 0.6884857619637187}, {"week": 50, "Total Weekly Volume": 464.42500000000007, "brand": "Bravo", "Weekly Volume": 82.14999999999998, "pct_volume": 0.17688539591968555}, {"week": 51, "Total Weekly Volume": 528.0, "brand": "Alpha", "Weekly Volume": 203.70000000000002, "pct_volume": 0.38579545454545455}, {"week": 51, "Total Weekly Volume": 528.0, "brand": "Bravo", "Weekly Volume": 238.25, "pct_volume": 0.4512310606060606}, {"week": 52, "Total Weekly Volume": 331.70000000000005, "brand": "Bravo", "Weekly Volume": 70.34999999999998, "pct_volume": 0.21208923726258658}, {"week": 52, "Total Weekly Volume": 331.70000000000005, "brand": "Alpha", "Weekly Volume": 215.80000000000004, "pct_volume": 0.6505878806150136}, {"week": 53, "Total Weekly Volume": 239.27499999999998, "brand": "Bravo", "Weekly Volume": 95.14999999999998, "pct_volume": 0.3976595966983596}, {"week": 53, "Total Weekly Volume": 239.27499999999998, "brand": "Alpha", "Weekly Volume": 98.25, "pct_volume": 0.41061540068958313}, {"week": 54, "Total Weekly Volume": 302.5999999999999, "brand": "Alpha", "Weekly Volume": 157.29999999999995, "pct_volume": 0.5198281559814937}, {"week": 54, "Total Weekly Volume": 302.5999999999999, "brand": "Bravo", "Weekly Volume": 102.79999999999998, "pct_volume": 0.3397224058162591}, {"week": 55, "Total Weekly Volume": 515.7750000000001, "brand": "Alpha", "Weekly Volume": 368.6, "pct_volume": 0.7146527070912704}, {"week": 55, "Total Weekly Volume": 515.7750000000001, "brand": "Bravo", "Weekly Volume": 103.375, "pct_volume": 0.200426542581552}, {"week": 56, "Total Weekly Volume": 640.775, "brand": "Alpha", "Weekly Volume": 408.40000000000003, "pct_volume": 0.6373532051031954}, {"week": 56, "Total Weekly Volume": 640.775, "brand": "Bravo", "Weekly Volume": 162.6, "pct_volume": 0.2537552182903515}, {"week": 57, "Total Weekly Volume": 535.0000000000001, "brand": "Bravo", "Weekly Volume": 220.07500000000002, "pct_volume": 0.4113551401869158}, {"week": 57, "Total Weekly Volume": 535.0000000000001, "brand": "Alpha", "Weekly Volume": 270.55000000000007, "pct_volume": 0.5057009345794393}, {"week": 58, "Total Weekly Volume": 205.59999999999997, "brand": "Alpha", "Weekly Volume": 76.64999999999999, "pct_volume": 0.3728112840466926}, {"week": 58, "Total Weekly Volume": 205.59999999999997, "brand": "Bravo", "Weekly Volume": 74.19999999999997, "pct_volume": 0.3608949416342412}, {"week": 59, "Total Weekly Volume": 267.825, "brand": "Bravo", "Weekly Volume": 59.64999999999999, "pct_volume": 0.22272005974050216}, {"week": 59, "Total Weekly Volume": 267.825, "brand": "Alpha", "Weekly Volume": 159.04999999999998, "pct_volume": 0.5938579296182208}, {"week": 60, "Total Weekly Volume": 225.59999999999994, "brand": "Bravo", "Weekly Volume": 86.29999999999995, "pct_volume": 0.3825354609929077}, {"week": 60, "Total Weekly Volume": 225.59999999999994, "brand": "Alpha", "Weekly Volume": 89.94999999999999, "pct_volume": 0.39871453900709225}, {"week": 61, "Total Weekly Volume": 242.57499999999996, "brand": "Bravo", "Weekly Volume": 83.29999999999997, "pct_volume": 0.3433989487787282}, {"week": 61, "Total Weekly Volume": 242.57499999999996, "brand": "Alpha", "Weekly Volume": 116.99999999999997, "pct_volume": 0.4823250541069772}, {"week": 62, "Total Weekly Volume": 286.3, "brand": "Alpha", "Weekly Volume": 146.75, "pct_volume": 0.5125742228431714}, {"week": 62, "Total Weekly Volume": 286.3, "brand": "Bravo", "Weekly Volume": 89.94999999999999, "pct_volume": 0.31418092909535444}, {"week": 63, "Total Weekly Volume": 311.19999999999993, "brand": "Bravo", "Weekly Volume": 178.39999999999998, "pct_volume": 0.5732647814910026}, {"week": 63, "Total Weekly Volume": 311.19999999999993, "brand": "Alpha", "Weekly Volume": 88.89999999999999, "pct_volume": 0.28566838046272497}, {"week": 64, "Total Weekly Volume": 429.40000000000003, "brand": "Bravo", "Weekly Volume": 222.45000000000005, "pct_volume": 0.5180484396832791}, {"week": 64, "Total Weekly Volume": 429.40000000000003, "brand": "Alpha", "Weekly Volume": 129.7, "pct_volume": 0.3020493712156497}, {"week": 65, "Total Weekly Volume": 399.9, "brand": "Alpha", "Weekly Volume": 207.1, "pct_volume": 0.5178794698674669}, {"week": 65, "Total Weekly Volume": 399.9, "brand": "Bravo", "Weekly Volume": 166.8, "pct_volume": 0.4171042760690173}, {"week": 66, "Total Weekly Volume": 265.09999999999985, "brand": "Alpha", "Weekly Volume": 108.64999999999999, "pct_volume": 0.4098453413806113}, {"week": 66, "Total Weekly Volume": 265.09999999999985, "brand": "Bravo", "Weekly Volume": 103.44999999999987, "pct_volume": 0.3902301018483589}, {"week": 67, "Total Weekly Volume": 237.64999999999998, "brand": "Bravo", "Weekly Volume": 85.85, "pct_volume": 0.3612455291394909}, {"week": 67, "Total Weekly Volume": 237.64999999999998, "brand": "Alpha", "Weekly Volume": 94.89999999999998, "pct_volume": 0.39932674100568055}, {"week": 68, "Total Weekly Volume": 372.04999999999995, "brand": "Bravo", "Weekly Volume": 147.34999999999997, "pct_volume": 0.3960489181561618}, {"week": 68, "Total Weekly Volume": 372.04999999999995, "brand": "Alpha", "Weekly Volume": 166.05, "pct_volume": 0.4463109797070287}, {"week": 69, "Total Weekly Volume": 577.25, "brand": "Bravo", "Weekly Volume": 437.3500000000001, "pct_volume": 0.7576440017323518}, {"week": 69, "Total Weekly Volume": 577.25, "brand": "Alpha", "Weekly Volume": 92.89999999999998, "pct_volume": 0.16093546990038973}, {"week": 70, "Total Weekly Volume": 278.775, "brand": "Bravo", "Weekly Volume": 103.74999999999996, "pct_volume": 0.37216393148596527}, {"week": 70, "Total Weekly Volume": 278.775, "brand": "Alpha", "Weekly Volume": 116.0, "pct_volume": 0.41610617881804324}, {"week": 71, "Total Weekly Volume": 349.69999999999993, "brand": "Alpha", "Weekly Volume": 133.39999999999998, "pct_volume": 0.38146983128395767}, {"week": 71, "Total Weekly Volume": 349.69999999999993, "brand": "Bravo", "Weekly Volume": 148.2, "pct_volume": 0.4237918215613383}, {"week": 72, "Total Weekly Volume": 551.7, "brand": "Bravo", "Weekly Volume": 124.59999999999998, "pct_volume": 0.22584738082291095}, {"week": 72, "Total Weekly Volume": 551.7, "brand": "Alpha", "Weekly Volume": 351.2000000000001, "pct_volume": 0.6365778502809499}, {"week": 73, "Total Weekly Volume": 1279.475, "brand": "Bravo", "Weekly Volume": 443.8250000000001, "pct_volume": 0.3468805564782431}, {"week": 73, "Total Weekly Volume": 1279.475, "brand": "Alpha", "Weekly Volume": 786.4999999999997, "pct_volume": 0.6147052502002772}, {"week": 74, "Total Weekly Volume": 335.275, "brand": "Alpha", "Weekly Volume": 156.79999999999998, "pct_volume": 0.46767578853180225}, {"week": 74, "Total Weekly Volume": 335.275, "brand": "Bravo", "Weekly Volume": 120.19999999999997, "pct_volume": 0.35851166952501673}, {"week": 75, "Total Weekly Volume": 343.4, "brand": "Bravo", "Weekly Volume": 120.24999999999996, "pct_volume": 0.3501747233546883}, {"week": 75, "Total Weekly Volume": 343.4, "brand": "Alpha", "Weekly Volume": 163.85000000000002, "pct_volume": 0.47714036109493313}, {"week": 76, "Total Weekly Volume": 387.04999999999995, "brand": "Bravo", "Weekly Volume": 137.325, "pct_volume": 0.3547991215605219}, {"week": 76, "Total Weekly Volume": 387.04999999999995, "brand": "Alpha", "Weekly Volume": 163.79999999999998, "pct_volume": 0.4232011368040305}, {"week": 77, "Total Weekly Volume": 572.0000000000001, "brand": "Bravo", "Weekly Volume": 164.675, "pct_volume": 0.2878933566433566}, {"week": 77, "Total Weekly Volume": 572.0000000000001, "brand": "Alpha", "Weekly Volume": 326.0500000000001, "pct_volume": 0.5700174825174826}, {"week": 78, "Total Weekly Volume": 1223.35, "brand": "Alpha", "Weekly Volume": 766.7499999999997, "pct_volume": 0.6267625781665097}, {"week": 78, "Total Weekly Volume": 1223.35, "brand": "Bravo", "Weekly Volume": 380.20000000000016, "pct_volume": 0.31078595659459696}, {"week": 79, "Total Weekly Volume": 832.6250000000003, "brand": "Bravo", "Weekly Volume": 257.70000000000016, "pct_volume": 0.3095030776159736}, {"week": 79, "Total Weekly Volume": 832.6250000000003, "brand": "Alpha", "Weekly Volume": 505.15000000000015, "pct_volume": 0.6066956913376369}, {"week": 80, "Total Weekly Volume": 345.7, "brand": "Alpha", "Weekly Volume": 134.49999999999994, "pct_volume": 0.3890656638704077}, {"week": 80, "Total Weekly Volume": 345.7, "brand": "Bravo", "Weekly Volume": 150.45000000000002, "pct_volume": 0.43520393404686153}, {"week": 81, "Total Weekly Volume": 401.7, "brand": "Bravo", "Weekly Volume": 184.50000000000003, "pct_volume": 0.4592979835698283}, {"week": 81, "Total Weekly Volume": 401.7, "brand": "Alpha", "Weekly Volume": 147.69999999999996, "pct_volume": 0.3676873288523773}, {"week": 82, "Total Weekly Volume": 349.225, "brand": "Alpha", "Weekly Volume": 108.59999999999998, "pct_volume": 0.3109743002362373}, {"week": 82, "Total Weekly Volume": 349.225, "brand": "Bravo", "Weekly Volume": 176.8, "pct_volume": 0.5062638699978523}, {"week": 83, "Total Weekly Volume": 323.6249999999999, "brand": "Alpha", "Weekly Volume": 129.9999999999999, "pct_volume": 0.4016994978756274}, {"week": 83, "Total Weekly Volume": 323.6249999999999, "brand": "Bravo", "Weekly Volume": 127.62499999999997, "pct_volume": 0.3943607570490537}, {"week": 84, "Total Weekly Volume": 306.0999999999999, "brand": "Bravo", "Weekly Volume": 99.99999999999999, "pct_volume": 0.3266906239790919}, {"week": 84, "Total Weekly Volume": 306.0999999999999, "brand": "Alpha", "Weekly Volume": 147.69999999999996, "pct_volume": 0.4825220516171186}, {"week": 85, "Total Weekly Volume": 470.52500000000003, "brand": "Bravo", "Weekly Volume": 147.15, "pct_volume": 0.3127357738696137}, {"week": 85, "Total Weekly Volume": 470.52500000000003, "brand": "Alpha", "Weekly Volume": 212.35000000000008, "pct_volume": 0.45130439402794764}, {"week": 86, "Total Weekly Volume": 542.325, "brand": "Alpha", "Weekly Volume": 291.50000000000006, "pct_volume": 0.5375005762227447}, {"week": 86, "Total Weekly Volume": 542.325, "brand": "Bravo", "Weekly Volume": 178.75000000000003, "pct_volume": 0.3295994099479095}, {"week": 87, "Total Weekly Volume": 1049.8249999999998, "brand": "Alpha", "Weekly Volume": 536.0499999999998, "pct_volume": 0.5106089110089777}, {"week": 87, "Total Weekly Volume": 1049.8249999999998, "brand": "Bravo", "Weekly Volume": 480.8000000000001, "pct_volume": 0.45798109208677656}, {"week": 88, "Total Weekly Volume": 367.6, "brand": "Bravo", "Weekly Volume": 75.04999999999998, "pct_volume": 0.20416213275299233}, {"week": 88, "Total Weekly Volume": 367.6, "brand": "Alpha", "Weekly Volume": 258.6500000000001, "pct_volume": 0.7036180631120785}, {"week": 89, "Total Weekly Volume": 186.24999999999997, "brand": "Bravo", "Weekly Volume": 89.74999999999999, "pct_volume": 0.4818791946308725}, {"week": 89, "Total Weekly Volume": 186.24999999999997, "brand": "Alpha", "Weekly Volume": 77.34999999999998, "pct_volume": 0.41530201342281875}, {"week": 90, "Total Weekly Volume": 259.72499999999997, "brand": "Bravo", "Weekly Volume": 92.09999999999998, "pct_volume": 0.35460583309269417}, {"week": 90, "Total Weekly Volume": 259.72499999999997, "brand": "Alpha", "Weekly Volume": 115.24999999999999, "pct_volume": 0.4437385696409664}, {"week": 91, "Total Weekly Volume": 288.1, "brand": "Bravo", "Weekly Volume": 149.85000000000002, "pct_volume": 0.5201318986463034}, {"week": 91, "Total Weekly Volume": 288.1, "brand": "Alpha", "Weekly Volume": 98.69999999999999, "pct_volume": 0.3425893786879555}, {"week": 92, "Total Weekly Volume": 263.8499999999999, "brand": "Bravo", "Weekly Volume": 123.09999999999995, "pct_volume": 0.46655296570020843}, {"week": 92, "Total Weekly Volume": 263.8499999999999, "brand": "Alpha", "Weekly Volume": 97.24999999999997, "pct_volume": 0.36858063293537996}, {"week": 93, "Total Weekly Volume": 203.725, "brand": "Bravo", "Weekly Volume": 67.94999999999999, "pct_volume": 0.3335378574058166}, {"week": 93, "Total Weekly Volume": 203.725, "brand": "Alpha", "Weekly Volume": 73.6, "pct_volume": 0.3612713216345564}, {"week": 94, "Total Weekly Volume": 213.54999999999995, "brand": "Alpha", "Weekly Volume": 87.6, "pct_volume": 0.4102083821119176}, {"week": 94, "Total Weekly Volume": 213.54999999999995, "brand": "Bravo", "Weekly Volume": 90.94999999999997, "pct_volume": 0.42589557480683676}, {"week": 95, "Total Weekly Volume": 243.52499999999992, "brand": "Alpha", "Weekly Volume": 87.79999999999997, "pct_volume": 0.3605379324504671}, {"week": 95, "Total Weekly Volume": 243.52499999999992, "brand": "Bravo", "Weekly Volume": 116.84999999999994, "pct_volume": 0.4798275331074837}, {"week": 96, "Total Weekly Volume": 272.15, "brand": "Bravo", "Weekly Volume": 62.54999999999998, "pct_volume": 0.22983648723130623}, {"week": 96, "Total Weekly Volume": 272.15, "brand": "Alpha", "Weekly Volume": 169.15, "pct_volume": 0.6215322432482088}, {"week": 97, "Total Weekly Volume": 460.2250000000001, "brand": "Bravo", "Weekly Volume": 208.45000000000002, "pct_volume": 0.4529306317562062}, {"week": 97, "Total Weekly Volume": 460.2250000000001, "brand": "Alpha", "Weekly Volume": 216.25000000000006, "pct_volume": 0.46987886359932646}, {"week": 98, "Total Weekly Volume": 884.0250000000001, "brand": "Bravo", "Weekly Volume": 467.8250000000001, "pct_volume": 0.5291988348745794}, {"week": 98, "Total Weekly Volume": 884.0250000000001, "brand": "Alpha", "Weekly Volume": 394.05, "pct_volume": 0.4457453126325613}, {"week": 99, "Total Weekly Volume": 415.85, "brand": "Bravo", "Weekly Volume": 246.05, "pct_volume": 0.5916796921967056}, {"week": 99, "Total Weekly Volume": 415.85, "brand": "Alpha", "Weekly Volume": 98.24999999999999, "pct_volume": 0.2362630756282313}, {"week": 100, "Total Weekly Volume": 396.54999999999995, "brand": "Alpha", "Weekly Volume": 216.40000000000003, "pct_volume": 0.5457067204640021}, {"week": 100, "Total Weekly Volume": 396.54999999999995, "brand": "Bravo", "Weekly Volume": 125.74999999999997, "pct_volume": 0.31711007439162775}, {"week": 101, "Total Weekly Volume": 177.55, "brand": "Alpha", "Weekly Volume": 65.5, "pct_volume": 0.36891016615038014}, {"week": 101, "Total Weekly Volume": 177.55, "brand": "Bravo", "Weekly Volume": 72.0, "pct_volume": 0.4055195719515629}, {"week": 102, "Total Weekly Volume": 279.34999999999997, "brand": "Bravo", "Weekly Volume": 151.825, "pct_volume": 0.5434938249507786}, {"week": 102, "Total Weekly Volume": 279.34999999999997, "brand": "Alpha", "Weekly Volume": 95.69999999999997, "pct_volume": 0.34258099158761407}, {"week": 103, "Total Weekly Volume": 318.175, "brand": "Bravo", "Weekly Volume": 132.2, "pct_volume": 0.4154946177418087}, {"week": 103, "Total Weekly Volume": 318.175, "brand": "Alpha", "Weekly Volume": 135.10000000000002, "pct_volume": 0.4246090987664022}, {"week": 104, "Total Weekly Volume": 221.3, "brand": "Alpha", "Weekly Volume": 101.2, "pct_volume": 0.45729778581111613}, {"week": 104, "Total Weekly Volume": 221.3, "brand": "Bravo", "Weekly Volume": 64.19999999999999, "pct_volume": 0.290103931314957}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>There appears to be a <strong>high level of competition</strong> between these two brands. What is the correlation in their market shares?</p>
<p>We observe that there is a strong negative correlation between the shares of Alpha and Bravo: an increase in one brand’s share is associated with a corresponding decrease in the share of the other brand.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [18]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">corr_matrix</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pct_volume</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>  <span class="c1"># Exclude 'week' column</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">corr</span><span class="p">()</span>  <span class="c1"># Compute the correlation matrix</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pct_volume</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"index"</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'index'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Correlation Matrix of Weekly (Volume) Market Share"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s2">"rebeccapurple"</span><span class="p">,</span> <span class="s2">"white"</span><span class="p">,</span> <span class="s1">'orange'</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"black"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'white'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> 
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>    
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[18]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="kxtthduicd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#kxtthduicd table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#kxtthduicd thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#kxtthduicd p { margin: 0 !important; padding: 0 !important; }
 #kxtthduicd .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #kxtthduicd .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #kxtthduicd .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #kxtthduicd .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #kxtthduicd .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kxtthduicd .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kxtthduicd .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kxtthduicd .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #kxtthduicd .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #kxtthduicd .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #kxtthduicd .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #kxtthduicd .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #kxtthduicd .gt_spanner_row { border-bottom-style: hidden !important; }
 #kxtthduicd .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #kxtthduicd .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #kxtthduicd .gt_from_md> :first-child { margin-top: 0 !important; }
 #kxtthduicd .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #kxtthduicd .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #kxtthduicd .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #kxtthduicd .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #kxtthduicd .gt_row_group_first td { border-top-width: 2px !important; }
 #kxtthduicd .gt_row_group_first th { border-top-width: 2px !important; }
 #kxtthduicd .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #kxtthduicd .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kxtthduicd .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #kxtthduicd .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #kxtthduicd .gt_left { text-align: left !important; }
 #kxtthduicd .gt_center { text-align: center !important; }
 #kxtthduicd .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #kxtthduicd .gt_font_normal { font-weight: normal !important; }
 #kxtthduicd .gt_font_bold { font-weight: bold !important; }
 #kxtthduicd .gt_font_italic { font-style: italic !important; }
 #kxtthduicd .gt_super { font-size: 65% !important; }
 #kxtthduicd .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #kxtthduicd .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Correlation Matrix of Weekly (Volume) Market Share</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffa500; color: black; background-color: white;">1.00</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7c51a8;">−0.85</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #cbb9dc;">−0.34</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee9f4;">−0.11</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e8e1f0;">−0.15</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7c51a8;">−0.85</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffa500; color: black; background-color: white;">1.00</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee8f3;">−0.11</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dcd0e7;">−0.23</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efeaf4;">−0.10</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #cbb9dc;">−0.34</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee8f3;">−0.11</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffa500; color: black; background-color: white;">1.00</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fff3dd;">0.13</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffe9c1;">0.24</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee9f4;">−0.11</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dcd0e7;">−0.23</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fff3dd;">0.13</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffa500; color: black; background-color: white;">1.00</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffe3b0;">0.31</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e8e1f0;">−0.15</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efeaf4;">−0.10</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffe9c1;">0.24</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffe3b0;">0.31</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffa500; color: black; background-color: white;">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Annual-Sales">Annual Sales<a class="anchor-link" href="#Annual-Sales">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let us finish this preliminary analysis of the data by computing the annual sales of each brand.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [19]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">annual_sales_pivot</span> <span class="o">=</span> <span class="n">annual_sales_summary</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
    <span class="n">on</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">'year'</span><span class="p">,</span>
    <span class="n">sort_columns</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'year'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Total"</span><span class="p">)</span> <span class="c1"># add totals column</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">annual_sales_pivot</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s2">"year"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Annual Sales ($)"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Year"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_currency</span><span class="p">()</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'year'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">annual_sales_pivot</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">36_000</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s2">"white"</span><span class="p">,</span> <span class="s2">"rebeccapurple"</span><span class="p">]</span>
    <span class="p">)</span>    
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[19]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="aqlurewcst" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#aqlurewcst table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#aqlurewcst thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#aqlurewcst p { margin: 0 !important; padding: 0 !important; }
 #aqlurewcst .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #aqlurewcst .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #aqlurewcst .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #aqlurewcst .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #aqlurewcst .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #aqlurewcst .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #aqlurewcst .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #aqlurewcst .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #aqlurewcst .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #aqlurewcst .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #aqlurewcst .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #aqlurewcst .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #aqlurewcst .gt_spanner_row { border-bottom-style: hidden !important; }
 #aqlurewcst .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #aqlurewcst .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #aqlurewcst .gt_from_md> :first-child { margin-top: 0 !important; }
 #aqlurewcst .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #aqlurewcst .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #aqlurewcst .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #aqlurewcst .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #aqlurewcst .gt_row_group_first td { border-top-width: 2px !important; }
 #aqlurewcst .gt_row_group_first th { border-top-width: 2px !important; }
 #aqlurewcst .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #aqlurewcst .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #aqlurewcst .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #aqlurewcst .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #aqlurewcst .gt_left { text-align: left !important; }
 #aqlurewcst .gt_center { text-align: center !important; }
 #aqlurewcst .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #aqlurewcst .gt_font_normal { font-weight: normal !important; }
 #aqlurewcst .gt_font_bold { font-weight: bold !important; }
 #aqlurewcst .gt_font_italic { font-style: italic !important; }
 #aqlurewcst .gt_super { font-size: 65% !important; }
 #aqlurewcst .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #aqlurewcst .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="7">Annual Sales ($)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Year" rowspan="1" scope="col">Year</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Total" rowspan="1" scope="col">Total</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">1</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7041a0;">$33,570.95</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #865dae;">$28,603.35</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eae2f1;">$5,120.87</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1edf6;">$3,271.51</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f9f7fb;">$1,535.23</td>
<td class="gt_row gt_right">$72,101.91</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">2</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #69379b;">$35,250.74</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #8d67b3;">$26,926.85</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efe9f4;">$3,922.68</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3f0f7;">$2,820.81</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f8f6fa;">$1,739.82</td>
<td class="gt_row gt_right">$70,660.90</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [20]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">annual_change_sales</span> <span class="o">=</span> <span class="n">annual_sales_pivot</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="p">)</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s2">"year"</span><span class="p">,</span>  <span class="c1"># Keep 'year' as a fixed identifier</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s1">'% Change'</span><span class="p">,</span>  
    <span class="n">variable_name</span><span class="o">=</span><span class="s1">'brand'</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">annual_change_sales</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'% Change in Annual Sales'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">cols_hide</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span>   
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">brand</span><span class="o">=</span><span class="s1">'Y-o-Y % Change'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[20]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="vmhfdafwqp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#vmhfdafwqp table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#vmhfdafwqp thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#vmhfdafwqp p { margin: 0 !important; padding: 0 !important; }
 #vmhfdafwqp .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #vmhfdafwqp .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #vmhfdafwqp .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #vmhfdafwqp .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #vmhfdafwqp .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #vmhfdafwqp .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #vmhfdafwqp .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #vmhfdafwqp .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #vmhfdafwqp .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #vmhfdafwqp .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #vmhfdafwqp .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #vmhfdafwqp .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #vmhfdafwqp .gt_spanner_row { border-bottom-style: hidden !important; }
 #vmhfdafwqp .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #vmhfdafwqp .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #vmhfdafwqp .gt_from_md> :first-child { margin-top: 0 !important; }
 #vmhfdafwqp .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #vmhfdafwqp .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #vmhfdafwqp .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #vmhfdafwqp .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #vmhfdafwqp .gt_row_group_first td { border-top-width: 2px !important; }
 #vmhfdafwqp .gt_row_group_first th { border-top-width: 2px !important; }
 #vmhfdafwqp .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #vmhfdafwqp .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #vmhfdafwqp .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #vmhfdafwqp .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #vmhfdafwqp .gt_left { text-align: left !important; }
 #vmhfdafwqp .gt_center { text-align: center !important; }
 #vmhfdafwqp .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #vmhfdafwqp .gt_font_normal { font-weight: normal !important; }
 #vmhfdafwqp .gt_font_bold { font-weight: bold !important; }
 #vmhfdafwqp .gt_font_italic { font-style: italic !important; }
 #vmhfdafwqp .gt_super { font-size: 65% !important; }
 #vmhfdafwqp .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #vmhfdafwqp .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">% Change in Annual Sales</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Change" rowspan="1" scope="col">% Change</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e5ddee;">5.00%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffedcd;">−5.86%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffb938;">−23.40%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffd68a;">−13.78%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #bba4d2;">13.33%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Total</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #fff9ee;">−2.00%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [21]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">annual_sales_summary</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"brand:N"</span><span class="p">,</span> 
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)),</span>
    <span class="n">xOffset</span><span class="o">=</span><span class="s2">"year:N"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Yearly Sales:Q"</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">"$,.0f"</span><span class="p">),</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">'Yearly Revenue ($)'</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">"year:N"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">'Year 1 &amp; Year 2 Revenues'</span>
<span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-e6106aaf79564896a0b3f778f6117b3a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e6106aaf79564896a0b3f778f6117b3a.vega-embed details,
  #altair-viz-e6106aaf79564896a0b3f778f6117b3a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e6106aaf79564896a0b3f778f6117b3a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e6106aaf79564896a0b3f778f6117b3a") {
      outputDiv = document.getElementById("altair-viz-e6106aaf79564896a0b3f778f6117b3a");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-27902780869bc5d097c0cbc8c77a82b6"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "year", "title": "Year", "type": "nominal"}, "x": {"axis": {"labelAngle": 0, "title": "Brands"}, "field": "brand", "type": "nominal"}, "xOffset": {"field": "year", "type": "nominal"}, "y": {"axis": {"format": "$,.0f"}, "field": "Yearly Sales", "title": "Yearly Revenue ($)", "type": "quantitative"}}, "height": 250, "title": "Year 1 & Year 2 Revenues", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-27902780869bc5d097c0cbc8c77a82b6": [{"year": 1.0, "brand": "Charlie", "Yearly Sales": 5120.86962890625}, {"year": 1.0, "brand": "Alpha", "Yearly Sales": 33570.94921875}, {"year": 1.0, "brand": "Other", "Yearly Sales": 1535.22998046875}, {"year": 1.0, "brand": "Bravo", "Yearly Sales": 28603.345703125}, {"year": 1.0, "brand": "Delta", "Yearly Sales": 3271.509765625}, {"year": 2.0, "brand": "Other", "Yearly Sales": 1739.820068359375}, {"year": 2.0, "brand": "Delta", "Yearly Sales": 2820.810302734375}, {"year": 2.0, "brand": "Bravo", "Yearly Sales": 26926.84765625}, {"year": 2.0, "brand": "Charlie", "Yearly Sales": 3922.6796875}, {"year": 2.0, "brand": "Alpha", "Yearly Sales": 35250.73828125}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [22]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">annual_change_sales</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"brand:N"</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Brand'</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"% Change:Q"</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">".0%"</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="p">[</span><span class="s2">"% Change"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># fixed this </span>
        <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">"green"</span><span class="p">),</span>  <span class="c1"># The positive color</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">"red"</span><span class="p">)</span>  <span class="c1"># The negative color</span>
    <span class="p">),</span>
    <span class="n">text</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
        <span class="s1">'% Change'</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="p">(</span><span class="s2">".1%"</span><span class="p">)</span>
    <span class="p">)</span>
        
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">'Y-o-Y % Change in Revenue'</span>
<span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span> <span class="o">+</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> 
                                 <span class="n">baseline</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">if_</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="p">[</span><span class="s1">'% Change'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">)),</span>
                                 <span class="n">dy</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">if_</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="p">[</span><span class="s1">'% Change'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                                 <span class="n">dx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-ca356ac287984272b768dba85de3ebb5.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-ca356ac287984272b768dba85de3ebb5.vega-embed details,
  #altair-viz-ca356ac287984272b768dba85de3ebb5.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-ca356ac287984272b768dba85de3ebb5"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-ca356ac287984272b768dba85de3ebb5") {
      outputDiv = document.getElementById("altair-viz-ca356ac287984272b768dba85de3ebb5");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "layer": [{"mark": {"type": "bar"}, "encoding": {"color": {"condition": {"test": "(datum['% Change'] > 0)", "value": "green"}, "value": "red"}, "text": {"field": "% Change", "format": ".1%", "type": "quantitative"}, "x": {"axis": {"labelAngle": 0}, "field": "brand", "title": "Brand", "type": "nominal"}, "y": {"axis": {"format": ".0%"}, "field": "% Change", "type": "quantitative"}}, "title": "Y-o-Y % Change in Revenue"}, {"mark": {"type": "text", "align": "center", "baseline": {"expr": "if((datum['% Change'] >= 0),'bottom','top')"}, "dx": 0, "dy": {"expr": "if((datum['% Change'] >= 0),-2,2)"}}, "encoding": {"color": {"condition": {"test": "(datum['% Change'] > 0)", "value": "green"}, "value": "red"}, "text": {"field": "% Change", "format": ".1%", "type": "quantitative"}, "x": {"axis": {"labelAngle": 0}, "field": "brand", "title": "Brand", "type": "nominal"}, "y": {"axis": {"format": ".0%"}, "field": "% Change", "type": "quantitative"}}, "title": "Y-o-Y % Change in Revenue"}], "data": {"name": "data-83fc2058f5f49f8580120e6c626b599b"}, "height": 250, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-83fc2058f5f49f8580120e6c626b599b": [{"year": 2.0, "brand": "Alpha", "% Change": 0.05003698542714119}, {"year": 2.0, "brand": "Bravo", "% Change": -0.05861195549368858}, {"year": 2.0, "brand": "Charlie", "% Change": -0.23398172855377197}, {"year": 2.0, "brand": "Delta", "% Change": -0.13776497542858124}, {"year": 2.0, "brand": "Other", "% Change": 0.1332634836435318}, {"year": 2.0, "brand": "Total", "% Change": -0.019985711202025414}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Annual-Market-Share">Annual Market Share<a class="anchor-link" href="#Annual-Market-Share">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [23]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">market_share</span> <span class="o">=</span> <span class="n">annual_sales_pivot</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Total'</span><span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">market_share</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s2">"year"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Annual Market Share (%)"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Year"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">()</span>
    <span class="o">.</span><span class="n">cols_hide</span><span class="p">(</span><span class="s1">'Total'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s2">"white"</span><span class="p">,</span> <span class="s2">"rebeccapurple"</span><span class="p">]</span>
    <span class="p">)</span>    
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[23]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="rbawlemmjh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#rbawlemmjh table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#rbawlemmjh thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#rbawlemmjh p { margin: 0 !important; padding: 0 !important; }
 #rbawlemmjh .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #rbawlemmjh .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #rbawlemmjh .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #rbawlemmjh .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #rbawlemmjh .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #rbawlemmjh .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #rbawlemmjh .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #rbawlemmjh .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #rbawlemmjh .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #rbawlemmjh .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #rbawlemmjh .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #rbawlemmjh .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #rbawlemmjh .gt_spanner_row { border-bottom-style: hidden !important; }
 #rbawlemmjh .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #rbawlemmjh .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #rbawlemmjh .gt_from_md> :first-child { margin-top: 0 !important; }
 #rbawlemmjh .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #rbawlemmjh .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #rbawlemmjh .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #rbawlemmjh .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #rbawlemmjh .gt_row_group_first td { border-top-width: 2px !important; }
 #rbawlemmjh .gt_row_group_first th { border-top-width: 2px !important; }
 #rbawlemmjh .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #rbawlemmjh .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #rbawlemmjh .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #rbawlemmjh .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #rbawlemmjh .gt_left { text-align: left !important; }
 #rbawlemmjh .gt_center { text-align: center !important; }
 #rbawlemmjh .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #rbawlemmjh .gt_font_normal { font-weight: normal !important; }
 #rbawlemmjh .gt_font_bold { font-weight: bold !important; }
 #rbawlemmjh .gt_font_italic { font-style: italic !important; }
 #rbawlemmjh .gt_super { font-size: 65% !important; }
 #rbawlemmjh .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #rbawlemmjh .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Annual Market Share (%)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Year" rowspan="1" scope="col">Year</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">1.0</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7141a0;">46.56%</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #865dae;">39.67%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e9e2f1;">7.10%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1ecf6;">4.54%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f8f6fb;">2.13%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">2.0</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #663399;">49.89%</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #8a64b1;">38.11%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee8f4;">5.55%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">3.99%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f5fa;">2.46%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [24]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">annual_change_share</span> <span class="o">=</span> <span class="n">market_share</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'Total'</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="p">)</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s2">"year"</span><span class="p">,</span>  <span class="c1"># Keep 'year' as a fixed identifier</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s1">'% Change'</span><span class="p">,</span>  
    <span class="n">variable_name</span><span class="o">=</span><span class="s1">'brand'</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">annual_change_share</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'% Change in Market Share'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">cols_hide</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span>   
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">brand</span><span class="o">=</span><span class="s1">'Y-o-Y % Change'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[24]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="zvqshtshlp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#zvqshtshlp table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#zvqshtshlp thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#zvqshtshlp p { margin: 0 !important; padding: 0 !important; }
 #zvqshtshlp .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #zvqshtshlp .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #zvqshtshlp .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #zvqshtshlp .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #zvqshtshlp .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #zvqshtshlp .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #zvqshtshlp .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #zvqshtshlp .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #zvqshtshlp .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #zvqshtshlp .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #zvqshtshlp .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #zvqshtshlp .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #zvqshtshlp .gt_spanner_row { border-bottom-style: hidden !important; }
 #zvqshtshlp .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #zvqshtshlp .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #zvqshtshlp .gt_from_md> :first-child { margin-top: 0 !important; }
 #zvqshtshlp .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #zvqshtshlp .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #zvqshtshlp .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #zvqshtshlp .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #zvqshtshlp .gt_row_group_first td { border-top-width: 2px !important; }
 #zvqshtshlp .gt_row_group_first th { border-top-width: 2px !important; }
 #zvqshtshlp .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #zvqshtshlp .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #zvqshtshlp .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #zvqshtshlp .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #zvqshtshlp .gt_left { text-align: left !important; }
 #zvqshtshlp .gt_center { text-align: center !important; }
 #zvqshtshlp .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #zvqshtshlp .gt_font_normal { font-weight: normal !important; }
 #zvqshtshlp .gt_font_bold { font-weight: bold !important; }
 #zvqshtshlp .gt_font_italic { font-style: italic !important; }
 #zvqshtshlp .gt_super { font-size: 65% !important; }
 #zvqshtshlp .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #zvqshtshlp .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">% Change in Market Share</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Change" rowspan="1" scope="col">% Change</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dbcee7;">7.15%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #fff3dd;">−3.94%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffbd45;">−21.84%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffdb99;">−12.02%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #af95ca;">15.64%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [25]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">annual_change_share</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"brand:N"</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">,</span> 
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"% Change:Q"</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">".0%"</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="p">[</span><span class="s2">"% Change"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># fixed this </span>
        <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">"green"</span><span class="p">),</span>  <span class="c1"># The positive color</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">"red"</span><span class="p">)</span>  <span class="c1"># The negative color</span>
    <span class="p">),</span>
    <span class="n">text</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
        <span class="s1">'% Change'</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="p">(</span><span class="s2">".1%"</span><span class="p">)</span>
    <span class="p">)</span>
        
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">'% Change in Annual Market Share'</span>
<span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span> <span class="o">+</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> 
                                 <span class="n">baseline</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">if_</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="p">[</span><span class="s1">'% Change'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">)),</span>
                                 <span class="n">dy</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">if_</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="p">[</span><span class="s1">'% Change'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span>
                                 <span class="n">dx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-8bf87dc43deb411eae6278c889658569.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-8bf87dc43deb411eae6278c889658569.vega-embed details,
  #altair-viz-8bf87dc43deb411eae6278c889658569.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-8bf87dc43deb411eae6278c889658569"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8bf87dc43deb411eae6278c889658569") {
      outputDiv = document.getElementById("altair-viz-8bf87dc43deb411eae6278c889658569");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "layer": [{"mark": {"type": "bar"}, "encoding": {"color": {"condition": {"test": "(datum['% Change'] > 0)", "value": "green"}, "value": "red"}, "text": {"field": "% Change", "format": ".1%", "type": "quantitative"}, "x": {"axis": {"labelAngle": 0}, "field": "brand", "title": "Brands", "type": "nominal"}, "y": {"axis": {"format": ".0%"}, "field": "% Change", "type": "quantitative"}}, "title": "% Change in Annual Market Share"}, {"mark": {"type": "text", "align": "center", "baseline": {"expr": "if((datum['% Change'] >= 0),'bottom','top')"}, "dx": 0, "dy": {"expr": "if((datum['% Change'] >= 0),-3,3)"}}, "encoding": {"color": {"condition": {"test": "(datum['% Change'] > 0)", "value": "green"}, "value": "red"}, "text": {"field": "% Change", "format": ".1%", "type": "quantitative"}, "x": {"axis": {"labelAngle": 0}, "field": "brand", "title": "Brands", "type": "nominal"}, "y": {"axis": {"format": ".0%"}, "field": "% Change", "type": "quantitative"}}, "title": "% Change in Annual Market Share"}], "data": {"name": "data-91b8feb11e2831868bd25a658d7f229d"}, "height": 250, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-91b8feb11e2831868bd25a658d7f229d": [{"year": 2.0, "brand": "Alpha", "% Change": 0.07145068049430847}, {"year": 2.0, "brand": "Bravo", "% Change": -0.039413999766111374}, {"year": 2.0, "brand": "Charlie", "% Change": -0.21836011111736298}, {"year": 2.0, "brand": "Delta", "% Change": -0.12018119543790817}, {"year": 2.0, "brand": "Other", "% Change": 0.15637443959712982}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Average-SKU-Price">Average SKU Price<a class="anchor-link" href="#Average-SKU-Price">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [26]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">avg_sku_price</span> <span class="o">=</span> <span class="n">grocery_lf</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'sku_id'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">52</span><span class="p">)</span> <span class="o">&amp;</span> <span class="c1"># pricing in the first year</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span> <span class="c1"># Filter by Alpha brand </span>
<span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">,</span> <span class="s1">'sku_id'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'sku_id'</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Int8</span><span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">avg_sku_price</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'sku_id'</span><span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Average SKU Retail Prices'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"SKU IDs"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_currency</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="s1">'Average Price ($)'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[26]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="djqofimtry" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#djqofimtry table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#djqofimtry thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#djqofimtry p { margin: 0 !important; padding: 0 !important; }
 #djqofimtry .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #djqofimtry .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #djqofimtry .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #djqofimtry .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #djqofimtry .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #djqofimtry .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #djqofimtry .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #djqofimtry .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #djqofimtry .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #djqofimtry .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #djqofimtry .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #djqofimtry .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #djqofimtry .gt_spanner_row { border-bottom-style: hidden !important; }
 #djqofimtry .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #djqofimtry .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #djqofimtry .gt_from_md> :first-child { margin-top: 0 !important; }
 #djqofimtry .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #djqofimtry .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #djqofimtry .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #djqofimtry .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #djqofimtry .gt_row_group_first td { border-top-width: 2px !important; }
 #djqofimtry .gt_row_group_first th { border-top-width: 2px !important; }
 #djqofimtry .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #djqofimtry .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #djqofimtry .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #djqofimtry .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #djqofimtry .gt_left { text-align: left !important; }
 #djqofimtry .gt_center { text-align: center !important; }
 #djqofimtry .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #djqofimtry .gt_font_normal { font-weight: normal !important; }
 #djqofimtry .gt_font_bold { font-weight: bold !important; }
 #djqofimtry .gt_font_italic { font-style: italic !important; }
 #djqofimtry .gt_super { font-size: 65% !important; }
 #djqofimtry .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #djqofimtry .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Alpha - Average SKU Retail Prices</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="SKU IDs" rowspan="1" scope="col">SKU IDs</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Average Price ($)" rowspan="1" scope="col">Average Price ($)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ded3e9;">4</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f3f9;">$1.85</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #d3c5e2;">5</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e4dbed;">$3.44</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #c8b6db;">6</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ede7f3;">$2.61</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #bda8d3;">7</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d2c3e1;">$5.10</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #b299cc;">8</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #8258ac;">$12.43</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #a88ac5;">9</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c2aed6;">$6.59</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #9d7cbd;">10</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #9775ba;">$10.49</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #926db6;">11</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1edf6;">$2.27</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #875faf;">12</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe5f2;">$2.79</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #7142a0;">14</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f1f8;">$1.99</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #663399;">15</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e5dced;">$3.42</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">16</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee8f3;">$2.58</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">17</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe5f2;">$2.80</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">18</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e6deee;">$3.27</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">19</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ede7f3;">$2.62</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">20</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e4dced;">$3.43</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">21</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e9e2f1;">$2.99</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">22</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">$2.09</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [27]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">avg_sku_price</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'sku_id'</span><span class="p">))</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[27]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 2)</small><table border="1" class="dataframe"><thead><tr><th>statistic</th><th>price</th></tr><tr><td>str</td><td>f64</td></tr></thead><tbody><tr><td>"count"</td><td>18.0</td></tr><tr><td>"null_count"</td><td>0.0</td></tr><tr><td>"mean"</td><td>4.042794</td></tr><tr><td>"std"</td><td>2.947076</td></tr><tr><td>"min"</td><td>1.84705</td></tr><tr><td>"25%"</td><td>2.582056</td></tr><tr><td>"50%"</td><td>2.99</td></tr><tr><td>"75%"</td><td>3.438098</td></tr><tr><td>"max"</td><td>12.43</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Garbage-Collect">Garbage Collect<a class="anchor-link" href="#Garbage-Collect">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [28]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'grocery_lf'</span><span class="p">,</span> <span class="s1">'sku_lf'</span><span class="p">,</span> <span class="s1">'kiwi_lf'</span><span class="p">,</span> <span class="s1">'In'</span><span class="p">,</span> <span class="s1">'exceptions'</span><span class="p">,</span> <span class="s1">'active_variables'</span><span class="p">]</span>

<span class="n">active_variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">var</span> <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)</span>   <span class="c1"># Exclude variables that start with "_"</span>
    <span class="ow">and</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exceptions</span>    <span class="c1"># Exclude variables in the exceptions list</span>
    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">LayerChart</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>  <span class="c1"># Remove these types only</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">active_variables</span><span class="p">:</span>
    <span class="k">del</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">var</span><span class="p">]</span>
<span class="k">del</span> <span class="n">active_variables</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">,</span> <span class="n">var</span>

<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[28]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>2462</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Exploring-Variation-in-Buyer-Behaviour"><span style="color:#956bbf">Exploring Variation in Buyer Behaviour</span><a class="anchor-link" href="#Exploring-Variation-in-Buyer-Behaviour">¶</a></h3><hr/>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The objective here is to explore how to perform the basic analyses that describe the variation we observe in buyer behaviour in a given time period. We will continue to work with the edible grocery dataset, exploring both purchase frequency and spend.</p>
<p>Before we can doing any analysis, we need to create some summary datasets. The first will summarise <strong>how many times each panellist purchased each brand as well as in the category</strong>. The second will summarise <strong>how much each panellist spent on each brand and in the category</strong>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [29]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">grocery_lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3102016</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'trans_id'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">844</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[29]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (6, 7)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>trans_id</th><th>week</th><th>sku_id</th><th>units</th><th>price</th><th>brand</th></tr><tr><td>u32</td><td>i32</td><td>u16</td><td>u8</td><td>i16</td><td>f32</td><td>cat</td></tr></thead><tbody><tr><td>3102016</td><td>844</td><td>4</td><td>5</td><td>1</td><td>3.49</td><td>"Alpha"</td></tr><tr><td>3102016</td><td>844</td><td>4</td><td>5</td><td>1</td><td>3.49</td><td>"Alpha"</td></tr><tr><td>3102016</td><td>844</td><td>4</td><td>5</td><td>1</td><td>3.49</td><td>"Alpha"</td></tr><tr><td>3102016</td><td>844</td><td>4</td><td>15</td><td>1</td><td>3.49</td><td>"Alpha"</td></tr><tr><td>3102016</td><td>844</td><td>4</td><td>15</td><td>1</td><td>3.49</td><td>"Alpha"</td></tr><tr><td>3102016</td><td>844</td><td>4</td><td>89</td><td>1</td><td>2.49</td><td>"Delta"</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>On this one shopping trip (<code>trans_id</code> = 844), panellist <code>3102021</code> purchased a total of six items: three packs of SKU 5, two packs of SKU 15, and one pack of SKU 89. They purchased two different brand, Alpha and Delta.</p>
<p>Why are three lines for SKU 5 and not one line with units = 3. This is simply a function of how the items were scanned at the checkout. Some checkout operators will scan the three items separately; this would result in three lines in the transaction file, each with units = 1. Others will scan the item and press “3” on their till, resulting in one line in the transaction file with units = 3.</p>
<p>By convention, this purchase occasion is recorded as one <strong>category transaction</strong>, one Alpha transaction, and one Delta transaction. The number of units of Alpha purchased is five. When we say that the panellist made one category transaction, we mean they purchased at least one item in the category on that shopping trip. When we say that the panellist made one Alpha transaction, we mean they purchased at least one item associated with the brand on that shopping trip.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>In order to analyse buyer behaviour in terms of transactions, we need to know the <strong>number of brand and category transactions for each person</strong>. We cannot work directly with the dataset we have been using; we effectively need to collapse the five rows associated with Alpha into one. This will require some intermediate analysis, which we undertake in the following manner.</p>
<p>Result of the intermediate prep should produce a dataset that summarizes transaction 844 by panellist 3102016 as 1 occasion of Alpha brand purchase and 1 occasion of Delta brand purchase:</p>
<div>
<img alt="No description has been provided for this image" src="references\intermediate-data-prep.png" width="1000"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Panellist-Level-Data-Preparation">Panellist-Level Data Preparation<a class="anchor-link" href="#Panellist-Level-Data-Preparation">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<div style="max-width:600px;margin-left: auto; margin-right: auto;">
<img alt="No description has been provided for this image" src="references\Consumer-Panel-Data-Relationship.png" width="600"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>One row per transaction</strong>, with a binary indicator of whether or not each brand was purchased.</p>
<ul>
<li><p>Filter for year == 1, group by transaction ID, panel ID and brand, then count unique panel_ids per transaction and brand</p>
</li>
<li><p>Each panelist has done some number of transactions. Group unique transactions and obtain the count of transactions occasions in which any listed brand was purchased</p>
</li>
<li><p>Note: this is not a sum of total units (by brand) purchased per panellist.</p>
</li>
<li><p>Note: Because there are multiple entires for the same transaction ID, we are not doing a count of brand instance per panelist (without trans_id grouping) as this would duplicate the occasions in some cases.</p>
</li>
<li><p>Produce a dataset where there is just one row per transaction, with a binary indicator of whether or not each brand was purchased.</p>
</li>
<li><p>Create a new column to track category purchase. Each row is an instance of at least one brand purchase so category column is set to 1.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Panellist-level <em>transaction</em> summary</strong></p>
<p>The function below executes a query plan which summarizes each panellist's purchase occasions (transactions) for each brand</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [30]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">trans_summary</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">lf</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
    
    <span class="c1"># Primary Step: Filter by Year 1 and Remove Unused Columns</span>
    <span class="n">filtered_lf</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">year</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Intermediate Step: Group by trans_id, panel_id, and brand</span>
    <span class="n">group_trans</span> <span class="o">=</span> <span class="n">filtered_lf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">,</span> <span class="s1">'units'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
        <span class="s1">'trans_id'</span><span class="p">,</span> <span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'brand'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="n">brand</span> <span class="o">==</span> <span class="s2">"Category"</span><span class="p">:</span>
        <span class="c1"># Panellist-level category transaction summary</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">group_trans</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
            <span class="s1">'panel_id'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Panellist-level brand transaction summary</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">group_trans</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="n">brand</span>
        <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
            <span class="s1">'panel_id'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">summary</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'trans_id'</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Brands Purchased'</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [31]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">trans_pivot</span><span class="p">(</span><span class="n">lf</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
    
    <span class="c1"># Primary Step: Filter by Year 1 and Remove Unused Columns</span>
    <span class="n">filtered_lf</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">year</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Intermediate Step: Group by trans_id, panel_id, and brand</span>
    <span class="n">group_trans</span> <span class="o">=</span> <span class="n">filtered_lf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">,</span> <span class="s1">'units'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
        <span class="s1">'trans_id'</span><span class="p">,</span> <span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'brand'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span> <span class="c1"># count of unique entires</span>
    
    <span class="n">summary</span> <span class="o">=</span> <span class="n">group_trans</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s2">"len"</span>
        
    <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">other</span><span class="o">=</span><span class="n">group_trans</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'panel_id'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">'trans_id'</span><span class="p">:</span> <span class="s1">'Category'</span><span class="p">}</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Panellist-level <em>spend</em> summary</strong></p>
<p>The function below executes a query plan which summarizes the amount each panellist spent on each brand (and in the category) during year 1.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [32]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">spend_summary</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">lf</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
    
    <span class="n">group_spend</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">year</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span>
    <span class="p">)</span>
    
    <span class="k">if</span> <span class="n">brand</span> <span class="o">==</span> <span class="s2">"Category"</span><span class="p">:</span>
        <span class="c1"># Panellist-level category spend summary</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">group_spend</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'brand'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
            <span class="s1">'panel_id'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Panellist-level brand spend summary</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">group_spend</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
            <span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'brand'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="n">brand</span>
        <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [33]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">spend_pivot</span><span class="p">(</span><span class="n">lf</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
    
    <span class="n">group_spend</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">year</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'spend'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'sum'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
        <span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">group_spend</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Panellist-level <em>volume purchasing</em> summary</strong></p>
<p>The function below executes a query plan which summarises each panellist’s volume purchasing in year 1.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [34]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">vol_summary</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">lf</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span>
        <span class="n">group_vol</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">year</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span> <span class="o">&amp;</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span>
        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">other</span><span class="o">=</span><span class="n">sku_lf</span><span class="p">,</span>
            <span class="n">left_on</span><span class="o">=</span><span class="s1">'sku_id'</span><span class="p">,</span>
            <span class="n">right_on</span><span class="o">=</span><span class="s1">'sku_id'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="s1">'sku_id'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="c1"># volume column that is the product of weight of each SKU and the units of SKU sold</span>
            <span class="p">(((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">))</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span> <span class="c1"># # weight from grams to kilograms</span>
        <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'weight'</span><span class="p">)</span>
        <span class="p">)</span>
        
        <span class="k">if</span> <span class="n">brand</span> <span class="o">==</span> <span class="s2">"Category"</span><span class="p">:</span>
            <span class="c1"># Panellist-level category volume sales summary</span>
            <span class="n">summary</span> <span class="o">=</span> <span class="n">group_vol</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
                <span class="s1">'panel_id'</span>
            <span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Panellist-level brand volume sales summary</span>
            <span class="n">summary</span> <span class="o">=</span> <span class="n">group_vol</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
                <span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'brand'</span>
            <span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="n">brand</span>
            <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [35]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">vol_pivot</span><span class="p">(</span><span class="n">lf</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span>
        <span class="n">group_vol</span> <span class="o">=</span> <span class="n">lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">year</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span> <span class="o">&amp;</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">52</span><span class="p">))</span>
        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">other</span><span class="o">=</span><span class="n">sku_lf</span><span class="p">,</span>
            <span class="n">left_on</span><span class="o">=</span><span class="s1">'sku_id'</span><span class="p">,</span>
            <span class="n">right_on</span><span class="o">=</span><span class="s1">'sku_id'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span><span class="s1">'sku_id'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="c1"># volume column that is the product of weight of each SKU and the units of SKU sold</span>
            <span class="p">(((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">))</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span> <span class="c1"># # weight from grams to kilograms</span>
        <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'weight'</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
            <span class="n">on</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
            <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
            <span class="n">values</span><span class="o">=</span><span class="s1">'volume'</span><span class="p">,</span>
            <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'sum'</span>
        <span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span>
        <span class="p">)</span>
        
    <span class="k">return</span> <span class="n">group_vol</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Looking at panellist-level spend and panellist-level volume purchasing, we note that for each row, <code>Category</code> equals the sum of the brand numbers, as we would expect. But this is not always the case in panellist-level transactions. Why is the sum of the brand-specific numbers sometimes greater than the associated category number?</p>
<p>Answer: Because a single transactions (once grouped) can have occasions of multiple brand purchases but the transaction only counts as one occasion of a category purchase. Consider the panellist <code>3102016</code> and her transaction ID <code>844</code>, The 4 entires on the one transaction ID count as a single category transaction, a single Alpha brand transaction and a single Delta transaction. The category transaction count is not a sum of brand purchase transaction count because regardless of the brand(s) and quantities purchased, the panelist purchased the category once in that transaction only.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Examining-Purchase-Frequency">Examining Purchase Frequency<a class="anchor-link" href="#Examining-Purchase-Frequency">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Two standard brand performance metrics that summarize purchasing behaviour are <strong>penetration</strong> and <strong>purchases per buyer (PPB)</strong>.</p>
<ul>
<li><em>Penetration</em> is the percentage of households buying the product/category at least once in the given time period.<ul>
<li>In order to compute this, we need to know the number of panellists buying the product at least once in the time period of interest and the size of the panel during this period.</li>
</ul>
</li>
<li><em>Purchases per buyer (PPB)</em> is the average number of times (separate shopping trips) the product/category was purchased (in the given time period) by those households that made at least one product/category purchase (in the given time period).<ul>
<li>i.e. purchases per buyer (PPB) is the average number of times the product was purchased (in the given time period) per buyer.</li>
<li>This is computed as the total number of purchase occasions on which the product was purchased by the panellists (in the time period of interest) divided by the number of panellists that purchased the product at least once (in the time period of interest).</li>
</ul>
</li>
</ul>
<p>Looking at <em>panellist-level transaction summary</em>, we see that there are 4574 rows in this table, meaning that we have summary data on the purchasing of 4574 households in year 1. But there are 5021 households in the panel. What has happened to the remaining 447 households? They did not make any category purchase during the year. (But they will have purchased in other categories.)</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [36]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># the number of panellists who purchased each brand at least once in year 1</span>
<span class="n">buyers</span> <span class="o">=</span> <span class="n">trans_pivot</span><span class="p">(</span><span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">,</span> <span class="s1">'Category'</span>
<span class="p">)</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span>
    <span class="n">variable_name</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s1">'buyers'</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">buyers</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Number of Buyers in Year 1'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands/Category"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3_000</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">buyers</span><span class="o">=</span><span class="s1">'# Of Buyers'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[36]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="ifxqmsjlmv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#ifxqmsjlmv table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#ifxqmsjlmv thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#ifxqmsjlmv p { margin: 0 !important; padding: 0 !important; }
 #ifxqmsjlmv .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #ifxqmsjlmv .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #ifxqmsjlmv .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #ifxqmsjlmv .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #ifxqmsjlmv .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #ifxqmsjlmv .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #ifxqmsjlmv .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #ifxqmsjlmv .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #ifxqmsjlmv .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #ifxqmsjlmv .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #ifxqmsjlmv .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #ifxqmsjlmv .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #ifxqmsjlmv .gt_spanner_row { border-bottom-style: hidden !important; }
 #ifxqmsjlmv .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #ifxqmsjlmv .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #ifxqmsjlmv .gt_from_md> :first-child { margin-top: 0 !important; }
 #ifxqmsjlmv .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #ifxqmsjlmv .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #ifxqmsjlmv .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #ifxqmsjlmv .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #ifxqmsjlmv .gt_row_group_first td { border-top-width: 2px !important; }
 #ifxqmsjlmv .gt_row_group_first th { border-top-width: 2px !important; }
 #ifxqmsjlmv .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #ifxqmsjlmv .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #ifxqmsjlmv .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #ifxqmsjlmv .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #ifxqmsjlmv .gt_left { text-align: left !important; }
 #ifxqmsjlmv .gt_center { text-align: center !important; }
 #ifxqmsjlmv .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #ifxqmsjlmv .gt_font_normal { font-weight: normal !important; }
 #ifxqmsjlmv .gt_font_bold { font-weight: bold !important; }
 #ifxqmsjlmv .gt_font_italic { font-style: italic !important; }
 #ifxqmsjlmv .gt_super { font-size: 65% !important; }
 #ifxqmsjlmv .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #ifxqmsjlmv .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Number of Buyers in Year 1</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands/Category" rowspan="1" scope="col">Brands/Category</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="# Of Buyers" rowspan="1" scope="col"># Of Buyers</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #7a4da6;">2,624</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #7d52a8;">2,562</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #d9cde6;">813</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f0ebf5;">380</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafc;">176</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Category</th>
<td class="gt_row gt_center">4,574</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [37]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># On how many purchase occasions did the brand/category buyers of each brand/category buy that brand/category?</span>
<span class="c1"># i.e, On how many purchase occasions did the 2624 buyers of Alpha buy Alpha?</span>
<span class="n">transactions</span> <span class="o">=</span> <span class="n">trans_pivot</span><span class="p">(</span><span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">,</span> <span class="s1">'Category'</span>
<span class="p">)</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span>
    <span class="n">variable_name</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s1">'transactions'</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">transactions</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Purchase Occasions by Buyers'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands/Category"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">10_000</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">transactions</span><span class="o">=</span><span class="s1">'# Of Transactions'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[37]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="fuyrwhbnue" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#fuyrwhbnue table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#fuyrwhbnue thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#fuyrwhbnue p { margin: 0 !important; padding: 0 !important; }
 #fuyrwhbnue .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #fuyrwhbnue .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #fuyrwhbnue .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #fuyrwhbnue .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #fuyrwhbnue .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #fuyrwhbnue .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #fuyrwhbnue .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #fuyrwhbnue .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #fuyrwhbnue .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #fuyrwhbnue .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #fuyrwhbnue .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #fuyrwhbnue .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #fuyrwhbnue .gt_spanner_row { border-bottom-style: hidden !important; }
 #fuyrwhbnue .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #fuyrwhbnue .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #fuyrwhbnue .gt_from_md> :first-child { margin-top: 0 !important; }
 #fuyrwhbnue .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #fuyrwhbnue .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #fuyrwhbnue .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #fuyrwhbnue .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #fuyrwhbnue .gt_row_group_first td { border-top-width: 2px !important; }
 #fuyrwhbnue .gt_row_group_first th { border-top-width: 2px !important; }
 #fuyrwhbnue .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #fuyrwhbnue .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #fuyrwhbnue .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #fuyrwhbnue .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #fuyrwhbnue .gt_left { text-align: left !important; }
 #fuyrwhbnue .gt_center { text-align: center !important; }
 #fuyrwhbnue .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #fuyrwhbnue .gt_font_normal { font-weight: normal !important; }
 #fuyrwhbnue .gt_font_bold { font-weight: bold !important; }
 #fuyrwhbnue .gt_font_italic { font-style: italic !important; }
 #fuyrwhbnue .gt_super { font-size: 65% !important; }
 #fuyrwhbnue .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #fuyrwhbnue .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Purchase Occasions by Buyers</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands/Category" rowspan="1" scope="col">Brands/Category</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="# Of Transactions" rowspan="1" scope="col"># Of Transactions</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #7547a3;">9,060</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8258ac;">8,255</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #e7e0ef;">1,882</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f5fa;">859</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">422</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Category</th>
<td class="gt_row gt_center">20,030</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [38]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">panel_size</span> <span class="o">=</span> <span class="mi">5021</span>

<span class="c1"># Penetration is simply the number of brand buyers divided by the number of panellists, expressed as a percentage</span>
<span class="n">penetration</span> <span class="o">=</span> <span class="n">buyers</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'buyers'</span><span class="p">)</span> <span class="o">/</span> <span class="n">panel_size</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'penetration'</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Purchases per buyer (PPB) is simply to total number of purchases occasions divided by the number of buyers.</span>
<span class="n">ppb</span> <span class="o">=</span> <span class="n">transactions</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'transactions'</span><span class="p">)</span> <span class="o">/</span> <span class="n">penetration</span><span class="o">.</span><span class="n">get_column</span><span class="p">(</span><span class="s1">'buyers'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'ppb'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [39]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">penetration</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Penetration by Category &amp; Brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands/Category"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">penetration</span><span class="o">=</span><span class="s1">'Penetration (%)'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_hide</span><span class="p">(</span><span class="s1">'buyers'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[39]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="fdgerurcwk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#fdgerurcwk table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#fdgerurcwk thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#fdgerurcwk p { margin: 0 !important; padding: 0 !important; }
 #fdgerurcwk .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #fdgerurcwk .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #fdgerurcwk .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #fdgerurcwk .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #fdgerurcwk .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #fdgerurcwk .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #fdgerurcwk .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #fdgerurcwk .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #fdgerurcwk .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #fdgerurcwk .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #fdgerurcwk .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #fdgerurcwk .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #fdgerurcwk .gt_spanner_row { border-bottom-style: hidden !important; }
 #fdgerurcwk .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #fdgerurcwk .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #fdgerurcwk .gt_from_md> :first-child { margin-top: 0 !important; }
 #fdgerurcwk .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #fdgerurcwk .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #fdgerurcwk .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #fdgerurcwk .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #fdgerurcwk .gt_row_group_first td { border-top-width: 2px !important; }
 #fdgerurcwk .gt_row_group_first th { border-top-width: 2px !important; }
 #fdgerurcwk .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #fdgerurcwk .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #fdgerurcwk .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #fdgerurcwk .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #fdgerurcwk .gt_left { text-align: left !important; }
 #fdgerurcwk .gt_center { text-align: center !important; }
 #fdgerurcwk .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #fdgerurcwk .gt_font_normal { font-weight: normal !important; }
 #fdgerurcwk .gt_font_bold { font-weight: bold !important; }
 #fdgerurcwk .gt_font_italic { font-style: italic !important; }
 #fdgerurcwk .gt_super { font-size: 65% !important; }
 #fdgerurcwk .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #fdgerurcwk .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Penetration by Category &amp; Brand</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands/Category" rowspan="1" scope="col">Brands/Category</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Penetration (%)" rowspan="1" scope="col">Penetration (%)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #af94ca;">52.26%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b197cb;">51.03%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e6deee;">16.19%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3f0f7;">7.57%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf8fb;">3.51%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Category</th>
<td class="gt_row gt_right">91.10%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [40]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">ppb</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'brand'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Purchases per Buyer (PPB)'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands/Category"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span><span class="n">ppb</span><span class="o">=</span><span class="s1">'PPB'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_hide</span><span class="p">(</span><span class="s1">'transactions'</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[40]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="mzgadauxun" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#mzgadauxun table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#mzgadauxun thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#mzgadauxun p { margin: 0 !important; padding: 0 !important; }
 #mzgadauxun .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #mzgadauxun .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #mzgadauxun .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #mzgadauxun .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #mzgadauxun .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #mzgadauxun .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #mzgadauxun .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #mzgadauxun .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #mzgadauxun .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #mzgadauxun .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #mzgadauxun .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #mzgadauxun .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #mzgadauxun .gt_spanner_row { border-bottom-style: hidden !important; }
 #mzgadauxun .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #mzgadauxun .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #mzgadauxun .gt_from_md> :first-child { margin-top: 0 !important; }
 #mzgadauxun .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #mzgadauxun .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #mzgadauxun .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #mzgadauxun .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #mzgadauxun .gt_row_group_first td { border-top-width: 2px !important; }
 #mzgadauxun .gt_row_group_first th { border-top-width: 2px !important; }
 #mzgadauxun .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #mzgadauxun .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #mzgadauxun .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #mzgadauxun .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #mzgadauxun .gt_left { text-align: left !important; }
 #mzgadauxun .gt_center { text-align: center !important; }
 #mzgadauxun .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #mzgadauxun .gt_font_normal { font-weight: normal !important; }
 #mzgadauxun .gt_font_bold { font-weight: bold !important; }
 #mzgadauxun .gt_font_italic { font-style: italic !important; }
 #mzgadauxun .gt_super { font-size: 65% !important; }
 #mzgadauxun .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #mzgadauxun .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Purchases per Buyer (PPB)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands/Category" rowspan="1" scope="col">Brands/Category</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="PPB" rowspan="1" scope="col">PPB</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #9572b9;">3.45</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #9c7cbd;">3.22</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b8a1d0;">2.31</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #baa3d1;">2.26</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b69dce;">2.40</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Category</th>
<td class="gt_row gt_right">4.38</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We see that 91% of the households in the panel purchased in the category at least once in year 1. (This is a widely purchased product category.) On average, they purchased in the category 4.4 times that year. Looking at Alpha, we see that 52% of the households in the panel purchased the brand at least once, purchasing it on average 3.5 times.</p>
<p>Penetration and PPB are in fact summary measures of an important but frequently overlooked summary of buyer behaviour: the <strong>distribution of purchase frequency</strong>. We first explore how to create this summary of category purchasing and then consider how to create such a summary of brand purchasing.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Distribution-of-Purchase">Distribution of Purchase<a class="anchor-link" href="#Distribution-of-Purchase">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Distribution-of-Category-Purchase-Frequency">Distribution of Category Purchase Frequency<a class="anchor-link" href="#Distribution-of-Category-Purchase-Frequency">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Looking at the <em>panellist-level transaction summary</em>, the distribution of category purchasing is determined by counting how many households made one category purchase (panellists 3102011, 3102046, etc.), two category purchases (panellists 3102012, 3102021, etc.), and so on.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [41]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Category Transaction Distribution</span>
<span class="n">category_trans_dist</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">len</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Frequency"</span><span class="p">))</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span> 
    <span class="c1"># Add zero purchase row to the top of the data series with a new column name 'Frequency'</span>
    <span class="o">.</span><span class="n">pipe</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">"# of Purchases"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="s2">"Frequency"</span><span class="p">:</span> <span class="p">[</span><span class="n">panel_size</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s2">"Frequency"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()],</span>
                <span class="p">}</span>
            <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"# of Purchases"</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="c1"># Add percentage of total column</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Total"</span><span class="p">)</span>
    <span class="p">)</span>    
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">category_trans_dist</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Category Purchase Distribution'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Frequency'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[41]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="bwwofmevzp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#bwwofmevzp table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#bwwofmevzp thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#bwwofmevzp p { margin: 0 !important; padding: 0 !important; }
 #bwwofmevzp .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #bwwofmevzp .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #bwwofmevzp .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #bwwofmevzp .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #bwwofmevzp .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #bwwofmevzp .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #bwwofmevzp .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #bwwofmevzp .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #bwwofmevzp .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #bwwofmevzp .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #bwwofmevzp .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #bwwofmevzp .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #bwwofmevzp .gt_spanner_row { border-bottom-style: hidden !important; }
 #bwwofmevzp .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #bwwofmevzp .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #bwwofmevzp .gt_from_md> :first-child { margin-top: 0 !important; }
 #bwwofmevzp .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #bwwofmevzp .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #bwwofmevzp .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #bwwofmevzp .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #bwwofmevzp .gt_row_group_first td { border-top-width: 2px !important; }
 #bwwofmevzp .gt_row_group_first th { border-top-width: 2px !important; }
 #bwwofmevzp .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #bwwofmevzp .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #bwwofmevzp .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #bwwofmevzp .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #bwwofmevzp .gt_left { text-align: left !important; }
 #bwwofmevzp .gt_center { text-align: center !important; }
 #bwwofmevzp .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #bwwofmevzp .gt_font_normal { font-weight: normal !important; }
 #bwwofmevzp .gt_font_bold { font-weight: bold !important; }
 #bwwofmevzp .gt_font_italic { font-style: italic !important; }
 #bwwofmevzp .gt_super { font-size: 65% !important; }
 #bwwofmevzp .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #bwwofmevzp .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="3">Category Purchase Distribution</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="# of Purchases" rowspan="1" scope="col"># of Purchases</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Frequency" rowspan="1" scope="col">Frequency</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% of Total" rowspan="1" scope="col">% of Total</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">0</th>
<td class="gt_row gt_center">447</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bba4d2;">8.90%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">1</th>
<td class="gt_row gt_center">667</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #9978bb;">13.28%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">2</th>
<td class="gt_row gt_center">759</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #8b65b2;">15.12%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">3</th>
<td class="gt_row gt_center">757</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #8c65b2;">15.08%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">4</th>
<td class="gt_row gt_center">612</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #a283c1;">12.19%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">5</th>
<td class="gt_row gt_center">514</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #b197cb;">10.24%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">6</th>
<td class="gt_row gt_center">381</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #c5b2d8;">7.59%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">7</th>
<td class="gt_row gt_center">247</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d9cde6;">4.92%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">8</th>
<td class="gt_row gt_center">209</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dfd5ea;">4.16%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">9</th>
<td class="gt_row gt_center">127</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ece5f2;">2.53%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">10</th>
<td class="gt_row gt_center">85</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f2eef6;">1.69%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">11</th>
<td class="gt_row gt_center">57</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f3f9;">1.14%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">12</th>
<td class="gt_row gt_center">50</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f5fa;">1.00%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">13</th>
<td class="gt_row gt_center">27</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fbfafc;">0.54%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">14</th>
<td class="gt_row gt_center">31</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf9fc;">0.62%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">15</th>
<td class="gt_row gt_center">15</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfcfd;">0.30%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">16</th>
<td class="gt_row gt_center">16</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfcfd;">0.32%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">17</th>
<td class="gt_row gt_center">7</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefefe;">0.14%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">18</th>
<td class="gt_row gt_center">4</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefeff;">0.08%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">19</th>
<td class="gt_row gt_center">2</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.04%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">20</th>
<td class="gt_row gt_center">4</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefeff;">0.08%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">22</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.02%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">25</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.02%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">27</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.02%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>If we wish to create a visual representation of this distribution, it is tempting to simply plot the data in % of total column. However, the resulting plot would be misleading as <em>some purchase frequencies are missing in the data</em>. In particular, we see that no one made <em>21 category purchases; ditto for 23, 24, and 26</em>. One solution is to insert manually the missing number of purchases levels with 0 frequencies and then plot the data. However, the observed (relative) frequencies in the right tail are so small that they do not show up in a plot. We can therefore create a <strong>right-censored distribution</strong>. Here we have chosen 15 as the (right) censoring point; we see that 51 households (or 1% of the panellists) made 15 or more category purchases in year 1.</p>
<p>There is nothing magical about our choice of 15. Generally, the choice of censoring point is a function of how many bins you wish to display and the height of the right-most bar with which you feel comfortable.</p>
<p>Note that while the right-censored distribution is useful when creating a summary figure or table, it is of limited value beyond that. For example, it is not possible to compute the <strong>mean purchase frequency</strong> (and therefore PPB) from this summary.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [42]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Create a custom bin list (with an overflow bin) to label categories</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">15</span> <span class="k">else</span> <span class="s1">'15+'</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">category_trans_dist</span><span class="p">,</span>
    <span class="n">column</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
    <span class="n">x_title</span><span class="o">=</span><span class="s2">"Number of Category Transactions"</span><span class="p">,</span>
    <span class="n">y_title</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Households"</span><span class="p">,</span>
    <span class="n">chart_title</span><span class="o">=</span><span class="s2">"Category Transaction Distribution (%)"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Distribution of category purchasing in year 1"</span><span class="p">,</span>
    <span class="n">left_closed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">compute_rel_freq</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-2de9e3c97b1c43eda0e96b9fe63d1bbc.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-2de9e3c97b1c43eda0e96b9fe63d1bbc.vega-embed details,
  #altair-viz-2de9e3c97b1c43eda0e96b9fe63d1bbc.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-2de9e3c97b1c43eda0e96b9fe63d1bbc"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2de9e3c97b1c43eda0e96b9fe63d1bbc") {
      outputDiv = document.getElementById("altair-viz-2de9e3c97b1c43eda0e96b9fe63d1bbc");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-4322957793433f898d00a0a95915944f"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"labelAngle": 0, "title": "Number of Category Transactions"}, "field": "cut", "sort": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15+"], "type": "ordinal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Category Transaction Distribution (%)", "subtitle": "Distribution of category purchasing in year 1"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-4322957793433f898d00a0a95915944f": [{"# of Purchases": 0, "Frequency": 447, "% of Total": 0.08902609042023502, "cut": "0"}, {"# of Purchases": 1, "Frequency": 667, "% of Total": 0.1328420633339972, "cut": "1"}, {"# of Purchases": 2, "Frequency": 759, "% of Total": 0.15116510655247958, "cut": "2"}, {"# of Purchases": 3, "Frequency": 757, "% of Total": 0.15076677952599082, "cut": "3"}, {"# of Purchases": 4, "Frequency": 612, "% of Total": 0.12188807010555666, "cut": "4"}, {"# of Purchases": 5, "Frequency": 514, "% of Total": 0.10237004580760804, "cut": "5"}, {"# of Purchases": 6, "Frequency": 381, "% of Total": 0.07588129854610635, "cut": "6"}, {"# of Purchases": 7, "Frequency": 247, "% of Total": 0.049193387771360286, "cut": "7"}, {"# of Purchases": 8, "Frequency": 209, "% of Total": 0.041625174268074085, "cut": "8"}, {"# of Purchases": 9, "Frequency": 127, "% of Total": 0.02529376618203545, "cut": "9"}, {"# of Purchases": 10, "Frequency": 85, "% of Total": 0.01692889862577176, "cut": "10"}, {"# of Purchases": 11, "Frequency": 57, "% of Total": 0.011352320254929297, "cut": "11"}, {"# of Purchases": 12, "Frequency": 50, "% of Total": 0.00995817566221868, "cut": "12"}, {"# of Purchases": 13, "Frequency": 27, "% of Total": 0.005377414857598088, "cut": "13"}, {"# of Purchases": 14, "Frequency": 31, "% of Total": 0.006174068910575582, "cut": "14"}, {"# of Purchases": 15, "Frequency": 15, "% of Total": 0.0029874526986656044, "cut": "15+"}, {"# of Purchases": 16, "Frequency": 16, "% of Total": 0.003186616211909978, "cut": "15+"}, {"# of Purchases": 17, "Frequency": 7, "% of Total": 0.0013941445927106153, "cut": "15+"}, {"# of Purchases": 18, "Frequency": 4, "% of Total": 0.0007966540529774945, "cut": "15+"}, {"# of Purchases": 19, "Frequency": 2, "% of Total": 0.00039832702648874725, "cut": "15+"}, {"# of Purchases": 20, "Frequency": 4, "% of Total": 0.0007966540529774945, "cut": "15+"}, {"# of Purchases": 22, "Frequency": 1, "% of Total": 0.00019916351324437363, "cut": "15+"}, {"# of Purchases": 25, "Frequency": 1, "% of Total": 0.00019916351324437363, "cut": "15+"}, {"# of Purchases": 27, "Frequency": 1, "% of Total": 0.00019916351324437363, "cut": "15+"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We see that 9% of the panellists made no category purchases, 13% of the panellists made one category purchase, . . . , and 1% of the panellists made at least 15 category purchases in year 1.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="The-Relationship-Between-the-Mean-and-PPB">The Relationship Between the Mean and PPB<a class="anchor-link" href="#The-Relationship-Between-the-Mean-and-PPB">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>What is the average number of times the category was purchased by a household in year 1?</p>
<ul>
<li>Recall that mean, which we denote by $E(X)$, is given by:<ul>
<li>$$E(X)=\sum\frac{xf_{x}}{n}$$</li>
<li>where $f_{x}$ is the frequency with which $x$ occurs in the dataset, $n$ is the sample size, and the summation is over all possible values of $x$.</li>
</ul>
</li>
<li>Denoting the relative frequency with which $x$ occurs (i.e., $f_{x}/n$) by $P(X = x)$, the mean is given by:<ul>
<li>$$E(X)=\sum x P(X = x)$$</li>
<li>More formally, we can say that $P(X = x)$ is the empirical probability that a randomly chosen household made $x$ purchases.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [43]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Mean of the relative purchase frequency</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">category_trans_dist</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">mean</span><span class="w"> </span><span class="si">= :</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>mean = 3.989
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We see that average number of category purchases is 4.0. Why is this different from the 4.4 purchases per buyer (PPB) computed above? The mean we have just computed <em>includes those households that made zero purchases</em>, whereas <em>PPB is the average among those households that made at least one</em> (in this case category) purchase.</p>
<p>We can derive the relationship between these two quantities (mean of the relative frequency and PPB) in the following manner:
$$
  \begin{aligned}
    PBB &amp;= \sum_{x=1}^{\max x} \frac{xf_{x}}{n-f_{0}} \\
                   &amp;= \sum_{x=0}^{\max x} \frac{xf_{x}}{n-f_{0}} \\
                   &amp;= \sum_{x=0}^{\max x} \left(\frac{xf_{x}}{n-f_{0}}\right)\left(\frac{n}{n}\right) \\
                   &amp;= \sum_{x=0}^{\max x} \left(\frac{xf_{x}}{n}\right)\left(\frac{n}{n-f_{0}}\right) \\
                   &amp;= \left(\frac{n}{n-f_{0}}\right)\sum_{x=0}^{\max x} \left(\frac{xf_{x}}{n}\right) \\
                   &amp;= \frac{E(X)}{1-P(X=0)}
  \end{aligned}
$$</p>
<p>In other words, <strong>PPB is the mean divided by penetration</strong>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [44]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># All category PPB computations here are equivalent</span>
<span class="n">ppb_category</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">/</span> <span class="n">penetration</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Category'</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ppb_category</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ppb</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Category'</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">ppb_category</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">category_trans_dist</span><span class="p">[</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ppb_category</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>4.379099256668124
4.379099256668124
4.379099256668124
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Distribution-of-Brand-Purchase-Frequency">Distribution of Brand Purchase Frequency<a class="anchor-link" href="#Distribution-of-Brand-Purchase-Frequency">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let us now create the distribution of purchase frequency for Alpha, which is. With the one exception noted below, the logic follows that associated with creating the distribution of category purchasing.</p>
<p>In contrast to the <code>groupby</code> aggregation output associated with our summary of category purchasing, this aggregation does contain a zero category. However, we must be careful in our interpretation of the associated frequency. We see that 1950 category buyers did not buy Alpha in year 1. However, in order to have a complete summary of brand purchasing, we should also account for those 447 households that made no category purchases that year. The number of panellists making zero purchases of Alpha is the total number of panellists (5021) minus the number of panellists that made 1, 2, 3, . . . purchases.</p>
<p><strong>Note</strong>: What is Alpha’s penetration of category buyers? (1 − 1950/4574) = 57%.</p>
<ul>
<li>Category Penetration = (1 - % of category buyers who did not purchase the brand)</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [45]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Alpha Brand Transaction Distribution</span>
<span class="n">alpha_trans_dist</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">len</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Frequency"</span><span class="p">))</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span> 
    <span class="o">.</span><span class="n">pipe</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">"# of Purchases"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="c1"># Calculate zero purchases by subtracting the total sum of all purchases from the full panel size</span>
                    <span class="s2">"Frequency"</span><span class="p">:</span> <span class="p">[</span><span class="n">panel_size</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s2">"Frequency"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()],</span> <span class="c1"># This ensures all panelists who made zero purchases are accounted for</span>
                <span class="p">}</span>
            <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"# of Purchases"</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="c1"># Add a '% of Total' column</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Total"</span><span class="p">)</span>
    <span class="p">)</span>    
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">alpha_trans_dist</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Alpha Purchase Distribution'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Frequency'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[45]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="lovfqujant" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#lovfqujant table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#lovfqujant thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#lovfqujant p { margin: 0 !important; padding: 0 !important; }
 #lovfqujant .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #lovfqujant .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #lovfqujant .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #lovfqujant .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #lovfqujant .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #lovfqujant .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #lovfqujant .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #lovfqujant .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #lovfqujant .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #lovfqujant .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #lovfqujant .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #lovfqujant .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #lovfqujant .gt_spanner_row { border-bottom-style: hidden !important; }
 #lovfqujant .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #lovfqujant .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #lovfqujant .gt_from_md> :first-child { margin-top: 0 !important; }
 #lovfqujant .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #lovfqujant .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #lovfqujant .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #lovfqujant .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #lovfqujant .gt_row_group_first td { border-top-width: 2px !important; }
 #lovfqujant .gt_row_group_first th { border-top-width: 2px !important; }
 #lovfqujant .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #lovfqujant .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #lovfqujant .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #lovfqujant .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #lovfqujant .gt_left { text-align: left !important; }
 #lovfqujant .gt_center { text-align: center !important; }
 #lovfqujant .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #lovfqujant .gt_font_normal { font-weight: normal !important; }
 #lovfqujant .gt_font_bold { font-weight: bold !important; }
 #lovfqujant .gt_font_italic { font-style: italic !important; }
 #lovfqujant .gt_super { font-size: 65% !important; }
 #lovfqujant .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #lovfqujant .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="3">Alpha Purchase Distribution</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="# of Purchases" rowspan="1" scope="col"># of Purchases</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Frequency" rowspan="1" scope="col">Frequency</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% of Total" rowspan="1" scope="col">% of Total</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">0</th>
<td class="gt_row gt_center">2,397</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #6d3c9e;">47.74%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">1</th>
<td class="gt_row gt_center">733</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d2c3e1;">14.60%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">2</th>
<td class="gt_row gt_center">517</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dfd5ea;">10.30%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">3</th>
<td class="gt_row gt_center">400</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e7deef;">7.97%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">4</th>
<td class="gt_row gt_center">277</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee8f4;">5.52%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">5</th>
<td class="gt_row gt_center">227</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1edf6;">4.52%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">6</th>
<td class="gt_row gt_center">144</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f3f9;">2.87%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">7</th>
<td class="gt_row gt_center">101</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f9f7fb;">2.01%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">8</th>
<td class="gt_row gt_center">71</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fbf9fc;">1.41%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">9</th>
<td class="gt_row gt_center">47</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fcfbfd;">0.94%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">10</th>
<td class="gt_row gt_center">28</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">0.56%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">11</th>
<td class="gt_row gt_center">24</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefdfe;">0.48%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">12</th>
<td class="gt_row gt_center">16</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefefe;">0.32%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">13</th>
<td class="gt_row gt_center">16</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefefe;">0.32%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">14</th>
<td class="gt_row gt_center">12</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefeff;">0.24%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">15</th>
<td class="gt_row gt_center">6</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.12%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">16</th>
<td class="gt_row gt_center">3</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.06%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">18</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.02%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">20</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ffffff;">0.02%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [46]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Create a custom bin list (with an overflow bin) to label categories</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">'10+'</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)]</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">alpha_trans_dist</span><span class="p">,</span>
    <span class="n">column</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
    <span class="n">x_title</span><span class="o">=</span><span class="s2">"Number of Transactions"</span><span class="p">,</span>
    <span class="n">y_title</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Households"</span><span class="p">,</span>
    <span class="n">chart_title</span><span class="o">=</span><span class="s2">"Alpha Transaction Distribution (%)"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Distribution of purchase frequency for Alpha in year 1"</span><span class="p">,</span>
    <span class="n">left_closed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">compute_rel_freq</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-84c5572d7d1a45d39b085ae26693264c.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-84c5572d7d1a45d39b085ae26693264c.vega-embed details,
  #altair-viz-84c5572d7d1a45d39b085ae26693264c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-84c5572d7d1a45d39b085ae26693264c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-84c5572d7d1a45d39b085ae26693264c") {
      outputDiv = document.getElementById("altair-viz-84c5572d7d1a45d39b085ae26693264c");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-6ee6bc3bebfb0a9d7733195d73163329"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"labelAngle": 0, "title": "Number of Transactions"}, "field": "cut", "sort": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10+"], "type": "ordinal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Alpha Transaction Distribution (%)", "subtitle": "Distribution of purchase frequency for Alpha in year 1"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-6ee6bc3bebfb0a9d7733195d73163329": [{"# of Purchases": 0, "Frequency": 2397, "% of Total": 0.47739494124676357, "cut": "0"}, {"# of Purchases": 1, "Frequency": 733, "% of Total": 0.14598685520812588, "cut": "1"}, {"# of Purchases": 2, "Frequency": 517, "% of Total": 0.10296753634734117, "cut": "2"}, {"# of Purchases": 3, "Frequency": 400, "% of Total": 0.07966540529774944, "cut": "3"}, {"# of Purchases": 4, "Frequency": 277, "% of Total": 0.05516829316869149, "cut": "4"}, {"# of Purchases": 5, "Frequency": 227, "% of Total": 0.045210117506472816, "cut": "5"}, {"# of Purchases": 6, "Frequency": 144, "% of Total": 0.028679545907189803, "cut": "6"}, {"# of Purchases": 7, "Frequency": 101, "% of Total": 0.020115514837681737, "cut": "7"}, {"# of Purchases": 8, "Frequency": 71, "% of Total": 0.014140609440350527, "cut": "8"}, {"# of Purchases": 9, "Frequency": 47, "% of Total": 0.00936068512248556, "cut": "9"}, {"# of Purchases": 10, "Frequency": 28, "% of Total": 0.005576578370842461, "cut": "10+"}, {"# of Purchases": 11, "Frequency": 24, "% of Total": 0.004779924317864967, "cut": "10+"}, {"# of Purchases": 12, "Frequency": 16, "% of Total": 0.003186616211909978, "cut": "10+"}, {"# of Purchases": 13, "Frequency": 16, "% of Total": 0.003186616211909978, "cut": "10+"}, {"# of Purchases": 14, "Frequency": 12, "% of Total": 0.0023899621589324833, "cut": "10+"}, {"# of Purchases": 15, "Frequency": 6, "% of Total": 0.0011949810794662417, "cut": "10+"}, {"# of Purchases": 16, "Frequency": 3, "% of Total": 0.0005974905397331208, "cut": "10+"}, {"# of Purchases": 18, "Frequency": 1, "% of Total": 0.00019916351324437363, "cut": "10+"}, {"# of Purchases": 20, "Frequency": 1, "% of Total": 0.00019916351324437363, "cut": "10+"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Distribution-of-Spend">Distribution of Spend<a class="anchor-link" href="#Distribution-of-Spend">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Distribution-of-Category-Spend">Distribution of Category Spend<a class="anchor-link" href="#Distribution-of-Category-Spend">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We now turn our attention to creating summaries of total spend. Our initial goal is to create a histogram of category spend (in dollars) across those panellists that made at least one purchase in the category in year 1. In the following plot, the raw total spend data have been binned in bins with a width of $5.</p>
<p>We see that 16% of category buyers spent up to $5 in the category during this one-year period; 23% spent between $5 and $10; . . . and 2% spent more than $50.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Before deciding on what bin width to use when creating the histogram, let us first compute some basic descriptive statistics.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [47]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">category_spend</span> <span class="o">=</span> <span class="n">spend_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span>

<span class="n">category_spend</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[47]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 2)</small><table border="1" class="dataframe"><thead><tr><th>statistic</th><th>spend</th></tr><tr><td>str</td><td>f64</td></tr></thead><tbody><tr><td>"count"</td><td>4574.0</td></tr><tr><td>"null_count"</td><td>0.0</td></tr><tr><td>"mean"</td><td>15.763424</td></tr><tr><td>"std"</td><td>12.876024</td></tr><tr><td>"min"</td><td>1.27</td></tr><tr><td>"25%"</td><td>6.76</td></tr><tr><td>"50%"</td><td>12.57</td></tr><tr><td>"75%"</td><td>20.74</td></tr><tr><td>"max"</td><td>166.699936</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We wish to visualize the variability in category spend. Given this objective, some would automatically think of creating a (kernel) density plot.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [48]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">category_spend</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span><span class="o">.</span><span class="n">transform_density</span><span class="p">(</span>
    <span class="s1">'spend'</span><span class="p">,</span>
    <span class="n">as_</span><span class="o">=</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">,</span> <span class="s1">'Density'</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"spend:Q"</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">150</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'Density:Q'</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[48]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-278ef0f184ac4a4c901cd4da1accf59f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-278ef0f184ac4a4c901cd4da1accf59f.vega-embed details,
  #altair-viz-278ef0f184ac4a4c901cd4da1accf59f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-278ef0f184ac4a4c901cd4da1accf59f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-278ef0f184ac4a4c901cd4da1accf59f") {
      outputDiv = document.getElementById("altair-viz-278ef0f184ac4a4c901cd4da1accf59f");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-d1cf35fde566aecebdb5c8817869b2be"}, "mark": {"type": "area"}, "encoding": {"x": {"field": "spend", "scale": {"domain": [0, 150]}, "type": "quantitative"}, "y": {"field": "Density", "type": "quantitative"}}, "height": 250, "transform": [{"density": "spend", "as": ["spend", "Density"]}], "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-d1cf35fde566aecebdb5c8817869b2be": [{"spend": 18.970001220703125}, {"spend": 2.5899999141693115}, {"spend": 24.299999237060547}, {"spend": 13.520000457763672}, {"spend": 6.270000457763672}, {"spend": 61.10000991821289}, {"spend": 12.8100004196167}, {"spend": 30.120004653930664}, {"spend": 31.009998321533203}, {"spend": 19.170001983642578}, {"spend": 10.969999313354492}, {"spend": 13.960000038146973}, {"spend": 14.960000991821289}, {"spend": 10.670000076293945}, {"spend": 15.420000076293945}, {"spend": 7.470000267028809}, {"spend": 21.079998016357422}, {"spend": 7.78000020980835}, {"spend": 14.489999771118164}, {"spend": 52.150001525878906}, {"spend": 5.159999847412109}, {"spend": 2.5899999141693115}, {"spend": 19.51999855041504}, {"spend": 8.950000762939453}, {"spend": 6.980000019073486}, {"spend": 6.78000020980835}, {"spend": 3.390000104904175}, {"spend": 8.029999732971191}, {"spend": 8.950000762939453}, {"spend": 7.53000020980835}, {"spend": 6.269999980926514}, {"spend": 23.439998626708984}, {"spend": 36.25}, {"spend": 25.520000457763672}, {"spend": 4.360000133514404}, {"spend": 22.610000610351562}, {"spend": 12.920000076293945}, {"spend": 8.180000305175781}, {"spend": 19.219999313354492}, {"spend": 28.409997940063477}, {"spend": 15.040000915527344}, {"spend": 23.729999542236328}, {"spend": 5.590000152587891}, {"spend": 9.239999771118164}, {"spend": 2.190000057220459}, {"spend": 6.680000305175781}, {"spend": 20.64000129699707}, {"spend": 6.880000114440918}, {"spend": 5.510000228881836}, {"spend": 19.78999900817871}, {"spend": 9.470000267028809}, {"spend": 9.270000457763672}, {"spend": 16.049999237060547}, {"spend": 20.450000762939453}, {"spend": 13.160000801086426}, {"spend": 14.850000381469727}, {"spend": 10.069999694824219}, {"spend": 26.19999885559082}, {"spend": 77.58000183105469}, {"spend": 2.990000009536743}, {"spend": 7.769999980926514}, {"spend": 20.440000534057617}, {"spend": 42.010005950927734}, {"spend": 8.569999694824219}, {"spend": 5.579999923706055}, {"spend": 19.240001678466797}, {"spend": 10.069999694824219}, {"spend": 14.450000762939453}, {"spend": 64.26000213623047}, {"spend": 19.639999389648438}, {"spend": 3.0799999237060547}, {"spend": 13.050000190734863}, {"spend": 5.179999828338623}, {"spend": 15.9399995803833}, {"spend": 2.490000009536743}, {"spend": 3.490000009536743}, {"spend": 20.1200008392334}, {"spend": 3.490000009536743}, {"spend": 2.690000057220459}, {"spend": 5.180000305175781}, {"spend": 16.0}, {"spend": 34.400001525878906}, {"spend": 19.040000915527344}, {"spend": 11.180000305175781}, {"spend": 6.760000228881836}, {"spend": 22.12000274658203}, {"spend": 6.480000019073486}, {"spend": 16.670000076293945}, {"spend": 7.970000267028809}, {"spend": 16.049999237060547}, {"spend": 9.539999961853027}, {"spend": 6.869999885559082}, {"spend": 21.94999885559082}, {"spend": 9.75}, {"spend": 34.5099983215332}, {"spend": 13.260000228881836}, {"spend": 5.269999980926514}, {"spend": 2.690000057220459}, {"spend": 22.600000381469727}, {"spend": 16.299999237060547}, {"spend": 5.779999732971191}, {"spend": 6.480000019073486}, {"spend": 32.939998626708984}, {"spend": 14.329999923706055}, {"spend": 47.36000442504883}, {"spend": 21.44999885559082}, {"spend": 21.57000160217285}, {"spend": 9.059999465942383}, {"spend": 13.760000228881836}, {"spend": 55.030006408691406}, {"spend": 34.98999786376953}, {"spend": 23.849998474121094}, {"spend": 12.25}, {"spend": 73.61000061035156}, {"spend": 14.6899995803833}, {"spend": 14.360000610351562}, {"spend": 64.64999389648438}, {"spend": 3.490000009536743}, {"spend": 33.099998474121094}, {"spend": 25.229999542236328}, {"spend": 5.880000114440918}, {"spend": 3.190000057220459}, {"spend": 13.239999771118164}, {"spend": 28.339998245239258}, {"spend": 13.65000057220459}, {"spend": 3.890000104904175}, {"spend": 6.119999885559082}, {"spend": 13.260000228881836}, {"spend": 12.859999656677246}, {"spend": 6.760000228881836}, {"spend": 11.070000648498535}, {"spend": 9.470000267028809}, {"spend": 4.980000019073486}, {"spend": 15.649999618530273}, {"spend": 26.809999465942383}, {"spend": 4.579999923706055}, {"spend": 21.899999618530273}, {"spend": 38.42000198364258}, {"spend": 19.020000457763672}, {"spend": 22.32000160217285}, {"spend": 23.1299991607666}, {"spend": 4.880000114440918}, {"spend": 3.690000057220459}, {"spend": 2.1700000762939453}, {"spend": 9.670000076293945}, {"spend": 32.60000228881836}, {"spend": 8.570000648498535}, {"spend": 51.83000564575195}, {"spend": 23.030000686645508}, {"spend": 7.860000133514404}, {"spend": 2.490000009536743}, {"spend": 3.2300000190734863}, {"spend": 9.970000267028809}, {"spend": 3.690000057220459}, {"spend": 14.440000534057617}, {"spend": 10.770000457763672}, {"spend": 16.299999237060547}, {"spend": 9.690000534057617}, {"spend": 2.5899999141693115}, {"spend": 25.60000228881836}, {"spend": 27.1200008392334}, {"spend": 16.389999389648438}, {"spend": 14.59000015258789}, {"spend": 76.62000274658203}, {"spend": 4.179999828338623}, {"spend": 24.540000915527344}, {"spend": 16.84000015258789}, {"spend": 7.78000020980835}, {"spend": 15.15000057220459}, {"spend": 32.51000213623047}, {"spend": 19.139999389648438}, {"spend": 3.690000057220459}, {"spend": 26.219999313354492}, {"spend": 17.360000610351562}, {"spend": 7.78000020980835}, {"spend": 6.180000305175781}, {"spend": 35.78999710083008}, {"spend": 36.909996032714844}, {"spend": 9.470000267028809}, {"spend": 18.43000030517578}, {"spend": 16.510000228881836}, {"spend": 18.639999389648438}, {"spend": 6.760000228881836}, {"spend": 15.170000076293945}, {"spend": 10.170000076293945}, {"spend": 13.459999084472656}, {"spend": 7.079999923706055}, {"spend": 6.779999732971191}, {"spend": 10.859999656677246}, {"spend": 14.950000762939453}, {"spend": 17.049999237060547}, {"spend": 26.829999923706055}, {"spend": 56.89999771118164}, {"spend": 3.490000009536743}, {"spend": 3.2300000190734863}, {"spend": 9.539999961853027}, {"spend": 3.569999933242798}, {"spend": 39.47999954223633}, {"spend": 8.949999809265137}, {"spend": 44.279998779296875}, {"spend": 33.94000244140625}, {"spend": 8.800000190734863}, {"spend": 9.539999961853027}, {"spend": 13.160000801086426}, {"spend": 6.319999694824219}, {"spend": 11.55000114440918}, {"spend": 8.690000534057617}, {"spend": 18.649999618530273}, {"spend": 2.5899999141693115}, {"spend": 17.030000686645508}, {"spend": 2.5899999141693115}, {"spend": 2.190000057220459}, {"spend": 17.239999771118164}, {"spend": 28.610000610351562}, {"spend": 3.490000009536743}, {"spend": 6.050000190734863}, {"spend": 24.43000030517578}, {"spend": 3.490000009536743}, {"spend": 4.690000057220459}, {"spend": 9.960000038146973}, {"spend": 17.350000381469727}, {"spend": 7.87000036239624}, {"spend": 3.690000057220459}, {"spend": 6.980000019073486}, {"spend": 13.460000038146973}, {"spend": 28.10999870300293}, {"spend": 10.829999923706055}, {"spend": 2.490000009536743}, {"spend": 36.279998779296875}, {"spend": 7.900000095367432}, {"spend": 20.65999984741211}, {"spend": 3.490000009536743}, {"spend": 9.970000267028809}, {"spend": 12.460000038146973}, {"spend": 20.64000129699707}, {"spend": 13.569999694824219}, {"spend": 13.130000114440918}, {"spend": 3.0799999237060547}, {"spend": 4.699999809265137}, {"spend": 15.34999942779541}, {"spend": 11.670000076293945}, {"spend": 36.279998779296875}, {"spend": 5.430000305175781}, {"spend": 15.579999923706055}, {"spend": 12.769999504089355}, {"spend": 24.110000610351562}, {"spend": 18.900001525878906}, {"spend": 2.190000057220459}, {"spend": 2.6500000953674316}, {"spend": 9.510000228881836}, {"spend": 22.440000534057617}, {"spend": 7.470000267028809}, {"spend": 6.279999732971191}, {"spend": 31.709999084472656}, {"spend": 11.25999927520752}, {"spend": 7.180000305175781}, {"spend": 9.869999885559082}, {"spend": 3.380000114440918}, {"spend": 13.550000190734863}, {"spend": 13.65999984741211}, {"spend": 41.769996643066406}, {"spend": 3.75}, {"spend": 28.420001983642578}, {"spend": 26.219999313354492}, {"spend": 3.5899999141693115}, {"spend": 3.75}, {"spend": 18.25}, {"spend": 11.199999809265137}, {"spend": 46.760005950927734}, {"spend": 30.349998474121094}, {"spend": 5.489999771118164}, {"spend": 2.7899999618530273}, {"spend": 2.2300000190734863}, {"spend": 6.579999923706055}, {"spend": 10.549999237060547}, {"spend": 6.079999923706055}, {"spend": 14.300000190734863}, {"spend": 20.14000129699707}, {"spend": 8.369999885559082}, {"spend": 33.01000213623047}, {"spend": 16.25}, {"spend": 4.489999771118164}, {"spend": 5.470000267028809}, {"spend": 7.380000114440918}, {"spend": 8.470000267028809}, {"spend": 2.2300000190734863}, {"spend": 39.06999969482422}, {"spend": 9.899999618530273}, {"spend": 2.380000114440918}, {"spend": 17.130001068115234}, {"spend": 7.289999961853027}, {"spend": 9.539999961853027}, {"spend": 80.5}, {"spend": 14.210000038146973}, {"spend": 4.380000114440918}, {"spend": 2.190000057220459}, {"spend": 8.850000381469727}, {"spend": 9.670000076293945}, {"spend": 9.970000267028809}, {"spend": 12.75999927520752}, {"spend": 38.500003814697266}, {"spend": 27.610000610351562}, {"spend": 9.550000190734863}, {"spend": 1.8899999856948853}, {"spend": 3.190000057220459}, {"spend": 6.880000114440918}, {"spend": 14.760000228881836}, {"spend": 13.520000457763672}, {"spend": 29.790002822875977}, {"spend": 30.709999084472656}, {"spend": 7.079999923706055}, {"spend": 1.9900000095367432}, {"spend": 20.639999389648438}, {"spend": 3.490000009536743}, {"spend": 9.070000648498535}, {"spend": 9.989999771118164}, {"spend": 32.1300048828125}, {"spend": 44.769996643066406}, {"spend": 21.490001678466797}, {"spend": 11.460000038146973}, {"spend": 21.959999084472656}, {"spend": 12.720000267028809}, {"spend": 19.940000534057617}, {"spend": 34.3900032043457}, {"spend": 4.279999732971191}, {"spend": 35.20000076293945}, {"spend": 2.490000009536743}, {"spend": 2.7899999618530273}, {"spend": 2.690000057220459}, {"spend": 9.760000228881836}, {"spend": 59.58000183105469}, {"spend": 3.569999933242798}, {"spend": 6.180000305175781}, {"spend": 20.630001068115234}, {"spend": 14.319999694824219}, {"spend": 16.029998779296875}, {"spend": 2.490000009536743}, {"spend": 22.500001907348633}, {"spend": 1.7899999618530273}, {"spend": 29.71000099182129}, {"spend": 9.470000267028809}, {"spend": 15.850000381469727}, {"spend": 11.949999809265137}, {"spend": 20.1299991607666}, {"spend": 6.460000038146973}, {"spend": 11.15999984741211}, {"spend": 13.520000457763672}, {"spend": 6.270000457763672}, {"spend": 1.7899999618530273}, {"spend": 23.420000076293945}, {"spend": 41.88999557495117}, {"spend": 14.84999942779541}, {"spend": 3.2899999618530273}, {"spend": 6.760000228881836}, {"spend": 23.529998779296875}, {"spend": 79.95001220703125}, {"spend": 31.889997482299805}, {"spend": 11.769999504089355}, {"spend": 20.6200008392334}, {"spend": 37.189998626708984}, {"spend": 18.899999618530273}, {"spend": 5.880000114440918}, {"spend": 17.43000030517578}, {"spend": 10.470000267028809}, {"spend": 3.390000104904175}, {"spend": 5.489999771118164}, {"spend": 17.25}, {"spend": 21.130001068115234}, {"spend": 6.039999961853027}, {"spend": 6.079999923706055}, {"spend": 8.369999885559082}, {"spend": 39.92000198364258}, {"spend": 13.949999809265137}, {"spend": 29.509998321533203}, {"spend": 23.530000686645508}, {"spend": 9.65999984741211}, {"spend": 19.940000534057617}, {"spend": 25.850000381469727}, {"spend": 16.469999313354492}, {"spend": 23.290000915527344}, {"spend": 6.579999923706055}, {"spend": 9.670000076293945}, {"spend": 20.940000534057617}, {"spend": 3.490000009536743}, {"spend": 23.1299991607666}, {"spend": 25.989999771118164}, {"spend": 15.670000076293945}, {"spend": 36.119998931884766}, {"spend": 6.869999885559082}, {"spend": 5.480000019073486}, {"spend": 3.0799999237060547}, {"spend": 21.229999542236328}, {"spend": 30.959999084472656}, {"spend": 2.6700000762939453}, {"spend": 6.140000343322754}, {"spend": 24.920000076293945}, {"spend": 5.099999904632568}, {"spend": 13.850000381469727}, {"spend": 7.470000267028809}, {"spend": 33.30999755859375}, {"spend": 25.959999084472656}, {"spend": 21.14000129699707}, {"spend": 16.05000114440918}, {"spend": 6.880000114440918}, {"spend": 10.170000076293945}, {"spend": 18.010000228881836}, {"spend": 34.61000061035156}, {"spend": 60.97999572753906}, {"spend": 5.570000171661377}, {"spend": 10.569999694824219}, {"spend": 8.470000267028809}, {"spend": 40.840003967285156}, {"spend": 1.2899999618530273}, {"spend": 6.239999771118164}, {"spend": 2.690000057220459}, {"spend": 8.510000228881836}, {"spend": 5.010000228881836}, {"spend": 8.949999809265137}, {"spend": 34.20000076293945}, {"spend": 8.369999885559082}, {"spend": 4.779999732971191}, {"spend": 11.670000076293945}, {"spend": 8.670000076293945}, {"spend": 20.31999969482422}, {"spend": 21.630001068115234}, {"spend": 2.5899999141693115}, {"spend": 10.829999923706055}, {"spend": 13.460000038146973}, {"spend": 11.970000267028809}, {"spend": 8.15999984741211}, {"spend": 3.380000114440918}, {"spend": 39.459999084472656}, {"spend": 14.309999465942383}, {"spend": 15.089999198913574}, {"spend": 12.959999084472656}, {"spend": 17.28999900817871}, {"spend": 13.210000038146973}, {"spend": 13.15000057220459}, {"spend": 29.520000457763672}, {"spend": 26.42999839782715}, {"spend": 26.14000129699707}, {"spend": 12.920000076293945}, {"spend": 17.860000610351562}, {"spend": 13.630000114440918}, {"spend": 19.639999389648438}, {"spend": 19.940000534057617}, {"spend": 12.960000991821289}, {"spend": 7.329999923706055}, {"spend": 17.81999969482422}, {"spend": 6.980000019073486}, {"spend": 3.190000057220459}, {"spend": 3.3499999046325684}, {"spend": 2.930000066757202}, {"spend": 8.420000076293945}, {"spend": 2.2899999618530273}, {"spend": 14.339999198913574}, {"spend": 20.420000076293945}, {"spend": 18.53999900817871}, {"spend": 5.180000305175781}, {"spend": 6.760000228881836}, {"spend": 26.6200008392334}, {"spend": 27.720003128051758}, {"spend": 7.079999923706055}, {"spend": 12.859999656677246}, {"spend": 17.25}, {"spend": 3.490000009536743}, {"spend": 17.450000762939453}, {"spend": 16.139999389648438}, {"spend": 20.14000129699707}, {"spend": 28.099998474121094}, {"spend": 14.130000114440918}, {"spend": 3.490000009536743}, {"spend": 3.390000104904175}, {"spend": 10.039999961853027}, {"spend": 12.130000114440918}, {"spend": 11.619999885559082}, {"spend": 5.480000019073486}, {"spend": 13.460000991821289}, {"spend": 18.350000381469727}, {"spend": 3.75}, {"spend": 19.71000099182129}, {"spend": 9.949999809265137}, {"spend": 13.949999809265137}, {"spend": 25.5}, {"spend": 6.880000114440918}, {"spend": 12.560001373291016}, {"spend": 1.8899999856948853}, {"spend": 2.7799999713897705}, {"spend": 52.250003814697266}, {"spend": 9.670000076293945}, {"spend": 96.760009765625}, {"spend": 36.48000717163086}, {"spend": 23.43000030517578}, {"spend": 6.760000228881836}, {"spend": 22.760000228881836}, {"spend": 8.220000267028809}, {"spend": 24.979997634887695}, {"spend": 3.490000009536743}, {"spend": 20.34000015258789}, {"spend": 23.90999984741211}, {"spend": 24.610002517700195}, {"spend": 27.910001754760742}, {"spend": 21.8799991607666}, {"spend": 6.460000038146973}, {"spend": 18.790000915527344}, {"spend": 6.880000114440918}, {"spend": 2.490000009536743}, {"spend": 6.760000228881836}, {"spend": 26.919998168945312}, {"spend": 2.690000057220459}, {"spend": 33.29999923706055}, {"spend": 9.690000534057617}, {"spend": 11.709999084472656}, {"spend": 23.950000762939453}, {"spend": 15.09000015258789}, {"spend": 3.1999998092651367}, {"spend": 15.449999809265137}, {"spend": 3.140000104904175}, {"spend": 14.359999656677246}, {"spend": 37.70000457763672}, {"spend": 28.389999389648438}, {"spend": 3.2899999618530273}, {"spend": 32.60000228881836}, {"spend": 2.190000057220459}, {"spend": 7.7699995040893555}, {"spend": 7.78000020980835}, {"spend": 6.980000019073486}, {"spend": 7.380000114440918}, {"spend": 3.690000057220459}, {"spend": 52.519996643066406}, {"spend": 22.43000030517578}, {"spend": 55.44999694824219}, {"spend": 9.75999927520752}, {"spend": 32.0}, {"spend": 6.569999694824219}, {"spend": 8.559999465942383}, {"spend": 45.02000045776367}, {"spend": 18.6200008392334}, {"spend": 23.10000228881836}, {"spend": 17.309999465942383}, {"spend": 16.40999984741211}, {"spend": 15.34999942779541}, {"spend": 3.569999933242798}, {"spend": 2.2100000381469727}, {"spend": 7.380000114440918}, {"spend": 3.490000009536743}, {"spend": 11.84000015258789}, {"spend": 6.680000305175781}, {"spend": 8.84999942779541}, {"spend": 16.719999313354492}, {"spend": 14.040000915527344}, {"spend": 9.069999694824219}, {"spend": 16.479999542236328}, {"spend": 21.1299991607666}, {"spend": 12.770000457763672}, {"spend": 49.93000411987305}, {"spend": 14.139999389648438}, {"spend": 42.0}, {"spend": 67.11000061035156}, {"spend": 7.569999694824219}, {"spend": 41.44000244140625}, {"spend": 2.0}, {"spend": 12.15999984741211}, {"spend": 11.260000228881836}, {"spend": 6.779999732971191}, {"spend": 15.030000686645508}, {"spend": 6.380000114440918}, {"spend": 21.64000129699707}, {"spend": 8.369999885559082}, {"spend": 35.38999938964844}, {"spend": 51.05000305175781}, {"spend": 23.920000076293945}, {"spend": 19.03999900817871}, {"spend": 39.37000274658203}, {"spend": 4.690000057220459}, {"spend": 9.65000057220459}, {"spend": 13.220000267028809}, {"spend": 19.18000030517578}, {"spend": 10.170000076293945}, {"spend": 45.73999786376953}, {"spend": 7.970000267028809}, {"spend": 11.729999542236328}, {"spend": 12.6899995803833}, {"spend": 8.970000267028809}, {"spend": 10.549999237060547}, {"spend": 6.680000305175781}, {"spend": 5.28000020980835}, {"spend": 3.4600000381469727}, {"spend": 3.0799999237060547}, {"spend": 20.69999885559082}, {"spend": 12.130001068115234}, {"spend": 21.09000015258789}, {"spend": 9.84000015258789}, {"spend": 13.5600004196167}, {"spend": 35.48999786376953}, {"spend": 27.799999237060547}, {"spend": 48.55999755859375}, {"spend": 15.94999885559082}, {"spend": 23.139999389648438}, {"spend": 23.899999618530273}, {"spend": 6.180000305175781}, {"spend": 6.279999732971191}, {"spend": 17.549999237060547}, {"spend": 2.490000009536743}, {"spend": 25.309999465942383}, {"spend": 14.380001068115234}, {"spend": 20.67999839782715}, {"spend": 8.680000305175781}, {"spend": 6.460000038146973}, {"spend": 30.30000114440918}, {"spend": 25.229999542236328}, {"spend": 10.269999504089355}, {"spend": 16.299999237060547}, {"spend": 11.660000801086426}, {"spend": 2.990000009536743}, {"spend": 9.539999961853027}, {"spend": 6.880000114440918}, {"spend": 19.600000381469727}, {"spend": 28.51999855041504}, {"spend": 46.480003356933594}, {"spend": 4.279999732971191}, {"spend": 52.340003967285156}, {"spend": 9.84000015258789}, {"spend": 2.380000114440918}, {"spend": 9.869999885559082}, {"spend": 3.490000009536743}, {"spend": 22.580001831054688}, {"spend": 7.87000036239624}, {"spend": 3.890000104904175}, {"spend": 18.339998245239258}, {"spend": 21.57000160217285}, {"spend": 17.1200008392334}, {"spend": 13.520000457763672}, {"spend": 3.690000057220459}, {"spend": 9.640000343322754}, {"spend": 33.22999954223633}, {"spend": 33.599998474121094}, {"spend": 10.84999942779541}, {"spend": 12.8100004196167}, {"spend": 10.170000076293945}, {"spend": 20.899999618530273}, {"spend": 13.520000457763672}, {"spend": 12.449999809265137}, {"spend": 15.029999732971191}, {"spend": 3.0799999237060547}, {"spend": 5.480000019073486}, {"spend": 18.639999389648438}, {"spend": 3.190000057220459}, {"spend": 2.190000057220459}, {"spend": 34.29999923706055}, {"spend": 3.2899999618530273}, {"spend": 29.71000099182129}, {"spend": 14.949999809265137}, {"spend": 22.940000534057617}, {"spend": 7.869999885559082}, {"spend": 20.14000129699707}, {"spend": 3.490000009536743}, {"spend": 14.829999923706055}, {"spend": 3.2300000190734863}, {"spend": 3.490000009536743}, {"spend": 15.25}, {"spend": 8.199999809265137}, {"spend": 15.710000991821289}, {"spend": 40.34000015258789}, {"spend": 13.739999771118164}, {"spend": 51.93000030517578}, {"spend": 11.470000267028809}, {"spend": 15.819999694824219}, {"spend": 7.569999694824219}, {"spend": 13.760000228881836}, {"spend": 18.43000030517578}, {"spend": 19.68000030517578}, {"spend": 17.43000030517578}, {"spend": 7.28000020980835}, {"spend": 19.14000129699707}, {"spend": 1.5700000524520874}, {"spend": 17.0}, {"spend": 34.38999938964844}, {"spend": 64.71000671386719}, {"spend": 1.8899999856948853}, {"spend": 20.899999618530273}, {"spend": 14.24000072479248}, {"spend": 2.5299999713897705}, {"spend": 18.520000457763672}, {"spend": 9.369999885559082}, {"spend": 3.380000114440918}, {"spend": 9.950000762939453}, {"spend": 14.460000038146973}, {"spend": 19.34000015258789}, {"spend": 19.360000610351562}, {"spend": 17.350000381469727}, {"spend": 6.579999923706055}, {"spend": 6.760000228881836}, {"spend": 13.109999656677246}, {"spend": 1.9900000095367432}, {"spend": 2.490000009536743}, {"spend": 31.10999870300293}, {"spend": 58.1400146484375}, {"spend": 5.649999618530273}, {"spend": 26.8799991607666}, {"spend": 48.77000427246094}, {"spend": 2.7899999618530273}, {"spend": 6.579999923706055}, {"spend": 15.639999389648438}, {"spend": 25.040000915527344}, {"spend": 23.530000686645508}, {"spend": 15.300000190734863}, {"spend": 31.809999465942383}, {"spend": 7.380000114440918}, {"spend": 7.569999694824219}, {"spend": 10.369999885559082}, {"spend": 2.490000009536743}, {"spend": 2.5899999141693115}, {"spend": 16.350000381469727}, {"spend": 18.670000076293945}, {"spend": 3.380000114440918}, {"spend": 20.040000915527344}, {"spend": 8.369999885559082}, {"spend": 3.990000009536743}, {"spend": 36.45000076293945}, {"spend": 64.31000518798828}, {"spend": 15.600000381469727}, {"spend": 29.630001068115234}, {"spend": 10.390000343322754}, {"spend": 29.520000457763672}, {"spend": 5.079999923706055}, {"spend": 15.950000762939453}, {"spend": 18.450000762939453}, {"spend": 29.520000457763672}, {"spend": 3.490000009536743}, {"spend": 4.980000019073486}, {"spend": 20.440000534057617}, {"spend": 3.690000057220459}, {"spend": 13.5600004196167}, {"spend": 15.950000762939453}, {"spend": 16.850000381469727}, {"spend": 11.170000076293945}, {"spend": 9.539999961853027}, {"spend": 3.75}, {"spend": 3.2300000190734863}, {"spend": 20.420000076293945}, {"spend": 19.880001068115234}, {"spend": 3.490000009536743}, {"spend": 1.9900000095367432}, {"spend": 1.7899999618530273}, {"spend": 8.170000076293945}, {"spend": 9.430000305175781}, {"spend": 41.33000183105469}, {"spend": 3.890000104904175}, {"spend": 7.409999847412109}, {"spend": 7.210000038146973}, {"spend": 17.25}, {"spend": 13.760000228881836}, {"spend": 6.980000019073486}, {"spend": 15.64000129699707}, {"spend": 6.670000076293945}, {"spend": 2.7899999618530273}, {"spend": 10.269999504089355}, {"spend": 10.069999694824219}, {"spend": 30.26999855041504}, {"spend": 21.73000144958496}, {"spend": 2.490000009536743}, {"spend": 11.049999237060547}, {"spend": 26.78999900817871}, {"spend": 34.869998931884766}, {"spend": 16.829999923706055}, {"spend": 7.480000019073486}, {"spend": 9.569999694824219}, {"spend": 13.559999465942383}, {"spend": 9.729999542236328}, {"spend": 35.589996337890625}, {"spend": 1.7899999618530273}, {"spend": 10.869999885559082}, {"spend": 18.09000015258789}, {"spend": 9.770000457763672}, {"spend": 60.03000259399414}, {"spend": 16.84000015258789}, {"spend": 35.900001525878906}, {"spend": 32.100006103515625}, {"spend": 13.65999984741211}, {"spend": 17.30000114440918}, {"spend": 10.270000457763672}, {"spend": 24.490001678466797}, {"spend": 6.980000019073486}, {"spend": 14.649999618530273}, {"spend": 2.490000009536743}, {"spend": 1.2699999809265137}, {"spend": 3.2899999618530273}, {"spend": 50.34000015258789}, {"spend": 33.689998626708984}, {"spend": 2.0299999713897705}, {"spend": 18.630001068115234}, {"spend": 3.390000104904175}, {"spend": 9.550000190734863}, {"spend": 6.510000228881836}, {"spend": 7.87000036239624}, {"spend": 11.360000610351562}, {"spend": 5.590000152587891}, {"spend": 6.079999923706055}, {"spend": 16.0}, {"spend": 14.9399995803833}, {"spend": 12.4399995803833}, {"spend": 20.639999389648438}, {"spend": 16.55000114440918}, {"spend": 19.779998779296875}, {"spend": 10.949999809265137}, {"spend": 2.690000057220459}, {"spend": 6.75}, {"spend": 5.28000020980835}, {"spend": 3.7799999713897705}, {"spend": 3.380000114440918}, {"spend": 12.510000228881836}, {"spend": 19.78999900817871}, {"spend": 10.229999542236328}, {"spend": 3.490000009536743}, {"spend": 5.980000019073486}, {"spend": 48.52000045776367}, {"spend": 11.0600004196167}, {"spend": 25.81999969482422}, {"spend": 12.850000381469727}, {"spend": 16.750001907348633}, {"spend": 10.070000648498535}, {"spend": 3.490000009536743}, {"spend": 42.65999984741211}, {"spend": 7.869999885559082}, {"spend": 25.28000259399414}, {"spend": 9.539999961853027}, {"spend": 3.380000114440918}, {"spend": 33.61000061035156}, {"spend": 3.490000009536743}, {"spend": 6.579999923706055}, {"spend": 33.29999923706055}, {"spend": 1.4900000095367432}, {"spend": 18.660001754760742}, {"spend": 11.670000076293945}, {"spend": 3.2899999618530273}, {"spend": 7.029999732971191}, {"spend": 3.2899999618530273}, {"spend": 11.949999809265137}, {"spend": 14.769999504089355}, {"spend": 3.380000114440918}, {"spend": 5.569999694824219}, {"spend": 8.6899995803833}, {"spend": 8.069999694824219}, {"spend": 31.189998626708984}, {"spend": 15.120000839233398}, {"spend": 29.020002365112305}, {"spend": 29.900001525878906}, {"spend": 16.299999237060547}, {"spend": 3.380000114440918}, {"spend": 6.680000305175781}, {"spend": 46.43000030517578}, {"spend": 9.569999694824219}, {"spend": 13.360000610351562}, {"spend": 18.71000099182129}, {"spend": 3.569999933242798}, {"spend": 3.380000114440918}, {"spend": 6.980000019073486}, {"spend": 15.449999809265137}, {"spend": 20.439998626708984}, {"spend": 75.15999603271484}, {"spend": 17.26999855041504}, {"spend": 29.219999313354492}, {"spend": 3.759999990463257}, {"spend": 3.390000104904175}, {"spend": 5.779999732971191}, {"spend": 30.06999969482422}, {"spend": 24.21999740600586}, {"spend": 7.380000114440918}, {"spend": 7.880000114440918}, {"spend": 3.490000009536743}, {"spend": 11.639999389648438}, {"spend": 23.660003662109375}, {"spend": 27.520000457763672}, {"spend": 7.470000267028809}, {"spend": 6.779999732971191}, {"spend": 16.950000762939453}, {"spend": 7.380000114440918}, {"spend": 8.779999732971191}, {"spend": 5.079999923706055}, {"spend": 2.6700000762939453}, {"spend": 10.550000190734863}, {"spend": 8.180000305175781}, {"spend": 5.569999694824219}, {"spend": 8.859999656677246}, {"spend": 11.029999732971191}, {"spend": 2.190000057220459}, {"spend": 10.15999984741211}, {"spend": 12.859999656677246}, {"spend": 5.180000305175781}, {"spend": 5.980000019073486}, {"spend": 20.139999389648438}, {"spend": 3.180000066757202}, {"spend": 9.239999771118164}, {"spend": 3.9800000190734863}, {"spend": 45.37999725341797}, {"spend": 4.880000114440918}, {"spend": 21.930002212524414}, {"spend": 8.069999694824219}, {"spend": 22.559999465942383}, {"spend": 7.079999923706055}, {"spend": 3.490000009536743}, {"spend": 36.4900016784668}, {"spend": 10.559999465942383}, {"spend": 3.390000104904175}, {"spend": 15.739999771118164}, {"spend": 4.059999942779541}, {"spend": 3.430000066757202}, {"spend": 28.28999900817871}, {"spend": 20.130001068115234}, {"spend": 10.070000648498535}, {"spend": 7.470000267028809}, {"spend": 35.5}, {"spend": 11.0600004196167}, {"spend": 6.869999885559082}, {"spend": 6.460000038146973}, {"spend": 12.530000686645508}, {"spend": 9.660000801086426}, {"spend": 23.530000686645508}, {"spend": 10.530000686645508}, {"spend": 12.350000381469727}, {"spend": 37.59000015258789}, {"spend": 27.819997787475586}, {"spend": 23.829999923706055}, {"spend": 6.050000190734863}, {"spend": 2.990000009536743}, {"spend": 19.81999969482422}, {"spend": 38.029998779296875}, {"spend": 27.82000160217285}, {"spend": 25.279998779296875}, {"spend": 8.270000457763672}, {"spend": 6.390000343322754}, {"spend": 10.930000305175781}, {"spend": 22.439998626708984}, {"spend": 2.490000009536743}, {"spend": 39.29000473022461}, {"spend": 53.390010833740234}, {"spend": 23.829999923706055}, {"spend": 57.91999816894531}, {"spend": 14.319999694824219}, {"spend": 14.44999885559082}, {"spend": 11.989999771118164}, {"spend": 23.030000686645508}, {"spend": 10.559999465942383}, {"spend": 24.420000076293945}, {"spend": 13.960000038146973}, {"spend": 20.21000099182129}, {"spend": 13.660000801086426}, {"spend": 7.569999694824219}, {"spend": 19.989999771118164}, {"spend": 12.989999771118164}, {"spend": 9.670000076293945}, {"spend": 17.75}, {"spend": 49.23999786376953}, {"spend": 5.579999923706055}, {"spend": 12.59000015258789}, {"spend": 9.869999885559082}, {"spend": 17.610000610351562}, {"spend": 46.60000228881836}, {"spend": 3.380000114440918}, {"spend": 25.170000076293945}, {"spend": 30.479999542236328}, {"spend": 18.450000762939453}, {"spend": 14.9399995803833}, {"spend": 10.569999694824219}, {"spend": 9.619999885559082}, {"spend": 22.989999771118164}, {"spend": 8.079999923706055}, {"spend": 42.95000076293945}, {"spend": 28.630001068115234}, {"spend": 38.45000457763672}, {"spend": 9.130000114440918}, {"spend": 61.6299934387207}, {"spend": 13.65999984741211}, {"spend": 3.690000057220459}, {"spend": 9.75}, {"spend": 18.31999969482422}, {"spend": 6.380000114440918}, {"spend": 23.84000015258789}, {"spend": 6.980000019073486}, {"spend": 8.470000267028809}, {"spend": 3.0799999237060547}, {"spend": 3.0799999237060547}, {"spend": 6.680000305175781}, {"spend": 32.89999771118164}, {"spend": 12.619999885559082}, {"spend": 10.270000457763672}, {"spend": 7.489999771118164}, {"spend": 30.209997177124023}, {"spend": 18.350000381469727}, {"spend": 14.760000228881836}, {"spend": 19.149999618530273}, {"spend": 1.9900000095367432}, {"spend": 6.179999828338623}, {"spend": 8.670000076293945}, {"spend": 2.190000057220459}, {"spend": 11.260000228881836}, {"spend": 11.729999542236328}, {"spend": 3.430000066757202}, {"spend": 12.439998626708984}, {"spend": 13.860000610351562}, {"spend": 8.180000305175781}, {"spend": 21.540000915527344}, {"spend": 18.75}, {"spend": 49.58000564575195}, {"spend": 14.980001449584961}, {"spend": 11.15999984741211}, {"spend": 18.389999389648438}, {"spend": 24.43000030517578}, {"spend": 2.4700000286102295}, {"spend": 62.36000061035156}, {"spend": 8.270000457763672}, {"spend": 19.71000099182129}, {"spend": 19.739999771118164}, {"spend": 10.369999885559082}, {"spend": 36.61000061035156}, {"spend": 57.33000564575195}, {"spend": 18.369998931884766}, {"spend": 8.420000076293945}, {"spend": 29.40000343322754}, {"spend": 9.369999885559082}, {"spend": 6.970000267028809}, {"spend": 14.25}, {"spend": 10.170000076293945}, {"spend": 24.3700008392334}, {"spend": 31.580005645751953}, {"spend": 19.03999900817871}, {"spend": 45.23999786376953}, {"spend": 9.84000015258789}, {"spend": 9.84000015258789}, {"spend": 4.720000267028809}, {"spend": 21.420000076293945}, {"spend": 31.23999786376953}, {"spend": 17.350000381469727}, {"spend": 26.01999855041504}, {"spend": 11.860000610351562}, {"spend": 3.490000009536743}, {"spend": 8.369999885559082}, {"spend": 29.770000457763672}, {"spend": 27.619998931884766}, {"spend": 10.559999465942383}, {"spend": 17.25}, {"spend": 11.469999313354492}, {"spend": 2.5899999141693115}, {"spend": 6.460000038146973}, {"spend": 10.470000267028809}, {"spend": 27.920001983642578}, {"spend": 36.09000015258789}, {"spend": 5.579999923706055}, {"spend": 16.709999084472656}, {"spend": 33.88999938964844}, {"spend": 12.460000991821289}, {"spend": 7.180000305175781}, {"spend": 11.360000610351562}, {"spend": 22.709999084472656}, {"spend": 7.869999885559082}, {"spend": 13.75}, {"spend": 3.0899999141693115}, {"spend": 13.760000228881836}, {"spend": 28.630001068115234}, {"spend": 12.960000038146973}, {"spend": 13.559999465942383}, {"spend": 3.380000114440918}, {"spend": 6.119999885559082}, {"spend": 3.2899999618530273}, {"spend": 1.5700000524520874}, {"spend": 6.680000305175781}, {"spend": 23.720001220703125}, {"spend": 20.829999923706055}, {"spend": 15.40999984741211}, {"spend": 17.34000015258789}, {"spend": 11.5}, {"spend": 39.36000061035156}, {"spend": 21.03999900817871}, {"spend": 5.569999694824219}, {"spend": 11.530000686645508}, {"spend": 13.520000457763672}, {"spend": 9.949999809265137}, {"spend": 39.47999954223633}, {"spend": 9.949999809265137}, {"spend": 12.630000114440918}, {"spend": 30.15999984741211}, {"spend": 26.739999771118164}, {"spend": 34.07999801635742}, {"spend": 26.80000114440918}, {"spend": 2.2899999618530273}, {"spend": 11.479999542236328}, {"spend": 10.270000457763672}, {"spend": 24.75}, {"spend": 3.690000057220459}, {"spend": 16.299999237060547}, {"spend": 20.34000015258789}, {"spend": 28.990001678466797}, {"spend": 2.4700000286102295}, {"spend": 5.579999923706055}, {"spend": 17.149999618530273}, {"spend": 3.190000057220459}, {"spend": 9.970000267028809}, {"spend": 10.789999961853027}, {"spend": 15.210000038146973}, {"spend": 17.350000381469727}, {"spend": 14.480000495910645}, {"spend": 37.72000503540039}, {"spend": 28.219999313354492}, {"spend": 2.4700000286102295}, {"spend": 23.65999984741211}, {"spend": 22.739999771118164}, {"spend": 2.5899999141693115}, {"spend": 13.850000381469727}, {"spend": 13.660000801086426}, {"spend": 31.209999084472656}, {"spend": 16.600000381469727}, {"spend": 13.549999237060547}, {"spend": 6.680000305175781}, {"spend": 43.310001373291016}, {"spend": 4.980000019073486}, {"spend": 9.070000648498535}, {"spend": 14.779999732971191}, {"spend": 5.110000133514404}, {"spend": 18.489999771118164}, {"spend": 10.75}, {"spend": 3.380000114440918}, {"spend": 16.020000457763672}, {"spend": 16.75}, {"spend": 22.46000099182129}, {"spend": 12.619999885559082}, {"spend": 10.140000343322754}, {"spend": 19.68000030517578}, {"spend": 2.7899999618530273}, {"spend": 2.990000009536743}, {"spend": 20.1200008392334}, {"spend": 20.549999237060547}, {"spend": 15.90999984741211}, {"spend": 2.2899999618530273}, {"spend": 13.5600004196167}, {"spend": 7.78000020980835}, {"spend": 6.869999885559082}, {"spend": 20.299999237060547}, {"spend": 3.380000114440918}, {"spend": 12.15999984741211}, {"spend": 9.119999885559082}, {"spend": 10.989999771118164}, {"spend": 2.190000057220459}, {"spend": 26.6200008392334}, {"spend": 15.710000038146973}, {"spend": 9.239999771118164}, {"spend": 3.740000009536743}, {"spend": 4.539999961853027}, {"spend": 17.43000030517578}, {"spend": 10.369999885559082}, {"spend": 10.670000076293945}, {"spend": 3.75}, {"spend": 6.980000019073486}, {"spend": 20.25}, {"spend": 5.819999694824219}, {"spend": 12.630000114440918}, {"spend": 3.380000114440918}, {"spend": 12.819999694824219}, {"spend": 6.880000114440918}, {"spend": 34.39999771118164}, {"spend": 3.490000009536743}, {"spend": 5.269999980926514}, {"spend": 24.26999855041504}, {"spend": 9.069999694824219}, {"spend": 4.980000019073486}, {"spend": 21.719999313354492}, {"spend": 43.970001220703125}, {"spend": 13.220000267028809}, {"spend": 1.8899999856948853}, {"spend": 13.360000610351562}, {"spend": 15.15999984741211}, {"spend": 6.78000020980835}, {"spend": 19.09000015258789}, {"spend": 9.609999656677246}, {"spend": 5.680000305175781}, {"spend": 3.430000066757202}, {"spend": 5.880000114440918}, {"spend": 7.640000343322754}, {"spend": 3.690000057220459}, {"spend": 2.450000047683716}, {"spend": 8.069999694824219}, {"spend": 3.0799999237060547}, {"spend": 10.489999771118164}, {"spend": 34.15999984741211}, {"spend": 3.679999828338623}, {"spend": 8.799999237060547}, {"spend": 11.069999694824219}, {"spend": 19.43000030517578}, {"spend": 17.979999542236328}, {"spend": 17.149999618530273}, {"spend": 8.949999809265137}, {"spend": 9.869999885559082}, {"spend": 18.350000381469727}, {"spend": 26.0}, {"spend": 5.720000267028809}, {"spend": 2.490000009536743}, {"spend": 3.380000114440918}, {"spend": 20.96000099182129}, {"spend": 6.78000020980835}, {"spend": 27.219999313354492}, {"spend": 23.31999969482422}, {"spend": 47.53000259399414}, {"spend": 6.680000305175781}, {"spend": 6.460000038146973}, {"spend": 9.539999961853027}, {"spend": 6.880000114440918}, {"spend": 25.029998779296875}, {"spend": 18.25}, {"spend": 4.940000057220459}, {"spend": 3.0899999141693115}, {"spend": 34.78000259399414}, {"spend": 16.600000381469727}, {"spend": 14.420000076293945}, {"spend": 9.170000076293945}, {"spend": 28.809999465942383}, {"spend": 6.350000381469727}, {"spend": 17.649999618530273}, {"spend": 32.810001373291016}, {"spend": 11.860000610351562}, {"spend": 12.359999656677246}, {"spend": 108.82999420166016}, {"spend": 3.7799999713897705}, {"spend": 20.940000534057617}, {"spend": 3.690000057220459}, {"spend": 2.75}, {"spend": 18.940000534057617}, {"spend": 52.220001220703125}, {"spend": 3.490000009536743}, {"spend": 16.950000762939453}, {"spend": 2.5899999141693115}, {"spend": 22.30000114440918}, {"spend": 8.670000076293945}, {"spend": 30.249998092651367}, {"spend": 36.46000289916992}, {"spend": 47.06000518798828}, {"spend": 20.65999984741211}, {"spend": 15.169999122619629}, {"spend": 4.960000038146973}, {"spend": 7.270000457763672}, {"spend": 11.960000038146973}, {"spend": 18.53999900817871}, {"spend": 19.739999771118164}, {"spend": 3.390000104904175}, {"spend": 8.680000305175781}, {"spend": 4.680000305175781}, {"spend": 12.339999198913574}, {"spend": 63.97999572753906}, {"spend": 4.809999942779541}, {"spend": 10.489999771118164}, {"spend": 13.149999618530273}, {"spend": 20.719999313354492}, {"spend": 31.0}, {"spend": 6.380000114440918}, {"spend": 8.569999694824219}, {"spend": 23.529998779296875}, {"spend": 10.989999771118164}, {"spend": 6.039999961853027}, {"spend": 6.680000305175781}, {"spend": 6.880000114440918}, {"spend": 5.159999847412109}, {"spend": 6.779999732971191}, {"spend": 3.380000114440918}, {"spend": 20.420000076293945}, {"spend": 14.220000267028809}, {"spend": 16.770000457763672}, {"spend": 13.859999656677246}, {"spend": 31.600000381469727}, {"spend": 17.149999618530273}, {"spend": 19.700000762939453}, {"spend": 16.729999542236328}, {"spend": 10.670000076293945}, {"spend": 27.119998931884766}, {"spend": 8.550000190734863}, {"spend": 3.190000057220459}, {"spend": 10.449999809265137}, {"spend": 13.460000038146973}, {"spend": 7.380000114440918}, {"spend": 9.970000267028809}, {"spend": 4.980000019073486}, {"spend": 26.880001068115234}, {"spend": 15.34000015258789}, {"spend": 2.690000057220459}, {"spend": 6.180000305175781}, {"spend": 3.490000009536743}, {"spend": 16.079999923706055}, {"spend": 31.010000228881836}, {"spend": 25.729999542236328}, {"spend": 3.190000057220459}, {"spend": 19.3799991607666}, {"spend": 20.200000762939453}, {"spend": 5.980000019073486}, {"spend": 20.739999771118164}, {"spend": 23.229999542236328}, {"spend": 26.419998168945312}, {"spend": 37.6400032043457}, {"spend": 24.850000381469727}, {"spend": 10.869999885559082}, {"spend": 33.5099983215332}, {"spend": 6.460000038146973}, {"spend": 15.0600004196167}, {"spend": 17.759998321533203}, {"spend": 3.380000114440918}, {"spend": 3.890000104904175}, {"spend": 2.380000114440918}, {"spend": 62.62000274658203}, {"spend": 4.390000343322754}, {"spend": 23.119998931884766}, {"spend": 12.050000190734863}, {"spend": 13.15999984741211}, {"spend": 13.859999656677246}, {"spend": 75.36000061035156}, {"spend": 18.020000457763672}, {"spend": 8.369999885559082}, {"spend": 5.440000057220459}, {"spend": 20.28000259399414}, {"spend": 6.480000019073486}, {"spend": 9.470000267028809}, {"spend": 4.0}, {"spend": 53.00000762939453}, {"spend": 6.480000019073486}, {"spend": 66.58999633789062}, {"spend": 10.170000076293945}, {"spend": 19.330001831054688}, {"spend": 10.989999771118164}, {"spend": 12.160000801086426}, {"spend": 6.920000076293945}, {"spend": 41.09000015258789}, {"spend": 10.489999771118164}, {"spend": 3.0799999237060547}, {"spend": 9.84000015258789}, {"spend": 22.490001678466797}, {"spend": 4.980000019073486}, {"spend": 11.979999542236328}, {"spend": 9.539999961853027}, {"spend": 10.0600004196167}, {"spend": 4.670000076293945}, {"spend": 4.760000228881836}, {"spend": 37.27000427246094}, {"spend": 8.869999885559082}, {"spend": 13.899999618530273}, {"spend": 6.330000400543213}, {"spend": 16.25}, {"spend": 17.899999618530273}, {"spend": 10.970000267028809}, {"spend": 2.0}, {"spend": 75.78999328613281}, {"spend": 42.68000030517578}, {"spend": 9.960000038146973}, {"spend": 7.28000020980835}, {"spend": 30.799999237060547}, {"spend": 31.209999084472656}, {"spend": 20.899999618530273}, {"spend": 10.360000610351562}, {"spend": 2.490000009536743}, {"spend": 18.34000015258789}, {"spend": 15.210000038146973}, {"spend": 7.229999542236328}, {"spend": 25.329999923706055}, {"spend": 12.65999984741211}, {"spend": 4.079999923706055}, {"spend": 2.2899999618530273}, {"spend": 2.7899999618530273}, {"spend": 7.119999885559082}, {"spend": 14.460000038146973}, {"spend": 7.970000267028809}, {"spend": 9.760000228881836}, {"spend": 15.350000381469727}, {"spend": 21.73000144958496}, {"spend": 32.05999755859375}, {"spend": 21.459999084472656}, {"spend": 13.220000267028809}, {"spend": 15.850000381469727}, {"spend": 26.899999618530273}, {"spend": 21.329999923706055}, {"spend": 23.240001678466797}, {"spend": 9.960000038146973}, {"spend": 28.06999969482422}, {"spend": 31.30000114440918}, {"spend": 21.32000160217285}, {"spend": 2.549999952316284}, {"spend": 27.920001983642578}, {"spend": 3.380000114440918}, {"spend": 13.380000114440918}, {"spend": 13.229999542236328}, {"spend": 20.880001068115234}, {"spend": 19.53999900817871}, {"spend": 19.93000030517578}, {"spend": 13.9399995803833}, {"spend": 10.140000343322754}, {"spend": 13.360000610351562}, {"spend": 30.40999984741211}, {"spend": 16.489999771118164}, {"spend": 6.460000038146973}, {"spend": 15.369999885559082}, {"spend": 18.709999084472656}, {"spend": 15.450000762939453}, {"spend": 16.549999237060547}, {"spend": 23.43000030517578}, {"spend": 11.930000305175781}, {"spend": 24.729999542236328}, {"spend": 42.159996032714844}, {"spend": 48.310001373291016}, {"spend": 13.160000801086426}, {"spend": 8.369999885559082}, {"spend": 23.739999771118164}, {"spend": 3.569999933242798}, {"spend": 21.18000030517578}, {"spend": 10.170000076293945}, {"spend": 4.860000133514404}, {"spend": 19.84000015258789}, {"spend": 6.980000019073486}, {"spend": 16.350000381469727}, {"spend": 39.67000198364258}, {"spend": 10.950000762939453}, {"spend": 21.399999618530273}, {"spend": 6.880000114440918}, {"spend": 76.35000610351562}, {"spend": 26.470001220703125}, {"spend": 25.1200008392334}, {"spend": 15.989999771118164}, {"spend": 2.490000009536743}, {"spend": 7.119999885559082}, {"spend": 56.499996185302734}, {"spend": 10.529999732971191}, {"spend": 13.65999984741211}, {"spend": 27.81999969482422}, {"spend": 20.31999969482422}, {"spend": 17.440000534057617}, {"spend": 11.960000038146973}, {"spend": 12.770000457763672}, {"spend": 16.329999923706055}, {"spend": 12.149999618530273}, {"spend": 5.869999885559082}, {"spend": 3.380000114440918}, {"spend": 23.34000015258789}, {"spend": 37.60000228881836}, {"spend": 20.240001678466797}, {"spend": 49.50000762939453}, {"spend": 3.990000009536743}, {"spend": 9.829999923706055}, {"spend": 23.279998779296875}, {"spend": 9.780000686645508}, {"spend": 6.680000305175781}, {"spend": 5.039999961853027}, {"spend": 9.539999961853027}, {"spend": 28.51999855041504}, {"spend": 3.490000009536743}, {"spend": 10.069999694824219}, {"spend": 9.84000015258789}, {"spend": 6.760000228881836}, {"spend": 17.670000076293945}, {"spend": 9.84000015258789}, {"spend": 13.860000610351562}, {"spend": 3.390000104904175}, {"spend": 1.809999942779541}, {"spend": 5.489999771118164}, {"spend": 11.859999656677246}, {"spend": 20.68000030517578}, {"spend": 13.220000267028809}, {"spend": 17.350000381469727}, {"spend": 21.270000457763672}, {"spend": 26.099998474121094}, {"spend": 18.40999984741211}, {"spend": 8.770000457763672}, {"spend": 11.15999984741211}, {"spend": 8.649999618530273}, {"spend": 16.75}, {"spend": 7.480000019073486}, {"spend": 2.190000057220459}, {"spend": 12.660000801086426}, {"spend": 6.78000020980835}, {"spend": 3.690000057220459}, {"spend": 18.440000534057617}, {"spend": 12.510000228881836}, {"spend": 5.569999694824219}, {"spend": 12.920000076293945}, {"spend": 3.869999885559082}, {"spend": 3.490000009536743}, {"spend": 12.65999984741211}, {"spend": 18.229999542236328}, {"spend": 20.739999771118164}, {"spend": 3.390000104904175}, {"spend": 13.5600004196167}, {"spend": 6.489999771118164}, {"spend": 14.5600004196167}, {"spend": 9.84000015258789}, {"spend": 27.719999313354492}, {"spend": 3.0999999046325684}, {"spend": 22.760000228881836}, {"spend": 4.279999732971191}, {"spend": 14.65999984741211}, {"spend": 17.799999237060547}, {"spend": 6.170000076293945}, {"spend": 9.899999618530273}, {"spend": 17.049999237060547}, {"spend": 13.800000190734863}, {"spend": 4.980000019073486}, {"spend": 30.76000213623047}, {"spend": 13.760000228881836}, {"spend": 9.170000076293945}, {"spend": 6.579999923706055}, {"spend": 9.970000267028809}, {"spend": 2.490000009536743}, {"spend": 9.559999465942383}, {"spend": 10.069999694824219}, {"spend": 16.850000381469727}, {"spend": 9.869999885559082}, {"spend": 28.020000457763672}, {"spend": 3.490000009536743}, {"spend": 7.970000267028809}, {"spend": 3.569999933242798}, {"spend": 2.549999952316284}, {"spend": 12.369999885559082}, {"spend": 21.130001068115234}, {"spend": 39.660011291503906}, {"spend": 26.829999923706055}, {"spend": 19.03999900817871}, {"spend": 26.10999870300293}, {"spend": 16.900001525878906}, {"spend": 12.559999465942383}, {"spend": 4.579999923706055}, {"spend": 5.079999923706055}, {"spend": 2.380000114440918}, {"spend": 19.14000129699707}, {"spend": 9.239999771118164}, {"spend": 10.269999504089355}, {"spend": 52.44999694824219}, {"spend": 11.039999961853027}, {"spend": 13.949999809265137}, {"spend": 18.630001068115234}, {"spend": 18.399999618530273}, {"spend": 24.90999984741211}, {"spend": 3.2899999618530273}, {"spend": 19.639999389648438}, {"spend": 90.83999633789062}, {"spend": 5.179999828338623}, {"spend": 1.8899999856948853}, {"spend": 15.450000762939453}, {"spend": 3.390000104904175}, {"spend": 13.059999465942383}, {"spend": 19.84000015258789}, {"spend": 27.619998931884766}, {"spend": 39.68000411987305}, {"spend": 16.299999237060547}, {"spend": 5.480000019073486}, {"spend": 15.600000381469727}, {"spend": 25.829999923706055}, {"spend": 6.460000038146973}, {"spend": 29.520002365112305}, {"spend": 3.690000057220459}, {"spend": 6.880000114440918}, {"spend": 10.569999694824219}, {"spend": 16.0}, {"spend": 28.84000015258789}, {"spend": 39.070003509521484}, {"spend": 21.43000030517578}, {"spend": 22.830001831054688}, {"spend": 6.480000019073486}, {"spend": 34.63999938964844}, {"spend": 1.7899999618530273}, {"spend": 6.159999847412109}, {"spend": 6.460000038146973}, {"spend": 2.490000009536743}, {"spend": 11.15999984741211}, {"spend": 27.6200008392334}, {"spend": 14.760001182556152}, {"spend": 24.979999542236328}, {"spend": 12.5600004196167}, {"spend": 38.05000305175781}, {"spend": 12.330000877380371}, {"spend": 23.910001754760742}, {"spend": 6.390000343322754}, {"spend": 8.75}, {"spend": 6.579999923706055}, {"spend": 6.319999694824219}, {"spend": 28.349998474121094}, {"spend": 50.100006103515625}, {"spend": 5.880000114440918}, {"spend": 4.0}, {"spend": 3.490000009536743}, {"spend": 13.5}, {"spend": 5.720000267028809}, {"spend": 15.360000610351562}, {"spend": 11.4399995803833}, {"spend": 11.460000038146973}, {"spend": 6.180000305175781}, {"spend": 12.100000381469727}, {"spend": 17.670000076293945}, {"spend": 14.920000076293945}, {"spend": 21.6200008392334}, {"spend": 47.67000198364258}, {"spend": 3.190000057220459}, {"spend": 29.420001983642578}, {"spend": 25.829999923706055}, {"spend": 7.769999980926514}, {"spend": 3.0799999237060547}, {"spend": 6.460000038146973}, {"spend": 23.40999984741211}, {"spend": 16.900001525878906}, {"spend": 13.15999984741211}, {"spend": 7.380000114440918}, {"spend": 27.220001220703125}, {"spend": 2.7899999618530273}, {"spend": 6.779999732971191}, {"spend": 7.090000152587891}, {"spend": 13.430000305175781}, {"spend": 9.539999961853027}, {"spend": 3.390000104904175}, {"spend": 10.270000457763672}, {"spend": 7.430000305175781}, {"spend": 17.649999618530273}, {"spend": 15.160000801086426}, {"spend": 6.680000305175781}, {"spend": 4.849999904632568}, {"spend": 15.539999961853027}, {"spend": 16.75}, {"spend": 2.5899999141693115}, {"spend": 19.239999771118164}, {"spend": 10.829999923706055}, {"spend": 18.43000030517578}, {"spend": 5.779999732971191}, {"spend": 6.320000171661377}, {"spend": 7.010000228881836}, {"spend": 22.139999389648438}, {"spend": 11.250000953674316}, {"spend": 9.719999313354492}, {"spend": 12.460000991821289}, {"spend": 19.639999389648438}, {"spend": 16.81999969482422}, {"spend": 22.760000228881836}, {"spend": 6.460000038146973}, {"spend": 16.350000381469727}, {"spend": 12.75}, {"spend": 18.940000534057617}, {"spend": 15.699999809265137}, {"spend": 23.420000076293945}, {"spend": 16.81999969482422}, {"spend": 12.920000076293945}, {"spend": 6.569999694824219}, {"spend": 10.760000228881836}, {"spend": 26.130001068115234}, {"spend": 2.549999952316284}, {"spend": 8.769999504089355}, {"spend": 25.100000381469727}, {"spend": 2.7899999618530273}, {"spend": 7.059999942779541}, {"spend": 15.289999008178711}, {"spend": 6.460000038146973}, {"spend": 5.779999732971191}, {"spend": 10.760000228881836}, {"spend": 8.130000114440918}, {"spend": 20.6200008392334}, {"spend": 13.960000038146973}, {"spend": 19.05000114440918}, {"spend": 49.040008544921875}, {"spend": 6.579999923706055}, {"spend": 17.93000030517578}, {"spend": 11.050000190734863}, {"spend": 14.850000381469727}, {"spend": 9.569999694824219}, {"spend": 22.64000129699707}, {"spend": 5.269999980926514}, {"spend": 16.450000762939453}, {"spend": 19.40999984741211}, {"spend": 5.340000152587891}, {"spend": 6.96999979019165}, {"spend": 8.25}, {"spend": 41.18000030517578}, {"spend": 17.149999618530273}, {"spend": 10.920000076293945}, {"spend": 21.10999870300293}, {"spend": 14.860000610351562}, {"spend": 38.16999816894531}, {"spend": 8.470000267028809}, {"spend": 5.670000076293945}, {"spend": 29.10999870300293}, {"spend": 17.600000381469727}, {"spend": 13.750000953674316}, {"spend": 21.469999313354492}, {"spend": 9.970000267028809}, {"spend": 8.470000267028809}, {"spend": 5.159999847412109}, {"spend": 13.729999542236328}, {"spend": 12.030000686645508}, {"spend": 8.6899995803833}, {"spend": 2.490000009536743}, {"spend": 2.190000057220459}, {"spend": 4.769999980926514}, {"spend": 9.569999694824219}, {"spend": 16.850000381469727}, {"spend": 11.960000038146973}, {"spend": 13.839999198913574}, {"spend": 19.400001525878906}, {"spend": 8.670000076293945}, {"spend": 11.84999942779541}, {"spend": 4.059999942779541}, {"spend": 24.309999465942383}, {"spend": 22.34000015258789}, {"spend": 15.65000057220459}, {"spend": 18.940000534057617}, {"spend": 40.500003814697266}, {"spend": 15.289999961853027}, {"spend": 2.390000104904175}, {"spend": 21.920000076293945}, {"spend": 6.460000038146973}, {"spend": 8.119999885559082}, {"spend": 6.569999694824219}, {"spend": 15.34999942779541}, {"spend": 8.970000267028809}, {"spend": 7.970000267028809}, {"spend": 6.590000152587891}, {"spend": 29.840002059936523}, {"spend": 2.190000057220459}, {"spend": 6.650000095367432}, {"spend": 23.34000015258789}, {"spend": 26.43000030517578}, {"spend": 8.869999885559082}, {"spend": 18.170000076293945}, {"spend": 16.639999389648438}, {"spend": 19.729999542236328}, {"spend": 3.490000009536743}, {"spend": 23.400001525878906}, {"spend": 12.960000038146973}, {"spend": 24.439998626708984}, {"spend": 14.239999771118164}, {"spend": 30.90999984741211}, {"spend": 13.859999656677246}, {"spend": 10.069999694824219}, {"spend": 2.890000104904175}, {"spend": 22.90999984741211}, {"spend": 16.850000381469727}, {"spend": 6.779999732971191}, {"spend": 20.239999771118164}, {"spend": 11.540000915527344}, {"spend": 17.3700008392334}, {"spend": 9.130000114440918}, {"spend": 5.359999656677246}, {"spend": 33.38999938964844}, {"spend": 29.709999084472656}, {"spend": 14.960000991821289}, {"spend": 3.380000114440918}, {"spend": 10.140000343322754}, {"spend": 23.43000030517578}, {"spend": 6.180000305175781}, {"spend": 11.739999771118164}, {"spend": 3.490000009536743}, {"spend": 15.360000610351562}, {"spend": 31.309999465942383}, {"spend": 16.25}, {"spend": 13.760000228881836}, {"spend": 18.25}, {"spend": 11.069999694824219}, {"spend": 10.950000762939453}, {"spend": 4.680000305175781}, {"spend": 7.119999885559082}, {"spend": 56.00000762939453}, {"spend": 8.529999732971191}, {"spend": 39.480003356933594}, {"spend": 2.549999952316284}, {"spend": 17.43000030517578}, {"spend": 6.050000190734863}, {"spend": 7.579999923706055}, {"spend": 27.639999389648438}, {"spend": 4.380000114440918}, {"spend": 9.539999961853027}, {"spend": 10.369999885559082}, {"spend": 5.75}, {"spend": 10.069999694824219}, {"spend": 13.250000953674316}, {"spend": 8.369999885559082}, {"spend": 10.369999885559082}, {"spend": 6.369999885559082}, {"spend": 11.950000762939453}, {"spend": 10.770000457763672}, {"spend": 10.369999885559082}, {"spend": 41.13999557495117}, {"spend": 5.75}, {"spend": 25.03999900817871}, {"spend": 33.27000045776367}, {"spend": 5.869999885559082}, {"spend": 10.270000457763672}, {"spend": 15.600000381469727}, {"spend": 10.460000038146973}, {"spend": 42.77000427246094}, {"spend": 48.94000244140625}, {"spend": 13.65999984741211}, {"spend": 2.690000057220459}, {"spend": 5.569999694824219}, {"spend": 41.6300048828125}, {"spend": 25.329999923706055}, {"spend": 10.430000305175781}, {"spend": 6.970000267028809}, {"spend": 25.079999923706055}, {"spend": 30.520000457763672}, {"spend": 2.490000009536743}, {"spend": 11.050000190734863}, {"spend": 8.069999694824219}, {"spend": 3.690000057220459}, {"spend": 10.559999465942383}, {"spend": 17.34000015258789}, {"spend": 41.55999755859375}, {"spend": 4.579999923706055}, {"spend": 11.070000648498535}, {"spend": 6.859999656677246}, {"spend": 6.980000019073486}, {"spend": 14.09000015258789}, {"spend": 21.350000381469727}, {"spend": 5.579999923706055}, {"spend": 11.229999542236328}, {"spend": 5.079999923706055}, {"spend": 26.610000610351562}, {"spend": 3.690000057220459}, {"spend": 3.890000104904175}, {"spend": 58.799991607666016}, {"spend": 11.950000762939453}, {"spend": 9.09000015258789}, {"spend": 14.949999809265137}, {"spend": 36.9900016784668}, {"spend": 6.760000228881836}, {"spend": 13.15999984741211}, {"spend": 21.739999771118164}, {"spend": 2.2799999713897705}, {"spend": 34.20000457763672}, {"spend": 13.260000228881836}, {"spend": 36.459999084472656}, {"spend": 9.470000267028809}, {"spend": 16.950000762939453}, {"spend": 32.369998931884766}, {"spend": 73.55001068115234}, {"spend": 8.539999961853027}, {"spend": 6.720000267028809}, {"spend": 30.799999237060547}, {"spend": 10.760000228881836}, {"spend": 4.579999923706055}, {"spend": 6.78000020980835}, {"spend": 6.760000228881836}, {"spend": 27.06999969482422}, {"spend": 20.430002212524414}, {"spend": 3.9800000190734863}, {"spend": 3.490000009536743}, {"spend": 16.700000762939453}, {"spend": 3.569999933242798}, {"spend": 6.980000019073486}, {"spend": 26.01999855041504}, {"spend": 18.139999389648438}, {"spend": 5.659999847412109}, {"spend": 22.18000030517578}, {"spend": 18.690000534057617}, {"spend": 47.070003509521484}, {"spend": 5.079999923706055}, {"spend": 2.369999885559082}, {"spend": 25.749998092651367}, {"spend": 14.360000610351562}, {"spend": 2.490000009536743}, {"spend": 6.78000020980835}, {"spend": 5.980000019073486}, {"spend": 19.1200008392334}, {"spend": 30.119998931884766}, {"spend": 62.16999816894531}, {"spend": 5.609999656677246}, {"spend": 3.0799999237060547}, {"spend": 3.390000104904175}, {"spend": 13.960000038146973}, {"spend": 2.5899999141693115}, {"spend": 2.690000057220459}, {"spend": 1.690000057220459}, {"spend": 11.570000648498535}, {"spend": 13.449999809265137}, {"spend": 5.659999847412109}, {"spend": 41.590003967285156}, {"spend": 20.639999389648438}, {"spend": 10.170000076293945}, {"spend": 5.380000114440918}, {"spend": 2.049999952316284}, {"spend": 9.270000457763672}, {"spend": 4.420000076293945}, {"spend": 14.920000076293945}, {"spend": 44.070003509521484}, {"spend": 11.360000610351562}, {"spend": 38.88999938964844}, {"spend": 24.93000030517578}, {"spend": 13.600000381469727}, {"spend": 15.710000991821289}, {"spend": 6.760000228881836}, {"spend": 11.15999984741211}, {"spend": 4.659999847412109}, {"spend": 12.709999084472656}, {"spend": 5.830000400543213}, {"spend": 3.0899999141693115}, {"spend": 14.489999771118164}, {"spend": 11.44999885559082}, {"spend": 7.119999885559082}, {"spend": 6.760000228881836}, {"spend": 20.139999389648438}, {"spend": 56.730003356933594}, {"spend": 3.390000104904175}, {"spend": 14.19999885559082}, {"spend": 20.450000762939453}, {"spend": 20.099998474121094}, {"spend": 2.690000057220459}, {"spend": 26.989999771118164}, {"spend": 3.390000104904175}, {"spend": 20.810001373291016}, {"spend": 14.079999923706055}, {"spend": 2.490000009536743}, {"spend": 8.969999313354492}, {"spend": 10.470000267028809}, {"spend": 4.980000019073486}, {"spend": 11.270000457763672}, {"spend": 2.490000009536743}, {"spend": 2.690000057220459}, {"spend": 20.290000915527344}, {"spend": 2.5899999141693115}, {"spend": 24.430002212524414}, {"spend": 3.490000009536743}, {"spend": 8.630000114440918}, {"spend": 20.139999389648438}, {"spend": 28.999998092651367}, {"spend": 44.4900016784668}, {"spend": 32.5}, {"spend": 27.010000228881836}, {"spend": 10.270000457763672}, {"spend": 53.04000473022461}, {"spend": 16.850000381469727}, {"spend": 3.380000114440918}, {"spend": 23.57000160217285}, {"spend": 9.670000076293945}, {"spend": 16.469999313354492}, {"spend": 7.25}, {"spend": 7.510000228881836}, {"spend": 6.180000305175781}, {"spend": 12.450000762939453}, {"spend": 9.670000076293945}, {"spend": 16.350000381469727}, {"spend": 17.400001525878906}, {"spend": 6.380000114440918}, {"spend": 9.270000457763672}, {"spend": 17.05000114440918}, {"spend": 13.559999465942383}, {"spend": 10.25}, {"spend": 3.569999933242798}, {"spend": 17.149999618530273}, {"spend": 4.470000267028809}, {"spend": 10.140000343322754}, {"spend": 9.230000495910645}, {"spend": 5.960000038146973}, {"spend": 3.380000114440918}, {"spend": 11.020000457763672}, {"spend": 15.110000610351562}, {"spend": 34.1099967956543}, {"spend": 5.779999732971191}, {"spend": 10.569999694824219}, {"spend": 4.980000019073486}, {"spend": 6.579999923706055}, {"spend": 29.519996643066406}, {"spend": 4.320000171661377}, {"spend": 3.2899999618530273}, {"spend": 5.489999771118164}, {"spend": 5.680000305175781}, {"spend": 2.2899999618530273}, {"spend": 3.490000009536743}, {"spend": 7.670000076293945}, {"spend": 18.719999313354492}, {"spend": 23.229999542236328}, {"spend": 4.360000133514404}, {"spend": 15.15999984741211}, {"spend": 10.369999885559082}, {"spend": 1.9900000095367432}, {"spend": 22.940000534057617}, {"spend": 23.630001068115234}, {"spend": 5.579999923706055}, {"spend": 24.520000457763672}, {"spend": 7.569999694824219}, {"spend": 2.490000009536743}, {"spend": 10.270000457763672}, {"spend": 23.90999984741211}, {"spend": 6.880000114440918}, {"spend": 4.240000247955322}, {"spend": 17.6299991607666}, {"spend": 5.279999732971191}, {"spend": 6.980000019073486}, {"spend": 93.97999572753906}, {"spend": 2.690000057220459}, {"spend": 19.450000762939453}, {"spend": 24.729999542236328}, {"spend": 3.390000104904175}, {"spend": 34.9900016784668}, {"spend": 13.359999656677246}, {"spend": 51.33000564575195}, {"spend": 23.209999084472656}, {"spend": 20.739999771118164}, {"spend": 2.390000104904175}, {"spend": 15.5}, {"spend": 6.980000019073486}, {"spend": 11.139999389648438}, {"spend": 7.079999923706055}, {"spend": 18.940000534057617}, {"spend": 7.059999942779541}, {"spend": 21.84000015258789}, {"spend": 12.360000610351562}, {"spend": 4.579999923706055}, {"spend": 11.569999694824219}, {"spend": 2.690000057220459}, {"spend": 10.970000267028809}, {"spend": 21.56999969482422}, {"spend": 1.5700000524520874}, {"spend": 24.1299991607666}, {"spend": 43.470001220703125}, {"spend": 9.4399995803833}, {"spend": 24.94000244140625}, {"spend": 8.510000228881836}, {"spend": 3.190000057220459}, {"spend": 7.270000457763672}, {"spend": 33.939998626708984}, {"spend": 20.14000129699707}, {"spend": 7.380000114440918}, {"spend": 4.980000019073486}, {"spend": 16.639999389648438}, {"spend": 7.470000267028809}, {"spend": 32.90999984741211}, {"spend": 12.359999656677246}, {"spend": 11.34999942779541}, {"spend": 15.069999694824219}, {"spend": 30.830001831054688}, {"spend": 6.980000019073486}, {"spend": 14.859999656677246}, {"spend": 16.600000381469727}, {"spend": 8.670000076293945}, {"spend": 23.93000030517578}, {"spend": 2.0}, {"spend": 15.129999160766602}, {"spend": 13.649999618530273}, {"spend": 3.380000114440918}, {"spend": 16.64000129699707}, {"spend": 29.600000381469727}, {"spend": 6.869999885559082}, {"spend": 5.460000038146973}, {"spend": 13.739999771118164}, {"spend": 13.029999732971191}, {"spend": 21.729999542236328}, {"spend": 17.940000534057617}, {"spend": 43.16999435424805}, {"spend": 6.720000267028809}, {"spend": 7.869999885559082}, {"spend": 4.950000286102295}, {"spend": 10.069999694824219}, {"spend": 3.569999933242798}, {"spend": 2.490000009536743}, {"spend": 36.87999725341797}, {"spend": 3.380000114440918}, {"spend": 11.359999656677246}, {"spend": 6.599999904632568}, {"spend": 12.640000343322754}, {"spend": 7.380000114440918}, {"spend": 27.920000076293945}, {"spend": 2.0}, {"spend": 20.84000015258789}, {"spend": 40.86000061035156}, {"spend": 15.709999084472656}, {"spend": 9.309999465942383}, {"spend": 34.15999984741211}, {"spend": 14.019999504089355}, {"spend": 3.490000009536743}, {"spend": 36.30000305175781}, {"spend": 15.640000343322754}, {"spend": 28.990001678466797}, {"spend": 3.369999885559082}, {"spend": 5.569999694824219}, {"spend": 1.3300000429153442}, {"spend": 3.380000114440918}, {"spend": 19.440000534057617}, {"spend": 22.290000915527344}, {"spend": 3.0799999237060547}, {"spend": 15.100000381469727}, {"spend": 4.579999923706055}, {"spend": 15.160000801086426}, {"spend": 2.190000057220459}, {"spend": 5.179999828338623}, {"spend": 10.690000534057617}, {"spend": 9.84000015258789}, {"spend": 7.380000114440918}, {"spend": 6.869999885559082}, {"spend": 14.180000305175781}, {"spend": 70.80000305175781}, {"spend": 20.43000030517578}, {"spend": 7.260000228881836}, {"spend": 2.990000009536743}, {"spend": 4.880000114440918}, {"spend": 2.7899999618530273}, {"spend": 18.489999771118164}, {"spend": 1.4900000095367432}, {"spend": 11.750000953674316}, {"spend": 22.639999389648438}, {"spend": 21.439998626708984}, {"spend": 36.49000549316406}, {"spend": 9.130000114440918}, {"spend": 15.059999465942383}, {"spend": 14.5}, {"spend": 8.530000686645508}, {"spend": 8.930000305175781}, {"spend": 13.630000114440918}, {"spend": 12.559999465942383}, {"spend": 11.630000114440918}, {"spend": 10.270000457763672}, {"spend": 24.630001068115234}, {"spend": 34.67000198364258}, {"spend": 9.84000015258789}, {"spend": 5.420000076293945}, {"spend": 34.70000076293945}, {"spend": 28.110000610351562}, {"spend": 9.769999504089355}, {"spend": 16.25}, {"spend": 2.490000009536743}, {"spend": 5.380000114440918}, {"spend": 3.490000009536743}, {"spend": 50.49000549316406}, {"spend": 24.860000610351562}, {"spend": 23.060001373291016}, {"spend": 2.490000009536743}, {"spend": 12.5600004196167}, {"spend": 41.68000030517578}, {"spend": 21.56999969482422}, {"spend": 3.890000104904175}, {"spend": 11.460000038146973}, {"spend": 10.550000190734863}, {"spend": 3.2899999618530273}, {"spend": 12.459999084472656}, {"spend": 13.660000801086426}, {"spend": 12.049999237060547}, {"spend": 3.380000114440918}, {"spend": 54.04999923706055}, {"spend": 10.569999694824219}, {"spend": 27.119998931884766}, {"spend": 19.139999389648438}, {"spend": 12.739999771118164}, {"spend": 3.380000114440918}, {"spend": 3.569999933242798}, {"spend": 6.880000114440918}, {"spend": 10.309999465942383}, {"spend": 26.809999465942383}, {"spend": 27.119998931884766}, {"spend": 7.380000114440918}, {"spend": 8.970000267028809}, {"spend": 8.569999694824219}, {"spend": 8.75}, {"spend": 23.530000686645508}, {"spend": 13.460000038146973}, {"spend": 2.490000009536743}, {"spend": 29.119997024536133}, {"spend": 12.65999984741211}, {"spend": 24.19999885559082}, {"spend": 14.360000610351562}, {"spend": 16.869998931884766}, {"spend": 6.730000019073486}, {"spend": 9.539999961853027}, {"spend": 56.14000701904297}, {"spend": 20.440000534057617}, {"spend": 19.639999389648438}, {"spend": 13.960000038146973}, {"spend": 41.59000778198242}, {"spend": 42.459999084472656}, {"spend": 7.579999923706055}, {"spend": 13.299999237060547}, {"spend": 7.079999923706055}, {"spend": 24.8700008392334}, {"spend": 24.229999542236328}, {"spend": 17.260000228881836}, {"spend": 20.780000686645508}, {"spend": 17.250001907348633}, {"spend": 3.490000009536743}, {"spend": 3.380000114440918}, {"spend": 10.639999389648438}, {"spend": 8.780000686645508}, {"spend": 22.579999923706055}, {"spend": 3.380000114440918}, {"spend": 39.54999923706055}, {"spend": 11.260000228881836}, {"spend": 24.720001220703125}, {"spend": 3.390000104904175}, {"spend": 21.500001907348633}, {"spend": 5.950000286102295}, {"spend": 3.2799999713897705}, {"spend": 37.5}, {"spend": 15.9399995803833}, {"spend": 30.80999755859375}, {"spend": 10.109999656677246}, {"spend": 16.950000762939453}, {"spend": 11.84999942779541}, {"spend": 22.329999923706055}, {"spend": 14.5600004196167}, {"spend": 6.779999732971191}, {"spend": 8.760000228881836}, {"spend": 18.34000015258789}, {"spend": 22.6299991607666}, {"spend": 58.83000183105469}, {"spend": 7.770000457763672}, {"spend": 10.960000038146973}, {"spend": 6.880000114440918}, {"spend": 34.59000015258789}, {"spend": 23.920000076293945}, {"spend": 15.5600004196167}, {"spend": 1.8899999856948853}, {"spend": 6.139999866485596}, {"spend": 13.770000457763672}, {"spend": 3.490000009536743}, {"spend": 9.539999961853027}, {"spend": 16.350000381469727}, {"spend": 20.149999618530273}, {"spend": 20.05000114440918}, {"spend": 16.950000762939453}, {"spend": 5.779999732971191}, {"spend": 16.299999237060547}, {"spend": 20.520000457763672}, {"spend": 23.729999542236328}, {"spend": 18.84000015258789}, {"spend": 12.130000114440918}, {"spend": 23.43000030517578}, {"spend": 3.569999933242798}, {"spend": 2.4700000286102295}, {"spend": 5.180000305175781}, {"spend": 5.680000305175781}, {"spend": 4.900000095367432}, {"spend": 27.68000030517578}, {"spend": 32.30999755859375}, {"spend": 9.800000190734863}, {"spend": 3.0799999237060547}, {"spend": 2.820000171661377}, {"spend": 14.109999656677246}, {"spend": 13.90000057220459}, {"spend": 24.610000610351562}, {"spend": 14.480000495910645}, {"spend": 32.470001220703125}, {"spend": 17.049999237060547}, {"spend": 12.130000114440918}, {"spend": 40.56000900268555}, {"spend": 24.630001068115234}, {"spend": 12.3100004196167}, {"spend": 6.480000019073486}, {"spend": 7.380000114440918}, {"spend": 10.069999694824219}, {"spend": 13.15999984741211}, {"spend": 8.369999885559082}, {"spend": 26.6299991607666}, {"spend": 10.770000457763672}, {"spend": 27.8700008392334}, {"spend": 7.279999732971191}, {"spend": 48.97999954223633}, {"spend": 15.139999389648438}, {"spend": 22.810001373291016}, {"spend": 22.940000534057617}, {"spend": 21.440000534057617}, {"spend": 32.01000213623047}, {"spend": 16.520000457763672}, {"spend": 4.460000038146973}, {"spend": 7.519999980926514}, {"spend": 23.139999389648438}, {"spend": 2.75}, {"spend": 38.16999816894531}, {"spend": 10.559999465942383}, {"spend": 21.139999389648438}, {"spend": 12.289999008178711}, {"spend": 9.569999694824219}, {"spend": 45.04999923706055}, {"spend": 15.850000381469727}, {"spend": 44.590003967285156}, {"spend": 16.900001525878906}, {"spend": 8.359999656677246}, {"spend": 5.460000038146973}, {"spend": 12.600000381469727}, {"spend": 2.3499999046325684}, {"spend": 16.149999618530273}, {"spend": 19.719999313354492}, {"spend": 21.439998626708984}, {"spend": 28.610000610351562}, {"spend": 16.149999618530273}, {"spend": 6.409999847412109}, {"spend": 16.389999389648438}, {"spend": 20.729999542236328}, {"spend": 16.31999969482422}, {"spend": 9.84000015258789}, {"spend": 18.25}, {"spend": 17.850000381469727}, {"spend": 2.690000057220459}, {"spend": 17.549999237060547}, {"spend": 2.190000057220459}, {"spend": 77.41999816894531}, {"spend": 7.340000152587891}, {"spend": 4.380000114440918}, {"spend": 10.170000076293945}, {"spend": 30.43000030517578}, {"spend": 25.5}, {"spend": 10.070000648498535}, {"spend": 10.09000015258789}, {"spend": 23.330001831054688}, {"spend": 2.190000057220459}, {"spend": 12.049999237060547}, {"spend": 1.649999976158142}, {"spend": 19.559999465942383}, {"spend": 33.0099983215332}, {"spend": 6.579999923706055}, {"spend": 11.960000038146973}, {"spend": 12.34999942779541}, {"spend": 4.390000343322754}, {"spend": 10.100000381469727}, {"spend": 10.110000610351562}, {"spend": 20.229999542236328}, {"spend": 25.399999618530273}, {"spend": 12.709999084472656}, {"spend": 4.980000019073486}, {"spend": 33.0}, {"spend": 14.380000114440918}, {"spend": 10.550000190734863}, {"spend": 1.8899999856948853}, {"spend": 31.709997177124023}, {"spend": 21.730003356933594}, {"spend": 9.270000457763672}, {"spend": 9.170000076293945}, {"spend": 10.84999942779541}, {"spend": 23.480003356933594}, {"spend": 6.760000228881836}, {"spend": 28.809999465942383}, {"spend": 30.10999870300293}, {"spend": 4.779999732971191}, {"spend": 3.390000104904175}, {"spend": 22.470001220703125}, {"spend": 27.78999900817871}, {"spend": 5.340000152587891}, {"spend": 13.5600004196167}, {"spend": 7.940000057220459}, {"spend": 6.460000038146973}, {"spend": 3.380000114440918}, {"spend": 6.460000038146973}, {"spend": 35.400001525878906}, {"spend": 12.049999237060547}, {"spend": 3.0799999237060547}, {"spend": 15.109999656677246}, {"spend": 17.380001068115234}, {"spend": 8.829999923706055}, {"spend": 21.93000030517578}, {"spend": 6.579999923706055}, {"spend": 3.0799999237060547}, {"spend": 31.32000160217285}, {"spend": 11.84000015258789}, {"spend": 13.329999923706055}, {"spend": 3.0899999141693115}, {"spend": 4.760000228881836}, {"spend": 17.770000457763672}, {"spend": 1.4900000095367432}, {"spend": 18.59000015258789}, {"spend": 10.470000267028809}, {"spend": 18.779998779296875}, {"spend": 19.3799991607666}, {"spend": 13.950000762939453}, {"spend": 40.87999725341797}, {"spend": 2.990000009536743}, {"spend": 10.070000648498535}, {"spend": 23.89000129699707}, {"spend": 2.490000009536743}, {"spend": 9.170000076293945}, {"spend": 5.380000114440918}, {"spend": 22.93000030517578}, {"spend": 23.010000228881836}, {"spend": 11.25999927520752}, {"spend": 2.490000009536743}, {"spend": 3.380000114440918}, {"spend": 13.220000267028809}, {"spend": 7.5}, {"spend": 10.710000038146973}, {"spend": 29.069997787475586}, {"spend": 3.490000009536743}, {"spend": 4.0}, {"spend": 11.570000648498535}, {"spend": 2.5899999141693115}, {"spend": 6.380000114440918}, {"spend": 6.980000019073486}, {"spend": 15.430000305175781}, {"spend": 14.020000457763672}, {"spend": 3.7899999618530273}, {"spend": 31.40999984741211}, {"spend": 19.03999900817871}, {"spend": 13.329999923706055}, {"spend": 4.019999980926514}, {"spend": 20.440000534057617}, {"spend": 9.809999465942383}, {"spend": 9.649999618530273}, {"spend": 4.340000152587891}, {"spend": 2.990000009536743}, {"spend": 6.460000038146973}, {"spend": 56.82999801635742}, {"spend": 18.739999771118164}, {"spend": 16.850000381469727}, {"spend": 3.490000009536743}, {"spend": 3.380000114440918}, {"spend": 19.64000129699707}, {"spend": 8.489999771118164}, {"spend": 34.29999923706055}, {"spend": 55.22999954223633}, {"spend": 6.579999923706055}, {"spend": 3.890000104904175}, {"spend": 32.37000274658203}, {"spend": 10.470000267028809}, {"spend": 27.520000457763672}, {"spend": 35.1300048828125}, {"spend": 14.350000381469727}, {"spend": 13.850000381469727}, {"spend": 17.450000762939453}, {"spend": 17.149999618530273}, {"spend": 15.600000381469727}, {"spend": 12.729999542236328}, {"spend": 35.459999084472656}, {"spend": 15.319999694824219}, {"spend": 20.739999771118164}, {"spend": 44.41999816894531}, {"spend": 40.70000076293945}, {"spend": 6.980000019073486}, {"spend": 17.239999771118164}, {"spend": 13.449999809265137}, {"spend": 22.40999984741211}, {"spend": 3.4600000381469727}, {"spend": 9.869999885559082}, {"spend": 3.490000009536743}, {"spend": 22.21000099182129}, {"spend": 50.73000717163086}, {"spend": 19.510000228881836}, {"spend": 3.390000104904175}, {"spend": 10.65000057220459}, {"spend": 7.670000076293945}, {"spend": 6.460000038146973}, {"spend": 59.78999710083008}, {"spend": 21.14000129699707}, {"spend": 11.610000610351562}, {"spend": 17.330001831054688}, {"spend": 17.110000610351562}, {"spend": 13.399999618530273}, {"spend": 4.78000020980835}, {"spend": 14.649999618530273}, {"spend": 13.4399995803833}, {"spend": 31.430002212524414}, {"spend": 5.570000171661377}, {"spend": 5.380000114440918}, {"spend": 9.070000648498535}, {"spend": 18.119998931884766}, {"spend": 6.760000228881836}, {"spend": 18.469999313354492}, {"spend": 22.15999984741211}, {"spend": 17.34000015258789}, {"spend": 15.220000267028809}, {"spend": 6.460000038146973}, {"spend": 2.190000057220459}, {"spend": 26.290000915527344}, {"spend": 3.890000104904175}, {"spend": 3.190000057220459}, {"spend": 17.869998931884766}, {"spend": 28.650001525878906}, {"spend": 11.84999942779541}, {"spend": 3.2899999618530273}, {"spend": 14.84999942779541}, {"spend": 8.539999961853027}, {"spend": 23.889999389648438}, {"spend": 12.449999809265137}, {"spend": 14.260000228881836}, {"spend": 10.279999732971191}, {"spend": 46.43000411987305}, {"spend": 3.0799999237060547}, {"spend": 16.529998779296875}, {"spend": 25.44999885559082}, {"spend": 9.269999504089355}, {"spend": 15.710000991821289}, {"spend": 16.75}, {"spend": 26.6299991607666}, {"spend": 5.180000305175781}, {"spend": 9.84000015258789}, {"spend": 10.070000648498535}, {"spend": 13.569999694824219}, {"spend": 9.670000076293945}, {"spend": 25.130001068115234}, {"spend": 4.380000114440918}, {"spend": 8.069999694824219}, {"spend": 11.970000267028809}, {"spend": 3.390000104904175}, {"spend": 10.559999465942383}, {"spend": 10.649999618530273}, {"spend": 12.459999084472656}, {"spend": 8.930000305175781}, {"spend": 20.34000015258789}, {"spend": 6.760000228881836}, {"spend": 16.369998931884766}, {"spend": 9.770000457763672}, {"spend": 6.880000114440918}, {"spend": 14.460000991821289}, {"spend": 5.460000038146973}, {"spend": 2.7899999618530273}, {"spend": 26.60000228881836}, {"spend": 24.60999870300293}, {"spend": 3.0799999237060547}, {"spend": 2.490000009536743}, {"spend": 19.280000686645508}, {"spend": 26.21000099182129}, {"spend": 2.2899999618530273}, {"spend": 16.55000114440918}, {"spend": 7.550000190734863}, {"spend": 25.029998779296875}, {"spend": 20.040000915527344}, {"spend": 6.460000038146973}, {"spend": 6.460000038146973}, {"spend": 31.39000129699707}, {"spend": 19.259998321533203}, {"spend": 4.21999979019165}, {"spend": 26.1200008392334}, {"spend": 10.370000839233398}, {"spend": 3.990000009536743}, {"spend": 17.25}, {"spend": 14.9399995803833}, {"spend": 5.670000076293945}, {"spend": 13.5600004196167}, {"spend": 23.350000381469727}, {"spend": 36.09000015258789}, {"spend": 6.460000038146973}, {"spend": 17.84000015258789}, {"spend": 25.959999084472656}, {"spend": 12.199999809265137}, {"spend": 11.75}, {"spend": 88.02998352050781}, {"spend": 6.78000020980835}, {"spend": 16.299999237060547}, {"spend": 9.069999694824219}, {"spend": 3.0899999141693115}, {"spend": 6.380000114440918}, {"spend": 10.729999542236328}, {"spend": 18.25}, {"spend": 51.220008850097656}, {"spend": 25.420000076293945}, {"spend": 22.01999855041504}, {"spend": 3.990000009536743}, {"spend": 24.979999542236328}, {"spend": 13.520000457763672}, {"spend": 6.980000019073486}, {"spend": 20.76999855041504}, {"spend": 18.139999389648438}, {"spend": 56.31999588012695}, {"spend": 3.3499999046325684}, {"spend": 7.78000020980835}, {"spend": 13.930000305175781}, {"spend": 3.490000009536743}, {"spend": 3.390000104904175}, {"spend": 11.739999771118164}, {"spend": 50.05000686645508}, {"spend": 9.25}, {"spend": 2.7899999618530273}, {"spend": 21.459999084472656}, {"spend": 5.039999961853027}, {"spend": 3.0899999141693115}, {"spend": 8.359999656677246}, {"spend": 10.59000015258789}, {"spend": 6.579999923706055}, {"spend": 5.269999980926514}, {"spend": 3.490000009536743}, {"spend": 23.309999465942383}, {"spend": 3.690000057220459}, {"spend": 12.920000076293945}, {"spend": 15.350000381469727}, {"spend": 5.480000019073486}, {"spend": 9.070000648498535}, {"spend": 2.2100000381469727}, {"spend": 6.869999885559082}, {"spend": 9.670000076293945}, {"spend": 4.680000305175781}, {"spend": 27.239999771118164}, {"spend": 15.15999984741211}, {"spend": 5.869999885559082}, {"spend": 20.899999618530273}, {"spend": 9.270000457763672}, {"spend": 4.989999771118164}, {"spend": 36.83000183105469}, {"spend": 44.83000183105469}, {"spend": 18.239999771118164}, {"spend": 12.139999389648438}, {"spend": 16.350000381469727}, {"spend": 8.289999961853027}, {"spend": 57.12000274658203}, {"spend": 27.619998931884766}, {"spend": 10.170000076293945}, {"spend": 5.429999828338623}, {"spend": 2.490000009536743}, {"spend": 15.049999237060547}, {"spend": 22.530000686645508}, {"spend": 14.34000015258789}, {"spend": 10.359999656677246}, {"spend": 3.690000057220459}, {"spend": 7.079999923706055}, {"spend": 15.039999961853027}, {"spend": 30.409997940063477}, {"spend": 3.380000114440918}, {"spend": 5.269999980926514}, {"spend": 26.119998931884766}, {"spend": 8.610000610351562}, {"spend": 10.069999694824219}, {"spend": 9.90000057220459}, {"spend": 15.569998741149902}, {"spend": 12.829999923706055}, {"spend": 6.869999885559082}, {"spend": 47.56000518798828}, {"spend": 5.980000019073486}, {"spend": 17.05000114440918}, {"spend": 16.25}, {"spend": 7.970000267028809}, {"spend": 15.190001487731934}, {"spend": 3.380000114440918}, {"spend": 27.409997940063477}, {"spend": 6.849999904632568}, {"spend": 20.540000915527344}, {"spend": 33.590003967285156}, {"spend": 6.460000038146973}, {"spend": 9.869999885559082}, {"spend": 39.66999816894531}, {"spend": 38.06999969482422}, {"spend": 15.449999809265137}, {"spend": 9.170000076293945}, {"spend": 5.590000152587891}, {"spend": 5.980000019073486}, {"spend": 10.470000267028809}, {"spend": 18.530000686645508}, {"spend": 38.090003967285156}, {"spend": 9.859999656677246}, {"spend": 18.829999923706055}, {"spend": 30.94999885559082}, {"spend": 12.15999984741211}, {"spend": 19.619998931884766}, {"spend": 14.219999313354492}, {"spend": 46.12000274658203}, {"spend": 6.720000267028809}, {"spend": 20.639999389648438}, {"spend": 33.30000305175781}, {"spend": 29.509998321533203}, {"spend": 7.869999885559082}, {"spend": 10.069999694824219}, {"spend": 3.140000104904175}, {"spend": 13.329999923706055}, {"spend": 9.870000839233398}, {"spend": 24.479999542236328}, {"spend": 8.869999885559082}, {"spend": 26.030000686645508}, {"spend": 4.78000020980835}, {"spend": 56.230010986328125}, {"spend": 95.19999694824219}, {"spend": 15.899999618530273}, {"spend": 11.039999961853027}, {"spend": 7.930000305175781}, {"spend": 16.850000381469727}, {"spend": 16.600000381469727}, {"spend": 7.849999904632568}, {"spend": 8.029999732971191}, {"spend": 16.739999771118164}, {"spend": 35.189998626708984}, {"spend": 20.360000610351562}, {"spend": 10.470000267028809}, {"spend": 2.7799999713897705}, {"spend": 10.470000267028809}, {"spend": 8.670000076293945}, {"spend": 25.69000244140625}, {"spend": 9.539999961853027}, {"spend": 7.979999542236328}, {"spend": 12.920000076293945}, {"spend": 2.890000104904175}, {"spend": 17.950000762939453}, {"spend": 9.170000076293945}, {"spend": 13.670000076293945}, {"spend": 11.039999008178711}, {"spend": 6.28000020980835}, {"spend": 9.25}, {"spend": 3.0899999141693115}, {"spend": 10.739999771118164}, {"spend": 25.530000686645508}, {"spend": 20.14000129699707}, {"spend": 7.970000267028809}, {"spend": 12.850001335144043}, {"spend": 6.420000076293945}, {"spend": 7.380000114440918}, {"spend": 16.139999389648438}, {"spend": 3.0799999237060547}, {"spend": 15.59000015258789}, {"spend": 19.599998474121094}, {"spend": 10.069999694824219}, {"spend": 166.69993591308594}, {"spend": 9.690000534057617}, {"spend": 31.310001373291016}, {"spend": 12.319999694824219}, {"spend": 9.870000839233398}, {"spend": 3.0799999237060547}, {"spend": 5.569999694824219}, {"spend": 14.640000343322754}, {"spend": 2.2899999618530273}, {"spend": 5.679999828338623}, {"spend": 6.279999732971191}, {"spend": 12.65999984741211}, {"spend": 34.130001068115234}, {"spend": 11.65999984741211}, {"spend": 12.960000038146973}, {"spend": 13.199999809265137}, {"spend": 13.940000534057617}, {"spend": 10.460000038146973}, {"spend": 23.43000030517578}, {"spend": 31.900001525878906}, {"spend": 6.179999828338623}, {"spend": 26.14000129699707}, {"spend": 27.10000228881836}, {"spend": 8.729999542236328}, {"spend": 2.490000009536743}, {"spend": 26.190000534057617}, {"spend": 28.700000762939453}, {"spend": 6.9800004959106445}, {"spend": 5.670000076293945}, {"spend": 24.420001983642578}, {"spend": 7.550000190734863}, {"spend": 6.760000228881836}, {"spend": 6.880000114440918}, {"spend": 5.920000076293945}, {"spend": 3.380000114440918}, {"spend": 13.860000610351562}, {"spend": 4.980000019073486}, {"spend": 30.209999084472656}, {"spend": 20.940000534057617}, {"spend": 2.490000009536743}, {"spend": 17.670000076293945}, {"spend": 13.699999809265137}, {"spend": 6.670000076293945}, {"spend": 15.049999237060547}, {"spend": 10.369999885559082}, {"spend": 7.869999885559082}, {"spend": 16.380001068115234}, {"spend": 10.069999694824219}, {"spend": 37.35000228881836}, {"spend": 6.78000020980835}, {"spend": 13.520000457763672}, {"spend": 3.380000114440918}, {"spend": 17.899999618530273}, {"spend": 10.360000610351562}, {"spend": 16.71000099182129}, {"spend": 27.450000762939453}, {"spend": 9.949999809265137}, {"spend": 6.760000228881836}, {"spend": 10.069999694824219}, {"spend": 3.380000114440918}, {"spend": 7.869999885559082}, {"spend": 6.460000038146973}, {"spend": 6.880000114440918}, {"spend": 5.659999847412109}, {"spend": 5.380000114440918}, {"spend": 21.619998931884766}, {"spend": 42.77000427246094}, {"spend": 22.600000381469727}, {"spend": 25.21000099182129}, {"spend": 9.479999542236328}, {"spend": 9.869999885559082}, {"spend": 3.390000104904175}, {"spend": 17.250001907348633}, {"spend": 10.09000015258789}, {"spend": 35.8800048828125}, {"spend": 16.34000015258789}, {"spend": 3.690000057220459}, {"spend": 6.179999828338623}, {"spend": 6.680000305175781}, {"spend": 42.150001525878906}, {"spend": 18.990001678466797}, {"spend": 22.829999923706055}, {"spend": 15.320001602172852}, {"spend": 6.78000020980835}, {"spend": 8.769999504089355}, {"spend": 10.910000801086426}, {"spend": 9.180000305175781}, {"spend": 12.600000381469727}, {"spend": 9.229999542236328}, {"spend": 29.810001373291016}, {"spend": 22.84000015258789}, {"spend": 5.179999828338623}, {"spend": 14.450000762939453}, {"spend": 13.789999961853027}, {"spend": 10.950000762939453}, {"spend": 10.860000610351562}, {"spend": 10.369999885559082}, {"spend": 2.490000009536743}, {"spend": 32.689998626708984}, {"spend": 38.96000289916992}, {"spend": 30.209999084472656}, {"spend": 12.75}, {"spend": 23.73000144958496}, {"spend": 3.380000114440918}, {"spend": 24.899999618530273}, {"spend": 2.5899999141693115}, {"spend": 10.40999984741211}, {"spend": 6.180000305175781}, {"spend": 7.380000114440918}, {"spend": 32.30000305175781}, {"spend": 21.229999542236328}, {"spend": 8.949999809265137}, {"spend": 17.149999618530273}, {"spend": 13.760000228881836}, {"spend": 3.869999885559082}, {"spend": 6.78000020980835}, {"spend": 33.400001525878906}, {"spend": 10.489999771118164}, {"spend": 15.910000801086426}, {"spend": 11.649999618530273}, {"spend": 8.470000267028809}, {"spend": 34.60000228881836}, {"spend": 2.7899999618530273}, {"spend": 5.980000019073486}, {"spend": 19.420000076293945}, {"spend": 6.079999923706055}, {"spend": 7.149999618530273}, {"spend": 16.709999084472656}, {"spend": 19.419998168945312}, {"spend": 5.670000076293945}, {"spend": 11.25999927520752}, {"spend": 8.84000015258789}, {"spend": 9.569999694824219}, {"spend": 27.489999771118164}, {"spend": 13.360000610351562}, {"spend": 22.739999771118164}, {"spend": 4.539999961853027}, {"spend": 9.710000038146973}, {"spend": 9.369999885559082}, {"spend": 10.75}, {"spend": 11.680000305175781}, {"spend": 3.5399999618530273}, {"spend": 11.969999313354492}, {"spend": 11.25999927520752}, {"spend": 13.889999389648438}, {"spend": 2.549999952316284}, {"spend": 24.03999900817871}, {"spend": 15.539999008178711}, {"spend": 2.5299999713897705}, {"spend": 10.039999961853027}, {"spend": 12.760000228881836}, {"spend": 31.320003509521484}, {"spend": 5.480000019073486}, {"spend": 14.250001907348633}, {"spend": 9.570000648498535}, {"spend": 15.350001335144043}, {"spend": 20.559999465942383}, {"spend": 3.0799999237060547}, {"spend": 1.8899999856948853}, {"spend": 12.670000076293945}, {"spend": 14.530000686645508}, {"spend": 1.5700000524520874}, {"spend": 37.59000015258789}, {"spend": 10.569999694824219}, {"spend": 8.670000076293945}, {"spend": 25.450000762939453}, {"spend": 27.60999870300293}, {"spend": 22.43000030517578}, {"spend": 7.860000133514404}, {"spend": 15.260000228881836}, {"spend": 65.46000671386719}, {"spend": 22.0}, {"spend": 3.569999933242798}, {"spend": 35.590003967285156}, {"spend": 8.65999984741211}, {"spend": 22.6299991607666}, {"spend": 6.720000267028809}, {"spend": 13.059999465942383}, {"spend": 7.380000114440918}, {"spend": 8.069999694824219}, {"spend": 13.75999927520752}, {"spend": 12.239999771118164}, {"spend": 12.420000076293945}, {"spend": 12.629999160766602}, {"spend": 6.980000019073486}, {"spend": 17.040000915527344}, {"spend": 3.490000009536743}, {"spend": 21.23000144958496}, {"spend": 2.690000057220459}, {"spend": 6.180000305175781}, {"spend": 50.45000076293945}, {"spend": 13.460000038146973}, {"spend": 37.88999938964844}, {"spend": 3.7100000381469727}, {"spend": 9.809999465942383}, {"spend": 5.140000343322754}, {"spend": 26.700000762939453}, {"spend": 25.739999771118164}, {"spend": 37.59000015258789}, {"spend": 12.880000114440918}, {"spend": 8.970000267028809}, {"spend": 38.26000213623047}, {"spend": 16.549999237060547}, {"spend": 16.150001525878906}, {"spend": 33.08000183105469}, {"spend": 6.980000019073486}, {"spend": 3.190000057220459}, {"spend": 2.0899999141693115}, {"spend": 12.319999694824219}, {"spend": 4.699999809265137}, {"spend": 11.15999984741211}, {"spend": 19.0}, {"spend": 3.880000114440918}, {"spend": 3.490000009536743}, {"spend": 6.460000038146973}, {"spend": 22.760000228881836}, {"spend": 10.869999885559082}, {"spend": 25.68000030517578}, {"spend": 13.5}, {"spend": 34.480003356933594}, {"spend": 9.539999961853027}, {"spend": 14.149999618530273}, {"spend": 10.420000076293945}, {"spend": 36.09000015258789}, {"spend": 20.720001220703125}, {"spend": 14.800000190734863}, {"spend": 3.380000114440918}, {"spend": 21.830001831054688}, {"spend": 33.590003967285156}, {"spend": 6.460000038146973}, {"spend": 17.049999237060547}, {"spend": 6.980000019073486}, {"spend": 2.0299999713897705}, {"spend": 24.92999839782715}, {"spend": 27.709999084472656}, {"spend": 14.950000762939453}, {"spend": 14.65999984741211}, {"spend": 12.559999465942383}, {"spend": 3.380000114440918}, {"spend": 20.34000015258789}, {"spend": 2.190000057220459}, {"spend": 1.4900000095367432}, {"spend": 24.940000534057617}, {"spend": 20.920000076293945}, {"spend": 35.63999557495117}, {"spend": 14.320000648498535}, {"spend": 10.070000648498535}, {"spend": 16.350000381469727}, {"spend": 34.099998474121094}, {"spend": 31.21000099182129}, {"spend": 2.6500000953674316}, {"spend": 27.180002212524414}, {"spend": 19.21000099182129}, {"spend": 3.1700000762939453}, {"spend": 6.029999732971191}, {"spend": 18.910001754760742}, {"spend": 9.630000114440918}, {"spend": 15.030000686645508}, {"spend": 6.279999732971191}, {"spend": 18.340002059936523}, {"spend": 13.730000495910645}, {"spend": 27.420000076293945}, {"spend": 30.809999465942383}, {"spend": 44.050010681152344}, {"spend": 8.369999885559082}, {"spend": 2.490000009536743}, {"spend": 37.07999801635742}, {"spend": 26.739999771118164}, {"spend": 4.760000228881836}, {"spend": 22.84000015258789}, {"spend": 14.949999809265137}, {"spend": 10.34999942779541}, {"spend": 18.60999870300293}, {"spend": 18.700000762939453}, {"spend": 5.339999675750732}, {"spend": 28.809999465942383}, {"spend": 6.579999923706055}, {"spend": 16.549999237060547}, {"spend": 30.389997482299805}, {"spend": 14.619999885559082}, {"spend": 18.25}, {"spend": 10.270000457763672}, {"spend": 20.68000030517578}, {"spend": 25.799999237060547}, {"spend": 24.919998168945312}, {"spend": 23.290000915527344}, {"spend": 10.269999504089355}, {"spend": 21.920000076293945}, {"spend": 19.34000015258789}, {"spend": 2.6500000953674316}, {"spend": 17.450000762939453}, {"spend": 19.68000030517578}, {"spend": 32.09000015258789}, {"spend": 6.159999847412109}, {"spend": 16.450000762939453}, {"spend": 21.439998626708984}, {"spend": 6.980000019073486}, {"spend": 15.230000495910645}, {"spend": 13.029999732971191}, {"spend": 5.680000305175781}, {"spend": 3.380000114440918}, {"spend": 18.049999237060547}, {"spend": 18.540000915527344}, {"spend": 13.65999984741211}, {"spend": 13.319999694824219}, {"spend": 10.289999961853027}, {"spend": 20.93000030517578}, {"spend": 38.22999954223633}, {"spend": 37.43999481201172}, {"spend": 18.149999618530273}, {"spend": 13.760000228881836}, {"spend": 27.760000228881836}, {"spend": 7.380000114440918}, {"spend": 10.609999656677246}, {"spend": 6.380000114440918}, {"spend": 3.390000104904175}, {"spend": 18.649999618530273}, {"spend": 10.450000762939453}, {"spend": 12.809999465942383}, {"spend": 20.639999389648438}, {"spend": 3.490000009536743}, {"spend": 16.750001907348633}, {"spend": 3.890000104904175}, {"spend": 12.360000610351562}, {"spend": 54.119998931884766}, {"spend": 5.880000114440918}, {"spend": 26.81999969482422}, {"spend": 10.619999885559082}, {"spend": 19.78999900817871}, {"spend": 24.21000099182129}, {"spend": 22.1299991607666}, {"spend": 29.799999237060547}, {"spend": 6.309999942779541}, {"spend": 9.84000015258789}, {"spend": 12.649999618530273}, {"spend": 20.130001068115234}, {"spend": 2.2899999618530273}, {"spend": 8.559999465942383}, {"spend": 31.899999618530273}, {"spend": 12.890000343322754}, {"spend": 20.919998168945312}, {"spend": 25.279998779296875}, {"spend": 3.2899999618530273}, {"spend": 26.660001754760742}, {"spend": 10.369999885559082}, {"spend": 20.34000015258789}, {"spend": 6.760000228881836}, {"spend": 4.260000228881836}, {"spend": 17.270000457763672}, {"spend": 16.649999618530273}, {"spend": 6.119999885559082}, {"spend": 5.680000305175781}, {"spend": 10.470000267028809}, {"spend": 7.869999885559082}, {"spend": 12.510000228881836}, {"spend": 9.950000762939453}, {"spend": 13.860000610351562}, {"spend": 26.360000610351562}, {"spend": 36.79999923706055}, {"spend": 36.37000274658203}, {"spend": 3.490000009536743}, {"spend": 18.540000915527344}, {"spend": 10.870000839233398}, {"spend": 13.59999942779541}, {"spend": 19.450000762939453}, {"spend": 23.42999839782715}, {"spend": 29.51999855041504}, {"spend": 3.690000057220459}, {"spend": 40.589996337890625}, {"spend": 5.980000019073486}, {"spend": 4.940000057220459}, {"spend": 5.970000267028809}, {"spend": 2.990000009536743}, {"spend": 2.490000009536743}, {"spend": 16.360000610351562}, {"spend": 8.470000267028809}, {"spend": 2.6700000762939453}, {"spend": 13.449999809265137}, {"spend": 18.229999542236328}, {"spend": 42.08000564575195}, {"spend": 30.709999084472656}, {"spend": 18.610000610351562}, {"spend": 1.8899999856948853}, {"spend": 17.149999618530273}, {"spend": 16.029998779296875}, {"spend": 24.860000610351562}, {"spend": 16.639999389648438}, {"spend": 16.450000762939453}, {"spend": 16.10999870300293}, {"spend": 6.760000228881836}, {"spend": 13.800000190734863}, {"spend": 4.769999980926514}, {"spend": 3.890000104904175}, {"spend": 23.829999923706055}, {"spend": 7.989999771118164}, {"spend": 16.850000381469727}, {"spend": 29.810001373291016}, {"spend": 13.160000801086426}, {"spend": 13.630000114440918}, {"spend": 3.490000009536743}, {"spend": 19.040000915527344}, {"spend": 9.329999923706055}, {"spend": 6.859999656677246}, {"spend": 10.15000057220459}, {"spend": 13.65999984741211}, {"spend": 27.309999465942383}, {"spend": 3.380000114440918}, {"spend": 16.75}, {"spend": 23.690000534057617}, {"spend": 8.059999465942383}, {"spend": 10.180000305175781}, {"spend": 39.08000183105469}, {"spend": 6.460000038146973}, {"spend": 5.279999732971191}, {"spend": 16.25}, {"spend": 46.37000274658203}, {"spend": 30.420005798339844}, {"spend": 14.5600004196167}, {"spend": 20.829999923706055}, {"spend": 12.960000038146973}, {"spend": 34.47999954223633}, {"spend": 6.769999980926514}, {"spend": 16.329999923706055}, {"spend": 10.210000038146973}, {"spend": 14.660000801086426}, {"spend": 12.319999694824219}, {"spend": 44.040000915527344}, {"spend": 3.2899999618530273}, {"spend": 14.260000228881836}, {"spend": 11.65000057220459}, {"spend": 8.069999694824219}, {"spend": 3.380000114440918}, {"spend": 5.880000114440918}, {"spend": 6.380000114440918}, {"spend": 40.65999984741211}, {"spend": 13.160000801086426}, {"spend": 15.5600004196167}, {"spend": 23.42999839782715}, {"spend": 25.84000015258789}, {"spend": 30.909997940063477}, {"spend": 11.069999694824219}, {"spend": 48.730003356933594}, {"spend": 10.260000228881836}, {"spend": 8.65999984741211}, {"spend": 34.279998779296875}, {"spend": 11.270000457763672}, {"spend": 48.92000198364258}, {"spend": 21.229999542236328}, {"spend": 14.320000648498535}, {"spend": 31.229997634887695}, {"spend": 37.08000564575195}, {"spend": 5.680000305175781}, {"spend": 13.329999923706055}, {"spend": 9.770000457763672}, {"spend": 3.879999876022339}, {"spend": 24.53999900817871}, {"spend": 27.219999313354492}, {"spend": 2.490000009536743}, {"spend": 27.700000762939453}, {"spend": 16.270000457763672}, {"spend": 5.180000305175781}, {"spend": 6.760000228881836}, {"spend": 33.83000183105469}, {"spend": 26.619998931884766}, {"spend": 27.18999671936035}, {"spend": 19.079999923706055}, {"spend": 10.550000190734863}, {"spend": 12.920000076293945}, {"spend": 5.180000305175781}, {"spend": 3.2300000190734863}, {"spend": 3.0799999237060547}, {"spend": 2.190000057220459}, {"spend": 38.62000274658203}, {"spend": 19.869998931884766}, {"spend": 5.670000076293945}, {"spend": 100.63001251220703}, {"spend": 17.05000114440918}, {"spend": 16.510000228881836}, {"spend": 3.0799999237060547}, {"spend": 24.90999984741211}, {"spend": 5.579999923706055}, {"spend": 12.65999984741211}, {"spend": 3.390000104904175}, {"spend": 38.320003509521484}, {"spend": 12.660000801086426}, {"spend": 6.760000228881836}, {"spend": 7.399999618530273}, {"spend": 9.449999809265137}, {"spend": 9.84000015258789}, {"spend": 30.05000114440918}, {"spend": 3.680000066757202}, {"spend": 1.9900000095367432}, {"spend": 6.460000038146973}, {"spend": 3.490000009536743}, {"spend": 2.490000009536743}, {"spend": 10.84000015258789}, {"spend": 8.930000305175781}, {"spend": 6.880000114440918}, {"spend": 20.76000213623047}, {"spend": 3.380000114440918}, {"spend": 13.460000991821289}, {"spend": 3.0799999237060547}, {"spend": 8.239999771118164}, {"spend": 7.359999656677246}, {"spend": 10.470000267028809}, {"spend": 4.980000019073486}, {"spend": 8.710000038146973}, {"spend": 7.480000019073486}, {"spend": 1.690000057220459}, {"spend": 9.84000015258789}, {"spend": 17.950000762939453}, {"spend": 15.530000686645508}, {"spend": 25.90999984741211}, {"spend": 62.25}, {"spend": 21.09000015258789}, {"spend": 38.16999816894531}, {"spend": 13.289999961853027}, {"spend": 74.94001007080078}, {"spend": 3.0899999141693115}, {"spend": 23.229999542236328}, {"spend": 20.34000015258789}, {"spend": 15.350000381469727}, {"spend": 1.5700000524520874}, {"spend": 21.280000686645508}, {"spend": 35.58000183105469}, {"spend": 23.329999923706055}, {"spend": 3.890000104904175}, {"spend": 10.850000381469727}, {"spend": 29.160001754760742}, {"spend": 18.190000534057617}, {"spend": 6.779999732971191}, {"spend": 3.1700000762939453}, {"spend": 33.70000076293945}, {"spend": 6.880000114440918}, {"spend": 7.220000267028809}, {"spend": 16.73000144958496}, {"spend": 53.6400032043457}, {"spend": 34.4900016784668}, {"spend": 3.390000104904175}, {"spend": 13.760000228881836}, {"spend": 33.70000076293945}, {"spend": 15.450000762939453}, {"spend": 21.860000610351562}, {"spend": 11.960000038146973}, {"spend": 14.34000015258789}, {"spend": 50.85000228881836}, {"spend": 9.539999961853027}, {"spend": 35.589996337890625}, {"spend": 12.260000228881836}, {"spend": 5.75}, {"spend": 8.630000114440918}, {"spend": 12.14000129699707}, {"spend": 11.75}, {"spend": 29.220001220703125}, {"spend": 13.260000228881836}, {"spend": 9.670000076293945}, {"spend": 50.02000045776367}, {"spend": 2.490000009536743}, {"spend": 23.21000099182129}, {"spend": 29.030000686645508}, {"spend": 18.130001068115234}, {"spend": 15.829999923706055}, {"spend": 21.520002365112305}, {"spend": 13.640000343322754}, {"spend": 6.760000228881836}, {"spend": 8.170000076293945}, {"spend": 7.470000267028809}, {"spend": 6.180000305175781}, {"spend": 40.97999954223633}, {"spend": 12.680000305175781}, {"spend": 16.670000076293945}, {"spend": 20.420000076293945}, {"spend": 19.87000274658203}, {"spend": 2.7899999618530273}, {"spend": 9.84000015258789}, {"spend": 17.3700008392334}, {"spend": 44.75}, {"spend": 19.549999237060547}, {"spend": 10.489999771118164}, {"spend": 43.660003662109375}, {"spend": 5.389999866485596}, {"spend": 3.390000104904175}, {"spend": 5.319999694824219}, {"spend": 11.239999771118164}, {"spend": 8.390000343322754}, {"spend": 10.979999542236328}, {"spend": 9.510000228881836}, {"spend": 16.65999984741211}, {"spend": 12.210000038146973}, {"spend": 24.200000762939453}, {"spend": 6.210000038146973}, {"spend": 7.869999885559082}, {"spend": 12.4399995803833}, {"spend": 10.860000610351562}, {"spend": 5.680000305175781}, {"spend": 27.6200008392334}, {"spend": 26.719999313354492}, {"spend": 10.649999618530273}, {"spend": 10.970000267028809}, {"spend": 29.46000099182129}, {"spend": 22.01000213623047}, {"spend": 21.34000015258789}, {"spend": 41.220001220703125}, {"spend": 3.0799999237060547}, {"spend": 6.75}, {"spend": 18.610000610351562}, {"spend": 2.690000057220459}, {"spend": 15.890000343322754}, {"spend": 13.220000267028809}, {"spend": 2.7899999618530273}, {"spend": 8.329999923706055}, {"spend": 5.880000114440918}, {"spend": 26.110002517700195}, {"spend": 19.440000534057617}, {"spend": 9.489999771118164}, {"spend": 15.260000228881836}, {"spend": 14.260000228881836}, {"spend": 20.31999969482422}, {"spend": 3.690000057220459}, {"spend": 16.329999923706055}, {"spend": 1.8899999856948853}, {"spend": 20.369998931884766}, {"spend": 2.0899999141693115}, {"spend": 9.690000534057617}, {"spend": 2.490000009536743}, {"spend": 9.960000038146973}, {"spend": 5.680000305175781}, {"spend": 11.84999942779541}, {"spend": 19.360000610351562}, {"spend": 9.539999961853027}, {"spend": 22.760000228881836}, {"spend": 38.18000030517578}, {"spend": 18.93000030517578}, {"spend": 35.0}, {"spend": 24.869998931884766}, {"spend": 10.450000762939453}, {"spend": 18.529998779296875}, {"spend": 21.889999389648438}, {"spend": 9.949999809265137}, {"spend": 8.930000305175781}, {"spend": 14.369999885559082}, {"spend": 7.25}, {"spend": 24.260000228881836}, {"spend": 5.970000267028809}, {"spend": 14.760000228881836}, {"spend": 14.549999237060547}, {"spend": 3.190000057220459}, {"spend": 4.579999923706055}, {"spend": 22.760000228881836}, {"spend": 9.84000015258789}, {"spend": 41.15999984741211}, {"spend": 3.490000009536743}, {"spend": 4.380000114440918}, {"spend": 18.940000534057617}, {"spend": 5.079999923706055}, {"spend": 15.319999694824219}, {"spend": 4.980000019073486}, {"spend": 9.970000267028809}, {"spend": 13.079999923706055}, {"spend": 8.569999694824219}, {"spend": 2.890000104904175}, {"spend": 15.029999732971191}, {"spend": 42.040000915527344}, {"spend": 4.980000019073486}, {"spend": 11.720000267028809}, {"spend": 12.850000381469727}, {"spend": 7.670000076293945}, {"spend": 9.960000038146973}, {"spend": 8.690000534057617}, {"spend": 12.449999809265137}, {"spend": 21.139999389648438}, {"spend": 33.0099983215332}, {"spend": 12.15999984741211}, {"spend": 9.070000648498535}, {"spend": 7.78000020980835}, {"spend": 13.329999923706055}, {"spend": 5.269999980926514}, {"spend": 5.659999847412109}, {"spend": 14.9399995803833}, {"spend": 8.369999885559082}, {"spend": 24.459999084472656}, {"spend": 5.28000020980835}, {"spend": 38.150001525878906}, {"spend": 24.619998931884766}, {"spend": 24.1200008392334}, {"spend": 51.950008392333984}, {"spend": 21.93000030517578}, {"spend": 9.269999504089355}, {"spend": 5.279999732971191}, {"spend": 38.10000228881836}, {"spend": 10.5}, {"spend": 6.760000228881836}, {"spend": 15.459999084472656}, {"spend": 9.25}, {"spend": 32.400001525878906}, {"spend": 25.220001220703125}, {"spend": 13.74000072479248}, {"spend": 9.479999542236328}, {"spend": 8.859999656677246}, {"spend": 13.949999809265137}, {"spend": 11.460000991821289}, {"spend": 20.329999923706055}, {"spend": 7.78000020980835}, {"spend": 7.159999847412109}, {"spend": 3.2899999618530273}, {"spend": 5.480000019073486}, {"spend": 20.610000610351562}, {"spend": 13.360000610351562}, {"spend": 16.950000762939453}, {"spend": 5.710000038146973}, {"spend": 23.850000381469727}, {"spend": 45.7400016784668}, {"spend": 15.449999809265137}, {"spend": 17.790000915527344}, {"spend": 2.490000009536743}, {"spend": 22.989999771118164}, {"spend": 3.380000114440918}, {"spend": 6.380000114440918}, {"spend": 7.449999809265137}, {"spend": 12.350000381469727}, {"spend": 46.86000061035156}, {"spend": 9.369999885559082}, {"spend": 7.729999542236328}, {"spend": 2.5899999141693115}, {"spend": 19.790000915527344}, {"spend": 36.749996185302734}, {"spend": 13.549999237060547}, {"spend": 12.630000114440918}, {"spend": 6.880000114440918}, {"spend": 10.970000267028809}, {"spend": 7.570000648498535}, {"spend": 26.68000030517578}, {"spend": 12.559999465942383}, {"spend": 21.529998779296875}, {"spend": 12.510000228881836}, {"spend": 23.09000015258789}, {"spend": 17.25}, {"spend": 27.260000228881836}, {"spend": 12.029999732971191}, {"spend": 32.77000045776367}, {"spend": 7.130000114440918}, {"spend": 26.630001068115234}, {"spend": 11.819999694824219}, {"spend": 22.729999542236328}, {"spend": 7.170000076293945}, {"spend": 12.739999771118164}, {"spend": 27.740001678466797}, {"spend": 30.60999870300293}, {"spend": 12.950000762939453}, {"spend": 6.720000267028809}, {"spend": 15.070000648498535}, {"spend": 24.6200008392334}, {"spend": 18.25}, {"spend": 13.65999984741211}, {"spend": 7.78000020980835}, {"spend": 102.87001037597656}, {"spend": 24.619998931884766}, {"spend": 14.380000114440918}, {"spend": 26.260000228881836}, {"spend": 27.470001220703125}, {"spend": 47.04999923706055}, {"spend": 8.210000038146973}, {"spend": 1.8899999856948853}, {"spend": 32.21000289916992}, {"spend": 31.6299991607666}, {"spend": 9.5}, {"spend": 21.260000228881836}, {"spend": 20.09000015258789}, {"spend": 34.19999694824219}, {"spend": 5.779999732971191}, {"spend": 23.34000015258789}, {"spend": 5.590000152587891}, {"spend": 19.25}, {"spend": 28.369998931884766}, {"spend": 7.579999923706055}, {"spend": 4.279999732971191}, {"spend": 23.40999984741211}, {"spend": 13.710000038146973}, {"spend": 29.520002365112305}, {"spend": 3.490000009536743}, {"spend": 13.520000457763672}, {"spend": 5.869999885559082}, {"spend": 12.739999771118164}, {"spend": 4.480000019073486}, {"spend": 13.220000267028809}, {"spend": 16.75}, {"spend": 28.209999084472656}, {"spend": 16.110000610351562}, {"spend": 12.319999694824219}, {"spend": 18.239999771118164}, {"spend": 2.2899999618530273}, {"spend": 9.239999771118164}, {"spend": 9.869999885559082}, {"spend": 20.1299991607666}, {"spend": 25.40999984741211}, {"spend": 3.390000104904175}, {"spend": 3.0899999141693115}, {"spend": 21.139999389648438}, {"spend": 19.350000381469727}, {"spend": 3.450000047683716}, {"spend": 20.34000015258789}, {"spend": 39.519996643066406}, {"spend": 10.270000457763672}, {"spend": 27.300003051757812}, {"spend": 24.899999618530273}, {"spend": 18.989999771118164}, {"spend": 29.520002365112305}, {"spend": 8.010000228881836}, {"spend": 15.669999122619629}, {"spend": 10.670000076293945}, {"spend": 5.679999828338623}, {"spend": 17.440000534057617}, {"spend": 19.130001068115234}, {"spend": 3.490000009536743}, {"spend": 12.020000457763672}, {"spend": 24.130001068115234}, {"spend": 5.680000305175781}, {"spend": 2.890000104904175}, {"spend": 13.75}, {"spend": 13.75999927520752}, {"spend": 25.330001831054688}, {"spend": 9.84000015258789}, {"spend": 15.210000038146973}, {"spend": 2.190000057220459}, {"spend": 11.729999542236328}, {"spend": 23.43000030517578}, {"spend": 24.360000610351562}, {"spend": 12.84000015258789}, {"spend": 15.740001678466797}, {"spend": 21.139999389648438}, {"spend": 13.609999656677246}, {"spend": 24.720001220703125}, {"spend": 13.220000267028809}, {"spend": 3.380000114440918}, {"spend": 12.859999656677246}, {"spend": 36.82000732421875}, {"spend": 2.690000057220459}, {"spend": 14.930001258850098}, {"spend": 3.390000104904175}, {"spend": 6.380000114440918}, {"spend": 3.380000114440918}, {"spend": 37.09000015258789}, {"spend": 6.460000038146973}, {"spend": 12.960000038146973}, {"spend": 30.32000160217285}, {"spend": 18.940000534057617}, {"spend": 38.13999938964844}, {"spend": 6.760000228881836}, {"spend": 67.7699966430664}, {"spend": 25.81999969482422}, {"spend": 43.160003662109375}, {"spend": 15.289999961853027}, {"spend": 7.5}, {"spend": 15.649999618530273}, {"spend": 27.35999870300293}, {"spend": 8.640000343322754}, {"spend": 4.779999732971191}, {"spend": 15.449999809265137}, {"spend": 19.98000144958496}, {"spend": 22.420000076293945}, {"spend": 7.649999618530273}, {"spend": 19.869998931884766}, {"spend": 37.010005950927734}, {"spend": 13.800000190734863}, {"spend": 6.579999923706055}, {"spend": 4.980000019073486}, {"spend": 9.25}, {"spend": 9.649999618530273}, {"spend": 2.390000104904175}, {"spend": 28.810001373291016}, {"spend": 35.77000045776367}, {"spend": 6.680000305175781}, {"spend": 8.950000762939453}, {"spend": 8.569999694824219}, {"spend": 34.97999954223633}, {"spend": 25.219999313354492}, {"spend": 12.949999809265137}, {"spend": 3.490000009536743}, {"spend": 27.329999923706055}, {"spend": 10.470000267028809}, {"spend": 8.859999656677246}, {"spend": 6.309999942779541}, {"spend": 13.520000457763672}, {"spend": 8.949999809265137}, {"spend": 6.760000228881836}, {"spend": 3.490000009536743}, {"spend": 2.3499999046325684}, {"spend": 20.279998779296875}, {"spend": 3.490000009536743}, {"spend": 12.029999732971191}, {"spend": 16.489999771118164}, {"spend": 34.160003662109375}, {"spend": 14.300000190734863}, {"spend": 21.220001220703125}, {"spend": 37.480003356933594}, {"spend": 5.440000057220459}, {"spend": 11.799999237060547}, {"spend": 7.470000267028809}, {"spend": 23.15999984741211}, {"spend": 6.970000267028809}, {"spend": 8.970000267028809}, {"spend": 4.380000114440918}, {"spend": 13.190000534057617}, {"spend": 16.649999618530273}, {"spend": 6.869999885559082}, {"spend": 5.480000019073486}, {"spend": 20.540000915527344}, {"spend": 11.0600004196167}, {"spend": 16.600000381469727}, {"spend": 2.490000009536743}, {"spend": 9.649999618530273}, {"spend": 11.199999809265137}, {"spend": 6.760000228881836}, {"spend": 44.77000427246094}, {"spend": 10.269999504089355}, {"spend": 5.079999923706055}, {"spend": 28.610000610351562}, {"spend": 14.84000015258789}, {"spend": 4.340000152587891}, {"spend": 3.490000009536743}, {"spend": 17.14000129699707}, {"spend": 7.240000247955322}, {"spend": 2.490000009536743}, {"spend": 11.859999656677246}, {"spend": 13.850000381469727}, {"spend": 2.3499999046325684}, {"spend": 3.490000009536743}, {"spend": 16.139999389648438}, {"spend": 7.769999980926514}, {"spend": 2.2899999618530273}, {"spend": 48.49000549316406}, {"spend": 30.520000457763672}, {"spend": 6.460000038146973}, {"spend": 29.130001068115234}, {"spend": 33.75}, {"spend": 13.520000457763672}, {"spend": 16.75}, {"spend": 25.530000686645508}, {"spend": 12.969999313354492}, {"spend": 4.980000019073486}, {"spend": 10.550000190734863}, {"spend": 20.279998779296875}, {"spend": 5.480000019073486}, {"spend": 11.960000038146973}, {"spend": 23.360000610351562}, {"spend": 3.390000104904175}, {"spend": 16.139999389648438}, {"spend": 3.490000009536743}, {"spend": 4.650000095367432}, {"spend": 10.559999465942383}, {"spend": 17.599998474121094}, {"spend": 20.51999855041504}, {"spend": 4.980000019073486}, {"spend": 17.529998779296875}, {"spend": 17.56999969482422}, {"spend": 7.569999694824219}, {"spend": 17.43000030517578}, {"spend": 20.40999984741211}, {"spend": 12.859999656677246}, {"spend": 37.590003967285156}, {"spend": 54.63999938964844}, {"spend": 2.3499999046325684}, {"spend": 6.480000019073486}, {"spend": 4.480000019073486}, {"spend": 6.980000019073486}, {"spend": 6.159999847412109}, {"spend": 5.680000305175781}, {"spend": 5.78000020980835}, {"spend": 10.65999984741211}, {"spend": 5.760000228881836}, {"spend": 11.829999923706055}, {"spend": 18.649999618530273}, {"spend": 16.670000076293945}, {"spend": 30.510000228881836}, {"spend": 6.880000114440918}, {"spend": 19.040000915527344}, {"spend": 4.170000076293945}, {"spend": 3.990000009536743}, {"spend": 11.109999656677246}, {"spend": 3.380000114440918}, {"spend": 20.739999771118164}, {"spend": 13.059999465942383}, {"spend": 23.670000076293945}, {"spend": 32.52000045776367}, {"spend": 2.5899999141693115}, {"spend": 6.179999828338623}, {"spend": 7.960000038146973}, {"spend": 32.730003356933594}, {"spend": 8.75}, {"spend": 32.30999755859375}, {"spend": 4.929999828338623}, {"spend": 53.659996032714844}, {"spend": 17.689998626708984}, {"spend": 14.260000228881836}, {"spend": 28.51999855041504}, {"spend": 35.279998779296875}, {"spend": 9.25}, {"spend": 10.470000267028809}, {"spend": 16.119998931884766}, {"spend": 13.690000534057617}, {"spend": 30.49000358581543}, {"spend": 12.380000114440918}, {"spend": 13.15999984741211}, {"spend": 17.049999237060547}, {"spend": 50.849998474121094}, {"spend": 23.229999542236328}, {"spend": 24.899999618530273}, {"spend": 5.170000076293945}, {"spend": 12.619999885559082}, {"spend": 4.309999942779541}, {"spend": 19.26999855041504}, {"spend": 21.18000030517578}, {"spend": 1.9900000095367432}, {"spend": 2.5899999141693115}, {"spend": 11.609999656677246}, {"spend": 13.15999984741211}, {"spend": 18.940000534057617}, {"spend": 30.009998321533203}, {"spend": 9.300000190734863}, {"spend": 4.880000114440918}, {"spend": 18.399999618530273}, {"spend": 6.970000267028809}, {"spend": 18.040000915527344}, {"spend": 17.25}, {"spend": 8.670000076293945}, {"spend": 26.829998016357422}, {"spend": 12.80000114440918}, {"spend": 6.460000038146973}, {"spend": 9.220000267028809}, {"spend": 22.31999969482422}, {"spend": 7.420000076293945}, {"spend": 29.020002365112305}, {"spend": 7.820000171661377}, {"spend": 11.149999618530273}, {"spend": 10.720000267028809}, {"spend": 19.520000457763672}, {"spend": 15.430000305175781}, {"spend": 32.56999969482422}, {"spend": 12.920000076293945}, {"spend": 9.65999984741211}, {"spend": 6.980000019073486}, {"spend": 3.380000114440918}, {"spend": 30.60999870300293}, {"spend": 2.890000104904175}, {"spend": 1.7899999618530273}, {"spend": 6.460000038146973}, {"spend": 15.699999809265137}, {"spend": 56.029998779296875}, {"spend": 2.490000009536743}, {"spend": 25.670000076293945}, {"spend": 5.779999732971191}, {"spend": 23.509998321533203}, {"spend": 12.100000381469727}, {"spend": 34.10000228881836}, {"spend": 69.9000015258789}, {"spend": 7.96999979019165}, {"spend": 2.5899999141693115}, {"spend": 35.900001525878906}, {"spend": 9.970000267028809}, {"spend": 3.569999933242798}, {"spend": 30.020000457763672}, {"spend": 4.670000076293945}, {"spend": 6.239999771118164}, {"spend": 6.760000228881836}, {"spend": 10.170000076293945}, {"spend": 34.59000015258789}, {"spend": 8.399999618530273}, {"spend": 14.060001373291016}, {"spend": 3.390000104904175}, {"spend": 13.059999465942383}, {"spend": 10.369999885559082}, {"spend": 2.0899999141693115}, {"spend": 45.19000244140625}, {"spend": 3.380000114440918}, {"spend": 37.06999969482422}, {"spend": 2.5899999141693115}, {"spend": 12.569999694824219}, {"spend": 37.69000244140625}, {"spend": 8.9399995803833}, {"spend": 30.119997024536133}, {"spend": 37.47999954223633}, {"spend": 67.27001190185547}, {"spend": 3.490000009536743}, {"spend": 14.149999618530273}, {"spend": 41.47999954223633}, {"spend": 3.430000066757202}, {"spend": 2.8499999046325684}, {"spend": 18.530000686645508}, {"spend": 10.170000076293945}, {"spend": 15.239999771118164}, {"spend": 2.7899999618530273}, {"spend": 39.029998779296875}, {"spend": 37.349998474121094}, {"spend": 10.329999923706055}, {"spend": 7.380000114440918}, {"spend": 28.12000274658203}, {"spend": 13.5600004196167}, {"spend": 4.279999732971191}, {"spend": 2.5899999141693115}, {"spend": 9.539999961853027}, {"spend": 10.549999237060547}, {"spend": 30.459999084472656}, {"spend": 20.939998626708984}, {"spend": 21.739999771118164}, {"spend": 5.579999923706055}, {"spend": 9.539999961853027}, {"spend": 4.940000057220459}, {"spend": 1.5700000524520874}, {"spend": 8.680000305175781}, {"spend": 49.05999755859375}, {"spend": 15.059999465942383}, {"spend": 6.680000305175781}, {"spend": 10.370000839233398}, {"spend": 11.360000610351562}, {"spend": 16.670000076293945}, {"spend": 2.2100000381469727}, {"spend": 6.78000020980835}, {"spend": 10.930000305175781}, {"spend": 3.380000114440918}, {"spend": 24.689998626708984}, {"spend": 3.869999885559082}, {"spend": 8.569999694824219}, {"spend": 12.75999927520752}, {"spend": 16.56999969482422}, {"spend": 16.649999618530273}, {"spend": 24.209999084472656}, {"spend": 12.75999927520752}, {"spend": 7.380000114440918}, {"spend": 18.40999984741211}, {"spend": 15.249999046325684}, {"spend": 2.75}, {"spend": 26.219999313354492}, {"spend": 24.310001373291016}, {"spend": 5.579999923706055}, {"spend": 18.950000762939453}, {"spend": 20.510000228881836}, {"spend": 18.950000762939453}, {"spend": 18.010000228881836}, {"spend": 2.390000104904175}, {"spend": 6.460000038146973}, {"spend": 16.850000381469727}, {"spend": 7.359999656677246}, {"spend": 24.110000610351562}, {"spend": 13.460000038146973}, {"spend": 23.93000030517578}, {"spend": 20.979999542236328}, {"spend": 10.350000381469727}, {"spend": 11.070000648498535}, {"spend": 6.460000038146973}, {"spend": 20.439998626708984}, {"spend": 1.7699999809265137}, {"spend": 13.65999984741211}, {"spend": 8.359999656677246}, {"spend": 9.539999961853027}, {"spend": 15.64000129699707}, {"spend": 23.360002517700195}, {"spend": 15.260000228881836}, {"spend": 7.0}, {"spend": 11.050000190734863}, {"spend": 15.9399995803833}, {"spend": 6.78000020980835}, {"spend": 39.28000259399414}, {"spend": 9.539999961853027}, {"spend": 21.53999900817871}, {"spend": 4.900000095367432}, {"spend": 6.460000038146973}, {"spend": 6.680000305175781}, {"spend": 29.920001983642578}, {"spend": 11.100000381469727}, {"spend": 11.270000457763672}, {"spend": 7.079999923706055}, {"spend": 23.40999984741211}, {"spend": 6.380000114440918}, {"spend": 30.749998092651367}, {"spend": 6.910000324249268}, {"spend": 13.449999809265137}, {"spend": 2.190000057220459}, {"spend": 7.769999980926514}, {"spend": 4.279999732971191}, {"spend": 2.5899999141693115}, {"spend": 1.4900000095367432}, {"spend": 14.360000610351562}, {"spend": 9.670000076293945}, {"spend": 6.880000114440918}, {"spend": 16.059999465942383}, {"spend": 3.2899999618530273}, {"spend": 18.450000762939453}, {"spend": 24.81999969482422}, {"spend": 5.980000019073486}, {"spend": 2.490000009536743}, {"spend": 6.460000038146973}, {"spend": 20.520000457763672}, {"spend": 68.31000518798828}, {"spend": 7.079999923706055}, {"spend": 20.440000534057617}, {"spend": 7.840000152587891}, {"spend": 13.949999809265137}, {"spend": 7.369999885559082}, {"spend": 49.67000198364258}, {"spend": 11.84000015258789}, {"spend": 3.890000104904175}, {"spend": 54.260005950927734}, {"spend": 21.6200008392334}, {"spend": 13.050000190734863}, {"spend": 13.5600004196167}, {"spend": 16.239999771118164}, {"spend": 40.78000259399414}, {"spend": 30.009998321533203}, {"spend": 39.95999526977539}, {"spend": 9.170000076293945}, {"spend": 18.649999618530273}, {"spend": 11.90999984741211}, {"spend": 16.630001068115234}, {"spend": 11.609999656677246}, {"spend": 2.390000104904175}, {"spend": 43.90999984741211}, {"spend": 61.030006408691406}, {"spend": 7.739999771118164}, {"spend": 20.040000915527344}, {"spend": 52.70000076293945}, {"spend": 2.7899999618530273}, {"spend": 12.449999809265137}, {"spend": 15.34000015258789}, {"spend": 11.170000076293945}, {"spend": 4.5}, {"spend": 28.469999313354492}, {"spend": 18.940000534057617}, {"spend": 12.529999732971191}, {"spend": 23.719999313354492}, {"spend": 9.239999771118164}, {"spend": 2.25}, {"spend": 56.82000732421875}, {"spend": 9.539999961853027}, {"spend": 16.55000114440918}, {"spend": 2.490000009536743}, {"spend": 8.770000457763672}, {"spend": 27.190000534057617}, {"spend": 3.490000009536743}, {"spend": 17.239999771118164}, {"spend": 19.389999389648438}, {"spend": 2.190000057220459}, {"spend": 47.220001220703125}, {"spend": 3.380000114440918}, {"spend": 10.350000381469727}, {"spend": 6.360000133514404}, {"spend": 9.84000015258789}, {"spend": 9.539999961853027}, {"spend": 13.75}, {"spend": 3.380000114440918}, {"spend": 15.050000190734863}, {"spend": 29.329999923706055}, {"spend": 2.490000009536743}, {"spend": 16.600000381469727}, {"spend": 9.050000190734863}, {"spend": 13.220000267028809}, {"spend": 2.190000057220459}, {"spend": 5.75}, {"spend": 10.059999465942383}, {"spend": 6.159999847412109}, {"spend": 14.9399995803833}, {"spend": 34.279998779296875}, {"spend": 1.649999976158142}, {"spend": 16.119998931884766}, {"spend": 13.430000305175781}, {"spend": 9.050000190734863}, {"spend": 40.21999740600586}, {"spend": 12.649999618530273}, {"spend": 14.319999694824219}, {"spend": 37.18000030517578}, {"spend": 3.0899999141693115}, {"spend": 13.279999732971191}, {"spend": 14.14000129699707}, {"spend": 5.980000019073486}, {"spend": 24.93000030517578}, {"spend": 13.5600004196167}, {"spend": 92.02999877929688}, {"spend": 3.380000114440918}, {"spend": 47.04999923706055}, {"spend": 6.590000152587891}, {"spend": 26.8799991607666}, {"spend": 61.27000427246094}, {"spend": 18.649999618530273}, {"spend": 32.19000244140625}, {"spend": 8.869999885559082}, {"spend": 35.31999969482422}, {"spend": 7.220000267028809}, {"spend": 6.880000114440918}, {"spend": 37.47999954223633}, {"spend": 5.070000171661377}, {"spend": 12.819999694824219}, {"spend": 2.690000057220459}, {"spend": 64.07000732421875}, {"spend": 8.25}, {"spend": 97.37998962402344}, {"spend": 17.450000762939453}, {"spend": 6.760000228881836}, {"spend": 33.60000228881836}, {"spend": 5.650000095367432}, {"spend": 6.699999809265137}, {"spend": 12.5600004196167}, {"spend": 9.59000015258789}, {"spend": 8.770000457763672}, {"spend": 13.260000228881836}, {"spend": 15.359999656677246}, {"spend": 12.260000228881836}, {"spend": 29.46000099182129}, {"spend": 12.619999885559082}, {"spend": 2.0}, {"spend": 27.479999542236328}, {"spend": 48.160003662109375}, {"spend": 2.190000057220459}, {"spend": 8.869999885559082}, {"spend": 41.57999801635742}, {"spend": 21.93000030517578}, {"spend": 27.119998931884766}, {"spend": 17.100000381469727}, {"spend": 13.220000267028809}, {"spend": 20.93000030517578}, {"spend": 2.2300000190734863}, {"spend": 1.649999976158142}, {"spend": 6.829999923706055}, {"spend": 15.989998817443848}, {"spend": 61.200008392333984}, {"spend": 26.889999389648438}, {"spend": 14.230000495910645}, {"spend": 7.970000267028809}, {"spend": 22.509998321533203}, {"spend": 12.15999984741211}, {"spend": 6.119999885559082}, {"spend": 8.270000457763672}, {"spend": 33.4900016784668}, {"spend": 1.7699999809265137}, {"spend": 41.480003356933594}, {"spend": 14.34000015258789}, {"spend": 19.90999984741211}, {"spend": 17.849998474121094}, {"spend": 6.880000114440918}, {"spend": 6.079999923706055}, {"spend": 10.5600004196167}, {"spend": 6.570000171661377}, {"spend": 11.300000190734863}, {"spend": 9.369999885559082}, {"spend": 14.809999465942383}, {"spend": 21.440000534057617}, {"spend": 30.31999969482422}, {"spend": 18.25}, {"spend": 3.190000057220459}, {"spend": 8.15999984741211}, {"spend": 16.049999237060547}, {"spend": 14.850001335144043}, {"spend": 32.09000015258789}, {"spend": 4.989999771118164}, {"spend": 2.490000009536743}, {"spend": 7.75}, {"spend": 4.940000057220459}, {"spend": 5.380000114440918}, {"spend": 12.430000305175781}, {"spend": 23.130001068115234}, {"spend": 6.079999923706055}, {"spend": 16.709999084472656}, {"spend": 16.020000457763672}, {"spend": 14.239999771118164}, {"spend": 26.74000358581543}, {"spend": 11.65999984741211}, {"spend": 12.710000991821289}, {"spend": 8.649999618530273}, {"spend": 10.460000038146973}, {"spend": 8.069999694824219}, {"spend": 17.130001068115234}, {"spend": 17.420000076293945}, {"spend": 13.620000839233398}, {"spend": 4.610000133514404}, {"spend": 10.140000343322754}, {"spend": 13.220000267028809}, {"spend": 7.75}, {"spend": 34.939998626708984}, {"spend": 14.389999389648438}, {"spend": 21.729999542236328}, {"spend": 21.420000076293945}, {"spend": 20.309999465942383}, {"spend": 19.630001068115234}, {"spend": 16.850000381469727}, {"spend": 14.949999809265137}, {"spend": 6.579999923706055}, {"spend": 12.949999809265137}, {"spend": 14.680000305175781}, {"spend": 6.369999885559082}, {"spend": 8.569999694824219}, {"spend": 17.010000228881836}, {"spend": 6.460000038146973}, {"spend": 23.1299991607666}, {"spend": 15.719999313354492}, {"spend": 14.260000228881836}, {"spend": 10.789999961853027}, {"spend": 16.739999771118164}, {"spend": 4.880000114440918}, {"spend": 1.3899999856948853}, {"spend": 18.549999237060547}, {"spend": 7.070000171661377}, {"spend": 10.069999694824219}, {"spend": 14.219999313354492}, {"spend": 18.03999900817871}, {"spend": 17.270000457763672}, {"spend": 13.65999984741211}, {"spend": 14.160000801086426}, {"spend": 10.670000076293945}, {"spend": 17.05000114440918}, {"spend": 2.2899999618530273}, {"spend": 20.139999389648438}, {"spend": 12.859999656677246}, {"spend": 6.680000305175781}, {"spend": 8.609999656677246}, {"spend": 12.100000381469727}, {"spend": 12.860000610351562}, {"spend": 2.7899999618530273}, {"spend": 33.11000061035156}, {"spend": 2.390000104904175}, {"spend": 13.300000190734863}, {"spend": 6.970000267028809}, {"spend": 10.369999885559082}, {"spend": 17.05000114440918}, {"spend": 17.490001678466797}, {"spend": 3.990000009536743}, {"spend": 8.470000267028809}, {"spend": 18.18000030517578}, {"spend": 4.739999771118164}, {"spend": 22.92999839782715}, {"spend": 16.34000015258789}, {"spend": 4.489999771118164}, {"spend": 3.490000009536743}, {"spend": 18.029998779296875}, {"spend": 5.380000114440918}, {"spend": 41.04999923706055}, {"spend": 9.369999885559082}, {"spend": 7.949999809265137}, {"spend": 20.630001068115234}, {"spend": 7.329999923706055}, {"spend": 12.1899995803833}, {"spend": 3.490000009536743}, {"spend": 2.7899999618530273}, {"spend": 19.68000030517578}, {"spend": 30.21000099182129}, {"spend": 29.700000762939453}, {"spend": 3.490000009536743}, {"spend": 26.420000076293945}, {"spend": 21.65999984741211}, {"spend": 3.390000104904175}, {"spend": 23.670001983642578}, {"spend": 4.980000019073486}, {"spend": 5.980000019073486}, {"spend": 8.069999694824219}, {"spend": 6.760000228881836}, {"spend": 3.390000104904175}, {"spend": 13.65999984741211}, {"spend": 37.53000259399414}, {"spend": 7.079999923706055}, {"spend": 52.010005950927734}, {"spend": 3.569999933242798}, {"spend": 12.5600004196167}, {"spend": 16.0}, {"spend": 38.87000274658203}, {"spend": 6.579999923706055}, {"spend": 10.170000076293945}, {"spend": 5.980000019073486}, {"spend": 43.96999740600586}, {"spend": 26.099998474121094}, {"spend": 16.600000381469727}, {"spend": 37.97000503540039}, {"spend": 33.93000030517578}, {"spend": 5.980000019073486}, {"spend": 15.0600004196167}, {"spend": 2.25}, {"spend": 9.84000015258789}, {"spend": 23.279998779296875}, {"spend": 26.65999984741211}, {"spend": 10.059999465942383}, {"spend": 33.599998474121094}, {"spend": 8.170000076293945}, {"spend": 19.28999900817871}, {"spend": 3.390000104904175}, {"spend": 37.87000274658203}, {"spend": 6.869999885559082}, {"spend": 23.23000144958496}, {"spend": 6.180000305175781}, {"spend": 30.78999900817871}, {"spend": 9.84000015258789}, {"spend": 10.670000076293945}, {"spend": 11.84000015258789}, {"spend": 30.64000129699707}, {"spend": 11.070000648498535}, {"spend": 6.46999979019165}, {"spend": 18.190000534057617}, {"spend": 3.490000009536743}, {"spend": 26.060001373291016}, {"spend": 2.990000009536743}, {"spend": 24.920000076293945}, {"spend": 13.34999942779541}, {"spend": 3.380000114440918}, {"spend": 9.84000015258789}, {"spend": 29.820003509521484}, {"spend": 41.18000030517578}, {"spend": 2.2899999618530273}, {"spend": 5.979999542236328}, {"spend": 12.359999656677246}, {"spend": 5.279999732971191}, {"spend": 7.380000114440918}, {"spend": 4.980000019073486}, {"spend": 1.5299999713897705}, {"spend": 25.07000160217285}, {"spend": 7.530000686645508}, {"spend": 17.110000610351562}, {"spend": 3.490000009536743}, {"spend": 6.880000114440918}, {"spend": 21.739999771118164}, {"spend": 4.400000095367432}, {"spend": 34.01000213623047}, {"spend": 2.8499999046325684}, {"spend": 6.710000038146973}, {"spend": 9.960000038146973}, {"spend": 30.890003204345703}, {"spend": 17.299999237060547}, {"spend": 38.7599983215332}, {"spend": 6.630000114440918}, {"spend": 24.729999542236328}, {"spend": 9.539999961853027}, {"spend": 29.509998321533203}, {"spend": 6.130000114440918}, {"spend": 2.2899999618530273}, {"spend": 16.350000381469727}, {"spend": 7.380000114440918}, {"spend": 10.470000267028809}, {"spend": 15.59000015258789}, {"spend": 11.0}, {"spend": 4.980000019073486}, {"spend": 7.210000038146973}, {"spend": 20.73000144958496}, {"spend": 31.209999084472656}, {"spend": 19.399999618530273}, {"spend": 11.170000076293945}, {"spend": 6.180000305175781}, {"spend": 3.0799999237060547}, {"spend": 3.380000114440918}, {"spend": 17.43000030517578}, {"spend": 22.229999542236328}, {"spend": 20.81999969482422}, {"spend": 6.059999942779541}, {"spend": 10.069999694824219}, {"spend": 39.28000259399414}, {"spend": 11.069999694824219}, {"spend": 10.170000076293945}, {"spend": 30.510000228881836}, {"spend": 6.980000019073486}, {"spend": 27.229999542236328}, {"spend": 42.12000274658203}, {"spend": 30.549999237060547}, {"spend": 2.7899999618530273}, {"spend": 6.760000228881836}, {"spend": 12.569999694824219}, {"spend": 12.449999809265137}, {"spend": 22.369998931884766}, {"spend": 16.53999900817871}, {"spend": 16.55000114440918}, {"spend": 19.14000129699707}, {"spend": 17.53999900817871}, {"spend": 26.029998779296875}, {"spend": 20.440000534057617}, {"spend": 10.010000228881836}, {"spend": 20.719999313354492}, {"spend": 22.0}, {"spend": 16.549999237060547}, {"spend": 10.84000015258789}, {"spend": 30.509998321533203}, {"spend": 2.690000057220459}, {"spend": 19.81999969482422}, {"spend": 10.559999465942383}, {"spend": 4.079999923706055}, {"spend": 16.25}, {"spend": 16.34000015258789}, {"spend": 32.480003356933594}, {"spend": 3.369999885559082}, {"spend": 17.149999618530273}, {"spend": 43.779998779296875}, {"spend": 5.970000267028809}, {"spend": 11.719999313354492}, {"spend": 39.8900032043457}, {"spend": 10.809999465942383}, {"spend": 13.649999618530273}, {"spend": 38.060001373291016}, {"spend": 9.149999618530273}, {"spend": 11.149999618530273}, {"spend": 7.78000020980835}, {"spend": 32.529998779296875}, {"spend": 20.030000686645508}, {"spend": 23.959999084472656}, {"spend": 6.460000038146973}, {"spend": 17.530000686645508}, {"spend": 8.069999694824219}, {"spend": 15.029999732971191}, {"spend": 5.579999923706055}, {"spend": 26.71000099182129}, {"spend": 10.449999809265137}, {"spend": 24.030000686645508}, {"spend": 10.470000267028809}, {"spend": 5.380000114440918}, {"spend": 3.2300000190734863}, {"spend": 8.489999771118164}, {"spend": 5.810000419616699}, {"spend": 2.490000009536743}, {"spend": 6.380000114440918}, {"spend": 4.380000114440918}, {"spend": 48.06000518798828}, {"spend": 29.610004425048828}, {"spend": 16.25}, {"spend": 7.949999809265137}, {"spend": 5.579999923706055}, {"spend": 54.09999465942383}, {"spend": 4.180000305175781}, {"spend": 29.820003509521484}, {"spend": 14.709999084472656}, {"spend": 10.729999542236328}, {"spend": 27.8799991607666}, {"spend": 25.6200008392334}, {"spend": 44.22999954223633}, {"spend": 16.469999313354492}, {"spend": 25.600000381469727}, {"spend": 29.479999542236328}, {"spend": 3.380000114440918}, {"spend": 47.5}, {"spend": 24.15999984741211}, {"spend": 45.189998626708984}, {"spend": 11.119999885559082}, {"spend": 10.210000038146973}, {"spend": 57.81999588012695}, {"spend": 9.229999542236328}, {"spend": 39.79000473022461}, {"spend": 13.960000038146973}, {"spend": 6.680000305175781}, {"spend": 6.079999923706055}, {"spend": 8.90999984741211}, {"spend": 36.46000289916992}, {"spend": 12.260000228881836}, {"spend": 9.269999504089355}, {"spend": 22.43000030517578}, {"spend": 1.7300000190734863}, {"spend": 28.329999923706055}, {"spend": 18.03999900817871}, {"spend": 22.84000015258789}, {"spend": 9.84000015258789}, {"spend": 14.559999465942383}, {"spend": 4.680000305175781}, {"spend": 1.7100000381469727}, {"spend": 2.990000009536743}, {"spend": 28.40999984741211}, {"spend": 7.480000019073486}, {"spend": 9.970000267028809}, {"spend": 14.380001068115234}, {"spend": 9.280000686645508}, {"spend": 4.680000305175781}, {"spend": 3.890000104904175}, {"spend": 18.790000915527344}, {"spend": 4.380000114440918}, {"spend": 29.700000762939453}, {"spend": 2.7899999618530273}, {"spend": 18.829999923706055}, {"spend": 6.980000019073486}, {"spend": 9.539999961853027}, {"spend": 31.749998092651367}, {"spend": 12.309999465942383}, {"spend": 12.029999732971191}, {"spend": 1.8899999856948853}, {"spend": 2.2899999618530273}, {"spend": 47.08000564575195}, {"spend": 8.269999504089355}, {"spend": 2.490000009536743}, {"spend": 10.170000076293945}, {"spend": 2.490000009536743}, {"spend": 13.779999732971191}, {"spend": 11.649999618530273}, {"spend": 63.91000747680664}, {"spend": 7.970000267028809}, {"spend": 3.690000057220459}, {"spend": 12.850000381469727}, {"spend": 4.980000019073486}, {"spend": 20.739999771118164}, {"spend": 3.490000009536743}, {"spend": 8.470000267028809}, {"spend": 10.140000343322754}, {"spend": 2.490000009536743}, {"spend": 6.779999732971191}, {"spend": 23.880002975463867}, {"spend": 12.069999694824219}, {"spend": 8.670000076293945}, {"spend": 62.660003662109375}, {"spend": 14.960000038146973}, {"spend": 33.470001220703125}, {"spend": 5.570000171661377}, {"spend": 15.260000228881836}, {"spend": 28.10999870300293}, {"spend": 12.029999732971191}, {"spend": 54.28999328613281}, {"spend": 22.530000686645508}, {"spend": 80.16000366210938}, {"spend": 7.180000305175781}, {"spend": 11.800000190734863}, {"spend": 3.630000114440918}, {"spend": 18.959999084472656}, {"spend": 22.73000144958496}, {"spend": 30.220003128051758}, {"spend": 16.350000381469727}, {"spend": 19.529998779296875}, {"spend": 46.92000198364258}, {"spend": 57.5200080871582}, {"spend": 6.96999979019165}, {"spend": 3.390000104904175}, {"spend": 3.390000104904175}, {"spend": 7.9800004959106445}, {"spend": 9.970000267028809}, {"spend": 13.769999504089355}, {"spend": 14.760000228881836}, {"spend": 8.269999504089355}, {"spend": 14.120000839233398}, {"spend": 23.93000030517578}, {"spend": 9.970000267028809}, {"spend": 6.760000228881836}, {"spend": 31.710002899169922}, {"spend": 25.920000076293945}, {"spend": 12.029999732971191}, {"spend": 13.630000114440918}, {"spend": 13.890000343322754}, {"spend": 37.81000518798828}, {"spend": 23.709999084472656}, {"spend": 11.549999237060547}, {"spend": 17.350000381469727}, {"spend": 14.060001373291016}, {"spend": 10.489999771118164}, {"spend": 18.440000534057617}, {"spend": 2.450000047683716}, {"spend": 13.460000038146973}, {"spend": 3.190000057220459}, {"spend": 6.460000038146973}, {"spend": 19.1200008392334}, {"spend": 5.380000114440918}, {"spend": 10.059999465942383}, {"spend": 10.170000076293945}, {"spend": 19.110000610351562}, {"spend": 15.550000190734863}, {"spend": 38.350006103515625}, {"spend": 22.029998779296875}, {"spend": 1.5299999713897705}, {"spend": 9.470000267028809}, {"spend": 4.980000019073486}, {"spend": 23.630001068115234}, {"spend": 27.389999389648438}, {"spend": 7.059999942779541}, {"spend": 2.6700000762939453}, {"spend": 16.850000381469727}, {"spend": 7.770000457763672}, {"spend": 21.329998016357422}, {"spend": 14.359999656677246}, {"spend": 3.190000057220459}, {"spend": 7.769999980926514}, {"spend": 9.539999961853027}, {"spend": 27.079999923706055}, {"spend": 31.119998931884766}, {"spend": 38.400001525878906}, {"spend": 20.34000015258789}, {"spend": 18.350000381469727}, {"spend": 19.340002059936523}, {"spend": 3.490000009536743}, {"spend": 2.490000009536743}, {"spend": 14.350000381469727}, {"spend": 32.74000549316406}, {"spend": 9.569999694824219}, {"spend": 1.8899999856948853}, {"spend": 14.960000038146973}, {"spend": 29.81999969482422}, {"spend": 2.6500000953674316}, {"spend": 41.27000427246094}, {"spend": 17.09000015258789}, {"spend": 3.190000057220459}, {"spend": 4.179999828338623}, {"spend": 11.079999923706055}, {"spend": 5.840000152587891}, {"spend": 11.639999389648438}, {"spend": 34.790000915527344}, {"spend": 5.279999732971191}, {"spend": 19.82000160217285}, {"spend": 11.069999694824219}, {"spend": 20.229999542236328}, {"spend": 6.779999732971191}, {"spend": 16.149999618530273}, {"spend": 5.659999847412109}, {"spend": 6.869999885559082}, {"spend": 20.439998626708984}, {"spend": 10.270000457763672}, {"spend": 19.880001068115234}, {"spend": 22.329999923706055}, {"spend": 5.269999980926514}, {"spend": 36.86000061035156}, {"spend": 6.78000020980835}, {"spend": 14.760000228881836}, {"spend": 16.81999969482422}, {"spend": 24.729999542236328}, {"spend": 43.79999923706055}, {"spend": 57.89000701904297}, {"spend": 10.170000076293945}, {"spend": 27.520000457763672}, {"spend": 6.579999923706055}, {"spend": 4.230000019073486}, {"spend": 2.6700000762939453}, {"spend": 5.310000419616699}, {"spend": 6.760000228881836}, {"spend": 3.890000104904175}, {"spend": 7.160000801086426}, {"spend": 10.470000267028809}, {"spend": 17.240001678466797}, {"spend": 16.34000015258789}, {"spend": 5.869999885559082}, {"spend": 3.380000114440918}, {"spend": 7.4599995613098145}, {"spend": 2.890000104904175}, {"spend": 8.770000457763672}, {"spend": 15.239999771118164}, {"spend": 5.720000267028809}, {"spend": 30.10999870300293}, {"spend": 13.519999504089355}, {"spend": 24.42999839782715}, {"spend": 5.599999904632568}, {"spend": 12.229999542236328}, {"spend": 16.03999900817871}, {"spend": 23.709999084472656}, {"spend": 5.869999885559082}, {"spend": 13.630000114440918}, {"spend": 9.75}, {"spend": 12.460000038146973}, {"spend": 10.069999694824219}, {"spend": 7.7699995040893555}, {"spend": 14.0600004196167}, {"spend": 9.729999542236328}, {"spend": 19.3799991607666}, {"spend": 45.56000518798828}, {"spend": 14.839999198913574}, {"spend": 6.920000076293945}, {"spend": 14.380001068115234}, {"spend": 14.729999542236328}, {"spend": 14.5}, {"spend": 20.15999984741211}, {"spend": 6.78000020980835}, {"spend": 16.649999618530273}, {"spend": 20.34000015258789}, {"spend": 10.220000267028809}, {"spend": 8.770000457763672}, {"spend": 6.680000305175781}, {"spend": 10.279999732971191}, {"spend": 4.390000343322754}, {"spend": 15.4399995803833}, {"spend": 2.890000104904175}, {"spend": 31.990001678466797}, {"spend": 7.769999980926514}, {"spend": 13.0600004196167}, {"spend": 17.25}, {"spend": 3.380000114440918}, {"spend": 3.430000066757202}, {"spend": 10.369999885559082}, {"spend": 33.150001525878906}, {"spend": 27.220001220703125}, {"spend": 7.170000076293945}, {"spend": 2.690000057220459}, {"spend": 9.950000762939453}, {"spend": 12.129999160766602}, {"spend": 7.479999542236328}, {"spend": 34.45000076293945}, {"spend": 10.470000267028809}, {"spend": 3.0799999237060547}, {"spend": 3.4200000762939453}, {"spend": 3.2300000190734863}, {"spend": 41.880001068115234}, {"spend": 22.459999084472656}, {"spend": 5.369999885559082}, {"spend": 9.219999313354492}, {"spend": 10.059999465942383}, {"spend": 17.06999969482422}, {"spend": 9.84000015258789}, {"spend": 45.18000411987305}, {"spend": 31.809999465942383}, {"spend": 20.94000244140625}, {"spend": 20.68000030517578}, {"spend": 2.990000009536743}, {"spend": 6.460000038146973}, {"spend": 11.960000038146973}, {"spend": 8.720000267028809}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>While this provides a good visualisation of the shape of the distribution, it can be difficult for most “consumers” of the plot to extract some additional information that may be of interest. For example, it is not easy to answer the question “What percentage of category buyers spent $30 or less in year 1?”.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>There appears to be quite a bit of variability in category spend. To get further insight into the distribution of total category spend across the panellists, we need to determine the total spend quantities associate with the various percentile levels.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [49]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">percentiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="c1"># np.percentile returns the k-th percentile of values in a range</span>
<span class="n">percentile_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">category_spend</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">percentiles</span><span class="p">)</span>

<span class="n">percentile_df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Percentile Level'</span><span class="p">:</span> <span class="n">percentiles</span><span class="p">,</span>
                              <span class="s1">'Percentile'</span><span class="p">:</span> <span class="n">percentile_values</span><span class="p">})</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">percentile_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Percentile Level'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Category Spend Percentile'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Percentile Level"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[49]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="kuzuhpadbf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#kuzuhpadbf table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#kuzuhpadbf thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#kuzuhpadbf p { margin: 0 !important; padding: 0 !important; }
 #kuzuhpadbf .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #kuzuhpadbf .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #kuzuhpadbf .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #kuzuhpadbf .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #kuzuhpadbf .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kuzuhpadbf .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kuzuhpadbf .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kuzuhpadbf .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #kuzuhpadbf .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #kuzuhpadbf .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #kuzuhpadbf .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #kuzuhpadbf .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #kuzuhpadbf .gt_spanner_row { border-bottom-style: hidden !important; }
 #kuzuhpadbf .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #kuzuhpadbf .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #kuzuhpadbf .gt_from_md> :first-child { margin-top: 0 !important; }
 #kuzuhpadbf .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #kuzuhpadbf .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #kuzuhpadbf .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #kuzuhpadbf .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #kuzuhpadbf .gt_row_group_first td { border-top-width: 2px !important; }
 #kuzuhpadbf .gt_row_group_first th { border-top-width: 2px !important; }
 #kuzuhpadbf .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #kuzuhpadbf .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kuzuhpadbf .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #kuzuhpadbf .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #kuzuhpadbf .gt_left { text-align: left !important; }
 #kuzuhpadbf .gt_center { text-align: center !important; }
 #kuzuhpadbf .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #kuzuhpadbf .gt_font_normal { font-weight: normal !important; }
 #kuzuhpadbf .gt_font_bold { font-weight: bold !important; }
 #kuzuhpadbf .gt_font_italic { font-style: italic !important; }
 #kuzuhpadbf .gt_super { font-size: 65% !important; }
 #kuzuhpadbf .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #kuzuhpadbf .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Category Spend Percentile</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Percentile Level" rowspan="1" scope="col">Percentile Level</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Percentile" rowspan="1" scope="col">Percentile</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ece6f2;">5</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f1f8;">2.69</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #d9cce6;">10</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f2eef6;">3.39</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #c6b2d9;">15</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ede7f3;">4.67</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #b299cc;">20</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e9e1f0;">5.88</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #9f80bf;">25</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e5ddee;">6.76</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #8c66b2;">30</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e2d8ec;">7.63</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #794ca6;">35</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dcd1e8;">9.07</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #663399;">40</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d9cce5;">10.06</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">45</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d5c7e3;">11.03</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">50</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #cfbfdf;">12.57</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">55</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #cab9dc;">13.73</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">60</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c5b1d8;">15.24</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">65</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #bfa9d4;">16.84</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">70</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b79fcf;">18.79</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">75</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b095ca;">20.74</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">80</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #a588c3;">23.43</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">85</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #9876ba;">26.88</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">90</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #855dae;">31.81</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">95</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #67349a;">39.72</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We see that 5% of the category buyers spent $2.69 or less in the category during the year, 10% spent $3.39 or less, and so on. The heaviest 5% of buyers each spent more than $39.72 in the category during the year.</p>
<p>Looking out this output, we conclude that a bin size of $5 is probably about right.</p>
<p>How many bins do we go with? This is an empirical question. Since 5% of the panel spent more than $39.72, we certainly want to go above $40 in order to get a sense of how they are spread between $39.72 and the maximum of $166.70. We will go with $50. If too many panellists have spent more than $50, we can always add more bins. If too few panellists fall into this bin, we can always combine the bins we have created.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Note</strong>: The distributions of many customer behaviours have a long right tail. Accommodating the range of values can make it difficult to get a clear sense of what is happening on the left side of the distribution. It can therefore be helpful to bin the data (as with a histogram) but to right censor the data, assigning all of the observations with a value of $𝑥$ or higher to an $𝑥 +$ bin</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We see that 750 panellists spent $5 or less in the category during year 1, 1073 spent between $5 and $10, . . . , and 109 spent more than $50.</p>
<p>We convert the raw counts into percentages and plot these percentages as a bar chart.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [50]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Create a custom bin list (with an overflow bin) to label categories</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">lb</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lb</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'∞'</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">category_spend</span><span class="p">,</span>
    <span class="n">column</span><span class="o">=</span><span class="s2">"spend"</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
    <span class="n">x_title</span><span class="o">=</span><span class="s2">"Category Spend ($)"</span><span class="p">,</span>
    <span class="n">y_title</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Households"</span><span class="p">,</span>
    <span class="n">chart_title</span><span class="o">=</span><span class="s2">"Category Spend Distribution (%)"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Distribution of category spend across category buyers"</span>
<span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-50b75e4b3e7b467a84af1ed64c6cc256.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-50b75e4b3e7b467a84af1ed64c6cc256.vega-embed details,
  #altair-viz-50b75e4b3e7b467a84af1ed64c6cc256.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-50b75e4b3e7b467a84af1ed64c6cc256"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-50b75e4b3e7b467a84af1ed64c6cc256") {
      outputDiv = document.getElementById("altair-viz-50b75e4b3e7b467a84af1ed64c6cc256");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-72aee947963ff09ad1facbd3f61dff7f"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"labelAngle": 0, "title": "Category Spend ($)"}, "field": "cut", "sort": ["-5 - 0", "0 - 5", "5 - 10", "10 - 15", "15 - 20", "20 - 25", "25 - 30", "30 - 35", "35 - 40", "40 - 45", "45 - 50", "50 - \u221e"], "type": "ordinal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Category Spend Distribution (%)", "subtitle": "Distribution of category spend across category buyers"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-72aee947963ff09ad1facbd3f61dff7f": [{"cut": "10 - 15", "Frequency": 882, "% of Total": 0.19282903366856144}, {"cut": "40 - 45", "Frequency": 68, "% of Total": 0.014866637516397028}, {"cut": "25 - 30", "Frequency": 256, "% of Total": 0.05596851770878881}, {"cut": "0 - 5", "Frequency": 750, "% of Total": 0.1639702667249672}, {"cut": "45 - 50", "Frequency": 48, "% of Total": 0.010494097070397902}, {"cut": "15 - 20", "Frequency": 623, "% of Total": 0.13620463489287277}, {"cut": "30 - 35", "Frequency": 192, "% of Total": 0.04197638828159161}, {"cut": "20 - 25", "Frequency": 450, "% of Total": 0.09838216003498032}, {"cut": "50 - \u221e", "Frequency": 109, "% of Total": 0.023830345430695236}, {"cut": "35 - 40", "Frequency": 123, "% of Total": 0.026891123742894624}, {"cut": "5 - 10", "Frequency": 1073, "% of Total": 0.2345867949278531}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The general shape of this distribution (i.e., an interior mode, median less than the mean, right-skewed with a long right-tail) is what we typically observe when we look at spend data.</p>
<p>This, of course, depends on the bin width we choose when summarising the data. If we had chosen a bin width of $10, the left-most bar would be the highest bar and we would no longer observe an interior mode.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Distribution-of-Brand-Spend">Distribution of Brand Spend<a class="anchor-link" href="#Distribution-of-Brand-Spend">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let us now create the distribution of spend on Alpha. We will follow the same basic process as for the distribution of category spend with a few minor changes.</p>
<p>Note that there are a number of 0 or NaN values in the Alpha spend column. While these panellists purchased in the category during the year, they did not purchase any of Alpha’s SKUs. The first thing we need to do is remove these observations.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [51]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alpha_spend</span> <span class="o">=</span> <span class="n">spend_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span>

<span class="n">alpha_spend</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[51]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 2)</small><table border="1" class="dataframe"><thead><tr><th>statistic</th><th>spend</th></tr><tr><td>str</td><td>f64</td></tr></thead><tbody><tr><td>"count"</td><td>2624.0</td></tr><tr><td>"null_count"</td><td>0.0</td></tr><tr><td>"mean"</td><td>12.793803</td></tr><tr><td>"std"</td><td>11.715616</td></tr><tr><td>"min"</td><td>1.57</td></tr><tr><td>"25%"</td><td>3.69</td></tr><tr><td>"50%"</td><td>9.67</td></tr><tr><td>"75%"</td><td>17.130001</td></tr><tr><td>"max"</td><td>105.899971</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [52]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">percentiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">percentile_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">alpha_spend</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">percentiles</span><span class="p">)</span>

<span class="n">percentile_df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Percentile Level'</span><span class="p">:</span> <span class="n">percentiles</span><span class="p">,</span>
                              <span class="s1">'Percentile'</span><span class="p">:</span> <span class="n">percentile_values</span><span class="p">})</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">percentile_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Percentile Level'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Alpha Spend Percentile'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Percentile Level"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[52]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="yycpuoawdm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#yycpuoawdm table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#yycpuoawdm thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#yycpuoawdm p { margin: 0 !important; padding: 0 !important; }
 #yycpuoawdm .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #yycpuoawdm .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #yycpuoawdm .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #yycpuoawdm .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #yycpuoawdm .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #yycpuoawdm .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #yycpuoawdm .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #yycpuoawdm .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #yycpuoawdm .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #yycpuoawdm .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #yycpuoawdm .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #yycpuoawdm .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #yycpuoawdm .gt_spanner_row { border-bottom-style: hidden !important; }
 #yycpuoawdm .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #yycpuoawdm .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #yycpuoawdm .gt_from_md> :first-child { margin-top: 0 !important; }
 #yycpuoawdm .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #yycpuoawdm .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #yycpuoawdm .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #yycpuoawdm .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #yycpuoawdm .gt_row_group_first td { border-top-width: 2px !important; }
 #yycpuoawdm .gt_row_group_first th { border-top-width: 2px !important; }
 #yycpuoawdm .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #yycpuoawdm .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #yycpuoawdm .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #yycpuoawdm .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #yycpuoawdm .gt_left { text-align: left !important; }
 #yycpuoawdm .gt_center { text-align: center !important; }
 #yycpuoawdm .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #yycpuoawdm .gt_font_normal { font-weight: normal !important; }
 #yycpuoawdm .gt_font_bold { font-weight: bold !important; }
 #yycpuoawdm .gt_font_italic { font-style: italic !important; }
 #yycpuoawdm .gt_super { font-size: 65% !important; }
 #yycpuoawdm .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #yycpuoawdm .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Alpha Spend Percentile</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Percentile Level" rowspan="1" scope="col">Percentile Level</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Percentile" rowspan="1" scope="col">Percentile</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ece6f2;">5</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f2f9;">2.45</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #d9cce6;">10</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f1f8;">2.79</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #c6b2d9;">15</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f2eef6;">3.38</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #b299cc;">20</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f2edf6;">3.49</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #9f80bf;">25</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1ecf6;">3.69</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #8c66b2;">30</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #eae3f1;">5.48</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #794ca6;">35</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e6ddee;">6.58</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #663399;">40</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e5dced;">6.88</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">45</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e2d8eb;">7.67</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">50</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dacee6;">9.67</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">55</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d8cbe5;">10.27</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">60</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d4c6e2;">11.26</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">65</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbadd;">13.46</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">70</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c6b3d9;">14.86</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">75</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #bda8d3;">17.13</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">80</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b299cc;">20.04</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">85</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #a789c4;">23.14</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">90</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #9572b9;">27.62</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">95</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #774aa5;">35.49</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Having looked at some basic descriptive stats (as above), we will summarise the data using bins of width $2, right-censoring at $40.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [53]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">lb</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lb</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'∞'</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">alpha_spend</span><span class="p">,</span>
    <span class="n">column</span><span class="o">=</span><span class="s2">"spend"</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
    <span class="n">x_title</span><span class="o">=</span><span class="s2">"Brand Spend ($)"</span><span class="p">,</span>
    <span class="n">y_title</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Households"</span><span class="p">,</span>
    <span class="n">chart_title</span><span class="o">=</span><span class="s2">"Alpha Spend Distribution (%)"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Distribution of spend on Alpha across brand buyers"</span><span class="p">,</span>
    <span class="n">label_angle</span><span class="o">=-</span><span class="mi">45</span>
<span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-1f22d404098d486b8b9e86c2da6262e9.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-1f22d404098d486b8b9e86c2da6262e9.vega-embed details,
  #altair-viz-1f22d404098d486b8b9e86c2da6262e9.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-1f22d404098d486b8b9e86c2da6262e9"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-1f22d404098d486b8b9e86c2da6262e9") {
      outputDiv = document.getElementById("altair-viz-1f22d404098d486b8b9e86c2da6262e9");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-9f9e32e80f2be3d19c8629ca2451f2c6"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"labelAngle": -45, "title": "Brand Spend ($)"}, "field": "cut", "sort": ["-2 - 0", "0 - 2", "2 - 4", "4 - 6", "6 - 8", "8 - 10", "10 - 12", "12 - 14", "14 - 16", "16 - 18", "18 - 20", "20 - 22", "22 - 24", "24 - 26", "26 - 28", "28 - 30", "30 - 32", "32 - 34", "34 - 36", "36 - 38", "38 - 40", "40 - \u221e"], "type": "ordinal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Alpha Spend Distribution (%)", "subtitle": "Distribution of spend on Alpha across brand buyers"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-9f9e32e80f2be3d19c8629ca2451f2c6": [{"cut": "34 - 36", "Frequency": 18, "% of Total": 0.006859756097560976}, {"cut": "28 - 30", "Frequency": 27, "% of Total": 0.010289634146341464}, {"cut": "10 - 12", "Frequency": 236, "% of Total": 0.0899390243902439}, {"cut": "4 - 6", "Frequency": 148, "% of Total": 0.056402439024390245}, {"cut": "22 - 24", "Frequency": 82, "% of Total": 0.03125}, {"cut": "16 - 18", "Frequency": 141, "% of Total": 0.053734756097560975}, {"cut": "40 - \u221e", "Frequency": 89, "% of Total": 0.03391768292682927}, {"cut": "18 - 20", "Frequency": 72, "% of Total": 0.027439024390243903}, {"cut": "0 - 2", "Frequency": 61, "% of Total": 0.023246951219512195}, {"cut": "30 - 32", "Frequency": 49, "% of Total": 0.018673780487804877}, {"cut": "36 - 38", "Frequency": 23, "% of Total": 0.008765243902439025}, {"cut": "12 - 14", "Frequency": 199, "% of Total": 0.07583841463414634}, {"cut": "6 - 8", "Frequency": 363, "% of Total": 0.13833841463414634}, {"cut": "24 - 26", "Frequency": 48, "% of Total": 0.01829268292682927}, {"cut": "8 - 10", "Frequency": 154, "% of Total": 0.058689024390243906}, {"cut": "20 - 22", "Frequency": 102, "% of Total": 0.038871951219512195}, {"cut": "32 - 34", "Frequency": 30, "% of Total": 0.011432926829268292}, {"cut": "2 - 4", "Frequency": 633, "% of Total": 0.24123475609756098}, {"cut": "38 - 40", "Frequency": 18, "% of Total": 0.006859756097560976}, {"cut": "14 - 16", "Frequency": 88, "% of Total": 0.03353658536585366}, {"cut": "26 - 28", "Frequency": 43, "% of Total": 0.01638719512195122}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The general observation made earlier about category spend distribution about the shape of the distribution of spend holds. It is not so smooth, but this is a function of the smaller bins sizes. There is, however, one obvious aberration—the large spike for $2–$4. What is going on here? The average price of most Alpha SKUs is between $2 and $4. (Review average SKU prices of Alpha) We recall from Alpha's distribution of purchase frequency plot that 48% of the panel made zero purchases of Alpha and 15% made one transaction. This implies that 0.15/(1 − 0.48) = 29% of Alpha buyers made just one purchase of the brand. Assuming they only purchased only one unit of one Alpha SKU on that purchase occasion, we would expect a large number of Alpha buyers to spend between $2 and $4; 24% is not unrealistic.</p>
<p>How would you determine the validity of the assumption that the buyers who purchased Alpha just once mostly bought only one unit of Alpha SKU on that purchase occasion?</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Analyzing-Alpha's-One-Time-Buyers-in-Year-1">Analyzing Alpha's One-Time Buyers in Year 1<a class="anchor-link" href="#Analyzing-Alpha's-One-Time-Buyers-in-Year-1">¶</a></h5>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [54]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># One-Time Alpha Buyers</span>
<span class="n">one_time_alpha_buyers</span> <span class="o">=</span> <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span><span class="n">grocery_lf</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="n">one_time_alpha_buyers</span>

<span class="c1"># Alpha buyers who spent between $2 to $4</span>
<span class="n">spend_range_alpha_buyers</span> <span class="o">=</span> <span class="n">spend_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">one_time_alpha_buyers</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">contains</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">spend_range_alpha_buyers</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">))</span>
<span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'contains'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'There were </span><span class="si">{</span><span class="n">one_time_alpha_buyers</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="si">}</span><span class="s1"> one-time buyers of Alpha brand in Year 1.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">res</span><span class="si">}</span><span class="s1"> of those one-time Alpha buyers spent between [$2, $4).'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Given that there are </span><span class="si">{</span><span class="n">spend_range_alpha_buyers</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'spend'</span><span class="p">)</span><span class="si">}</span><span class="s1"> Alpha buyers in total who spent between $2-$4,'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'the </span><span class="si">{</span><span class="n">res</span><span class="si">}</span><span class="s1"> one-time buyers represent </span><span class="si">{</span><span class="n">res</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">spend_range_alpha_buyers</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'spend'</span><span class="p">)</span><span class="si">:</span><span class="s1">.0%</span><span class="si">}</span><span class="s1"> of the Alpha buyers in that spend range.'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>There were 733 one-time buyers of Alpha brand in Year 1.
623 of those one-time Alpha buyers spent between [$2, $4).
Given that there are 633 Alpha buyers in total who spent between $2-$4,
the 623 one-time buyers represent 98% of the Alpha buyers in that spend range.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Validate</strong>:</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [55]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">spend_range_alpha_buyers</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">one_time_alpha_buyers</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">))</span>
<span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[55]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>1937.230224609375</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [56]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">grocery_lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">52</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">spend_range_alpha_buyers</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)))</span> <span class="o">&amp;</span>  <span class="c1"># Assuming panel_id is the relevant column</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">one_time_alpha_buyers</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)))</span> <span class="o">&amp;</span>  <span class="c1"># Same assumption</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[56]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>1937.2298583984375</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Distribution-of-Volume-Purchase">Distribution of Volume Purchase<a class="anchor-link" href="#Distribution-of-Volume-Purchase">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Distribution-of-Category-Volume-Purchase-Frequency">Distribution of Category Volume Purchase Frequency<a class="anchor-link" href="#Distribution-of-Category-Volume-Purchase-Frequency">¶</a></h5>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [57]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">category_vol</span> <span class="o">=</span> <span class="n">vol_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span>

<span class="n">category_vol</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[57]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 2)</small><table border="1" class="dataframe"><thead><tr><th>statistic</th><th>volume</th></tr><tr><td>str</td><td>f64</td></tr></thead><tbody><tr><td>"count"</td><td>4574.0</td></tr><tr><td>"null_count"</td><td>0.0</td></tr><tr><td>"mean"</td><td>4.544163</td></tr><tr><td>"std"</td><td>3.884697</td></tr><tr><td>"min"</td><td>0.25</td></tr><tr><td>"25%"</td><td>2.0</td></tr><tr><td>"50%"</td><td>3.5</td></tr><tr><td>"75%"</td><td>6.0</td></tr><tr><td>"max"</td><td>67.0</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [58]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">percentiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span> 
    <span class="n">percentile_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">category_vol</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">percentiles</span><span class="p">)</span>

<span class="n">percentile_df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Percentile Level'</span><span class="p">:</span> <span class="n">percentiles</span><span class="p">,</span>
                              <span class="s1">'Percentile'</span><span class="p">:</span> <span class="n">percentile_values</span><span class="p">})</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">percentile_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Percentile Level'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Category Volume Percentile'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Percentile Level"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[58]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="hsgwvueymx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#hsgwvueymx table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#hsgwvueymx thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#hsgwvueymx p { margin: 0 !important; padding: 0 !important; }
 #hsgwvueymx .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #hsgwvueymx .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #hsgwvueymx .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #hsgwvueymx .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #hsgwvueymx .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #hsgwvueymx .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #hsgwvueymx .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #hsgwvueymx .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #hsgwvueymx .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #hsgwvueymx .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #hsgwvueymx .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #hsgwvueymx .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #hsgwvueymx .gt_spanner_row { border-bottom-style: hidden !important; }
 #hsgwvueymx .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #hsgwvueymx .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #hsgwvueymx .gt_from_md> :first-child { margin-top: 0 !important; }
 #hsgwvueymx .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #hsgwvueymx .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #hsgwvueymx .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #hsgwvueymx .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #hsgwvueymx .gt_row_group_first td { border-top-width: 2px !important; }
 #hsgwvueymx .gt_row_group_first th { border-top-width: 2px !important; }
 #hsgwvueymx .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #hsgwvueymx .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #hsgwvueymx .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #hsgwvueymx .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #hsgwvueymx .gt_left { text-align: left !important; }
 #hsgwvueymx .gt_center { text-align: center !important; }
 #hsgwvueymx .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #hsgwvueymx .gt_font_normal { font-weight: normal !important; }
 #hsgwvueymx .gt_font_bold { font-weight: bold !important; }
 #hsgwvueymx .gt_font_italic { font-style: italic !important; }
 #hsgwvueymx .gt_super { font-size: 65% !important; }
 #hsgwvueymx .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #hsgwvueymx .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Category Volume Percentile</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Percentile Level" rowspan="1" scope="col">Percentile Level</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Percentile" rowspan="1" scope="col">Percentile</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ccbbdd;">5</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f4f9;">0.83</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #9977bb;">10</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f1f8;">1.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #663399;">15</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f1f8;">1.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">20</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f0ebf5;">1.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">25</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f1;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">30</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f1;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">35</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e6ddee;">2.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">40</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e0d6eb;">3.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">45</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e0d6eb;">3.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">50</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dbcfe7;">3.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">55</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d6c9e4;">4.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">60</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d2c4e1;">4.38</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">65</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbbdd;">5.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">70</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c7b4da;">5.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">75</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c2add6;">6.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">80</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b8a0cf;">7.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">85</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ad92c9;">8.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">90</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #a385c2;">9.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">95</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #855cad;">12.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [59]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">lb</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lb</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'∞'</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">category_vol</span><span class="p">,</span>
    <span class="n">column</span><span class="o">=</span><span class="s2">"volume"</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
    <span class="n">x_title</span><span class="o">=</span><span class="s2">"Category Volume Purchase ($)"</span><span class="p">,</span>
    <span class="n">y_title</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Households"</span><span class="p">,</span>
    <span class="n">chart_title</span><span class="o">=</span><span class="s2">"Category Volume Purchase Distribution (%)"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Distribution of category volume purchases across category buyers"</span>
<span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-2b9476694fb94888a4833e45d2dff9dc.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-2b9476694fb94888a4833e45d2dff9dc.vega-embed details,
  #altair-viz-2b9476694fb94888a4833e45d2dff9dc.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-2b9476694fb94888a4833e45d2dff9dc"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2b9476694fb94888a4833e45d2dff9dc") {
      outputDiv = document.getElementById("altair-viz-2b9476694fb94888a4833e45d2dff9dc");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-91b5f2d6c0de7d068ad1abc65f65b607"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"labelAngle": 0, "title": "Category Volume Purchase ($)"}, "field": "cut", "sort": ["-1 - 0", "0 - 1", "1 - 2", "2 - 3", "3 - 4", "4 - 5", "5 - 6", "6 - 7", "7 - 8", "8 - 9", "9 - 10", "10 - 11", "11 - 12", "12 - \u221e"], "type": "ordinal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Category Volume Purchase Distribution (%)", "subtitle": "Distribution of category volume purchases across category buyers"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-91b5f2d6c0de7d068ad1abc65f65b607": [{"cut": "8 - 9", "Frequency": 169, "% of Total": 0.03694796676869261}, {"cut": "5 - 6", "Frequency": 405, "% of Total": 0.08854394403148229}, {"cut": "2 - 3", "Frequency": 701, "% of Total": 0.15325754263226934}, {"cut": "11 - 12", "Frequency": 78, "% of Total": 0.017052907739396588}, {"cut": "3 - 4", "Frequency": 673, "% of Total": 0.1471359860078706}, {"cut": "0 - 1", "Frequency": 240, "% of Total": 0.052470485351989504}, {"cut": "9 - 10", "Frequency": 128, "% of Total": 0.027984258854394404}, {"cut": "12 - \u221e", "Frequency": 237, "% of Total": 0.05181460428508964}, {"cut": "6 - 7", "Frequency": 333, "% of Total": 0.07280279842588544}, {"cut": "4 - 5", "Frequency": 498, "% of Total": 0.10887625710537822}, {"cut": "1 - 2", "Frequency": 765, "% of Total": 0.16724967205946656}, {"cut": "10 - 11", "Frequency": 94, "% of Total": 0.02055094009619589}, {"cut": "7 - 8", "Frequency": 253, "% of Total": 0.055312636641888936}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Distribution-of-Brand-Volume-Purchase-Frequency">Distribution of Brand Volume Purchase Frequency<a class="anchor-link" href="#Distribution-of-Brand-Volume-Purchase-Frequency">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Note that there are a number of 0 or NaN values in the Alpha volume purchase column. These panaellists (like the brand spend section) purchased in the category during the year, but they did not purchase any of Alpha's products. Let us remove observations of <code>panel_ids</code> that have not at least made 1 purchase from Alpha brand during the year.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [60]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alpha_vol</span> <span class="o">=</span> <span class="n">vol_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span>

<span class="n">alpha_vol</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[60]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (9, 2)</small><table border="1" class="dataframe"><thead><tr><th>statistic</th><th>volume</th></tr><tr><td>str</td><td>f64</td></tr></thead><tbody><tr><td>"count"</td><td>2624.0</td></tr><tr><td>"null_count"</td><td>0.0</td></tr><tr><td>"mean"</td><td>3.493236</td></tr><tr><td>"std"</td><td>3.350901</td></tr><tr><td>"min"</td><td>0.25</td></tr><tr><td>"25%"</td><td>1.0</td></tr><tr><td>"50%"</td><td>2.5</td></tr><tr><td>"75%"</td><td>5.0</td></tr><tr><td>"max"</td><td>27.55</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [61]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">percentiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span> 
    <span class="n">percentile_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">alpha_vol</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">percentiles</span><span class="p">)</span>

<span class="n">percentile_df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Percentile Level'</span><span class="p">:</span> <span class="n">percentiles</span><span class="p">,</span>
                              <span class="s1">'Percentile'</span><span class="p">:</span> <span class="n">percentile_values</span><span class="p">})</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">percentile_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Percentile Level'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Alpha Volume Percentile'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Percentile Level"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>  
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[61]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="kmbesxnquy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#kmbesxnquy table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#kmbesxnquy thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#kmbesxnquy p { margin: 0 !important; padding: 0 !important; }
 #kmbesxnquy .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #kmbesxnquy .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #kmbesxnquy .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #kmbesxnquy .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #kmbesxnquy .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kmbesxnquy .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kmbesxnquy .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kmbesxnquy .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #kmbesxnquy .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #kmbesxnquy .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #kmbesxnquy .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #kmbesxnquy .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #kmbesxnquy .gt_spanner_row { border-bottom-style: hidden !important; }
 #kmbesxnquy .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #kmbesxnquy .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #kmbesxnquy .gt_from_md> :first-child { margin-top: 0 !important; }
 #kmbesxnquy .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #kmbesxnquy .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #kmbesxnquy .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #kmbesxnquy .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #kmbesxnquy .gt_row_group_first td { border-top-width: 2px !important; }
 #kmbesxnquy .gt_row_group_first th { border-top-width: 2px !important; }
 #kmbesxnquy .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #kmbesxnquy .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kmbesxnquy .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #kmbesxnquy .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #kmbesxnquy .gt_left { text-align: left !important; }
 #kmbesxnquy .gt_center { text-align: center !important; }
 #kmbesxnquy .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #kmbesxnquy .gt_font_normal { font-weight: normal !important; }
 #kmbesxnquy .gt_font_bold { font-weight: bold !important; }
 #kmbesxnquy .gt_font_italic { font-style: italic !important; }
 #kmbesxnquy .gt_super { font-size: 65% !important; }
 #kmbesxnquy .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #kmbesxnquy .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">Alpha Volume Percentile</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Percentile Level" rowspan="1" scope="col">Percentile Level</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Percentile" rowspan="1" scope="col">Percentile</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ccbbdd;">5</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf8fc;">0.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #9977bb;">10</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf8fc;">0.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #663399;">15</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f1f8;">1.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">20</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f1f8;">1.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">25</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f1f8;">1.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">30</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f0f8;">1.10</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">35</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #efeaf4;">1.55</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">40</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f1;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">45</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f1;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">50</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e6ddee;">2.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">55</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e0d6eb;">3.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">60</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e0d6eb;">3.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">65</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dbcfe7;">3.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">70</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d6c9e4;">4.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">75</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbbdd;">5.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">80</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c7b4da;">5.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">85</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #bea9d4;">6.35</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">90</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ad92c9;">8.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">95</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #9977bb;">10.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [62]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">lb</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lb</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'∞'</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">freq_dist_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">alpha_vol</span><span class="p">,</span>
    <span class="n">column</span><span class="o">=</span><span class="s2">"volume"</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
    <span class="n">x_title</span><span class="o">=</span><span class="s2">"Brand Volume Purchase ($)"</span><span class="p">,</span>
    <span class="n">y_title</span><span class="o">=</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Households"</span><span class="p">,</span>
    <span class="n">chart_title</span><span class="o">=</span><span class="s2">"Alpha Brand Volume Purchase Distribution (%)"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Distribution of Alpha volume purchases across brand buyers"</span>
<span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-364c36b2be634c68ad7f489c81b7b557.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-364c36b2be634c68ad7f489c81b7b557.vega-embed details,
  #altair-viz-364c36b2be634c68ad7f489c81b7b557.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-364c36b2be634c68ad7f489c81b7b557"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-364c36b2be634c68ad7f489c81b7b557") {
      outputDiv = document.getElementById("altair-viz-364c36b2be634c68ad7f489c81b7b557");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-f86f794a56d7307d439e7cfd469c89fe"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"labelAngle": 0, "title": "Brand Volume Purchase ($)"}, "field": "cut", "sort": ["-1 - 0", "0 - 1", "1 - 2", "2 - 3", "3 - 4", "4 - 5", "5 - 6", "6 - 7", "7 - 8", "8 - 9", "9 - \u221e"], "type": "ordinal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Alpha Brand Volume Purchase Distribution (%)", "subtitle": "Distribution of Alpha volume purchases across brand buyers"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-f86f794a56d7307d439e7cfd469c89fe": [{"cut": "5 - 6", "Frequency": 181, "% of Total": 0.06897865853658537}, {"cut": "2 - 3", "Frequency": 450, "% of Total": 0.1714939024390244}, {"cut": "8 - 9", "Frequency": 74, "% of Total": 0.028201219512195123}, {"cut": "6 - 7", "Frequency": 133, "% of Total": 0.0506859756097561}, {"cut": "3 - 4", "Frequency": 337, "% of Total": 0.1284298780487805}, {"cut": "9 - \u221e", "Frequency": 197, "% of Total": 0.07507621951219512}, {"cut": "0 - 1", "Frequency": 324, "% of Total": 0.12347560975609756}, {"cut": "1 - 2", "Frequency": 622, "% of Total": 0.23704268292682928}, {"cut": "4 - 5", "Frequency": 214, "% of Total": 0.08155487804878049}, {"cut": "7 - 8", "Frequency": 92, "% of Total": 0.0350609756097561}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Garbage-Collect">Garbage Collect<a class="anchor-link" href="#Garbage-Collect">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [63]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'grocery_lf'</span><span class="p">,</span> <span class="s1">'sku_lf'</span><span class="p">,</span> <span class="s1">'kiwi_lf'</span><span class="p">,</span> <span class="s1">'In'</span><span class="p">,</span> <span class="s1">'exceptions'</span><span class="p">,</span> <span class="s1">'active_variables'</span><span class="p">,</span>
              <span class="s1">'penetration'</span><span class="p">,</span> <span class="s1">'ppb'</span><span class="p">,</span> <span class="s1">'panel_size'</span><span class="p">]</span>

<span class="n">active_variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">var</span> <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)</span>   <span class="c1"># Exclude variables that start with "_"</span>
    <span class="ow">and</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exceptions</span>    <span class="c1"># Exclude variables in the exceptions list</span>
    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">LayerChart</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>  <span class="c1"># Remove these types only</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">active_variables</span><span class="p">:</span>
    <span class="k">del</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">var</span><span class="p">]</span>
<span class="k">del</span> <span class="n">active_variables</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">,</span> <span class="n">var</span>

<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[63]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>267</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Performing-a-Basic-Decile-Analysis">Performing a Basic Decile Analysis<a class="anchor-link" href="#Performing-a-Basic-Decile-Analysis">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We have observed that there is a lot of variability in purchase frequency and spend, be it at the product or category level. A useful way of expressing the variability is via a decile analysis. As the name suggests, this sees us <strong>dividing the customer base into 10 equally sized groups and then summarising each group’s buying behaviour</strong>. We will consider two versions of this analysis.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Decile-analysis-of-category-buying-behaviour---Decile-based-on-category-buyers">Decile analysis of category buying behaviour - Decile based on category buyers<a class="anchor-link" href="#Decile-analysis-of-category-buying-behaviour---Decile-based-on-category-buyers">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We will first focus on creating the table below. The table captures the decile analysis of category buying behaviour (where each decile equals 10% category buyers). Recall that 4574 households made at least one category purchase in year 1. Having <strong>sorted these households by total category spend</strong>, we create <strong>10 equally sized groups</strong>. Decile 1 is the 10% of households that spent the most in the category during year 1, decile 2 is the next largest 10% of spenders, and so on.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [64]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Create decile cuts in the group_spend data using the sorted and ranked data</span>

<span class="c1"># Part 1: Break-tie ranking of total category spend data</span>
<span class="c1"># Part 2: Decile cuts in ranking</span>
<span class="n">buyer_decile</span> <span class="o">=</span> <span class="n">spend_summary</span><span class="p">(</span>
    <span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'ordinal'</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'rank'</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'rank'</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'rank'</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'rank'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="n">buyer_decile</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[64]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (4_574, 4)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>spend</th><th>rank</th><th>decile</th></tr><tr><td>u32</td><td>f32</td><td>u32</td><td>u16</td></tr></thead><tbody><tr><td>3111594</td><td>166.699936</td><td>1</td><td>1</td></tr><tr><td>3119170</td><td>108.829994</td><td>2</td><td>1</td></tr><tr><td>3125418</td><td>102.87001</td><td>3</td><td>1</td></tr><tr><td>3110132</td><td>100.630013</td><td>4</td><td>1</td></tr><tr><td>3109647</td><td>97.37999</td><td>5</td><td>1</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>3128086</td><td>1.49</td><td>4570</td><td>10</td></tr><tr><td>3112878</td><td>1.39</td><td>4571</td><td>10</td></tr><tr><td>3120986</td><td>1.33</td><td>4572</td><td>10</td></tr><tr><td>3104765</td><td>1.29</td><td>4573</td><td>10</td></tr><tr><td>3125737</td><td>1.27</td><td>4574</td><td>10</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [65]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Helper functions</span>
<span class="k">def</span> <span class="nf">calculate_percentage</span><span class="p">(</span><span class="n">series</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">series</span> <span class="o">/</span> <span class="n">series</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">group_aggregate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">group_col</span><span class="p">,</span> <span class="n">agg_col</span><span class="p">,</span> <span class="n">agg_expr</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">group_col</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg_expr</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">agg_col</span><span class="p">)))</span>

<span class="c1"># Decile table creation</span>
<span class="n">decile_tab</span> <span class="o">=</span> <span class="n">buyer_decile</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">"decile"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">"decile"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">"decile"</span><span class="p">:</span> <span class="s2">"Decile"</span><span class="p">})</span>

<span class="c1"># Populate decile statistics</span>
<span class="c1"># Decile counts and % HH</span>
<span class="n">decile_counts</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">buyer_decile</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'panel_id'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">calculate_percentage</span><span class="p">(</span><span class="n">decile_counts</span><span class="p">[</span><span class="s1">'panel_id'</span><span class="p">]))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% HH'</span><span class="p">))</span> 

<span class="c1"># % Spend</span>
<span class="n">decile_spend</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">buyer_decile</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'spend'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">calculate_percentage</span><span class="p">(</span><span class="n">decile_spend</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">]))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Spend'</span><span class="p">))</span> 

<span class="c1"># % Transactions</span>
<span class="n">group_trans</span> <span class="o">=</span> <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
    <span class="n">other</span><span class="o">=</span><span class="n">buyer_decile</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()),</span>
    <span class="n">on</span><span class="o">=</span><span class="s1">'panel_id'</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span>
<span class="n">decile_trans</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">group_trans</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'# of Purchases'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">calculate_percentage</span><span class="p">(</span><span class="n">decile_trans</span><span class="p">[</span><span class="s1">'# of Purchases'</span><span class="p">]))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Trans'</span><span class="p">))</span> 

<span class="c1"># Spend/HH, Cat Trans/HH, Avg Spend/Trans (AOV)</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">decile_spend</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">]</span> <span class="o">/</span> <span class="n">decile_counts</span><span class="p">[</span><span class="s1">'panel_id'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Spend/HH'</span><span class="p">))</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">decile_trans</span><span class="p">[</span><span class="s1">'# of Purchases'</span><span class="p">]</span> <span class="o">/</span> <span class="n">decile_counts</span><span class="p">[</span><span class="s1">'panel_id'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Cat Trans/HH'</span><span class="p">))</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">decile_spend</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">]</span> <span class="o">/</span> <span class="n">decile_trans</span><span class="p">[</span><span class="s1">'# of Purchases'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Avg Spend/Trans'</span><span class="p">))</span>

<span class="c1"># Unique Brands Purchased</span>
<span class="n">unique_brands</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">group_trans</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'Brands Purchased'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="n">decile_tab</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">unique_brands</span><span class="p">[</span><span class="s1">'Brands Purchased'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'# Unique Brands'</span><span class="p">))</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">decile_tab</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Decile'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Decile Analysis of Category Buying Behavior'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span> <span class="s1">'Each decile equals 10</span><span class="si">% o</span><span class="s1">f category buyers'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Decile"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'% HH'</span><span class="p">,</span> <span class="s1">'% Spend'</span><span class="p">,</span> <span class="s1">'% Trans'</span><span class="p">],</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Cat Trans/HH'</span><span class="p">,</span> <span class="s1">'# Unique Brands'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_currency</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Spend/HH'</span><span class="p">,</span><span class="s1">'Avg Spend/Trans'</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[65]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="wvineiloig" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#wvineiloig table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#wvineiloig thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#wvineiloig p { margin: 0 !important; padding: 0 !important; }
 #wvineiloig .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #wvineiloig .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #wvineiloig .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #wvineiloig .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #wvineiloig .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #wvineiloig .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #wvineiloig .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #wvineiloig .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #wvineiloig .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #wvineiloig .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #wvineiloig .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #wvineiloig .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #wvineiloig .gt_spanner_row { border-bottom-style: hidden !important; }
 #wvineiloig .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #wvineiloig .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #wvineiloig .gt_from_md> :first-child { margin-top: 0 !important; }
 #wvineiloig .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #wvineiloig .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #wvineiloig .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #wvineiloig .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #wvineiloig .gt_row_group_first td { border-top-width: 2px !important; }
 #wvineiloig .gt_row_group_first th { border-top-width: 2px !important; }
 #wvineiloig .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #wvineiloig .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #wvineiloig .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #wvineiloig .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #wvineiloig .gt_left { text-align: left !important; }
 #wvineiloig .gt_center { text-align: center !important; }
 #wvineiloig .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #wvineiloig .gt_font_normal { font-weight: normal !important; }
 #wvineiloig .gt_font_bold { font-weight: bold !important; }
 #wvineiloig .gt_font_italic { font-style: italic !important; }
 #wvineiloig .gt_super { font-size: 65% !important; }
 #wvineiloig .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #wvineiloig .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="8">Decile Analysis of Category Buying Behavior</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="8">Each decile equals 10% of category buyers</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Decile" rowspan="1" scope="col">Decile</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% HH" rowspan="1" scope="col">% HH</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Spend" rowspan="1" scope="col">% Spend</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Trans" rowspan="1" scope="col">% Trans</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Spend/HH" rowspan="1" scope="col">Spend/HH</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Cat Trans/HH" rowspan="1" scope="col">Cat Trans/HH</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Avg Spend/Trans" rowspan="1" scope="col">Avg Spend/Trans</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="# Unique Brands" rowspan="1" scope="col"># Unique Brands</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">1</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">28.4%</td>
<td class="gt_row gt_right">24.3%</td>
<td class="gt_row gt_right">$44.65</td>
<td class="gt_row gt_right">10.62</td>
<td class="gt_row gt_right">$4.21</td>
<td class="gt_row gt_right">1.85</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">2</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">17.2%</td>
<td class="gt_row gt_right">16.3%</td>
<td class="gt_row gt_right">$27.15</td>
<td class="gt_row gt_right">7.14</td>
<td class="gt_row gt_right">$3.80</td>
<td class="gt_row gt_right">1.64</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">3</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">13.3%</td>
<td class="gt_row gt_right">13.5%</td>
<td class="gt_row gt_right">$20.96</td>
<td class="gt_row gt_right">5.88</td>
<td class="gt_row gt_right">$3.56</td>
<td class="gt_row gt_right">1.58</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">4</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">10.7%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">$16.91</td>
<td class="gt_row gt_right">4.87</td>
<td class="gt_row gt_right">$3.47</td>
<td class="gt_row gt_right">1.54</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">5</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">8.8%</td>
<td class="gt_row gt_right">9.5%</td>
<td class="gt_row gt_right">$13.81</td>
<td class="gt_row gt_right">4.15</td>
<td class="gt_row gt_right">$3.33</td>
<td class="gt_row gt_right">1.50</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">6</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">7.8%</td>
<td class="gt_row gt_right">$11.14</td>
<td class="gt_row gt_right">3.41</td>
<td class="gt_row gt_right">$3.27</td>
<td class="gt_row gt_right">1.41</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">7</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">5.7%</td>
<td class="gt_row gt_right">6.7%</td>
<td class="gt_row gt_right">$8.98</td>
<td class="gt_row gt_right">2.94</td>
<td class="gt_row gt_right">$3.05</td>
<td class="gt_row gt_right">1.37</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">8</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">4.3%</td>
<td class="gt_row gt_right">4.9%</td>
<td class="gt_row gt_right">$6.74</td>
<td class="gt_row gt_right">2.13</td>
<td class="gt_row gt_right">$3.16</td>
<td class="gt_row gt_right">1.22</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">9</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">2.9%</td>
<td class="gt_row gt_right">3.7%</td>
<td class="gt_row gt_right">$4.56</td>
<td class="gt_row gt_right">1.62</td>
<td class="gt_row gt_right">$2.82</td>
<td class="gt_row gt_right">1.21</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">10</th>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">1.7%</td>
<td class="gt_row gt_right">2.3%</td>
<td class="gt_row gt_right">$2.70</td>
<td class="gt_row gt_right">1.02</td>
<td class="gt_row gt_right">$2.65</td>
<td class="gt_row gt_right">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Reading across the row associated with Decile 1, we see that they accounted for 28% of category spend and 24% of total transactions. On average, they spent $44.65 in the category across an average of 10.6 purchase occasions. This corresponds to an average category spend per category transaction of $4.21. On average, these households purchased 1.8 different
brands during the year. Contrast this to the 10% of category buyers that spent the least in the category. They account for 2% of category spend and transactions, making on average one category purchase. And so on.</p>
<p>This is a very basic decile table. Some additional information that could be reported includes the <em>average number of units purchased per transaction</em> and the <em>average number of unique SKUs purchased in the year</em>.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Decile-analysis-of-category-buying-behaviour---Decile-based-on-category-spend/revenue">Decile analysis of category buying behaviour - Decile based on category spend/revenue<a class="anchor-link" href="#Decile-analysis-of-category-buying-behaviour---Decile-based-on-category-spend/revenue">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The decile analysis we have just completed uses deciles that represent 10% of the category buyers. An alternative approach is to create deciles that represent <strong>10% of category spend</strong>. In other words, the decile analysis took the entire customer base that purchased the category in year 1 and split the base into ten equal group. In this analysis, we will take the total customer spend or total revenue and split that revenue into ten equal groups. The only change to what we have done above is how we create the decile variable.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [66]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Divide the total revenue into 10 equal parts and generate the decile bins</span>
<span class="n">spend_total</span> <span class="o">=</span> <span class="n">spend_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">to_series</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">breaks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">spend_total</span><span class="p">,</span> <span class="n">spend_total</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>

<span class="n">spend_decile</span> <span class="o">=</span> <span class="n">spend_summary</span><span class="p">(</span>
    <span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
    <span class="s1">'spend'</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'cum sum'</span><span class="p">)</span> <span class="c1"># Create a cumulative sum column for category spend (category revenue)</span>
<span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'cum sum'</span><span class="p">)</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span> <span class="c1"># Cut function determines the decile range for each cumulative sum value</span>
        <span class="n">breaks</span><span class="o">=</span><span class="n">breaks</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">labels</span> <span class="c1"># Function also adds the decile label from 1 to 10</span>
    <span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="n">spend_decile</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[66]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (4_574, 4)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>spend</th><th>cum sum</th><th>decile</th></tr><tr><td>u32</td><td>f32</td><td>f32</td><td>u16</td></tr></thead><tbody><tr><td>3111594</td><td>166.699936</td><td>166.699936</td><td>1</td></tr><tr><td>3119170</td><td>108.829994</td><td>275.529938</td><td>1</td></tr><tr><td>3125418</td><td>102.87001</td><td>378.399963</td><td>1</td></tr><tr><td>3110132</td><td>100.630013</td><td>479.029968</td><td>1</td></tr><tr><td>3109647</td><td>97.37999</td><td>576.409973</td><td>1</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>3128086</td><td>1.49</td><td>72096.984375</td><td>10</td></tr><tr><td>3112878</td><td>1.39</td><td>72098.375</td><td>10</td></tr><tr><td>3120986</td><td>1.33</td><td>72099.703125</td><td>10</td></tr><tr><td>3104765</td><td>1.29</td><td>72100.992188</td><td>10</td></tr><tr><td>3125737</td><td>1.27</td><td>72102.265625</td><td>10</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [67]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Helper functions</span>
<span class="k">def</span> <span class="nf">calculate_percentage</span><span class="p">(</span><span class="n">series</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">series</span> <span class="o">/</span> <span class="n">series</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">group_aggregate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">group_col</span><span class="p">,</span> <span class="n">agg_col</span><span class="p">,</span> <span class="n">agg_expr</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">group_col</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg_expr</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">agg_col</span><span class="p">)))</span>

<span class="c1"># Decile table creation</span>
<span class="n">decile_tab_spend</span> <span class="o">=</span> <span class="n">spend_decile</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">"decile"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">"decile"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">"decile"</span><span class="p">:</span> <span class="s2">"Decile"</span><span class="p">})</span>

<span class="c1"># Populate decile statistics</span>
<span class="c1"># Decile counts and % HH</span>
<span class="n">decile_counts</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">spend_decile</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'panel_id'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">calculate_percentage</span><span class="p">(</span><span class="n">decile_counts</span><span class="p">[</span><span class="s1">'panel_id'</span><span class="p">]))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% HH'</span><span class="p">))</span> 

<span class="c1"># % Spend</span>
<span class="n">decile_spend</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">spend_decile</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'spend'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">calculate_percentage</span><span class="p">(</span><span class="n">decile_spend</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">]))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Spend'</span><span class="p">))</span> 

<span class="c1"># % Transactions</span>
<span class="n">group_trans</span> <span class="o">=</span> <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
    <span class="n">other</span><span class="o">=</span><span class="n">spend_decile</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()),</span>
    <span class="n">on</span><span class="o">=</span><span class="s1">'panel_id'</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'decile'</span><span class="p">)</span>
<span class="n">decile_trans</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">group_trans</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'# of Purchases'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">calculate_percentage</span><span class="p">(</span><span class="n">decile_trans</span><span class="p">[</span><span class="s1">'# of Purchases'</span><span class="p">]))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Trans'</span><span class="p">))</span> 

<span class="c1"># Spend/HH, Cat Trans/HH, Avg Spend/Trans (AOV)</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">decile_spend</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">]</span> <span class="o">/</span> <span class="n">decile_counts</span><span class="p">[</span><span class="s1">'panel_id'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Spend/HH'</span><span class="p">))</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">decile_trans</span><span class="p">[</span><span class="s1">'# of Purchases'</span><span class="p">]</span> <span class="o">/</span> <span class="n">decile_counts</span><span class="p">[</span><span class="s1">'panel_id'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Cat Trans/HH'</span><span class="p">))</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">decile_spend</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">]</span> <span class="o">/</span> <span class="n">decile_trans</span><span class="p">[</span><span class="s1">'# of Purchases'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Avg Spend/Trans'</span><span class="p">))</span>

<span class="c1"># Unique Brands Purchased</span>
<span class="n">unique_brands</span> <span class="o">=</span> <span class="n">group_aggregate</span><span class="p">(</span><span class="n">group_trans</span><span class="p">,</span> <span class="s1">'decile'</span><span class="p">,</span> <span class="s1">'Brands Purchased'</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Expr</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="n">decile_tab_spend</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">unique_brands</span><span class="p">[</span><span class="s1">'Brands Purchased'</span><span class="p">])</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'# Unique Brands'</span><span class="p">))</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">decile_tab_spend</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Decile'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Decile Analysis of Category Buying Behavior'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span> <span class="s1">'Each decile equals 10</span><span class="si">% o</span><span class="s1">f category spend/revenue'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Decile"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'% HH'</span><span class="p">,</span> <span class="s1">'% Spend'</span><span class="p">,</span> <span class="s1">'% Trans'</span><span class="p">],</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Cat Trans/HH'</span><span class="p">,</span> <span class="s1">'# Unique Brands'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_currency</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Spend/HH'</span><span class="p">,</span><span class="s1">'Avg Spend/Trans'</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[67]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="okstbtdjpp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#okstbtdjpp table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#okstbtdjpp thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#okstbtdjpp p { margin: 0 !important; padding: 0 !important; }
 #okstbtdjpp .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #okstbtdjpp .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #okstbtdjpp .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #okstbtdjpp .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #okstbtdjpp .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #okstbtdjpp .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #okstbtdjpp .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #okstbtdjpp .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #okstbtdjpp .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #okstbtdjpp .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #okstbtdjpp .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #okstbtdjpp .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #okstbtdjpp .gt_spanner_row { border-bottom-style: hidden !important; }
 #okstbtdjpp .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #okstbtdjpp .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #okstbtdjpp .gt_from_md> :first-child { margin-top: 0 !important; }
 #okstbtdjpp .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #okstbtdjpp .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #okstbtdjpp .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #okstbtdjpp .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #okstbtdjpp .gt_row_group_first td { border-top-width: 2px !important; }
 #okstbtdjpp .gt_row_group_first th { border-top-width: 2px !important; }
 #okstbtdjpp .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #okstbtdjpp .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #okstbtdjpp .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #okstbtdjpp .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #okstbtdjpp .gt_left { text-align: left !important; }
 #okstbtdjpp .gt_center { text-align: center !important; }
 #okstbtdjpp .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #okstbtdjpp .gt_font_normal { font-weight: normal !important; }
 #okstbtdjpp .gt_font_bold { font-weight: bold !important; }
 #okstbtdjpp .gt_font_italic { font-style: italic !important; }
 #okstbtdjpp .gt_super { font-size: 65% !important; }
 #okstbtdjpp .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #okstbtdjpp .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="8">Decile Analysis of Category Buying Behavior</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="8">Each decile equals 10% of category spend/revenue</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Decile" rowspan="1" scope="col">Decile</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% HH" rowspan="1" scope="col">% HH</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Spend" rowspan="1" scope="col">% Spend</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Trans" rowspan="1" scope="col">% Trans</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Spend/HH" rowspan="1" scope="col">Spend/HH</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Cat Trans/HH" rowspan="1" scope="col">Cat Trans/HH</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Avg Spend/Trans" rowspan="1" scope="col">Avg Spend/Trans</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="# Unique Brands" rowspan="1" scope="col"># Unique Brands</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">1</th>
<td class="gt_row gt_right">2.5%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">7.6%</td>
<td class="gt_row gt_right">$63.77</td>
<td class="gt_row gt_right">13.44</td>
<td class="gt_row gt_right">$4.74</td>
<td class="gt_row gt_right">1.92</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">2</th>
<td class="gt_row gt_right">3.7%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">8.9%</td>
<td class="gt_row gt_right">$42.33</td>
<td class="gt_row gt_right">10.50</td>
<td class="gt_row gt_right">$4.03</td>
<td class="gt_row gt_right">1.82</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">3</th>
<td class="gt_row gt_right">4.6%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">9.2%</td>
<td class="gt_row gt_right">$33.97</td>
<td class="gt_row gt_right">8.73</td>
<td class="gt_row gt_right">$3.89</td>
<td class="gt_row gt_right">1.78</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">4</th>
<td class="gt_row gt_right">5.6%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">9.4%</td>
<td class="gt_row gt_right">$28.21</td>
<td class="gt_row gt_right">7.36</td>
<td class="gt_row gt_right">$3.83</td>
<td class="gt_row gt_right">1.63</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">5</th>
<td class="gt_row gt_right">6.6%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">9.9%</td>
<td class="gt_row gt_right">$23.69</td>
<td class="gt_row gt_right">6.50</td>
<td class="gt_row gt_right">$3.65</td>
<td class="gt_row gt_right">1.65</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">6</th>
<td class="gt_row gt_right">7.9%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">10.2%</td>
<td class="gt_row gt_right">$20.01</td>
<td class="gt_row gt_right">5.66</td>
<td class="gt_row gt_right">$3.53</td>
<td class="gt_row gt_right">1.57</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">7</th>
<td class="gt_row gt_right">9.5%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">10.4%</td>
<td class="gt_row gt_right">$16.66</td>
<td class="gt_row gt_right">4.80</td>
<td class="gt_row gt_right">$3.47</td>
<td class="gt_row gt_right">1.54</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">8</th>
<td class="gt_row gt_right">11.7%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">10.9%</td>
<td class="gt_row gt_right">$13.49</td>
<td class="gt_row gt_right">4.08</td>
<td class="gt_row gt_right">$3.31</td>
<td class="gt_row gt_right">1.48</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">9</th>
<td class="gt_row gt_right">15.7%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">11.2%</td>
<td class="gt_row gt_right">$10.06</td>
<td class="gt_row gt_right">3.14</td>
<td class="gt_row gt_right">$3.21</td>
<td class="gt_row gt_right">1.39</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">10</th>
<td class="gt_row gt_right">32.2%</td>
<td class="gt_row gt_right">10.0%</td>
<td class="gt_row gt_right">12.3%</td>
<td class="gt_row gt_right">$4.89</td>
<td class="gt_row gt_right">1.67</td>
<td class="gt_row gt_right">$2.93</td>
<td class="gt_row gt_right">1.16</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Reading across the row associated with Decile 1, we see that the top 2% of households accounted for 10% of category spend. On average, they spent $63.77 in the category, across an average of 13.4 purchase occasions. This corresponds to an average category spend per category transaction of $4.74. On average, these households purchased 1.9 different brands during the year.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Lorenz-Curves">Lorenz Curves<a class="anchor-link" href="#Lorenz-Curves">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Lorenz-Curves---Transactions/Purchasing---Discrete">Lorenz Curves - Transactions/Purchasing - Discrete<a class="anchor-link" href="#Lorenz-Curves---Transactions/Purchasing---Discrete">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>A Lorenz curve is a common graphical tool for visualising “concentration” or “inequality” in the distribution of a quantity of interest (e.g., income, buying behaviour). It show the proportion of the overall quantity (e.g., number of transactions, spend) associated with the bottom x% of the unit of observation associated with the distribution (e.g., households). When analysing buyer behaviour, this sees us lining up all customers in ascending order of their level of purchasing and computing the share of total purchasing
accounted by each person. The Lorenz curve is created by plotting the cumulative percentage of customers (x-axis) against the cumulative percentage of total purchasing (y-axis).</p>
<p>The Lorenz curve for transactions associated with Alpha is computed and plotted below and interpreted in the following manner. We see that that x = 80% roughly corresponds to y = 54%, which means the 80% of the buyers of Alpha (when sorted from least to most frequent buyers) account for 54% of all the buying of Alpha in year 1. This implies the top 20% of buyers (in terms of purchase frequency) account for 46% of total purchases. The “rule” of 80/20 does not hold here; rather, it is 46/20.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [68]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># We are only interested in those panellists that made at least one purchase of Alpha in year 1.</span>
<span class="c1"># Alpha Brand Transaction Distribution of Transactions Greater Than 0</span>
<span class="n">alpha_trans_dist</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="c1"># Frequency of the Grouped Transaction Count</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="c1"># Add a '% of Buyers' column</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">/</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">))</span>
    <span class="c1"># Cumulative % of Buyers</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">))</span>
    <span class="c1"># Total number of transactions made by those customers who made one purchase of Alpha</span>
    <span class="c1"># Total Transactions = frequency x # of transactions</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Frequency'</span><span class="p">)</span><span class="o">*</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Total Transactions'</span><span class="p">))</span>
    <span class="c1"># Add a '% of Transactions' column</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Total Transactions'</span><span class="p">)</span><span class="o">/</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Total Transactions'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Transactions'</span><span class="p">))</span>
    <span class="c1"># Cumulative % of Transactions</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'% Transactions'</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Cum % Transactions'</span><span class="p">))</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">alpha_trans_dist</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Alpha Buyers &amp; Transaction Distribution'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span> <span class="s1">'Lorenz Curve Table'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">,</span> <span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">,</span> <span class="s1">'% Transactions'</span><span class="p">,</span> <span class="s1">'Cum % Transactions'</span><span class="p">],</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Frequency'</span><span class="p">,</span> <span class="s1">'Total Transactions'</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[68]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="ibapfmctyi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#ibapfmctyi table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#ibapfmctyi thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#ibapfmctyi p { margin: 0 !important; padding: 0 !important; }
 #ibapfmctyi .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #ibapfmctyi .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #ibapfmctyi .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #ibapfmctyi .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #ibapfmctyi .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #ibapfmctyi .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #ibapfmctyi .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #ibapfmctyi .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #ibapfmctyi .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #ibapfmctyi .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #ibapfmctyi .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #ibapfmctyi .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #ibapfmctyi .gt_spanner_row { border-bottom-style: hidden !important; }
 #ibapfmctyi .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #ibapfmctyi .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #ibapfmctyi .gt_from_md> :first-child { margin-top: 0 !important; }
 #ibapfmctyi .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #ibapfmctyi .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #ibapfmctyi .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #ibapfmctyi .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #ibapfmctyi .gt_row_group_first td { border-top-width: 2px !important; }
 #ibapfmctyi .gt_row_group_first th { border-top-width: 2px !important; }
 #ibapfmctyi .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #ibapfmctyi .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #ibapfmctyi .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #ibapfmctyi .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #ibapfmctyi .gt_left { text-align: left !important; }
 #ibapfmctyi .gt_center { text-align: center !important; }
 #ibapfmctyi .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #ibapfmctyi .gt_font_normal { font-weight: normal !important; }
 #ibapfmctyi .gt_font_bold { font-weight: bold !important; }
 #ibapfmctyi .gt_font_italic { font-style: italic !important; }
 #ibapfmctyi .gt_super { font-size: 65% !important; }
 #ibapfmctyi .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #ibapfmctyi .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="7">Alpha Buyers &amp; Transaction Distribution</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="7">Lorenz Curve Table</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="# of Purchases" rowspan="1" scope="col"># of Purchases</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Frequency" rowspan="1" scope="col">Frequency</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% of Buyers" rowspan="1" scope="col">% of Buyers</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Cum % of Buyers" rowspan="1" scope="col">Cum % of Buyers</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Total Transactions" rowspan="1" scope="col">Total Transactions</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Transactions" rowspan="1" scope="col">% Transactions</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Cum % Transactions" rowspan="1" scope="col">Cum % Transactions</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">1</th>
<td class="gt_row gt_center">733</td>
<td class="gt_row gt_right">27.9%</td>
<td class="gt_row gt_right">27.9%</td>
<td class="gt_row gt_center">733</td>
<td class="gt_row gt_right">8.1%</td>
<td class="gt_row gt_right">8.1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">2</th>
<td class="gt_row gt_center">517</td>
<td class="gt_row gt_right">19.7%</td>
<td class="gt_row gt_right">47.6%</td>
<td class="gt_row gt_center">1,034</td>
<td class="gt_row gt_right">11.4%</td>
<td class="gt_row gt_right">19.5%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">3</th>
<td class="gt_row gt_center">400</td>
<td class="gt_row gt_right">15.2%</td>
<td class="gt_row gt_right">62.9%</td>
<td class="gt_row gt_center">1,200</td>
<td class="gt_row gt_right">13.2%</td>
<td class="gt_row gt_right">32.7%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">4</th>
<td class="gt_row gt_center">277</td>
<td class="gt_row gt_right">10.6%</td>
<td class="gt_row gt_right">73.4%</td>
<td class="gt_row gt_center">1,108</td>
<td class="gt_row gt_right">12.2%</td>
<td class="gt_row gt_right">45.0%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">5</th>
<td class="gt_row gt_center">227</td>
<td class="gt_row gt_right">8.7%</td>
<td class="gt_row gt_right">82.1%</td>
<td class="gt_row gt_center">1,135</td>
<td class="gt_row gt_right">12.5%</td>
<td class="gt_row gt_right">57.5%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">6</th>
<td class="gt_row gt_center">144</td>
<td class="gt_row gt_right">5.5%</td>
<td class="gt_row gt_right">87.6%</td>
<td class="gt_row gt_center">864</td>
<td class="gt_row gt_right">9.5%</td>
<td class="gt_row gt_right">67.0%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">7</th>
<td class="gt_row gt_center">101</td>
<td class="gt_row gt_right">3.8%</td>
<td class="gt_row gt_right">91.4%</td>
<td class="gt_row gt_center">707</td>
<td class="gt_row gt_right">7.8%</td>
<td class="gt_row gt_right">74.8%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">8</th>
<td class="gt_row gt_center">71</td>
<td class="gt_row gt_right">2.7%</td>
<td class="gt_row gt_right">94.1%</td>
<td class="gt_row gt_center">568</td>
<td class="gt_row gt_right">6.3%</td>
<td class="gt_row gt_right">81.1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">9</th>
<td class="gt_row gt_center">47</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">95.9%</td>
<td class="gt_row gt_center">423</td>
<td class="gt_row gt_right">4.7%</td>
<td class="gt_row gt_right">85.8%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">10</th>
<td class="gt_row gt_center">28</td>
<td class="gt_row gt_right">1.1%</td>
<td class="gt_row gt_right">97.0%</td>
<td class="gt_row gt_center">280</td>
<td class="gt_row gt_right">3.1%</td>
<td class="gt_row gt_right">88.9%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">11</th>
<td class="gt_row gt_center">24</td>
<td class="gt_row gt_right">0.9%</td>
<td class="gt_row gt_right">97.9%</td>
<td class="gt_row gt_center">264</td>
<td class="gt_row gt_right">2.9%</td>
<td class="gt_row gt_right">91.8%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">12</th>
<td class="gt_row gt_center">16</td>
<td class="gt_row gt_right">0.6%</td>
<td class="gt_row gt_right">98.5%</td>
<td class="gt_row gt_center">192</td>
<td class="gt_row gt_right">2.1%</td>
<td class="gt_row gt_right">93.9%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">13</th>
<td class="gt_row gt_center">16</td>
<td class="gt_row gt_right">0.6%</td>
<td class="gt_row gt_right">99.1%</td>
<td class="gt_row gt_center">208</td>
<td class="gt_row gt_right">2.3%</td>
<td class="gt_row gt_right">96.2%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">14</th>
<td class="gt_row gt_center">12</td>
<td class="gt_row gt_right">0.5%</td>
<td class="gt_row gt_right">99.6%</td>
<td class="gt_row gt_center">168</td>
<td class="gt_row gt_right">1.9%</td>
<td class="gt_row gt_right">98.1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">15</th>
<td class="gt_row gt_center">6</td>
<td class="gt_row gt_right">0.2%</td>
<td class="gt_row gt_right">99.8%</td>
<td class="gt_row gt_center">90</td>
<td class="gt_row gt_right">1.0%</td>
<td class="gt_row gt_right">99.1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">16</th>
<td class="gt_row gt_center">3</td>
<td class="gt_row gt_right">0.1%</td>
<td class="gt_row gt_right">99.9%</td>
<td class="gt_row gt_center">48</td>
<td class="gt_row gt_right">0.5%</td>
<td class="gt_row gt_right">99.6%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">18</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_center">18</td>
<td class="gt_row gt_right">0.2%</td>
<td class="gt_row gt_right">99.8%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">20</th>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_center">20</td>
<td class="gt_row gt_right">0.2%</td>
<td class="gt_row gt_right">100.0%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>We are only interested in those panellists that made at least one purchase of Alpha in year 1.</li>
<li>We compute the total number of transactions made by those customers who made one purchase of Alpha: this is obviously the number of transactions times the frequency of the transactions. We see that the 517 households that purchased Alpha twice made a total of 1034 transactions.</li>
<li>What percentage of the total number of buyers of Alpha are the 733 households that made one purchase? The 517 households that made two purchases? What percentage of total purchasing is the 733 purchases made by those households that made one purchase? The 1034 purchases by made by those households that made two purchases? We first compute the total number of Alpha buyers and the total amount of purchasing by this group, and then compute the associated percentages. We see that <strong>28% of Alpha buyers made just one purchase and their purchasing accounted for 8% of all Alpha purchasing</strong>. Similarly, we see that <strong>20% of buyers made two purchases and their purchasing accounted for 11% of all Alpha purchasing</strong>.</li>
<li>We compute the cumulative percentage of both <code>% of buyers</code> and <code>% of transactions</code> quantities We see, for example, that 48% of all buyers made two or fewer purchases and accounted for 20% of all the purchases of Alpha.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [69]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">zero_row</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
    <span class="s1">'Cum % Transactions'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">alpha_lorenz_plot</span> <span class="o">=</span> <span class="n">alpha_trans_dist</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers'</span> <span class="p">,</span><span class="s1">'Cum % Transactions'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="n">alpha_lorenz_plot_zero</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">zero_row</span><span class="p">,</span> <span class="n">alpha_lorenz_plot</span><span class="p">])</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">alpha_lorenz_plot_zero</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers:Q'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Cumulative % Alpha Buyers'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">'.0%'</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">'Cum % Transactions:Q'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Cumulative % Alpha Transactions'</span><span class="p">,</span> 
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">'.0%'</span><span class="p">),</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])),</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Lorenz Curve for Alpha Transactions"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">550</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">450</span>
<span class="p">)</span>

<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-6e0d8a29210f4d1580cba9b856326b22.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-6e0d8a29210f4d1580cba9b856326b22.vega-embed details,
  #altair-viz-6e0d8a29210f4d1580cba9b856326b22.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-6e0d8a29210f4d1580cba9b856326b22"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6e0d8a29210f4d1580cba9b856326b22") {
      outputDiv = document.getElementById("altair-viz-6e0d8a29210f4d1580cba9b856326b22");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-023f641d19dce535e61c513219cdd457"}, "mark": {"type": "line"}, "encoding": {"x": {"axis": {"format": ".0%"}, "field": "Cum % of Buyers", "title": "Cumulative % Alpha Buyers", "type": "quantitative"}, "y": {"axis": {"format": ".0%"}, "field": "Cum % Transactions", "scale": {"domain": [0, 1]}, "title": "Cumulative % Alpha Transactions", "type": "quantitative"}}, "height": 450, "title": "Lorenz Curve for Alpha Transactions", "width": 550, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-023f641d19dce535e61c513219cdd457": [{"Cum % of Buyers": 0.0, "Cum % Transactions": 0.0}, {"Cum % of Buyers": 0.27934451219512196, "Cum % Transactions": 0.08090507726269315}, {"Cum % of Buyers": 0.4763719512195122, "Cum % Transactions": 0.19503311258278144}, {"Cum % of Buyers": 0.6288109756097561, "Cum % Transactions": 0.32748344370860927}, {"Cum % of Buyers": 0.734375, "Cum % Transactions": 0.44977924944812364}, {"Cum % of Buyers": 0.8208841463414634, "Cum % Transactions": 0.5750551876379691}, {"Cum % of Buyers": 0.8757621951219513, "Cum % Transactions": 0.6704194260485652}, {"Cum % of Buyers": 0.9142530487804879, "Cum % Transactions": 0.7484547461368654}, {"Cum % of Buyers": 0.9413109756097562, "Cum % Transactions": 0.8111479028697572}, {"Cum % of Buyers": 0.9592225609756099, "Cum % Transactions": 0.8578366445916116}, {"Cum % of Buyers": 0.9698932926829269, "Cum % Transactions": 0.8887417218543048}, {"Cum % of Buyers": 0.9790396341463415, "Cum % Transactions": 0.9178807947019869}, {"Cum % of Buyers": 0.9851371951219513, "Cum % Transactions": 0.9390728476821194}, {"Cum % of Buyers": 0.9912347560975611, "Cum % Transactions": 0.9620309050772629}, {"Cum % of Buyers": 0.9958079268292683, "Cum % Transactions": 0.9805739514348788}, {"Cum % of Buyers": 0.998094512195122, "Cum % Transactions": 0.9905077262693159}, {"Cum % of Buyers": 0.9992378048780488, "Cum % Transactions": 0.995805739514349}, {"Cum % of Buyers": 0.9996189024390244, "Cum % Transactions": 0.9977924944812364}, {"Cum % of Buyers": 1.0, "Cum % Transactions": 1.0000000000000002}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>As noted above, we see that x = 80% roughly corresponds to y = 54%. We can compute the exact number by interpolation (linear) in the following manner:
$$\frac{y-y_{0}}{x-x_{0}}=\frac{y_{1}-y_{0}}{x_{1}-x_{0}}$$
$$(y-y_{0})=\frac{(y_{1}-y_{0})}{(x_{1}-x_{0})}(x-x_{0})$$</p>
<div style="max-width:200px;margin-left: auto; margin-right: auto;">
<img alt="No description has been provided for this image" src="references/linear_interp1.png" width="200"/>
</div>
<div style="max-width:200px;margin-left: auto; margin-right: auto;">
<img alt="No description has been provided for this image" src="references/linear_interp.png" width="200"/>
</div>
<ul>
<li>We see that 73.4% ($x_{0}$) of buyers accounted for 45.0% ($y_{0}$) of purchases, and that 82.1% ($x_{1}$) of buyers accounted for 57.5% ($y_{1}$) of purchases. Therefore, when $x$ = 80%, $y$ can be solved in the following way:</li>
<li>$$0.45 + (0.8 - 0.734)\frac{(0.575 - 0.45)}{(0.821 - 0.734)} = 0.5448$$</li>
<li>we see that 80% falls 76% of the way between 73.4% and 82.1%. Therefore, the associated percentage of total purchases will lie 76% of the way between 45.0% and 57.5%.</li>
<li>As the “bottom” 80% account for 54% of total purchasing, it follows that the “top” 20% account for 46% of total purchasing.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [70]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Numpy linear interpolation function simplifies the computation, return the interpolated y value</span>
<span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">xp</span><span class="o">=</span><span class="n">alpha_lorenz_plot</span><span class="p">[</span><span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">],</span> <span class="n">fp</span><span class="o">=</span><span class="n">alpha_lorenz_plot</span><span class="p">[</span><span class="s1">'Cum % Transactions'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[70]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>0.5448123620309051</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>A related quantity of interest is the percentage of buyers that account for half of total purchasing. This can be read off the Lorenz curve in the following manner.</p>
<ul>
<li>We see that 73.4% of purchasers account for 45.0% of total purchases, and that 82.1% of purchasers account for 57.5% of total purchases.</li>
<li>We can apply the same linear interpolation function but instead of solving for the $y$, we solve for $x$.</li>
<li>$$(x-x_{0})=\frac{(x_{1}-x_{0})}{(y_{1}-y_{0})}(y-y_{0})$$</li>
<li>$$\frac{(0.821-0.734)}{(0.575-0.45)}(0.5-0.45) + 0.734 = 0.769$$</li>
<li>We see that 50% lies 40% of the way between 44.0% and 57.5%. Therefore, the associated percentage of purchasers lies 40% of the way between 73.4% and 82.1%, we see this is 76.9%.</li>
<li>As the “bottom” 77% of buyers account for half of total purchasing, it follows that the “top” 23% also account for half of total purchasing, which we can write as 50/23. This quantity is easy for most people grasp.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [71]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Reversing the axis returns the interpolated x value</span>
<span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">xp</span><span class="o">=</span><span class="n">alpha_lorenz_plot</span><span class="p">[</span><span class="s1">'Cum % Transactions'</span><span class="p">],</span> <span class="n">fp</span><span class="o">=</span><span class="n">alpha_lorenz_plot</span><span class="p">[</span><span class="s1">'Cum </span><span class="si">% o</span><span class="s1">f Buyers'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[71]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>0.7690548780487805</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Lorenz-Curves---Spend---Continuous">Lorenz Curves - Spend - Continuous<a class="anchor-link" href="#Lorenz-Curves---Spend---Continuous">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Purchase frequency is a discrete quantity and we created the Lorenz curve off the distribution of transactions. We now consider how to create a Lorenz curve when the quantity of interest is continuous. We will focus on creating the Lorenz curve for the spend associated with Alpha.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [72]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alpha_spend_dist</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">spend_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Sort Alpha customer from lowest to highest</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">),</span> <span class="n">descending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Compute spend as a % of total Alpha brand spend in year 1</span>
    <span class="c1"># percentage of total Alpha purchasing accounted for by each panellist</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">/</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Spend'</span><span class="p">))</span>
    <span class="c1"># Compute the cumulative percentage of spend numbers</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'% Spend'</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">())</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Cum % Spend'</span><span class="p">))</span>
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="c1"># Compute the cumulative percentage of buyers number</span>
<span class="n">spend_count</span> <span class="o">=</span> <span class="n">alpha_spend_dist</span><span class="o">.</span><span class="n">height</span>
<span class="n">alpha_spend_dist</span> <span class="o">=</span> <span class="n">alpha_spend_dist</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">spend_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">spend_count</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Cum % Cust'</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">alpha_spend_dist</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[72]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (2_624, 5)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>spend</th><th>% Spend</th><th>Cum % Spend</th><th>Cum % Cust</th></tr><tr><td>u32</td><td>f32</td><td>f32</td><td>f64</td><td>f64</td></tr></thead><tbody><tr><td>3126803</td><td>1.57</td><td>0.000047</td><td>0.000047</td><td>0.000381</td></tr><tr><td>3126681</td><td>1.57</td><td>0.000047</td><td>0.000094</td><td>0.000762</td></tr><tr><td>3117751</td><td>1.57</td><td>0.000047</td><td>0.00014</td><td>0.001143</td></tr><tr><td>3124392</td><td>1.57</td><td>0.000047</td><td>0.000187</td><td>0.001524</td></tr><tr><td>3126471</td><td>1.57</td><td>0.000047</td><td>0.000234</td><td>0.001905</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>3105099</td><td>80.5</td><td>0.002398</td><td>0.988765</td><td>0.998476</td></tr><tr><td>3111813</td><td>84.020004</td><td>0.002503</td><td>0.991268</td><td>0.998857</td></tr><tr><td>3107289</td><td>92.029999</td><td>0.002741</td><td>0.994009</td><td>0.999238</td></tr><tr><td>3110400</td><td>95.199997</td><td>0.002836</td><td>0.996845</td><td>0.999619</td></tr><tr><td>3111594</td><td>105.899971</td><td>0.003155</td><td>1.0</td><td>1.0</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [73]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">zero_row</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">'Cum % Spend'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
    <span class="s1">'Cum % Cust'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">alpha_lorenz_plot</span> <span class="o">=</span> <span class="n">alpha_spend_dist</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'Cum % Spend'</span> <span class="p">,</span><span class="s1">'Cum % Cust'</span><span class="p">)</span>
<span class="n">alpha_lorenz_plot_zero</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">zero_row</span><span class="p">,</span> <span class="n">alpha_lorenz_plot</span><span class="p">])</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">alpha_lorenz_plot_zero</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">'Cum % Cust:Q'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Cumulative % Alpha Buyers'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">'.0%'</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">'Cum % Spend:Q'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Cumulative % Alpha Revenue'</span><span class="p">,</span> 
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">'.0%'</span><span class="p">),</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])),</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Lorenz Curve for Alpha Spend"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">550</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">450</span>
<span class="p">)</span>

<span class="n">chart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-e530b06330ab419198c0a04ee4efcc9a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e530b06330ab419198c0a04ee4efcc9a.vega-embed details,
  #altair-viz-e530b06330ab419198c0a04ee4efcc9a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e530b06330ab419198c0a04ee4efcc9a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e530b06330ab419198c0a04ee4efcc9a") {
      outputDiv = document.getElementById("altair-viz-e530b06330ab419198c0a04ee4efcc9a");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-2d1230d16353e92f2c656e02a9756828"}, "mark": {"type": "line"}, "encoding": {"x": {"axis": {"format": ".0%"}, "field": "Cum % Cust", "title": "Cumulative % Alpha Buyers", "type": "quantitative"}, "y": {"axis": {"format": ".0%"}, "field": "Cum % Spend", "scale": {"domain": [0, 1]}, "title": "Cumulative % Alpha Revenue", "type": "quantitative"}}, "height": 450, "title": "Lorenz Curve for Alpha Spend", "width": 550, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-2d1230d16353e92f2c656e02a9756828": [{"Cum % Spend": 0.0, "Cum % Cust": 0.0}, {"Cum % Spend": 4.676663957070559e-05, "Cum % Cust": 0.00038109756097560977}, {"Cum % Spend": 9.353327914141119e-05, "Cum % Cust": 0.0007621951219512195}, {"Cum % Spend": 0.00014029991871211678, "Cum % Cust": 0.0011432926829268294}, {"Cum % Spend": 0.00018706655828282237, "Cum % Cust": 0.001524390243902439}, {"Cum % Spend": 0.00023383319785352796, "Cum % Cust": 0.0019054878048780487}, {"Cum % Spend": 0.00028059983742423356, "Cum % Cust": 0.0022865853658536584}, {"Cum % Spend": 0.0003273664624430239, "Cum % Cust": 0.0026676829268292685}, {"Cum % Spend": 0.00037413311656564474, "Cum % Cust": 0.003048780487804878}, {"Cum % Spend": 0.00042089977068826556, "Cum % Cust": 0.003429878048780488}, {"Cum % Spend": 0.0004718366835732013, "Cum % Cust": 0.0038109756097560975}, {"Cum % Spend": 0.000522773596458137, "Cum % Cust": 0.004192073170731708}, {"Cum % Spend": 0.0005743062356486917, "Cum % Cust": 0.004573170731707318}, {"Cum % Spend": 0.0006258388748392463, "Cum % Cust": 0.004954268292682928}, {"Cum % Spend": 0.0006773715140298009, "Cum % Cust": 0.005335365853658537}, {"Cum % Spend": 0.0007306914194487035, "Cum % Cust": 0.005716463414634147}, {"Cum % Spend": 0.0007852028356865048, "Cum % Cust": 0.006097560975609756}, {"Cum % Spend": 0.0008397142519243062, "Cum % Cust": 0.006478658536585366}, {"Cum % Spend": 0.0008960129343904555, "Cum % Cust": 0.0068597560975609765}, {"Cum % Spend": 0.0009523116168566048, "Cum % Cust": 0.007240853658536586}, {"Cum % Spend": 0.001008610357530415, "Cum % Cust": 0.007621951219512196}, {"Cum % Spend": 0.0010649090399965644, "Cum % Cust": 0.008003048780487805}, {"Cum % Spend": 0.0011212077224627137, "Cum % Cust": 0.008384146341463415}, {"Cum % Spend": 0.001177506404928863, "Cum % Cust": 0.008765243902439025}, {"Cum % Spend": 0.0012338050873950124, "Cum % Cust": 0.009146341463414635}, {"Cum % Spend": 0.0012901037698611617, "Cum % Cust": 0.009527439024390245}, {"Cum % Spend": 0.001346402452327311, "Cum % Cust": 0.009908536585365854}, {"Cum % Spend": 0.0014027011347934604, "Cum % Cust": 0.010289634146341464}, {"Cum % Spend": 0.0014589998172596097, "Cum % Cust": 0.010670731707317074}, {"Cum % Spend": 0.001515298499725759, "Cum % Cust": 0.011051829268292684}, {"Cum % Spend": 0.0015715971821919084, "Cum % Cust": 0.011432926829268294}, {"Cum % Spend": 0.0016278958646580577, "Cum % Cust": 0.011814024390243903}, {"Cum % Spend": 0.001684194547124207, "Cum % Cust": 0.012195121951219513}, {"Cum % Spend": 0.0017404932295903563, "Cum % Cust": 0.012576219512195123}, {"Cum % Spend": 0.0017967919120565057, "Cum % Cust": 0.012957317073170733}, {"Cum % Spend": 0.001853090594522655, "Cum % Cust": 0.013338414634146343}, {"Cum % Spend": 0.0019093892769888043, "Cum % Cust": 0.013719512195121951}, {"Cum % Spend": 0.0019656880758702755, "Cum % Cust": 0.014100609756097561}, {"Cum % Spend": 0.002021986758336425, "Cum % Cust": 0.014481707317073171}, {"Cum % Spend": 0.002078285440802574, "Cum % Cust": 0.014862804878048782}, {"Cum % Spend": 0.0021345841232687235, "Cum % Cust": 0.015243902439024392}, {"Cum % Spend": 0.002190882805734873, "Cum % Cust": 0.015625}, {"Cum % Spend": 0.002247181488201022, "Cum % Cust": 0.01600609756097561}, {"Cum % Spend": 0.0023034801706671715, "Cum % Cust": 0.01638719512195122}, {"Cum % Spend": 0.002359778853133321, "Cum % Cust": 0.01676829268292683}, {"Cum % Spend": 0.00241607753559947, "Cum % Cust": 0.01714939024390244}, {"Cum % Spend": 0.0024723762180656195, "Cum % Cust": 0.01753048780487805}, {"Cum % Spend": 0.002528674900531769, "Cum % Cust": 0.01791158536585366}, {"Cum % Spend": 0.002584973582997918, "Cum % Cust": 0.01829268292682927}, {"Cum % Spend": 0.0026412722654640675, "Cum % Cust": 0.01867378048780488}, {"Cum % Spend": 0.002697570947930217, "Cum % Cust": 0.019054878048780487}, {"Cum % Spend": 0.002753869630396366, "Cum % Cust": 0.019435975609756097}, {"Cum % Spend": 0.002811061916872859, "Cum % Cust": 0.019817073170731708}, {"Cum % Spend": 0.0028691478073596954, "Cum % Cust": 0.020198170731707318}, {"Cum % Spend": 0.0029284253250807524, "Cum % Cust": 0.020579268292682928}, {"Cum % Spend": 0.0029877028428018093, "Cum % Cust": 0.020960365853658538}, {"Cum % Spend": 0.0030469803605228662, "Cum % Cust": 0.021341463414634148}, {"Cum % Spend": 0.003106257878243923, "Cum % Cust": 0.021722560975609758}, {"Cum % Spend": 0.00316553539596498, "Cum % Cust": 0.022103658536585368}, {"Cum % Spend": 0.003224812913686037, "Cum % Cust": 0.022484756097560978}, {"Cum % Spend": 0.003284090431407094, "Cum % Cust": 0.022865853658536585}, {"Cum % Spend": 0.003343367949128151, "Cum % Cust": 0.023246951219512195}, {"Cum % Spend": 0.003404432674869895, "Cum % Cust": 0.023628048780487805}, {"Cum % Spend": 0.0034657951910048723, "Cum % Cust": 0.024009146341463415}, {"Cum % Spend": 0.0035292429383844137, "Cum % Cust": 0.024390243902439025}, {"Cum % Spend": 0.003593882080167532, "Cum % Cust": 0.024771341463414635}, {"Cum % Spend": 0.00365852122195065, "Cum % Cust": 0.025152439024390245}, {"Cum % Spend": 0.003725543385371566, "Cum % Cust": 0.025533536585365856}, {"Cum % Spend": 0.0037925655487924814, "Cum % Cust": 0.025914634146341466}, {"Cum % Spend": 0.003859587712213397, "Cum % Cust": 0.026295731707317076}, {"Cum % Spend": 0.003926610108464956, "Cum % Cust": 0.026676829268292686}, {"Cum % Spend": 0.003993632271885872, "Cum % Cust": 0.027057926829268292}, {"Cum % Spend": 0.004061846062541008, "Cum % Cust": 0.027439024390243903}, {"Cum % Spend": 0.004130059853196144, "Cum % Cust": 0.027820121951219513}, {"Cum % Spend": 0.00419827364385128, "Cum % Cust": 0.028201219512195123}, {"Cum % Spend": 0.004266487434506416, "Cum % Cust": 0.028582317073170733}, {"Cum % Spend": 0.004334701225161552, "Cum % Cust": 0.028963414634146343}, {"Cum % Spend": 0.0044029150158166885, "Cum % Cust": 0.029344512195121953}, {"Cum % Spend": 0.004471128806471825, "Cum % Cust": 0.029725609756097563}, {"Cum % Spend": 0.004539342597126961, "Cum % Cust": 0.030106707317073173}, {"Cum % Spend": 0.004607556387782097, "Cum % Cust": 0.030487804878048783}, {"Cum % Spend": 0.004675770178437233, "Cum % Cust": 0.03086890243902439}, {"Cum % Spend": 0.004743983969092369, "Cum % Cust": 0.03125}, {"Cum % Spend": 0.004812197759747505, "Cum % Cust": 0.03163109756097561}, {"Cum % Spend": 0.004880411550402641, "Cum % Cust": 0.03201219512195122}, {"Cum % Spend": 0.004948625341057777, "Cum % Cust": 0.03239329268292683}, {"Cum % Spend": 0.0050168391317129135, "Cum % Cust": 0.03277439024390244}, {"Cum % Spend": 0.00508505292236805, "Cum % Cust": 0.03315548780487805}, {"Cum % Spend": 0.005153266713023186, "Cum % Cust": 0.03353658536585366}, {"Cum % Spend": 0.005221480503678322, "Cum % Cust": 0.03391768292682927}, {"Cum % Spend": 0.005289694294333458, "Cum % Cust": 0.03429878048780488}, {"Cum % Spend": 0.005357908084988594, "Cum % Cust": 0.03467987804878049}, {"Cum % Spend": 0.00542612187564373, "Cum % Cust": 0.0350609756097561}, {"Cum % Spend": 0.005494335666298866, "Cum % Cust": 0.03544207317073171}, {"Cum % Spend": 0.005562549456954002, "Cum % Cust": 0.03582317073170732}, {"Cum % Spend": 0.0056307632476091385, "Cum % Cust": 0.03620426829268293}, {"Cum % Spend": 0.005698977038264275, "Cum % Cust": 0.03658536585365854}, {"Cum % Spend": 0.005767190828919411, "Cum % Cust": 0.03696646341463415}, {"Cum % Spend": 0.005835404619574547, "Cum % Cust": 0.037347560975609755}, {"Cum % Spend": 0.005903618410229683, "Cum % Cust": 0.037728658536585365}, {"Cum % Spend": 0.005971832200884819, "Cum % Cust": 0.038109756097560975}, {"Cum % Spend": 0.006040045991539955, "Cum % Cust": 0.038490853658536585}, {"Cum % Spend": 0.006108259782195091, "Cum % Cust": 0.038871951219512195}, {"Cum % Spend": 0.006176473572850227, "Cum % Cust": 0.039253048780487805}, {"Cum % Spend": 0.0062446873635053635, "Cum % Cust": 0.039634146341463415}, {"Cum % Spend": 0.0063129011541605, "Cum % Cust": 0.040015243902439025}, {"Cum % Spend": 0.006381114944815636, "Cum % Cust": 0.040396341463414635}, {"Cum % Spend": 0.006449328735470772, "Cum % Cust": 0.040777439024390245}, {"Cum % Spend": 0.006517542526125908, "Cum % Cust": 0.041158536585365856}, {"Cum % Spend": 0.006585756316781044, "Cum % Cust": 0.041539634146341466}, {"Cum % Spend": 0.00665397010743618, "Cum % Cust": 0.041920731707317076}, {"Cum % Spend": 0.006722183898091316, "Cum % Cust": 0.042301829268292686}, {"Cum % Spend": 0.006790397688746452, "Cum % Cust": 0.042682926829268296}, {"Cum % Spend": 0.0068586114794015884, "Cum % Cust": 0.043064024390243906}, {"Cum % Spend": 0.0069268252700567245, "Cum % Cust": 0.043445121951219516}, {"Cum % Spend": 0.006995039060711861, "Cum % Cust": 0.043826219512195126}, {"Cum % Spend": 0.007063252851366997, "Cum % Cust": 0.044207317073170736}, {"Cum % Spend": 0.007131466642022133, "Cum % Cust": 0.044588414634146346}, {"Cum % Spend": 0.007199680432677269, "Cum % Cust": 0.044969512195121956}, {"Cum % Spend": 0.007267894223332405, "Cum % Cust": 0.04535060975609756}, {"Cum % Spend": 0.007336108013987541, "Cum % Cust": 0.04573170731707317}, {"Cum % Spend": 0.007404321804642677, "Cum % Cust": 0.04611280487804878}, {"Cum % Spend": 0.007477301638573408, "Cum % Cust": 0.04649390243902439}, {"Cum % Spend": 0.007550281472504139, "Cum % Cust": 0.046875}, {"Cum % Spend": 0.00762326130643487, "Cum % Cust": 0.04725609756097561}, {"Cum % Spend": 0.007696241140365601, "Cum % Cust": 0.04763719512195122}, {"Cum % Spend": 0.007769220974296331, "Cum % Cust": 0.04801829268292683}, {"Cum % Spend": 0.007842200808227062, "Cum % Cust": 0.04839939024390244}, {"Cum % Spend": 0.007915180176496506, "Cum % Cust": 0.04878048780487805}, {"Cum % Spend": 0.00798815954476595, "Cum % Cust": 0.04916158536585366}, {"Cum % Spend": 0.008061138913035393, "Cum % Cust": 0.04954268292682927}, {"Cum % Spend": 0.008134118281304836, "Cum % Cust": 0.04992378048780488}, {"Cum % Spend": 0.00820709764957428, "Cum % Cust": 0.05030487804878049}, {"Cum % Spend": 0.008280673064291477, "Cum % Cust": 0.0506859756097561}, {"Cum % Spend": 0.008354248479008675, "Cum % Cust": 0.05106707317073171}, {"Cum % Spend": 0.008427823893725872, "Cum % Cust": 0.05144817073170732}, {"Cum % Spend": 0.00850139930844307, "Cum % Cust": 0.05182926829268293}, {"Cum % Spend": 0.008574974723160267, "Cum % Cust": 0.05221036585365854}, {"Cum % Spend": 0.008648550137877464, "Cum % Cust": 0.05259146341463415}, {"Cum % Spend": 0.008722125552594662, "Cum % Cust": 0.05297256097560976}, {"Cum % Spend": 0.008795700967311859, "Cum % Cust": 0.053353658536585365}, {"Cum % Spend": 0.008869276382029057, "Cum % Cust": 0.053734756097560975}, {"Cum % Spend": 0.008942851796746254, "Cum % Cust": 0.054115853658536585}, {"Cum % Spend": 0.009016427211463451, "Cum % Cust": 0.054496951219512195}, {"Cum % Spend": 0.009090002626180649, "Cum % Cust": 0.054878048780487805}, {"Cum % Spend": 0.009163578040897846, "Cum % Cust": 0.055259146341463415}, {"Cum % Spend": 0.009237153455615044, "Cum % Cust": 0.055640243902439025}, {"Cum % Spend": 0.009310728870332241, "Cum % Cust": 0.056021341463414635}, {"Cum % Spend": 0.009384304285049438, "Cum % Cust": 0.056402439024390245}, {"Cum % Spend": 0.009457879699766636, "Cum % Cust": 0.056783536585365856}, {"Cum % Spend": 0.009532051160931587, "Cum % Cust": 0.057164634146341466}, {"Cum % Spend": 0.009606222622096539, "Cum % Cust": 0.057545731707317076}, {"Cum % Spend": 0.00968039408326149, "Cum % Cust": 0.057926829268292686}, {"Cum % Spend": 0.009754565544426441, "Cum % Cust": 0.058307926829268296}, {"Cum % Spend": 0.009828737005591393, "Cum % Cust": 0.058689024390243906}, {"Cum % Spend": 0.009902908466756344, "Cum % Cust": 0.059070121951219516}, {"Cum % Spend": 0.009977079927921295, "Cum % Cust": 0.059451219512195126}, {"Cum % Spend": 0.010051251389086246, "Cum % Cust": 0.059832317073170736}, {"Cum % Spend": 0.010125422850251198, "Cum % Cust": 0.060213414634146346}, {"Cum % Spend": 0.01019959431141615, "Cum % Cust": 0.060594512195121956}, {"Cum % Spend": 0.0102737657725811, "Cum % Cust": 0.06097560975609757}, {"Cum % Spend": 0.010347937233746052, "Cum % Cust": 0.06135670731707317}, {"Cum % Spend": 0.010422108694911003, "Cum % Cust": 0.06173780487804878}, {"Cum % Spend": 0.010496280156075954, "Cum % Cust": 0.06211890243902439}, {"Cum % Spend": 0.010570451617240906, "Cum % Cust": 0.0625}, {"Cum % Spend": 0.010644623078405857, "Cum % Cust": 0.06288109756097561}, {"Cum % Spend": 0.010718794539570808, "Cum % Cust": 0.06326219512195122}, {"Cum % Spend": 0.01079296600073576, "Cum % Cust": 0.06364329268292683}, {"Cum % Spend": 0.010867137461900711, "Cum % Cust": 0.06402439024390244}, {"Cum % Spend": 0.010942500084638596, "Cum % Cust": 0.06440548780487805}, {"Cum % Spend": 0.011018458753824234, "Cum % Cust": 0.06478658536585366}, {"Cum % Spend": 0.011094417423009872, "Cum % Cust": 0.06516768292682927}, {"Cum % Spend": 0.01117037609219551, "Cum % Cust": 0.06554878048780488}, {"Cum % Spend": 0.01124633476138115, "Cum % Cust": 0.06592987804878049}, {"Cum % Spend": 0.011322293430566788, "Cum % Cust": 0.0663109756097561}, {"Cum % Spend": 0.011398252099752426, "Cum % Cust": 0.06669207317073171}, {"Cum % Spend": 0.011474210768938065, "Cum % Cust": 0.06707317073170732}, {"Cum % Spend": 0.011550169438123703, "Cum % Cust": 0.06745426829268293}, {"Cum % Spend": 0.011626128107309341, "Cum % Cust": 0.06783536585365854}, {"Cum % Spend": 0.01170208677649498, "Cum % Cust": 0.06821646341463415}, {"Cum % Spend": 0.011778045445680618, "Cum % Cust": 0.06859756097560976}, {"Cum % Spend": 0.011854004114866257, "Cum % Cust": 0.06897865853658537}, {"Cum % Spend": 0.011929962784051895, "Cum % Cust": 0.06935975609756098}, {"Cum % Spend": 0.012005921453237534, "Cum % Cust": 0.06974085365853659}, {"Cum % Spend": 0.012082476168870926, "Cum % Cust": 0.0701219512195122}, {"Cum % Spend": 0.012159625999629498, "Cum % Cust": 0.07050304878048781}, {"Cum % Spend": 0.01223677583038807, "Cum % Cust": 0.07088414634146342}, {"Cum % Spend": 0.01231392566114664, "Cum % Cust": 0.07126524390243903}, {"Cum % Spend": 0.012391075491905212, "Cum % Cust": 0.07164634146341464}, {"Cum % Spend": 0.012468225322663784, "Cum % Cust": 0.07202743902439025}, {"Cum % Spend": 0.012545375153422356, "Cum % Cust": 0.07240853658536586}, {"Cum % Spend": 0.012622524984180927, "Cum % Cust": 0.07278963414634147}, {"Cum % Spend": 0.012699674814939499, "Cum % Cust": 0.07317073170731708}, {"Cum % Spend": 0.01277682464569807, "Cum % Cust": 0.07355182926829269}, {"Cum % Spend": 0.012853974476456642, "Cum % Cust": 0.07393292682926829}, {"Cum % Spend": 0.012931124307215214, "Cum % Cust": 0.0743140243902439}, {"Cum % Spend": 0.013008274137973785, "Cum % Cust": 0.07469512195121951}, {"Cum % Spend": 0.013085423968732357, "Cum % Cust": 0.07507621951219512}, {"Cum % Spend": 0.013162573799490929, "Cum % Cust": 0.07545731707317073}, {"Cum % Spend": 0.0132397236302495, "Cum % Cust": 0.07583841463414634}, {"Cum % Spend": 0.013316873461008072, "Cum % Cust": 0.07621951219512195}, {"Cum % Spend": 0.013394023291766644, "Cum % Cust": 0.07660060975609756}, {"Cum % Spend": 0.013471173122525215, "Cum % Cust": 0.07698170731707317}, {"Cum % Spend": 0.013548322953283787, "Cum % Cust": 0.07736280487804878}, {"Cum % Spend": 0.013625472784042358, "Cum % Cust": 0.07774390243902439}, {"Cum % Spend": 0.01370262261480093, "Cum % Cust": 0.078125}, {"Cum % Spend": 0.013779772445559502, "Cum % Cust": 0.07850609756097561}, {"Cum % Spend": 0.013856922276318073, "Cum % Cust": 0.07888719512195122}, {"Cum % Spend": 0.013934072107076645, "Cum % Cust": 0.07926829268292683}, {"Cum % Spend": 0.014011221937835217, "Cum % Cust": 0.07964939024390244}, {"Cum % Spend": 0.014088371768593788, "Cum % Cust": 0.08003048780487805}, {"Cum % Spend": 0.014166713692247868, "Cum % Cust": 0.08041158536585366}, {"Cum % Spend": 0.01424624677747488, "Cum % Cust": 0.08079268292682927}, {"Cum % Spend": 0.014325779862701893, "Cum % Cust": 0.08117378048780488}, {"Cum % Spend": 0.014405312947928905, "Cum % Cust": 0.08155487804878049}, {"Cum % Spend": 0.014484846033155918, "Cum % Cust": 0.0819359756097561}, {"Cum % Spend": 0.01456437911838293, "Cum % Cust": 0.08231707317073171}, {"Cum % Spend": 0.014643912203609943, "Cum % Cust": 0.08269817073170732}, {"Cum % Spend": 0.014723445288836956, "Cum % Cust": 0.08307926829268293}, {"Cum % Spend": 0.014802978374063969, "Cum % Cust": 0.08346036585365854}, {"Cum % Spend": 0.014882511459290981, "Cum % Cust": 0.08384146341463415}, {"Cum % Spend": 0.014962044544517994, "Cum % Cust": 0.08422256097560976}, {"Cum % Spend": 0.015041577629745007, "Cum % Cust": 0.08460365853658537}, {"Cum % Spend": 0.015121706761419773, "Cum % Cust": 0.08498475609756098}, {"Cum % Spend": 0.01520183589309454, "Cum % Cust": 0.08536585365853659}, {"Cum % Spend": 0.015281965024769306, "Cum % Cust": 0.0857469512195122}, {"Cum % Spend": 0.015362094156444073, "Cum % Cust": 0.08612804878048781}, {"Cum % Spend": 0.01544222328811884, "Cum % Cust": 0.08650914634146342}, {"Cum % Spend": 0.015522352419793606, "Cum % Cust": 0.08689024390243903}, {"Cum % Spend": 0.015602481551468372, "Cum % Cust": 0.08727134146341464}, {"Cum % Spend": 0.015682609751820564, "Cum % Cust": 0.08765243902439025}, {"Cum % Spend": 0.01576273888349533, "Cum % Cust": 0.08803353658536586}, {"Cum % Spend": 0.015842868015170097, "Cum % Cust": 0.08841463414634147}, {"Cum % Spend": 0.015922997146844864, "Cum % Cust": 0.08879573170731708}, {"Cum % Spend": 0.01600312627851963, "Cum % Cust": 0.08917682926829269}, {"Cum % Spend": 0.016083255410194397, "Cum % Cust": 0.0895579268292683}, {"Cum % Spend": 0.016163384541869164, "Cum % Cust": 0.0899390243902439}, {"Cum % Spend": 0.01624351367354393, "Cum % Cust": 0.09032012195121951}, {"Cum % Spend": 0.016323642805218697, "Cum % Cust": 0.09070121951219512}, {"Cum % Spend": 0.016403771936893463, "Cum % Cust": 0.09108231707317073}, {"Cum % Spend": 0.01648687943816185, "Cum % Cust": 0.09146341463414634}, {"Cum % Spend": 0.016569986939430237, "Cum % Cust": 0.09184451219512195}, {"Cum % Spend": 0.016653094440698624, "Cum % Cust": 0.09222560975609756}, {"Cum % Spend": 0.01673620194196701, "Cum % Cust": 0.09260670731707317}, {"Cum % Spend": 0.016819309443235397, "Cum % Cust": 0.09298780487804878}, {"Cum % Spend": 0.016902416944503784, "Cum % Cust": 0.09336890243902439}, {"Cum % Spend": 0.01698552444577217, "Cum % Cust": 0.09375}, {"Cum % Spend": 0.017068631947040558, "Cum % Cust": 0.09413109756097561}, {"Cum % Spend": 0.017151739448308945, "Cum % Cust": 0.09451219512195122}, {"Cum % Spend": 0.01723484694957733, "Cum % Cust": 0.09489329268292683}, {"Cum % Spend": 0.01731795445084572, "Cum % Cust": 0.09527439024390244}, {"Cum % Spend": 0.017401061952114105, "Cum % Cust": 0.09565548780487805}, {"Cum % Spend": 0.017484169453382492, "Cum % Cust": 0.09603658536585366}, {"Cum % Spend": 0.01756727695465088, "Cum % Cust": 0.09641768292682927}, {"Cum % Spend": 0.017650384455919266, "Cum % Cust": 0.09679878048780488}, {"Cum % Spend": 0.017733491957187653, "Cum % Cust": 0.09717987804878049}, {"Cum % Spend": 0.01781659945845604, "Cum % Cust": 0.0975609756097561}, {"Cum % Spend": 0.017899706959724426, "Cum % Cust": 0.09794207317073171}, {"Cum % Spend": 0.017982814460992813, "Cum % Cust": 0.09832317073170732}, {"Cum % Spend": 0.0180659219622612, "Cum % Cust": 0.09870426829268293}, {"Cum % Spend": 0.018149029463529587, "Cum % Cust": 0.09908536585365854}, {"Cum % Spend": 0.018232136964797974, "Cum % Cust": 0.09946646341463415}, {"Cum % Spend": 0.01831524446606636, "Cum % Cust": 0.09984756097560976}, {"Cum % Spend": 0.018398351967334747, "Cum % Cust": 0.10022865853658537}, {"Cum % Spend": 0.018481459468603134, "Cum % Cust": 0.10060975609756098}, {"Cum % Spend": 0.01856456696987152, "Cum % Cust": 0.10099085365853659}, {"Cum % Spend": 0.018647674471139908, "Cum % Cust": 0.1013719512195122}, {"Cum % Spend": 0.018730781972408295, "Cum % Cust": 0.10175304878048781}, {"Cum % Spend": 0.01881388947367668, "Cum % Cust": 0.10213414634146342}, {"Cum % Spend": 0.01889699697494507, "Cum % Cust": 0.10251524390243903}, {"Cum % Spend": 0.018980104476213455, "Cum % Cust": 0.10289634146341464}, {"Cum % Spend": 0.019063211977481842, "Cum % Cust": 0.10327743902439025}, {"Cum % Spend": 0.01914631947875023, "Cum % Cust": 0.10365853658536586}, {"Cum % Spend": 0.019229426980018616, "Cum % Cust": 0.10403963414634147}, {"Cum % Spend": 0.019312534481287003, "Cum % Cust": 0.10442073170731708}, {"Cum % Spend": 0.01939564198255539, "Cum % Cust": 0.10480182926829269}, {"Cum % Spend": 0.019478749483823776, "Cum % Cust": 0.1051829268292683}, {"Cum % Spend": 0.019564835354685783, "Cum % Cust": 0.10556402439024391}, {"Cum % Spend": 0.01965092122554779, "Cum % Cust": 0.10594512195121952}, {"Cum % Spend": 0.019737007096409798, "Cum % Cust": 0.10632621951219512}, {"Cum % Spend": 0.019823092967271805, "Cum % Cust": 0.10670731707317073}, {"Cum % Spend": 0.019909178838133812, "Cum % Cust": 0.10708841463414634}, {"Cum % Spend": 0.01999526470899582, "Cum % Cust": 0.10746951219512195}, {"Cum % Spend": 0.020081350579857826, "Cum % Cust": 0.10785060975609756}, {"Cum % Spend": 0.020170414820313454, "Cum % Cust": 0.10823170731707317}, {"Cum % Spend": 0.02025947906076908, "Cum % Cust": 0.10861280487804878}, {"Cum % Spend": 0.02034854330122471, "Cum % Cust": 0.10899390243902439}, {"Cum % Spend": 0.020437607541680336, "Cum % Cust": 0.109375}, {"Cum % Spend": 0.020526671782135963, "Cum % Cust": 0.10975609756097561}, {"Cum % Spend": 0.02061573602259159, "Cum % Cust": 0.11013719512195122}, {"Cum % Spend": 0.02070480026304722, "Cum % Cust": 0.11051829268292683}, {"Cum % Spend": 0.020793864503502846, "Cum % Cust": 0.11089939024390244}, {"Cum % Spend": 0.020882928743958473, "Cum % Cust": 0.11128048780487805}, {"Cum % Spend": 0.020973781123757362, "Cum % Cust": 0.11166158536585366}, {"Cum % Spend": 0.02106463350355625, "Cum % Cust": 0.11204268292682927}, {"Cum % Spend": 0.02115667797625065, "Cum % Cust": 0.11242378048780488}, {"Cum % Spend": 0.021248722448945045, "Cum % Cust": 0.11280487804878049}, {"Cum % Spend": 0.021340766921639442, "Cum % Cust": 0.1131859756097561}, {"Cum % Spend": 0.02143281139433384, "Cum % Cust": 0.11356707317073171}, {"Cum % Spend": 0.021524855867028236, "Cum % Cust": 0.11394817073170732}, {"Cum % Spend": 0.021616900339722633, "Cum % Cust": 0.11432926829268293}, {"Cum % Spend": 0.02170894481241703, "Cum % Cust": 0.11471036585365854}, {"Cum % Spend": 0.021802477538585663, "Cum % Cust": 0.11509146341463415}, {"Cum % Spend": 0.021896010264754295, "Cum % Cust": 0.11547256097560976}, {"Cum % Spend": 0.021991033107042313, "Cum % Cust": 0.11585365853658537}, {"Cum % Spend": 0.02208605594933033, "Cum % Cust": 0.11623475609756098}, {"Cum % Spend": 0.022181078791618347, "Cum % Cust": 0.11661585365853659}, {"Cum % Spend": 0.022276101633906364, "Cum % Cust": 0.1169969512195122}, {"Cum % Spend": 0.02237112447619438, "Cum % Cust": 0.11737804878048781}, {"Cum % Spend": 0.0224661473184824, "Cum % Cust": 0.11775914634146342}, {"Cum % Spend": 0.022561170160770416, "Cum % Cust": 0.11814024390243903}, {"Cum % Spend": 0.022656193003058434, "Cum % Cust": 0.11852134146341464}, {"Cum % Spend": 0.02275121584534645, "Cum % Cust": 0.11890243902439025}, {"Cum % Spend": 0.022846238687634468, "Cum % Cust": 0.11928353658536586}, {"Cum % Spend": 0.022941261529922485, "Cum % Cust": 0.11966463414634147}, {"Cum % Spend": 0.023036284372210503, "Cum % Cust": 0.12004573170731708}, {"Cum % Spend": 0.02313130721449852, "Cum % Cust": 0.12042682926829269}, {"Cum % Spend": 0.023226330056786537, "Cum % Cust": 0.1208079268292683}, {"Cum % Spend": 0.023321352899074554, "Cum % Cust": 0.12118902439024391}, {"Cum % Spend": 0.02341637574136257, "Cum % Cust": 0.12157012195121952}, {"Cum % Spend": 0.02351139858365059, "Cum % Cust": 0.12195121951219513}, {"Cum % Spend": 0.023606421425938606, "Cum % Cust": 0.12233231707317073}, {"Cum % Spend": 0.023701444268226624, "Cum % Cust": 0.12271341463414634}, {"Cum % Spend": 0.02379646711051464, "Cum % Cust": 0.12309451219512195}, {"Cum % Spend": 0.023891489952802658, "Cum % Cust": 0.12347560975609756}, {"Cum % Spend": 0.023986512795090675, "Cum % Cust": 0.12385670731707317}, {"Cum % Spend": 0.024081535637378693, "Cum % Cust": 0.12423780487804878}, {"Cum % Spend": 0.02417655847966671, "Cum % Cust": 0.12461890243902439}, {"Cum % Spend": 0.024271581321954727, "Cum % Cust": 0.125}, {"Cum % Spend": 0.024366604164242744, "Cum % Cust": 0.1253810975609756}, {"Cum % Spend": 0.02446162700653076, "Cum % Cust": 0.12576219512195122}, {"Cum % Spend": 0.02455664984881878, "Cum % Cust": 0.12614329268292682}, {"Cum % Spend": 0.024651672691106796, "Cum % Cust": 0.12652439024390244}, {"Cum % Spend": 0.024746695533394814, "Cum % Cust": 0.12690548780487804}, {"Cum % Spend": 0.02484171837568283, "Cum % Cust": 0.12728658536585366}, {"Cum % Spend": 0.024936741217970848, "Cum % Cust": 0.12766768292682926}, {"Cum % Spend": 0.025031764060258865, "Cum % Cust": 0.12804878048780488}, {"Cum % Spend": 0.025126786902546883, "Cum % Cust": 0.12842987804878048}, {"Cum % Spend": 0.0252218097448349, "Cum % Cust": 0.1288109756097561}, {"Cum % Spend": 0.025316832587122917, "Cum % Cust": 0.1291920731707317}, {"Cum % Spend": 0.025414833799004555, "Cum % Cust": 0.12957317073170732}, {"Cum % Spend": 0.025512835010886192, "Cum % Cust": 0.12995426829268292}, {"Cum % Spend": 0.02561083622276783, "Cum % Cust": 0.13033536585365854}, {"Cum % Spend": 0.025708837434649467, "Cum % Cust": 0.13071646341463414}, {"Cum % Spend": 0.025806838646531105, "Cum % Cust": 0.13109756097560973}, {"Cum % Spend": 0.025904839858412743, "Cum % Cust": 0.13147865853658536}, {"Cum % Spend": 0.02600284107029438, "Cum % Cust": 0.13185975609756095}, {"Cum % Spend": 0.026100842282176018, "Cum % Cust": 0.13224085365853658}, {"Cum % Spend": 0.026198843494057655, "Cum % Cust": 0.13262195121951217}, {"Cum % Spend": 0.026296844705939293, "Cum % Cust": 0.1330030487804878}, {"Cum % Spend": 0.02639484591782093, "Cum % Cust": 0.1333841463414634}, {"Cum % Spend": 0.026492847129702568, "Cum % Cust": 0.13376524390243902}, {"Cum % Spend": 0.026590848341584206, "Cum % Cust": 0.13414634146341461}, {"Cum % Spend": 0.026688849553465843, "Cum % Cust": 0.13452743902439024}, {"Cum % Spend": 0.02678685076534748, "Cum % Cust": 0.13490853658536583}, {"Cum % Spend": 0.02688485197722912, "Cum % Cust": 0.13528963414634146}, {"Cum % Spend": 0.026982853189110756, "Cum % Cust": 0.13567073170731705}, {"Cum % Spend": 0.027080854400992393, "Cum % Cust": 0.13605182926829268}, {"Cum % Spend": 0.02717885561287403, "Cum % Cust": 0.13643292682926828}, {"Cum % Spend": 0.02727685682475567, "Cum % Cust": 0.1368140243902439}, {"Cum % Spend": 0.027377240359783173, "Cum % Cust": 0.1371951219512195}, {"Cum % Spend": 0.027477623894810677, "Cum % Cust": 0.13757621951219512}, {"Cum % Spend": 0.02757800742983818, "Cum % Cust": 0.13795731707317072}, {"Cum % Spend": 0.027678390964865685, "Cum % Cust": 0.13833841463414634}, {"Cum % Spend": 0.02777877449989319, "Cum % Cust": 0.13871951219512194}, {"Cum % Spend": 0.02787945605814457, "Cum % Cust": 0.13910060975609756}, {"Cum % Spend": 0.02798013761639595, "Cum % Cust": 0.13948170731707316}, {"Cum % Spend": 0.02808081917464733, "Cum % Cust": 0.13986280487804878}, {"Cum % Spend": 0.028181500732898712, "Cum % Cust": 0.14024390243902438}, {"Cum % Spend": 0.028282182291150093, "Cum % Cust": 0.140625}, {"Cum % Spend": 0.028382863849401474, "Cum % Cust": 0.1410060975609756}, {"Cum % Spend": 0.028483545407652855, "Cum % Cust": 0.14138719512195122}, {"Cum % Spend": 0.028584226965904236, "Cum % Cust": 0.14176829268292682}, {"Cum % Spend": 0.028684908524155617, "Cum % Cust": 0.14214939024390244}, {"Cum % Spend": 0.028785590082406998, "Cum % Cust": 0.14253048780487804}, {"Cum % Spend": 0.02888627164065838, "Cum % Cust": 0.14291158536585366}, {"Cum % Spend": 0.02898695319890976, "Cum % Cust": 0.14329268292682926}, {"Cum % Spend": 0.02908763475716114, "Cum % Cust": 0.14367378048780488}, {"Cum % Spend": 0.02918831631541252, "Cum % Cust": 0.14405487804878048}, {"Cum % Spend": 0.029288997873663902, "Cum % Cust": 0.1444359756097561}, {"Cum % Spend": 0.029389679431915283, "Cum % Cust": 0.1448170731707317}, {"Cum % Spend": 0.029490360990166664, "Cum % Cust": 0.14519817073170732}, {"Cum % Spend": 0.029591042548418045, "Cum % Cust": 0.14557926829268292}, {"Cum % Spend": 0.029691724106669426, "Cum % Cust": 0.14596036585365854}, {"Cum % Spend": 0.029792405664920807, "Cum % Cust": 0.14634146341463414}, {"Cum % Spend": 0.029893087223172188, "Cum % Cust": 0.14672256097560976}, {"Cum % Spend": 0.02999376878142357, "Cum % Cust": 0.14710365853658536}, {"Cum % Spend": 0.03009445033967495, "Cum % Cust": 0.14748475609756095}, {"Cum % Spend": 0.03019513189792633, "Cum % Cust": 0.14786585365853658}, {"Cum % Spend": 0.03029581345617771, "Cum % Cust": 0.14824695121951217}, {"Cum % Spend": 0.030396495014429092, "Cum % Cust": 0.1486280487804878}, {"Cum % Spend": 0.030497176572680473, "Cum % Cust": 0.1490091463414634}, {"Cum % Spend": 0.030597858130931854, "Cum % Cust": 0.14939024390243902}, {"Cum % Spend": 0.030698539689183235, "Cum % Cust": 0.14977134146341461}, {"Cum % Spend": 0.030799221247434616, "Cum % Cust": 0.15015243902439024}, {"Cum % Spend": 0.030899902805685997, "Cum % Cust": 0.15053353658536583}, {"Cum % Spend": 0.031000584363937378, "Cum % Cust": 0.15091463414634146}, {"Cum % Spend": 0.03110126592218876, "Cum % Cust": 0.15129573170731705}, {"Cum % Spend": 0.03120194748044014, "Cum % Cust": 0.15167682926829268}, {"Cum % Spend": 0.03130263090133667, "Cum % Cust": 0.15205792682926828}, {"Cum % Spend": 0.0314033143222332, "Cum % Cust": 0.1524390243902439}, {"Cum % Spend": 0.03150399774312973, "Cum % Cust": 0.1528201219512195}, {"Cum % Spend": 0.03160468116402626, "Cum % Cust": 0.15320121951219512}, {"Cum % Spend": 0.03170536458492279, "Cum % Cust": 0.15358231707317072}, {"Cum % Spend": 0.03180604800581932, "Cum % Cust": 0.15396341463414634}, {"Cum % Spend": 0.03190673142671585, "Cum % Cust": 0.15434451219512194}, {"Cum % Spend": 0.03200741484761238, "Cum % Cust": 0.15472560975609756}, {"Cum % Spend": 0.03210809826850891, "Cum % Cust": 0.15510670731707316}, {"Cum % Spend": 0.03220878168940544, "Cum % Cust": 0.15548780487804878}, {"Cum % Spend": 0.03230946511030197, "Cum % Cust": 0.15586890243902438}, {"Cum % Spend": 0.0324101485311985, "Cum % Cust": 0.15625}, {"Cum % Spend": 0.03251083195209503, "Cum % Cust": 0.1566310975609756}, {"Cum % Spend": 0.03261151537299156, "Cum % Cust": 0.15701219512195122}, {"Cum % Spend": 0.03271219879388809, "Cum % Cust": 0.15739329268292682}, {"Cum % Spend": 0.03281288221478462, "Cum % Cust": 0.15777439024390244}, {"Cum % Spend": 0.03291356563568115, "Cum % Cust": 0.15815548780487804}, {"Cum % Spend": 0.03301424905657768, "Cum % Cust": 0.15853658536585366}, {"Cum % Spend": 0.03311493247747421, "Cum % Cust": 0.15891768292682926}, {"Cum % Spend": 0.03321561589837074, "Cum % Cust": 0.15929878048780488}, {"Cum % Spend": 0.03331629931926727, "Cum % Cust": 0.15967987804878048}, {"Cum % Spend": 0.0334169827401638, "Cum % Cust": 0.1600609756097561}, {"Cum % Spend": 0.03351766616106033, "Cum % Cust": 0.1604420731707317}, {"Cum % Spend": 0.03361834958195686, "Cum % Cust": 0.16082317073170732}, {"Cum % Spend": 0.033719033002853394, "Cum % Cust": 0.16120426829268292}, {"Cum % Spend": 0.033819716423749924, "Cum % Cust": 0.16158536585365854}, {"Cum % Spend": 0.033920399844646454, "Cum % Cust": 0.16196646341463414}, {"Cum % Spend": 0.034021083265542984, "Cum % Cust": 0.16234756097560976}, {"Cum % Spend": 0.034121766686439514, "Cum % Cust": 0.16272865853658536}, {"Cum % Spend": 0.034222450107336044, "Cum % Cust": 0.16310975609756095}, {"Cum % Spend": 0.034323133528232574, "Cum % Cust": 0.16349085365853658}, {"Cum % Spend": 0.034423816949129105, "Cum % Cust": 0.16387195121951217}, {"Cum % Spend": 0.034524500370025635, "Cum % Cust": 0.1642530487804878}, {"Cum % Spend": 0.034625183790922165, "Cum % Cust": 0.1646341463414634}, {"Cum % Spend": 0.034725867211818695, "Cum % Cust": 0.16501524390243902}, {"Cum % Spend": 0.034826550632715225, "Cum % Cust": 0.16539634146341461}, {"Cum % Spend": 0.034927234053611755, "Cum % Cust": 0.16577743902439024}, {"Cum % Spend": 0.035027917474508286, "Cum % Cust": 0.16615853658536583}, {"Cum % Spend": 0.035128600895404816, "Cum % Cust": 0.16653963414634146}, {"Cum % Spend": 0.035229284316301346, "Cum % Cust": 0.16692073170731705}, {"Cum % Spend": 0.035329967737197876, "Cum % Cust": 0.16730182926829268}, {"Cum % Spend": 0.035430651158094406, "Cum % Cust": 0.16768292682926828}, {"Cum % Spend": 0.035531334578990936, "Cum % Cust": 0.1680640243902439}, {"Cum % Spend": 0.035632017999887466, "Cum % Cust": 0.1684451219512195}, {"Cum % Spend": 0.035732701420784, "Cum % Cust": 0.16882621951219512}, {"Cum % Spend": 0.03583338484168053, "Cum % Cust": 0.16920731707317072}, {"Cum % Spend": 0.03593406826257706, "Cum % Cust": 0.16958841463414634}, {"Cum % Spend": 0.03603475168347359, "Cum % Cust": 0.16996951219512194}, {"Cum % Spend": 0.03613543510437012, "Cum % Cust": 0.17035060975609756}, {"Cum % Spend": 0.03623611852526665, "Cum % Cust": 0.17073170731707316}, {"Cum % Spend": 0.03633680194616318, "Cum % Cust": 0.17111280487804878}, {"Cum % Spend": 0.036437783390283585, "Cum % Cust": 0.17149390243902438}, {"Cum % Spend": 0.03653876483440399, "Cum % Cust": 0.171875}, {"Cum % Spend": 0.0366397462785244, "Cum % Cust": 0.1722560975609756}, {"Cum % Spend": 0.036740727722644806, "Cum % Cust": 0.17263719512195122}, {"Cum % Spend": 0.03684170916676521, "Cum % Cust": 0.17301829268292682}, {"Cum % Spend": 0.03694269061088562, "Cum % Cust": 0.17339939024390244}, {"Cum % Spend": 0.03704367205500603, "Cum % Cust": 0.17378048780487804}, {"Cum % Spend": 0.037144653499126434, "Cum % Cust": 0.17416158536585366}, {"Cum % Spend": 0.03724563494324684, "Cum % Cust": 0.17454268292682926}, {"Cum % Spend": 0.03734661638736725, "Cum % Cust": 0.17492378048780488}, {"Cum % Spend": 0.037447597831487656, "Cum % Cust": 0.17530487804878048}, {"Cum % Spend": 0.03754857927560806, "Cum % Cust": 0.1756859756097561}, {"Cum % Spend": 0.03764956071972847, "Cum % Cust": 0.1760670731707317}, {"Cum % Spend": 0.03775054216384888, "Cum % Cust": 0.17644817073170732}, {"Cum % Spend": 0.037851523607969284, "Cum % Cust": 0.17682926829268292}, {"Cum % Spend": 0.03795250505208969, "Cum % Cust": 0.17721036585365854}, {"Cum % Spend": 0.0380534864962101, "Cum % Cust": 0.17759146341463414}, {"Cum % Spend": 0.038154467940330505, "Cum % Cust": 0.17797256097560976}, {"Cum % Spend": 0.03825544938445091, "Cum % Cust": 0.17835365853658536}, {"Cum % Spend": 0.03835643082857132, "Cum % Cust": 0.17873475609756098}, {"Cum % Spend": 0.03845741227269173, "Cum % Cust": 0.17911585365853658}, {"Cum % Spend": 0.038558393716812134, "Cum % Cust": 0.17949695121951217}, {"Cum % Spend": 0.03865937516093254, "Cum % Cust": 0.1798780487804878}, {"Cum % Spend": 0.03876035660505295, "Cum % Cust": 0.1802591463414634}, {"Cum % Spend": 0.038861338049173355, "Cum % Cust": 0.18064024390243902}, {"Cum % Spend": 0.03896231949329376, "Cum % Cust": 0.18102134146341461}, {"Cum % Spend": 0.03906330093741417, "Cum % Cust": 0.18140243902439024}, {"Cum % Spend": 0.039164282381534576, "Cum % Cust": 0.18178353658536583}, {"Cum % Spend": 0.039265263825654984, "Cum % Cust": 0.18216463414634146}, {"Cum % Spend": 0.03936624526977539, "Cum % Cust": 0.18254573170731705}, {"Cum % Spend": 0.0394672267138958, "Cum % Cust": 0.18292682926829268}, {"Cum % Spend": 0.039568208158016205, "Cum % Cust": 0.18330792682926828}, {"Cum % Spend": 0.03966918960213661, "Cum % Cust": 0.1836890243902439}, {"Cum % Spend": 0.03977017104625702, "Cum % Cust": 0.1840701219512195}, {"Cum % Spend": 0.039871152490377426, "Cum % Cust": 0.18445121951219512}, {"Cum % Spend": 0.03997213393449783, "Cum % Cust": 0.18483231707317072}, {"Cum % Spend": 0.04007311537861824, "Cum % Cust": 0.18521341463414634}, {"Cum % Spend": 0.04017409682273865, "Cum % Cust": 0.18559451219512194}, {"Cum % Spend": 0.040275078266859055, "Cum % Cust": 0.18597560975609756}, {"Cum % Spend": 0.04037605971097946, "Cum % Cust": 0.18635670731707316}, {"Cum % Spend": 0.04047704115509987, "Cum % Cust": 0.18673780487804878}, {"Cum % Spend": 0.040578022599220276, "Cum % Cust": 0.18711890243902438}, {"Cum % Spend": 0.04067900404334068, "Cum % Cust": 0.1875}, {"Cum % Spend": 0.04077998548746109, "Cum % Cust": 0.1878810975609756}, {"Cum % Spend": 0.0408809669315815, "Cum % Cust": 0.18826219512195122}, {"Cum % Spend": 0.040981948375701904, "Cum % Cust": 0.18864329268292682}, {"Cum % Spend": 0.04108292981982231, "Cum % Cust": 0.18902439024390244}, {"Cum % Spend": 0.04118391126394272, "Cum % Cust": 0.18940548780487804}, {"Cum % Spend": 0.041284892708063126, "Cum % Cust": 0.18978658536585366}, {"Cum % Spend": 0.04138587415218353, "Cum % Cust": 0.19016768292682926}, {"Cum % Spend": 0.04148685559630394, "Cum % Cust": 0.19054878048780488}, {"Cum % Spend": 0.04158783704042435, "Cum % Cust": 0.19092987804878048}, {"Cum % Spend": 0.041688818484544754, "Cum % Cust": 0.1913109756097561}, {"Cum % Spend": 0.04178979992866516, "Cum % Cust": 0.1916920731707317}, {"Cum % Spend": 0.04189078137278557, "Cum % Cust": 0.19207317073170732}, {"Cum % Spend": 0.041991762816905975, "Cum % Cust": 0.19245426829268292}, {"Cum % Spend": 0.04209274426102638, "Cum % Cust": 0.19283536585365854}, {"Cum % Spend": 0.04219372570514679, "Cum % Cust": 0.19321646341463414}, {"Cum % Spend": 0.0422947071492672, "Cum % Cust": 0.19359756097560976}, {"Cum % Spend": 0.042395688593387604, "Cum % Cust": 0.19397865853658536}, {"Cum % Spend": 0.04249667003750801, "Cum % Cust": 0.19435975609756098}, {"Cum % Spend": 0.04259765148162842, "Cum % Cust": 0.19474085365853658}, {"Cum % Spend": 0.042698632925748825, "Cum % Cust": 0.1951219512195122}, {"Cum % Spend": 0.04279961436986923, "Cum % Cust": 0.1955030487804878}, {"Cum % Spend": 0.04290059581398964, "Cum % Cust": 0.1958841463414634}, {"Cum % Spend": 0.043002769351005554, "Cum % Cust": 0.19626524390243902}, {"Cum % Spend": 0.04310494288802147, "Cum % Cust": 0.19664634146341461}, {"Cum % Spend": 0.043207116425037384, "Cum % Cust": 0.19702743902439024}, {"Cum % Spend": 0.0433092899620533, "Cum % Cust": 0.19740853658536583}, {"Cum % Spend": 0.043411463499069214, "Cum % Cust": 0.19778963414634146}, {"Cum % Spend": 0.04351363703608513, "Cum % Cust": 0.19817073170731705}, {"Cum % Spend": 0.043615810573101044, "Cum % Cust": 0.19855182926829268}, {"Cum % Spend": 0.04371798411011696, "Cum % Cust": 0.19893292682926828}, {"Cum % Spend": 0.043821047991514206, "Cum % Cust": 0.1993140243902439}, {"Cum % Spend": 0.043925005942583084, "Cum % Cust": 0.1996951219512195}, {"Cum % Spend": 0.04402896389365196, "Cum % Cust": 0.20007621951219512}, {"Cum % Spend": 0.04413292184472084, "Cum % Cust": 0.20045731707317072}, {"Cum % Spend": 0.04423687979578972, "Cum % Cust": 0.20083841463414634}, {"Cum % Spend": 0.0443408377468586, "Cum % Cust": 0.20121951219512194}, {"Cum % Spend": 0.044444795697927475, "Cum % Cust": 0.20160060975609756}, {"Cum % Spend": 0.04454875364899635, "Cum % Cust": 0.20198170731707316}, {"Cum % Spend": 0.04465271160006523, "Cum % Cust": 0.20236280487804878}, {"Cum % Spend": 0.04475666955113411, "Cum % Cust": 0.20274390243902438}, {"Cum % Spend": 0.04486062750220299, "Cum % Cust": 0.203125}, {"Cum % Spend": 0.044964585453271866, "Cum % Cust": 0.2035060975609756}, {"Cum % Spend": 0.045068543404340744, "Cum % Cust": 0.20388719512195122}, {"Cum % Spend": 0.04517250135540962, "Cum % Cust": 0.20426829268292682}, {"Cum % Spend": 0.0452764593064785, "Cum % Cust": 0.20464939024390244}, {"Cum % Spend": 0.04538041725754738, "Cum % Cust": 0.20503048780487804}, {"Cum % Spend": 0.04548437520861626, "Cum % Cust": 0.20541158536585366}, {"Cum % Spend": 0.045588333159685135, "Cum % Cust": 0.20579268292682926}, {"Cum % Spend": 0.04569229111075401, "Cum % Cust": 0.20617378048780488}, {"Cum % Spend": 0.04579624906182289, "Cum % Cust": 0.20655487804878048}, {"Cum % Spend": 0.04590020701289177, "Cum % Cust": 0.2069359756097561}, {"Cum % Spend": 0.04600416496396065, "Cum % Cust": 0.2073170731707317}, {"Cum % Spend": 0.046108122915029526, "Cum % Cust": 0.20769817073170732}, {"Cum % Spend": 0.046212080866098404, "Cum % Cust": 0.20807926829268292}, {"Cum % Spend": 0.04631603881716728, "Cum % Cust": 0.20846036585365854}, {"Cum % Spend": 0.04641999676823616, "Cum % Cust": 0.20884146341463414}, {"Cum % Spend": 0.04652395471930504, "Cum % Cust": 0.20922256097560976}, {"Cum % Spend": 0.04662791267037392, "Cum % Cust": 0.20960365853658536}, {"Cum % Spend": 0.046731870621442795, "Cum % Cust": 0.20998475609756098}, {"Cum % Spend": 0.04683582857251167, "Cum % Cust": 0.21036585365853658}, {"Cum % Spend": 0.04693978652358055, "Cum % Cust": 0.2107469512195122}, {"Cum % Spend": 0.04704374447464943, "Cum % Cust": 0.2111280487804878}, {"Cum % Spend": 0.04714770242571831, "Cum % Cust": 0.21150914634146342}, {"Cum % Spend": 0.047251660376787186, "Cum % Cust": 0.21189024390243902}, {"Cum % Spend": 0.047355618327856064, "Cum % Cust": 0.21227134146341461}, {"Cum % Spend": 0.04745957627892494, "Cum % Cust": 0.21265243902439024}, {"Cum % Spend": 0.04756353422999382, "Cum % Cust": 0.21303353658536583}, {"Cum % Spend": 0.0476674921810627, "Cum % Cust": 0.21341463414634146}, {"Cum % Spend": 0.04777145013213158, "Cum % Cust": 0.21379573170731705}, {"Cum % Spend": 0.047875408083200455, "Cum % Cust": 0.21417682926829268}, {"Cum % Spend": 0.04797936603426933, "Cum % Cust": 0.21455792682926828}, {"Cum % Spend": 0.04808332398533821, "Cum % Cust": 0.2149390243902439}, {"Cum % Spend": 0.04818728193640709, "Cum % Cust": 0.2153201219512195}, {"Cum % Spend": 0.04829123988747597, "Cum % Cust": 0.21570121951219512}, {"Cum % Spend": 0.048395197838544846, "Cum % Cust": 0.21608231707317072}, {"Cum % Spend": 0.048499155789613724, "Cum % Cust": 0.21646341463414634}, {"Cum % Spend": 0.0486031137406826, "Cum % Cust": 0.21684451219512194}, {"Cum % Spend": 0.04870707169175148, "Cum % Cust": 0.21722560975609756}, {"Cum % Spend": 0.04881102964282036, "Cum % Cust": 0.21760670731707316}, {"Cum % Spend": 0.048914987593889236, "Cum % Cust": 0.21798780487804878}, {"Cum % Spend": 0.049018945544958115, "Cum % Cust": 0.21836890243902438}, {"Cum % Spend": 0.04912290349602699, "Cum % Cust": 0.21875}, {"Cum % Spend": 0.04922686144709587, "Cum % Cust": 0.2191310975609756}, {"Cum % Spend": 0.04933081939816475, "Cum % Cust": 0.21951219512195122}, {"Cum % Spend": 0.04943477734923363, "Cum % Cust": 0.21989329268292682}, {"Cum % Spend": 0.049538735300302505, "Cum % Cust": 0.22027439024390244}, {"Cum % Spend": 0.049642693251371384, "Cum % Cust": 0.22065548780487804}, {"Cum % Spend": 0.04974665120244026, "Cum % Cust": 0.22103658536585366}, {"Cum % Spend": 0.04985060915350914, "Cum % Cust": 0.22141768292682926}, {"Cum % Spend": 0.04995456710457802, "Cum % Cust": 0.22179878048780488}, {"Cum % Spend": 0.050058525055646896, "Cum % Cust": 0.22217987804878048}, {"Cum % Spend": 0.050162483006715775, "Cum % Cust": 0.2225609756097561}, {"Cum % Spend": 0.05026644095778465, "Cum % Cust": 0.2229420731707317}, {"Cum % Spend": 0.05037039890885353, "Cum % Cust": 0.22332317073170732}, {"Cum % Spend": 0.05047435685992241, "Cum % Cust": 0.22370426829268292}, {"Cum % Spend": 0.05057831481099129, "Cum % Cust": 0.22408536585365854}, {"Cum % Spend": 0.050682272762060165, "Cum % Cust": 0.22446646341463414}, {"Cum % Spend": 0.050786230713129044, "Cum % Cust": 0.22484756097560976}, {"Cum % Spend": 0.05089018866419792, "Cum % Cust": 0.22522865853658536}, {"Cum % Spend": 0.0509941466152668, "Cum % Cust": 0.22560975609756098}, {"Cum % Spend": 0.05109810456633568, "Cum % Cust": 0.22599085365853658}, {"Cum % Spend": 0.051202062517404556, "Cum % Cust": 0.2263719512195122}, {"Cum % Spend": 0.051306020468473434, "Cum % Cust": 0.2267530487804878}, {"Cum % Spend": 0.05140997841954231, "Cum % Cust": 0.22713414634146342}, {"Cum % Spend": 0.05151393637061119, "Cum % Cust": 0.22751524390243902}, {"Cum % Spend": 0.05161789432168007, "Cum % Cust": 0.22789634146341464}, {"Cum % Spend": 0.05172185227274895, "Cum % Cust": 0.22827743902439024}, {"Cum % Spend": 0.051825810223817825, "Cum % Cust": 0.22865853658536583}, {"Cum % Spend": 0.051929768174886703, "Cum % Cust": 0.22903963414634146}, {"Cum % Spend": 0.05203372612595558, "Cum % Cust": 0.22942073170731705}, {"Cum % Spend": 0.05213768407702446, "Cum % Cust": 0.22980182926829268}, {"Cum % Spend": 0.05224164202809334, "Cum % Cust": 0.23018292682926828}, {"Cum % Spend": 0.052345599979162216, "Cum % Cust": 0.2305640243902439}, {"Cum % Spend": 0.052449557930231094, "Cum % Cust": 0.2309451219512195}, {"Cum % Spend": 0.05255351588129997, "Cum % Cust": 0.23132621951219512}, {"Cum % Spend": 0.05265747383236885, "Cum % Cust": 0.23170731707317072}, {"Cum % Spend": 0.05276143178343773, "Cum % Cust": 0.23208841463414634}, {"Cum % Spend": 0.05286538973450661, "Cum % Cust": 0.23246951219512194}, {"Cum % Spend": 0.052969347685575485, "Cum % Cust": 0.23285060975609756}, {"Cum % Spend": 0.05307568982243538, "Cum % Cust": 0.23323170731707316}, {"Cum % Spend": 0.05318203195929527, "Cum % Cust": 0.23361280487804878}, {"Cum % Spend": 0.05328837409615517, "Cum % Cust": 0.23399390243902438}, {"Cum % Spend": 0.05339471623301506, "Cum % Cust": 0.234375}, {"Cum % Spend": 0.053501058369874954, "Cum % Cust": 0.2347560975609756}, {"Cum % Spend": 0.05360740050673485, "Cum % Cust": 0.23513719512195122}, {"Cum % Spend": 0.05371374264359474, "Cum % Cust": 0.23551829268292682}, {"Cum % Spend": 0.053820084780454636, "Cum % Cust": 0.23589939024390244}, {"Cum % Spend": 0.05392642691731453, "Cum % Cust": 0.23628048780487804}, {"Cum % Spend": 0.05403276905417442, "Cum % Cust": 0.23666158536585366}, {"Cum % Spend": 0.05413911119103432, "Cum % Cust": 0.23704268292682926}, {"Cum % Spend": 0.05424545332789421, "Cum % Cust": 0.23742378048780488}, {"Cum % Spend": 0.054351795464754105, "Cum % Cust": 0.23780487804878048}, {"Cum % Spend": 0.054458137601614, "Cum % Cust": 0.2381859756097561}, {"Cum % Spend": 0.05456447973847389, "Cum % Cust": 0.2385670731707317}, {"Cum % Spend": 0.054670821875333786, "Cum % Cust": 0.23894817073170732}, {"Cum % Spend": 0.05477716401219368, "Cum % Cust": 0.23932926829268292}, {"Cum % Spend": 0.054883506149053574, "Cum % Cust": 0.23971036585365854}, {"Cum % Spend": 0.05498984828591347, "Cum % Cust": 0.24009146341463414}, {"Cum % Spend": 0.05509619042277336, "Cum % Cust": 0.24047256097560976}, {"Cum % Spend": 0.055202532559633255, "Cum % Cust": 0.24085365853658536}, {"Cum % Spend": 0.05530887469649315, "Cum % Cust": 0.24123475609756098}, {"Cum % Spend": 0.05541521683335304, "Cum % Cust": 0.24161585365853658}, {"Cum % Spend": 0.055521558970212936, "Cum % Cust": 0.2419969512195122}, {"Cum % Spend": 0.05562790110707283, "Cum % Cust": 0.2423780487804878}, {"Cum % Spend": 0.055734243243932724, "Cum % Cust": 0.24275914634146342}, {"Cum % Spend": 0.055843863636255264, "Cum % Cust": 0.24314024390243902}, {"Cum % Spend": 0.05595377832651138, "Cum % Cust": 0.24352134146341464}, {"Cum % Spend": 0.0560636930167675, "Cum % Cust": 0.24390243902439024}, {"Cum % Spend": 0.05617360770702362, "Cum % Cust": 0.24428353658536583}, {"Cum % Spend": 0.05628352239727974, "Cum % Cust": 0.24466463414634146}, {"Cum % Spend": 0.05639343708753586, "Cum % Cust": 0.24504573170731705}, {"Cum % Spend": 0.05650335177779198, "Cum % Cust": 0.24542682926829268}, {"Cum % Spend": 0.056613266468048096, "Cum % Cust": 0.24580792682926828}, {"Cum % Spend": 0.056723181158304214, "Cum % Cust": 0.2461890243902439}, {"Cum % Spend": 0.05683309584856033, "Cum % Cust": 0.2465701219512195}, {"Cum % Spend": 0.05694301053881645, "Cum % Cust": 0.24695121951219512}, {"Cum % Spend": 0.05705292522907257, "Cum % Cust": 0.24733231707317072}, {"Cum % Spend": 0.05716283991932869, "Cum % Cust": 0.24771341463414634}, {"Cum % Spend": 0.05727275460958481, "Cum % Cust": 0.24809451219512194}, {"Cum % Spend": 0.05738266929984093, "Cum % Cust": 0.24847560975609756}, {"Cum % Spend": 0.057492583990097046, "Cum % Cust": 0.24885670731707316}, {"Cum % Spend": 0.057602498680353165, "Cum % Cust": 0.24923780487804878}, {"Cum % Spend": 0.05771241337060928, "Cum % Cust": 0.24961890243902438}, {"Cum % Spend": 0.0578223280608654, "Cum % Cust": 0.25}, {"Cum % Spend": 0.05793224275112152, "Cum % Cust": 0.2503810975609756}, {"Cum % Spend": 0.05804215744137764, "Cum % Cust": 0.2507621951219512}, {"Cum % Spend": 0.05815207213163376, "Cum % Cust": 0.25114329268292684}, {"Cum % Spend": 0.05826198682188988, "Cum % Cust": 0.25152439024390244}, {"Cum % Spend": 0.058371901512145996, "Cum % Cust": 0.25190548780487804}, {"Cum % Spend": 0.058481816202402115, "Cum % Cust": 0.25228658536585363}, {"Cum % Spend": 0.058591730892658234, "Cum % Cust": 0.2526676829268293}, {"Cum % Spend": 0.05870164558291435, "Cum % Cust": 0.2530487804878049}, {"Cum % Spend": 0.05881334841251373, "Cum % Cust": 0.2534298780487805}, {"Cum % Spend": 0.05892505124211311, "Cum % Cust": 0.2538109756097561}, {"Cum % Spend": 0.059037648141384125, "Cum % Cust": 0.2541920731707317}, {"Cum % Spend": 0.059150245040655136, "Cum % Cust": 0.2545731707317073}, {"Cum % Spend": 0.05926284193992615, "Cum % Cust": 0.2549542682926829}, {"Cum % Spend": 0.05937543883919716, "Cum % Cust": 0.2553353658536585}, {"Cum % Spend": 0.05948803573846817, "Cum % Cust": 0.25571646341463417}, {"Cum % Spend": 0.05960063263773918, "Cum % Cust": 0.25609756097560976}, {"Cum % Spend": 0.05971352756023407, "Cum % Cust": 0.25647865853658536}, {"Cum % Spend": 0.05982642248272896, "Cum % Cust": 0.25685975609756095}, {"Cum % Spend": 0.059939317405223846, "Cum % Cust": 0.2572408536585366}, {"Cum % Spend": 0.060052212327718735, "Cum % Cust": 0.2576219512195122}, {"Cum % Spend": 0.060166895389556885, "Cum % Cust": 0.2580030487804878}, {"Cum % Spend": 0.06028187647461891, "Cum % Cust": 0.2583841463414634}, {"Cum % Spend": 0.060397155582904816, "Cum % Cust": 0.25876524390243905}, {"Cum % Spend": 0.06051243469119072, "Cum % Cust": 0.25914634146341464}, {"Cum % Spend": 0.060627713799476624, "Cum % Cust": 0.25952743902439024}, {"Cum % Spend": 0.06074299290776253, "Cum % Cust": 0.25990853658536583}, {"Cum % Spend": 0.06085827201604843, "Cum % Cust": 0.2602896341463415}, {"Cum % Spend": 0.060973551124334335, "Cum % Cust": 0.2606707317073171}, {"Cum % Spend": 0.06108883023262024, "Cum % Cust": 0.2610518292682927}, {"Cum % Spend": 0.06120410934090614, "Cum % Cust": 0.2614329268292683}, {"Cum % Spend": 0.06131938844919205, "Cum % Cust": 0.26181402439024387}, {"Cum % Spend": 0.06143466755747795, "Cum % Cust": 0.2621951219512195}, {"Cum % Spend": 0.06155054271221161, "Cum % Cust": 0.2625762195121951}, {"Cum % Spend": 0.06166641786694527, "Cum % Cust": 0.2629573170731707}, {"Cum % Spend": 0.061782293021678925, "Cum % Cust": 0.2633384146341463}, {"Cum % Spend": 0.06189816817641258, "Cum % Cust": 0.26371951219512196}, {"Cum % Spend": 0.06201404333114624, "Cum % Cust": 0.26410060975609756}, {"Cum % Spend": 0.06213259696960449, "Cum % Cust": 0.26448170731707316}, {"Cum % Spend": 0.0622517466545105, "Cum % Cust": 0.26486280487804875}, {"Cum % Spend": 0.06237149238586426, "Cum % Cust": 0.2652439024390244}, {"Cum % Spend": 0.06249123811721802, "Cum % Cust": 0.265625}, {"Cum % Spend": 0.06261098384857178, "Cum % Cust": 0.2660060975609756}, {"Cum % Spend": 0.06273311376571655, "Cum % Cust": 0.2663871951219512}, {"Cum % Spend": 0.06285524368286133, "Cum % Cust": 0.26676829268292684}, {"Cum % Spend": 0.0629773736000061, "Cum % Cust": 0.26714939024390244}, {"Cum % Spend": 0.0631018877029419, "Cum % Cust": 0.26753048780487804}, {"Cum % Spend": 0.06322640180587769, "Cum % Cust": 0.26791158536585363}, {"Cum % Spend": 0.06335091590881348, "Cum % Cust": 0.2682926829268293}, {"Cum % Spend": 0.06347721815109253, "Cum % Cust": 0.2686737804878049}, {"Cum % Spend": 0.06360471248626709, "Cum % Cust": 0.2690548780487805}, {"Cum % Spend": 0.06373310089111328, "Cum % Cust": 0.2694359756097561}, {"Cum % Spend": 0.06386297196149826, "Cum % Cust": 0.2698170731707317}, {"Cum % Spend": 0.063993439078331, "Cum % Cust": 0.2701981707317073}, {"Cum % Spend": 0.06412390619516373, "Cum % Cust": 0.2705792682926829}, {"Cum % Spend": 0.06425735354423523, "Cum % Cust": 0.2709603658536585}, {"Cum % Spend": 0.06439258903265, "Cum % Cust": 0.27134146341463417}, {"Cum % Spend": 0.06452782452106476, "Cum % Cust": 0.27172256097560976}, {"Cum % Spend": 0.06466425210237503, "Cum % Cust": 0.27210365853658536}, {"Cum % Spend": 0.0648006796836853, "Cum % Cust": 0.27248475609756095}, {"Cum % Spend": 0.06493710726499557, "Cum % Cust": 0.2728658536585366}, {"Cum % Spend": 0.06507353484630585, "Cum % Cust": 0.2732469512195122}, {"Cum % Spend": 0.06520996242761612, "Cum % Cust": 0.2736280487804878}, {"Cum % Spend": 0.06534639000892639, "Cum % Cust": 0.2740091463414634}, {"Cum % Spend": 0.06548281759023666, "Cum % Cust": 0.27439024390243905}, {"Cum % Spend": 0.0656222254037857, "Cum % Cust": 0.27477134146341464}, {"Cum % Spend": 0.06576252728700638, "Cum % Cust": 0.27515243902439024}, {"Cum % Spend": 0.06590372323989868, "Cum % Cust": 0.27553353658536583}, {"Cum % Spend": 0.06604491919279099, "Cum % Cust": 0.2759146341463415}, {"Cum % Spend": 0.06618611514568329, "Cum % Cust": 0.2762957317073171}, {"Cum % Spend": 0.06632731109857559, "Cum % Cust": 0.2766768292682927}, {"Cum % Spend": 0.0664696991443634, "Cum % Cust": 0.2770579268292683}, {"Cum % Spend": 0.06661298125982285, "Cum % Cust": 0.27743902439024387}, {"Cum % Spend": 0.0667574480175972, "Cum % Cust": 0.2778201219512195}, {"Cum % Spend": 0.06690280884504318, "Cum % Cust": 0.2782012195121951}, {"Cum % Spend": 0.06704876571893692, "Cum % Cust": 0.2785823170731707}, {"Cum % Spend": 0.06719472259283066, "Cum % Cust": 0.2789634146341463}, {"Cum % Spend": 0.0673406794667244, "Cum % Cust": 0.27934451219512196}, {"Cum % Spend": 0.06748782843351364, "Cum % Cust": 0.27972560975609756}, {"Cum % Spend": 0.06763497740030289, "Cum % Cust": 0.28010670731707316}, {"Cum % Spend": 0.06778331845998764, "Cum % Cust": 0.28048780487804875}, {"Cum % Spend": 0.0679316595196724, "Cum % Cust": 0.2808689024390244}, {"Cum % Spend": 0.06808000057935715, "Cum % Cust": 0.28125}, {"Cum % Spend": 0.0682283416390419, "Cum % Cust": 0.2816310975609756}, {"Cum % Spend": 0.06837668269872665, "Cum % Cust": 0.2820121951219512}, {"Cum % Spend": 0.06852561980485916, "Cum % Cust": 0.28239329268292684}, {"Cum % Spend": 0.06867634505033493, "Cum % Cust": 0.28277439024390244}, {"Cum % Spend": 0.06882766634225845, "Cum % Cust": 0.28315548780487804}, {"Cum % Spend": 0.06897898763418198, "Cum % Cust": 0.28353658536585363}, {"Cum % Spend": 0.0691303089261055, "Cum % Cust": 0.2839176829268293}, {"Cum % Spend": 0.06928163021802902, "Cum % Cust": 0.2842987804878049}, {"Cum % Spend": 0.0694335475564003, "Cum % Cust": 0.2846798780487805}, {"Cum % Spend": 0.06958546489477158, "Cum % Cust": 0.2850609756097561}, {"Cum % Spend": 0.06973768025636673, "Cum % Cust": 0.2854420731707317}, {"Cum % Spend": 0.06989078968763351, "Cum % Cust": 0.2858231707317073}, {"Cum % Spend": 0.07004449516534805, "Cum % Cust": 0.2862042682926829}, {"Cum % Spend": 0.07019879668951035, "Cum % Cust": 0.2865853658536585}, {"Cum % Spend": 0.07035309821367264, "Cum % Cust": 0.28696646341463417}, {"Cum % Spend": 0.07050739973783493, "Cum % Cust": 0.28734756097560976}, {"Cum % Spend": 0.07066170126199722, "Cum % Cust": 0.28772865853658536}, {"Cum % Spend": 0.07081600278615952, "Cum % Cust": 0.28810975609756095}, {"Cum % Spend": 0.07097030431032181, "Cum % Cust": 0.2884908536585366}, {"Cum % Spend": 0.0711246058344841, "Cum % Cust": 0.2888719512195122}, {"Cum % Spend": 0.07128158956766129, "Cum % Cust": 0.2892530487804878}, {"Cum % Spend": 0.07143857330083847, "Cum % Cust": 0.2896341463414634}, {"Cum % Spend": 0.07159585505723953, "Cum % Cust": 0.29001524390243905}, {"Cum % Spend": 0.0717531368136406, "Cum % Cust": 0.29039634146341464}, {"Cum % Spend": 0.07191041857004166, "Cum % Cust": 0.29077743902439024}, {"Cum % Spend": 0.07206770032644272, "Cum % Cust": 0.29115853658536583}, {"Cum % Spend": 0.07222498208284378, "Cum % Cust": 0.2915396341463415}, {"Cum % Spend": 0.07238226383924484, "Cum % Cust": 0.2919207317073171}, {"Cum % Spend": 0.07253984361886978, "Cum % Cust": 0.2923018292682927}, {"Cum % Spend": 0.0726977214217186, "Cum % Cust": 0.2926829268292683}, {"Cum % Spend": 0.07285678386688232, "Cum % Cust": 0.2930640243902439}, {"Cum % Spend": 0.07301584631204605, "Cum % Cust": 0.2934451219512195}, {"Cum % Spend": 0.07317490875720978, "Cum % Cust": 0.2938262195121951}, {"Cum % Spend": 0.07333516329526901, "Cum % Cust": 0.2942073170731707}, {"Cum % Spend": 0.07349541783332825, "Cum % Cust": 0.2945884146341463}, {"Cum % Spend": 0.07365567237138748, "Cum % Cust": 0.29496951219512196}, {"Cum % Spend": 0.07381592690944672, "Cum % Cust": 0.29535060975609756}, {"Cum % Spend": 0.07397618144750595, "Cum % Cust": 0.29573170731707316}, {"Cum % Spend": 0.07413643598556519, "Cum % Cust": 0.29611280487804875}, {"Cum % Spend": 0.07429669052362442, "Cum % Cust": 0.2964939024390244}, {"Cum % Spend": 0.07445694506168365, "Cum % Cust": 0.296875}, {"Cum % Spend": 0.07461868971586227, "Cum % Cust": 0.2972560975609756}, {"Cum % Spend": 0.07478073239326477, "Cum % Cust": 0.2976371951219512}, {"Cum % Spend": 0.07494277507066727, "Cum % Cust": 0.29801829268292684}, {"Cum % Spend": 0.07510541379451752, "Cum % Cust": 0.29839939024390244}, {"Cum % Spend": 0.07526864856481552, "Cum % Cust": 0.29878048780487804}, {"Cum % Spend": 0.07543188333511353, "Cum % Cust": 0.29916158536585363}, {"Cum % Spend": 0.07559511810541153, "Cum % Cust": 0.2995426829268293}, {"Cum % Spend": 0.07575835287570953, "Cum % Cust": 0.2999237804878049}, {"Cum % Spend": 0.07592158764600754, "Cum % Cust": 0.3003048780487805}, {"Cum % Spend": 0.07608482241630554, "Cum % Cust": 0.3006859756097561}, {"Cum % Spend": 0.07624805718660355, "Cum % Cust": 0.3010670731707317}, {"Cum % Spend": 0.07641129195690155, "Cum % Cust": 0.3014481707317073}, {"Cum % Spend": 0.07657482475042343, "Cum % Cust": 0.3018292682926829}, {"Cum % Spend": 0.07674044370651245, "Cum % Cust": 0.3022103658536585}, {"Cum % Spend": 0.07690665870904922, "Cum % Cust": 0.30259146341463417}, {"Cum % Spend": 0.077072873711586, "Cum % Cust": 0.30297256097560976}, {"Cum % Spend": 0.07723908871412277, "Cum % Cust": 0.30335365853658536}, {"Cum % Spend": 0.07740530371665955, "Cum % Cust": 0.30373475609756095}, {"Cum % Spend": 0.07757151871919632, "Cum % Cust": 0.3041158536585366}, {"Cum % Spend": 0.0777377337217331, "Cum % Cust": 0.3044969512195122}, {"Cum % Spend": 0.07790394872426987, "Cum % Cust": 0.3048780487804878}, {"Cum % Spend": 0.07807016372680664, "Cum % Cust": 0.3052591463414634}, {"Cum % Spend": 0.07823667675256729, "Cum % Cust": 0.30564024390243905}, {"Cum % Spend": 0.07840527594089508, "Cum % Cust": 0.30602134146341464}, {"Cum % Spend": 0.07857417315244675, "Cum % Cust": 0.30640243902439024}, {"Cum % Spend": 0.07874307036399841, "Cum % Cust": 0.30678353658536583}, {"Cum % Spend": 0.07891196757555008, "Cum % Cust": 0.3071646341463415}, {"Cum % Spend": 0.07908086478710175, "Cum % Cust": 0.3075457317073171}, {"Cum % Spend": 0.07924976199865341, "Cum % Cust": 0.3079268292682927}, {"Cum % Spend": 0.07941865921020508, "Cum % Cust": 0.3083079268292683}, {"Cum % Spend": 0.07958785444498062, "Cum % Cust": 0.3086890243902439}, {"Cum % Spend": 0.07975704967975616, "Cum % Cust": 0.3090701219512195}, {"Cum % Spend": 0.07992624491453171, "Cum % Cust": 0.3094512195121951}, {"Cum % Spend": 0.08009544014930725, "Cum % Cust": 0.3098323170731707}, {"Cum % Spend": 0.0802646353840828, "Cum % Cust": 0.3102134146341463}, {"Cum % Spend": 0.08043383061885834, "Cum % Cust": 0.31059451219512196}, {"Cum % Spend": 0.08060302585363388, "Cum % Cust": 0.31097560975609756}, {"Cum % Spend": 0.08077281713485718, "Cum % Cust": 0.31135670731707316}, {"Cum % Spend": 0.08094380050897598, "Cum % Cust": 0.31173780487804875}, {"Cum % Spend": 0.0811159759759903, "Cum % Cust": 0.3121189024390244}, {"Cum % Spend": 0.08128815144300461, "Cum % Cust": 0.3125}, {"Cum % Spend": 0.08146032691001892, "Cum % Cust": 0.3128810975609756}, {"Cum % Spend": 0.08163250237703323, "Cum % Cust": 0.3132621951219512}, {"Cum % Spend": 0.08180467784404755, "Cum % Cust": 0.31364329268292684}, {"Cum % Spend": 0.08197685331106186, "Cum % Cust": 0.31402439024390244}, {"Cum % Spend": 0.08215051889419556, "Cum % Cust": 0.31440548780487804}, {"Cum % Spend": 0.08232477307319641, "Cum % Cust": 0.31478658536585363}, {"Cum % Spend": 0.08249962329864502, "Cum % Cust": 0.3151676829268293}, {"Cum % Spend": 0.0826747715473175, "Cum % Cust": 0.3155487804878049}, {"Cum % Spend": 0.082852303981781, "Cum % Cust": 0.3159298780487805}, {"Cum % Spend": 0.08303043246269226, "Cum % Cust": 0.3163109756097561}, {"Cum % Spend": 0.08320856094360352, "Cum % Cust": 0.3166920731707317}, {"Cum % Spend": 0.08338668942451477, "Cum % Cust": 0.3170731707317073}, {"Cum % Spend": 0.08356481790542603, "Cum % Cust": 0.3174542682926829}, {"Cum % Spend": 0.08374294638633728, "Cum % Cust": 0.3178353658536585}, {"Cum % Spend": 0.08392107486724854, "Cum % Cust": 0.31821646341463417}, {"Cum % Spend": 0.08409920334815979, "Cum % Cust": 0.31859756097560976}, {"Cum % Spend": 0.08427733182907104, "Cum % Cust": 0.31897865853658536}, {"Cum % Spend": 0.0844554603099823, "Cum % Cust": 0.31935975609756095}, {"Cum % Spend": 0.08463358879089355, "Cum % Cust": 0.3197408536585366}, {"Cum % Spend": 0.08481171727180481, "Cum % Cust": 0.3201219512195122}, {"Cum % Spend": 0.08498984575271606, "Cum % Cust": 0.3205030487804878}, {"Cum % Spend": 0.08516797423362732, "Cum % Cust": 0.3208841463414634}, {"Cum % Spend": 0.08534818887710571, "Cum % Cust": 0.32126524390243905}, {"Cum % Spend": 0.0855284035205841, "Cum % Cust": 0.32164634146341464}, {"Cum % Spend": 0.0857086181640625, "Cum % Cust": 0.32202743902439024}, {"Cum % Spend": 0.08588942885398865, "Cum % Cust": 0.32240853658536583}, {"Cum % Spend": 0.0860702395439148, "Cum % Cust": 0.3227896341463415}, {"Cum % Spend": 0.08625134825706482, "Cum % Cust": 0.3231707317073171}, {"Cum % Spend": 0.08643245697021484, "Cum % Cust": 0.3235518292682927}, {"Cum % Spend": 0.08661356568336487, "Cum % Cust": 0.3239329268292683}, {"Cum % Spend": 0.08679467439651489, "Cum % Cust": 0.3243140243902439}, {"Cum % Spend": 0.08697578310966492, "Cum % Cust": 0.3246951219512195}, {"Cum % Spend": 0.08715808391571045, "Cum % Cust": 0.3250762195121951}, {"Cum % Spend": 0.08734217286109924, "Cum % Cust": 0.3254573170731707}, {"Cum % Spend": 0.08752626180648804, "Cum % Cust": 0.3258384146341463}, {"Cum % Spend": 0.08771035075187683, "Cum % Cust": 0.32621951219512196}, {"Cum % Spend": 0.08789443969726562, "Cum % Cust": 0.32660060975609756}, {"Cum % Spend": 0.08807852864265442, "Cum % Cust": 0.32698170731707316}, {"Cum % Spend": 0.08826261758804321, "Cum % Cust": 0.32736280487804875}, {"Cum % Spend": 0.088446706533432, "Cum % Cust": 0.3277439024390244}, {"Cum % Spend": 0.0886307954788208, "Cum % Cust": 0.328125}, {"Cum % Spend": 0.0888148844242096, "Cum % Cust": 0.3285060975609756}, {"Cum % Spend": 0.08899897336959839, "Cum % Cust": 0.3288871951219512}, {"Cum % Spend": 0.08918306231498718, "Cum % Cust": 0.32926829268292684}, {"Cum % Spend": 0.08936715126037598, "Cum % Cust": 0.32964939024390244}, {"Cum % Spend": 0.08955124020576477, "Cum % Cust": 0.33003048780487804}, {"Cum % Spend": 0.08973532915115356, "Cum % Cust": 0.33041158536585363}, {"Cum % Spend": 0.08991941809654236, "Cum % Cust": 0.3307926829268293}, {"Cum % Spend": 0.09010618925094604, "Cum % Cust": 0.3311737804878049}, {"Cum % Spend": 0.09029325842857361, "Cum % Cust": 0.3315548780487805}, {"Cum % Spend": 0.09048032760620117, "Cum % Cust": 0.3319359756097561}, {"Cum % Spend": 0.09066739678382874, "Cum % Cust": 0.3323170731707317}, {"Cum % Spend": 0.0908556580543518, "Cum % Cust": 0.3326981707317073}, {"Cum % Spend": 0.09104391932487488, "Cum % Cust": 0.3330792682926829}, {"Cum % Spend": 0.09123218059539795, "Cum % Cust": 0.3334603658536585}, {"Cum % Spend": 0.09142044186592102, "Cum % Cust": 0.33384146341463417}, {"Cum % Spend": 0.091609887778759, "Cum % Cust": 0.33422256097560976}, {"Cum % Spend": 0.09179963171482086, "Cum % Cust": 0.33460365853658536}, {"Cum % Spend": 0.09198937565088272, "Cum % Cust": 0.33498475609756095}, {"Cum % Spend": 0.09217911958694458, "Cum % Cust": 0.3353658536585366}, {"Cum % Spend": 0.09236916154623032, "Cum % Cust": 0.3357469512195122}, {"Cum % Spend": 0.09255920350551605, "Cum % Cust": 0.3361280487804878}, {"Cum % Spend": 0.09274924546480179, "Cum % Cust": 0.3365091463414634}, {"Cum % Spend": 0.09293928742408752, "Cum % Cust": 0.33689024390243905}, {"Cum % Spend": 0.09312932938337326, "Cum % Cust": 0.33727134146341464}, {"Cum % Spend": 0.093319371342659, "Cum % Cust": 0.33765243902439024}, {"Cum % Spend": 0.09350941330194473, "Cum % Cust": 0.33803353658536583}, {"Cum % Spend": 0.09369945526123047, "Cum % Cust": 0.3384146341463415}, {"Cum % Spend": 0.0938894972205162, "Cum % Cust": 0.3387957317073171}, {"Cum % Spend": 0.09407953917980194, "Cum % Cust": 0.3391768292682927}, {"Cum % Spend": 0.09426958113908768, "Cum % Cust": 0.3395579268292683}, {"Cum % Spend": 0.0944623053073883, "Cum % Cust": 0.3399390243902439}, {"Cum % Spend": 0.09465502947568893, "Cum % Cust": 0.3403201219512195}, {"Cum % Spend": 0.09484775364398956, "Cum % Cust": 0.3407012195121951}, {"Cum % Spend": 0.09504077583551407, "Cum % Cust": 0.3410823170731707}, {"Cum % Spend": 0.09523379802703857, "Cum % Cust": 0.34146341463414637}, {"Cum % Spend": 0.09542682021856308, "Cum % Cust": 0.34184451219512196}, {"Cum % Spend": 0.09561984241008759, "Cum % Cust": 0.34222560975609756}, {"Cum % Spend": 0.09581286460161209, "Cum % Cust": 0.34260670731707316}, {"Cum % Spend": 0.0960058867931366, "Cum % Cust": 0.34298780487804875}, {"Cum % Spend": 0.09619920700788498, "Cum % Cust": 0.3433689024390244}, {"Cum % Spend": 0.09639491140842438, "Cum % Cust": 0.34375}, {"Cum % Spend": 0.09659091383218765, "Cum % Cust": 0.3441310975609756}, {"Cum % Spend": 0.09678691625595093, "Cum % Cust": 0.3445121951219512}, {"Cum % Spend": 0.0969829186797142, "Cum % Cust": 0.34489329268292684}, {"Cum % Spend": 0.09717892110347748, "Cum % Cust": 0.34527439024390244}, {"Cum % Spend": 0.09737492352724075, "Cum % Cust": 0.34565548780487804}, {"Cum % Spend": 0.09757092595100403, "Cum % Cust": 0.34603658536585363}, {"Cum % Spend": 0.0977669283747673, "Cum % Cust": 0.3464176829268293}, {"Cum % Spend": 0.09796293079853058, "Cum % Cust": 0.3467987804878049}, {"Cum % Spend": 0.09815893322229385, "Cum % Cust": 0.3471798780487805}, {"Cum % Spend": 0.09835493564605713, "Cum % Cust": 0.3475609756097561}, {"Cum % Spend": 0.0985509380698204, "Cum % Cust": 0.3479420731707317}, {"Cum % Spend": 0.09874694049358368, "Cum % Cust": 0.3483231707317073}, {"Cum % Spend": 0.09894294291734695, "Cum % Cust": 0.3487042682926829}, {"Cum % Spend": 0.09913894534111023, "Cum % Cust": 0.3490853658536585}, {"Cum % Spend": 0.0993349477648735, "Cum % Cust": 0.34946646341463417}, {"Cum % Spend": 0.09953095018863678, "Cum % Cust": 0.34984756097560976}, {"Cum % Spend": 0.09972695261240005, "Cum % Cust": 0.35022865853658536}, {"Cum % Spend": 0.09992295503616333, "Cum % Cust": 0.35060975609756095}, {"Cum % Spend": 0.1001189574599266, "Cum % Cust": 0.3509908536585366}, {"Cum % Spend": 0.10031495988368988, "Cum % Cust": 0.3513719512195122}, {"Cum % Spend": 0.10051215440034866, "Cum % Cust": 0.3517530487804878}, {"Cum % Spend": 0.10070964694023132, "Cum % Cust": 0.3521341463414634}, {"Cum % Spend": 0.10090833157300949, "Cum % Cust": 0.35251524390243905}, {"Cum % Spend": 0.10110731422901154, "Cum % Cust": 0.35289634146341464}, {"Cum % Spend": 0.10130629688501358, "Cum % Cust": 0.35327743902439024}, {"Cum % Spend": 0.10150527954101562, "Cum % Cust": 0.35365853658536583}, {"Cum % Spend": 0.10170426219701767, "Cum % Cust": 0.3540396341463415}, {"Cum % Spend": 0.10190324485301971, "Cum % Cust": 0.3544207317073171}, {"Cum % Spend": 0.10210222750902176, "Cum % Cust": 0.3548018292682927}, {"Cum % Spend": 0.1023012101650238, "Cum % Cust": 0.3551829268292683}, {"Cum % Spend": 0.10250019282102585, "Cum % Cust": 0.3555640243902439}, {"Cum % Spend": 0.1026991754770279, "Cum % Cust": 0.3559451219512195}, {"Cum % Spend": 0.10289815813302994, "Cum % Cust": 0.3563262195121951}, {"Cum % Spend": 0.10309714078903198, "Cum % Cust": 0.3567073170731707}, {"Cum % Spend": 0.10329612344503403, "Cum % Cust": 0.35708841463414637}, {"Cum % Spend": 0.10349510610103607, "Cum % Cust": 0.35746951219512196}, {"Cum % Spend": 0.10369408875703812, "Cum % Cust": 0.35785060975609756}, {"Cum % Spend": 0.10389307141304016, "Cum % Cust": 0.35823170731707316}, {"Cum % Spend": 0.1040920540690422, "Cum % Cust": 0.35861280487804875}, {"Cum % Spend": 0.10429103672504425, "Cum % Cust": 0.3589939024390244}, {"Cum % Spend": 0.1044900193810463, "Cum % Cust": 0.359375}, {"Cum % Spend": 0.10468900203704834, "Cum % Cust": 0.3597560975609756}, {"Cum % Spend": 0.10488798469305038, "Cum % Cust": 0.3601371951219512}, {"Cum % Spend": 0.10508696734905243, "Cum % Cust": 0.36051829268292684}, {"Cum % Spend": 0.10528595000505447, "Cum % Cust": 0.36089939024390244}, {"Cum % Spend": 0.10548493266105652, "Cum % Cust": 0.36128048780487804}, {"Cum % Spend": 0.10568391531705856, "Cum % Cust": 0.36166158536585363}, {"Cum % Spend": 0.10588289797306061, "Cum % Cust": 0.3620426829268293}, {"Cum % Spend": 0.10608188062906265, "Cum % Cust": 0.3624237804878049}, {"Cum % Spend": 0.1062808632850647, "Cum % Cust": 0.3628048780487805}, {"Cum % Spend": 0.10647984594106674, "Cum % Cust": 0.3631859756097561}, {"Cum % Spend": 0.10667882859706879, "Cum % Cust": 0.3635670731707317}, {"Cum % Spend": 0.10687781125307083, "Cum % Cust": 0.3639481707317073}, {"Cum % Spend": 0.10707679390907288, "Cum % Cust": 0.3643292682926829}, {"Cum % Spend": 0.10727577656507492, "Cum % Cust": 0.3647103658536585}, {"Cum % Spend": 0.10747595131397247, "Cum % Cust": 0.36509146341463417}, {"Cum % Spend": 0.1076764240860939, "Cum % Cust": 0.36547256097560976}, {"Cum % Spend": 0.10787719488143921, "Cum % Cust": 0.36585365853658536}, {"Cum % Spend": 0.10807826370000839, "Cum % Cust": 0.36623475609756095}, {"Cum % Spend": 0.10827933251857758, "Cum % Cust": 0.3666158536585366}, {"Cum % Spend": 0.10848040133714676, "Cum % Cust": 0.3669969512195122}, {"Cum % Spend": 0.10868176817893982, "Cum % Cust": 0.3673780487804878}, {"Cum % Spend": 0.10888313502073288, "Cum % Cust": 0.3677591463414634}, {"Cum % Spend": 0.10908450186252594, "Cum % Cust": 0.36814024390243905}, {"Cum % Spend": 0.109285868704319, "Cum % Cust": 0.36852134146341464}, {"Cum % Spend": 0.10948723554611206, "Cum % Cust": 0.36890243902439024}, {"Cum % Spend": 0.10968860238790512, "Cum % Cust": 0.36928353658536583}, {"Cum % Spend": 0.10988996922969818, "Cum % Cust": 0.3696646341463415}, {"Cum % Spend": 0.11009133607149124, "Cum % Cust": 0.3700457317073171}, {"Cum % Spend": 0.1102927029132843, "Cum % Cust": 0.3704268292682927}, {"Cum % Spend": 0.11049406975507736, "Cum % Cust": 0.3708079268292683}, {"Cum % Spend": 0.11069543659687042, "Cum % Cust": 0.3711890243902439}, {"Cum % Spend": 0.11089680343866348, "Cum % Cust": 0.3715701219512195}, {"Cum % Spend": 0.11109817028045654, "Cum % Cust": 0.3719512195121951}, {"Cum % Spend": 0.1112995371222496, "Cum % Cust": 0.3723323170731707}, {"Cum % Spend": 0.11150090396404266, "Cum % Cust": 0.37271341463414637}, {"Cum % Spend": 0.11170227080583572, "Cum % Cust": 0.37309451219512196}, {"Cum % Spend": 0.11190363764762878, "Cum % Cust": 0.37347560975609756}, {"Cum % Spend": 0.11210500448942184, "Cum % Cust": 0.37385670731707316}, {"Cum % Spend": 0.1123063713312149, "Cum % Cust": 0.3742378048780488}, {"Cum % Spend": 0.11250773817300797, "Cum % Cust": 0.3746189024390244}, {"Cum % Spend": 0.11270910501480103, "Cum % Cust": 0.375}, {"Cum % Spend": 0.11291047185659409, "Cum % Cust": 0.3753810975609756}, {"Cum % Spend": 0.11311183869838715, "Cum % Cust": 0.3757621951219512}, {"Cum % Spend": 0.1133132055401802, "Cum % Cust": 0.37614329268292684}, {"Cum % Spend": 0.11351457238197327, "Cum % Cust": 0.37652439024390244}, {"Cum % Spend": 0.11371593922376633, "Cum % Cust": 0.37690548780487804}, {"Cum % Spend": 0.11391730606555939, "Cum % Cust": 0.37728658536585363}, {"Cum % Spend": 0.11411867290735245, "Cum % Cust": 0.3776676829268293}, {"Cum % Spend": 0.11432003974914551, "Cum % Cust": 0.3780487804878049}, {"Cum % Spend": 0.11452140659093857, "Cum % Cust": 0.3784298780487805}, {"Cum % Spend": 0.11472277343273163, "Cum % Cust": 0.3788109756097561}, {"Cum % Spend": 0.11492414027452469, "Cum % Cust": 0.3791920731707317}, {"Cum % Spend": 0.11512550711631775, "Cum % Cust": 0.3795731707317073}, {"Cum % Spend": 0.11532687395811081, "Cum % Cust": 0.3799542682926829}, {"Cum % Spend": 0.11552883684635162, "Cum % Cust": 0.3803353658536585}, {"Cum % Spend": 0.11573079973459244, "Cum % Cust": 0.38071646341463417}, {"Cum % Spend": 0.11593276262283325, "Cum % Cust": 0.38109756097560976}, {"Cum % Spend": 0.11613472551107407, "Cum % Cust": 0.38147865853658536}, {"Cum % Spend": 0.11633668839931488, "Cum % Cust": 0.38185975609756095}, {"Cum % Spend": 0.1165386512875557, "Cum % Cust": 0.3822408536585366}, {"Cum % Spend": 0.11674061417579651, "Cum % Cust": 0.3826219512195122}, {"Cum % Spend": 0.11694257706403732, "Cum % Cust": 0.3830030487804878}, {"Cum % Spend": 0.11714453995227814, "Cum % Cust": 0.3833841463414634}, {"Cum % Spend": 0.11734650284051895, "Cum % Cust": 0.38376524390243905}, {"Cum % Spend": 0.11754846572875977, "Cum % Cust": 0.38414634146341464}, {"Cum % Spend": 0.11775042861700058, "Cum % Cust": 0.38452743902439024}, {"Cum % Spend": 0.1179523915052414, "Cum % Cust": 0.38490853658536583}, {"Cum % Spend": 0.11815435439348221, "Cum % Cust": 0.3852896341463415}, {"Cum % Spend": 0.11835631728172302, "Cum % Cust": 0.3856707317073171}, {"Cum % Spend": 0.11855828016996384, "Cum % Cust": 0.3860518292682927}, {"Cum % Spend": 0.11876024305820465, "Cum % Cust": 0.3864329268292683}, {"Cum % Spend": 0.11896220594644547, "Cum % Cust": 0.3868140243902439}, {"Cum % Spend": 0.11916416883468628, "Cum % Cust": 0.3871951219512195}, {"Cum % Spend": 0.1193661317229271, "Cum % Cust": 0.3875762195121951}, {"Cum % Spend": 0.11956809461116791, "Cum % Cust": 0.3879573170731707}, {"Cum % Spend": 0.11977005749940872, "Cum % Cust": 0.38833841463414637}, {"Cum % Spend": 0.11997202038764954, "Cum % Cust": 0.38871951219512196}, {"Cum % Spend": 0.12017398327589035, "Cum % Cust": 0.38910060975609756}, {"Cum % Spend": 0.12037594616413116, "Cum % Cust": 0.38948170731707316}, {"Cum % Spend": 0.12057790905237198, "Cum % Cust": 0.3898628048780488}, {"Cum % Spend": 0.12077987194061279, "Cum % Cust": 0.3902439024390244}, {"Cum % Spend": 0.12098183482885361, "Cum % Cust": 0.390625}, {"Cum % Spend": 0.12118379771709442, "Cum % Cust": 0.3910060975609756}, {"Cum % Spend": 0.12138576060533524, "Cum % Cust": 0.3913871951219512}, {"Cum % Spend": 0.12158772349357605, "Cum % Cust": 0.39176829268292684}, {"Cum % Spend": 0.12178968638181686, "Cum % Cust": 0.39214939024390244}, {"Cum % Spend": 0.12199164927005768, "Cum % Cust": 0.39253048780487804}, {"Cum % Spend": 0.12219361215829849, "Cum % Cust": 0.39291158536585363}, {"Cum % Spend": 0.1223955750465393, "Cum % Cust": 0.3932926829268293}, {"Cum % Spend": 0.12259753793478012, "Cum % Cust": 0.3936737804878049}, {"Cum % Spend": 0.12280188500881195, "Cum % Cust": 0.3940548780487805}, {"Cum % Spend": 0.12300623208284378, "Cum % Cust": 0.3944359756097561}, {"Cum % Spend": 0.12321057915687561, "Cum % Cust": 0.3948170731707317}, {"Cum % Spend": 0.12341521680355072, "Cum % Cust": 0.3951981707317073}, {"Cum % Spend": 0.12362015247344971, "Cum % Cust": 0.3955792682926829}, {"Cum % Spend": 0.1238250881433487, "Cum % Cust": 0.3959603658536585}, {"Cum % Spend": 0.12403002381324768, "Cum % Cust": 0.39634146341463417}, {"Cum % Spend": 0.12423495948314667, "Cum % Cust": 0.39672256097560976}, {"Cum % Spend": 0.12443989515304565, "Cum % Cust": 0.39710365853658536}, {"Cum % Spend": 0.12464483082294464, "Cum % Cust": 0.39748475609756095}, {"Cum % Spend": 0.12484976649284363, "Cum % Cust": 0.3978658536585366}, {"Cum % Spend": 0.12505470216274261, "Cum % Cust": 0.3982469512195122}, {"Cum % Spend": 0.1252596378326416, "Cum % Cust": 0.3986280487804878}, {"Cum % Spend": 0.1254645735025406, "Cum % Cust": 0.3990091463414634}, {"Cum % Spend": 0.12566950917243958, "Cum % Cust": 0.39939024390243905}, {"Cum % Spend": 0.12587444484233856, "Cum % Cust": 0.39977134146341464}, {"Cum % Spend": 0.12607938051223755, "Cum % Cust": 0.40015243902439024}, {"Cum % Spend": 0.12628431618213654, "Cum % Cust": 0.40053353658536583}, {"Cum % Spend": 0.12648925185203552, "Cum % Cust": 0.4009146341463415}, {"Cum % Spend": 0.1266941875219345, "Cum % Cust": 0.4012957317073171}, {"Cum % Spend": 0.1268991231918335, "Cum % Cust": 0.4016768292682927}, {"Cum % Spend": 0.12710405886173248, "Cum % Cust": 0.4020579268292683}, {"Cum % Spend": 0.12730899453163147, "Cum % Cust": 0.4024390243902439}, {"Cum % Spend": 0.12751393020153046, "Cum % Cust": 0.4028201219512195}, {"Cum % Spend": 0.12771886587142944, "Cum % Cust": 0.4032012195121951}, {"Cum % Spend": 0.12792380154132843, "Cum % Cust": 0.4035823170731707}, {"Cum % Spend": 0.12812873721122742, "Cum % Cust": 0.40396341463414637}, {"Cum % Spend": 0.1283336728811264, "Cum % Cust": 0.40434451219512196}, {"Cum % Spend": 0.1285386085510254, "Cum % Cust": 0.40472560975609756}, {"Cum % Spend": 0.12874354422092438, "Cum % Cust": 0.40510670731707316}, {"Cum % Spend": 0.12894847989082336, "Cum % Cust": 0.4054878048780488}, {"Cum % Spend": 0.12915341556072235, "Cum % Cust": 0.4058689024390244}, {"Cum % Spend": 0.12935835123062134, "Cum % Cust": 0.40625}, {"Cum % Spend": 0.12956328690052032, "Cum % Cust": 0.4066310975609756}, {"Cum % Spend": 0.12976941466331482, "Cum % Cust": 0.4070121951219512}, {"Cum % Spend": 0.12997554242610931, "Cum % Cust": 0.40739329268292684}, {"Cum % Spend": 0.13018286228179932, "Cum % Cust": 0.40777439024390244}, {"Cum % Spend": 0.13039077818393707, "Cum % Cust": 0.40815548780487804}, {"Cum % Spend": 0.13059869408607483, "Cum % Cust": 0.40853658536585363}, {"Cum % Spend": 0.13080660998821259, "Cum % Cust": 0.4089176829268293}, {"Cum % Spend": 0.13101452589035034, "Cum % Cust": 0.4092987804878049}, {"Cum % Spend": 0.1312224417924881, "Cum % Cust": 0.4096798780487805}, {"Cum % Spend": 0.13143035769462585, "Cum % Cust": 0.4100609756097561}, {"Cum % Spend": 0.1316382735967636, "Cum % Cust": 0.4104420731707317}, {"Cum % Spend": 0.13184618949890137, "Cum % Cust": 0.4108231707317073}, {"Cum % Spend": 0.13205410540103912, "Cum % Cust": 0.4112042682926829}, {"Cum % Spend": 0.13226202130317688, "Cum % Cust": 0.4115853658536585}, {"Cum % Spend": 0.13246993720531464, "Cum % Cust": 0.41196646341463417}, {"Cum % Spend": 0.1326778531074524, "Cum % Cust": 0.41234756097560976}, {"Cum % Spend": 0.13288576900959015, "Cum % Cust": 0.41272865853658536}, {"Cum % Spend": 0.1330936849117279, "Cum % Cust": 0.41310975609756095}, {"Cum % Spend": 0.13330160081386566, "Cum % Cust": 0.4134908536585366}, {"Cum % Spend": 0.13350951671600342, "Cum % Cust": 0.4138719512195122}, {"Cum % Spend": 0.13371743261814117, "Cum % Cust": 0.4142530487804878}, {"Cum % Spend": 0.13392534852027893, "Cum % Cust": 0.4146341463414634}, {"Cum % Spend": 0.1341332644224167, "Cum % Cust": 0.41501524390243905}, {"Cum % Spend": 0.13434118032455444, "Cum % Cust": 0.41539634146341464}, {"Cum % Spend": 0.1345490962266922, "Cum % Cust": 0.41577743902439024}, {"Cum % Spend": 0.13475701212882996, "Cum % Cust": 0.41615853658536583}, {"Cum % Spend": 0.1349649280309677, "Cum % Cust": 0.4165396341463415}, {"Cum % Spend": 0.13517284393310547, "Cum % Cust": 0.4169207317073171}, {"Cum % Spend": 0.13538075983524323, "Cum % Cust": 0.4173018292682927}, {"Cum % Spend": 0.13558867573738098, "Cum % Cust": 0.4176829268292683}, {"Cum % Spend": 0.13579659163951874, "Cum % Cust": 0.4180640243902439}, {"Cum % Spend": 0.1360045075416565, "Cum % Cust": 0.4184451219512195}, {"Cum % Spend": 0.13621242344379425, "Cum % Cust": 0.4188262195121951}, {"Cum % Spend": 0.136420339345932, "Cum % Cust": 0.4192073170731707}, {"Cum % Spend": 0.13662825524806976, "Cum % Cust": 0.41958841463414637}, {"Cum % Spend": 0.13683617115020752, "Cum % Cust": 0.41996951219512196}, {"Cum % Spend": 0.13704408705234528, "Cum % Cust": 0.42035060975609756}, {"Cum % Spend": 0.13725200295448303, "Cum % Cust": 0.42073170731707316}, {"Cum % Spend": 0.1374599188566208, "Cum % Cust": 0.4211128048780488}, {"Cum % Spend": 0.1376684308052063, "Cum % Cust": 0.4214939024390244}, {"Cum % Spend": 0.1378769427537918, "Cum % Cust": 0.421875}, {"Cum % Spend": 0.13808545470237732, "Cum % Cust": 0.4222560975609756}, {"Cum % Spend": 0.13829486072063446, "Cum % Cust": 0.42263719512195125}, {"Cum % Spend": 0.13850516080856323, "Cum % Cust": 0.42301829268292684}, {"Cum % Spend": 0.138715460896492, "Cum % Cust": 0.42339939024390244}, {"Cum % Spend": 0.13892576098442078, "Cum % Cust": 0.42378048780487804}, {"Cum % Spend": 0.13913606107234955, "Cum % Cust": 0.42416158536585363}, {"Cum % Spend": 0.13934636116027832, "Cum % Cust": 0.4245426829268293}, {"Cum % Spend": 0.1395566612482071, "Cum % Cust": 0.4249237804878049}, {"Cum % Spend": 0.13976696133613586, "Cum % Cust": 0.4253048780487805}, {"Cum % Spend": 0.1399778574705124, "Cum % Cust": 0.4256859756097561}, {"Cum % Spend": 0.14018875360488892, "Cum % Cust": 0.4260670731707317}, {"Cum % Spend": 0.14039964973926544, "Cum % Cust": 0.4264481707317073}, {"Cum % Spend": 0.14061054587364197, "Cum % Cust": 0.4268292682926829}, {"Cum % Spend": 0.1408214420080185, "Cum % Cust": 0.4272103658536585}, {"Cum % Spend": 0.14103233814239502, "Cum % Cust": 0.42759146341463417}, {"Cum % Spend": 0.14124323427677155, "Cum % Cust": 0.42797256097560976}, {"Cum % Spend": 0.14145413041114807, "Cum % Cust": 0.42835365853658536}, {"Cum % Spend": 0.1416650265455246, "Cum % Cust": 0.42873475609756095}, {"Cum % Spend": 0.14187711477279663, "Cum % Cust": 0.4291158536585366}, {"Cum % Spend": 0.14208920300006866, "Cum % Cust": 0.4294969512195122}, {"Cum % Spend": 0.1423012912273407, "Cum % Cust": 0.4298780487804878}, {"Cum % Spend": 0.14251337945461273, "Cum % Cust": 0.4302591463414634}, {"Cum % Spend": 0.14272546768188477, "Cum % Cust": 0.43064024390243905}, {"Cum % Spend": 0.1429375559091568, "Cum % Cust": 0.43102134146341464}, {"Cum % Spend": 0.14315113425254822, "Cum % Cust": 0.43140243902439024}, {"Cum % Spend": 0.14336471259593964, "Cum % Cust": 0.43178353658536583}, {"Cum % Spend": 0.14357858896255493, "Cum % Cust": 0.4321646341463415}, {"Cum % Spend": 0.14379246532917023, "Cum % Cust": 0.4325457317073171}, {"Cum % Spend": 0.14400634169578552, "Cum % Cust": 0.4329268292682927}, {"Cum % Spend": 0.14422021806240082, "Cum % Cust": 0.4333079268292683}, {"Cum % Spend": 0.1444340944290161, "Cum % Cust": 0.4336890243902439}, {"Cum % Spend": 0.14465005695819855, "Cum % Cust": 0.4340701219512195}, {"Cum % Spend": 0.14486601948738098, "Cum % Cust": 0.4344512195121951}, {"Cum % Spend": 0.14508198201656342, "Cum % Cust": 0.4348323170731707}, {"Cum % Spend": 0.14529794454574585, "Cum % Cust": 0.43521341463414637}, {"Cum % Spend": 0.14551420509815216, "Cum % Cust": 0.43559451219512196}, {"Cum % Spend": 0.14573046565055847, "Cum % Cust": 0.43597560975609756}, {"Cum % Spend": 0.14594672620296478, "Cum % Cust": 0.43635670731707316}, {"Cum % Spend": 0.1461629867553711, "Cum % Cust": 0.4367378048780488}, {"Cum % Spend": 0.1463792473077774, "Cum % Cust": 0.4371189024390244}, {"Cum % Spend": 0.1465958058834076, "Cum % Cust": 0.4375}, {"Cum % Spend": 0.14681266248226166, "Cum % Cust": 0.4378810975609756}, {"Cum % Spend": 0.14703190326690674, "Cum % Cust": 0.43826219512195125}, {"Cum % Spend": 0.1472514420747757, "Cum % Cust": 0.43864329268292684}, {"Cum % Spend": 0.14747127890586853, "Cum % Cust": 0.43902439024390244}, {"Cum % Spend": 0.14769111573696136, "Cum % Cust": 0.43940548780487804}, {"Cum % Spend": 0.1479109525680542, "Cum % Cust": 0.43978658536585363}, {"Cum % Spend": 0.14813078939914703, "Cum % Cust": 0.4401676829268293}, {"Cum % Spend": 0.14835062623023987, "Cum % Cust": 0.4405487804878049}, {"Cum % Spend": 0.1485704630613327, "Cum % Cust": 0.4409298780487805}, {"Cum % Spend": 0.14879029989242554, "Cum % Cust": 0.4413109756097561}, {"Cum % Spend": 0.14901013672351837, "Cum % Cust": 0.4416920731707317}, {"Cum % Spend": 0.1492299735546112, "Cum % Cust": 0.4420731707317073}, {"Cum % Spend": 0.14944981038570404, "Cum % Cust": 0.4424542682926829}, {"Cum % Spend": 0.14966964721679688, "Cum % Cust": 0.4428353658536585}, {"Cum % Spend": 0.1498894840478897, "Cum % Cust": 0.44321646341463417}, {"Cum % Spend": 0.15011021494865417, "Cum % Cust": 0.44359756097560976}, {"Cum % Spend": 0.1503315418958664, "Cum % Cust": 0.44397865853658536}, {"Cum % Spend": 0.1505528688430786, "Cum % Cust": 0.44435975609756095}, {"Cum % Spend": 0.15077508985996246, "Cum % Cust": 0.4447408536585366}, {"Cum % Spend": 0.15099790692329407, "Cum % Cust": 0.4451219512195122}, {"Cum % Spend": 0.15122072398662567, "Cum % Cust": 0.4455030487804878}, {"Cum % Spend": 0.15144354104995728, "Cum % Cust": 0.4458841463414634}, {"Cum % Spend": 0.15166635811328888, "Cum % Cust": 0.44626524390243905}, {"Cum % Spend": 0.15189006924629211, "Cum % Cust": 0.44664634146341464}, {"Cum % Spend": 0.15211497247219086, "Cum % Cust": 0.44702743902439024}, {"Cum % Spend": 0.15234047174453735, "Cum % Cust": 0.44740853658536583}, {"Cum % Spend": 0.15256597101688385, "Cum % Cust": 0.4477896341463415}, {"Cum % Spend": 0.15279147028923035, "Cum % Cust": 0.4481707317073171}, {"Cum % Spend": 0.15301726758480072, "Cum % Cust": 0.4485518292682927}, {"Cum % Spend": 0.1532430648803711, "Cum % Cust": 0.4489329268292683}, {"Cum % Spend": 0.15347005426883698, "Cum % Cust": 0.4493140243902439}, {"Cum % Spend": 0.15369851887226105, "Cum % Cust": 0.4496951219512195}, {"Cum % Spend": 0.15392698347568512, "Cum % Cust": 0.4500762195121951}, {"Cum % Spend": 0.15415574610233307, "Cum % Cust": 0.4504573170731707}, {"Cum % Spend": 0.15438629686832428, "Cum % Cust": 0.45083841463414637}, {"Cum % Spend": 0.1546168476343155, "Cum % Cust": 0.45121951219512196}, {"Cum % Spend": 0.1548473984003067, "Cum % Cust": 0.45160060975609756}, {"Cum % Spend": 0.1550779491662979, "Cum % Cust": 0.45198170731707316}, {"Cum % Spend": 0.15530939400196075, "Cum % Cust": 0.4523628048780488}, {"Cum % Spend": 0.1555408388376236, "Cum % Cust": 0.4527439024390244}, {"Cum % Spend": 0.15577228367328644, "Cum % Cust": 0.453125}, {"Cum % Spend": 0.15600372850894928, "Cum % Cust": 0.4535060975609756}, {"Cum % Spend": 0.156235471367836, "Cum % Cust": 0.45388719512195125}, {"Cum % Spend": 0.1564687043428421, "Cum % Cust": 0.45426829268292684}, {"Cum % Spend": 0.1567019373178482, "Cum % Cust": 0.45464939024390244}, {"Cum % Spend": 0.15693576633930206, "Cum % Cust": 0.45503048780487804}, {"Cum % Spend": 0.15717019140720367, "Cum % Cust": 0.4554115853658537}, {"Cum % Spend": 0.15740461647510529, "Cum % Cust": 0.4557926829268293}, {"Cum % Spend": 0.1576390415430069, "Cum % Cust": 0.4561737804878049}, {"Cum % Spend": 0.1578734666109085, "Cum % Cust": 0.4565548780487805}, {"Cum % Spend": 0.15810789167881012, "Cum % Cust": 0.4569359756097561}, {"Cum % Spend": 0.15834499895572662, "Cum % Cust": 0.4573170731707317}, {"Cum % Spend": 0.15858210623264313, "Cum % Cust": 0.4576981707317073}, {"Cum % Spend": 0.15881921350955963, "Cum % Cust": 0.4580792682926829}, {"Cum % Spend": 0.1590566188097, "Cum % Cust": 0.4584603658536585}, {"Cum % Spend": 0.1592940241098404, "Cum % Cust": 0.45884146341463417}, {"Cum % Spend": 0.15953142940998077, "Cum % Cust": 0.45922256097560976}, {"Cum % Spend": 0.15977181494235992, "Cum % Cust": 0.45960365853658536}, {"Cum % Spend": 0.16001220047473907, "Cum % Cust": 0.45998475609756095}, {"Cum % Spend": 0.16025258600711823, "Cum % Cust": 0.4603658536585366}, {"Cum % Spend": 0.16049297153949738, "Cum % Cust": 0.4607469512195122}, {"Cum % Spend": 0.16073335707187653, "Cum % Cust": 0.4611280487804878}, {"Cum % Spend": 0.16097553074359894, "Cum % Cust": 0.4615091463414634}, {"Cum % Spend": 0.16121889650821686, "Cum % Cust": 0.46189024390243905}, {"Cum % Spend": 0.16146226227283478, "Cum % Cust": 0.46227134146341464}, {"Cum % Spend": 0.16170592606067657, "Cum % Cust": 0.46265243902439024}, {"Cum % Spend": 0.16195227205753326, "Cum % Cust": 0.46303353658536583}, {"Cum % Spend": 0.16219861805438995, "Cum % Cust": 0.4634146341463415}, {"Cum % Spend": 0.16244496405124664, "Cum % Cust": 0.4637957317073171}, {"Cum % Spend": 0.1626916080713272, "Cum % Cust": 0.4641768292682927}, {"Cum % Spend": 0.16293944418430328, "Cum % Cust": 0.4645579268292683}, {"Cum % Spend": 0.16318877041339874, "Cum % Cust": 0.4649390243902439}, {"Cum % Spend": 0.1634380966424942, "Cum % Cust": 0.4653201219512195}, {"Cum % Spend": 0.16368742287158966, "Cum % Cust": 0.4657012195121951}, {"Cum % Spend": 0.16393674910068512, "Cum % Cust": 0.4660823170731707}, {"Cum % Spend": 0.16418607532978058, "Cum % Cust": 0.46646341463414637}, {"Cum % Spend": 0.16443629562854767, "Cum % Cust": 0.46684451219512196}, {"Cum % Spend": 0.16468770802021027, "Cum % Cust": 0.46722560975609756}, {"Cum % Spend": 0.16493941843509674, "Cum % Cust": 0.46760670731707316}, {"Cum % Spend": 0.16519172489643097, "Cum % Cust": 0.4679878048780488}, {"Cum % Spend": 0.1654440313577652, "Cum % Cust": 0.4683689024390244}, {"Cum % Spend": 0.16569752991199493, "Cum % Cust": 0.46875}, {"Cum % Spend": 0.16595162451267242, "Cum % Cust": 0.4691310975609756}, {"Cum % Spend": 0.16620691120624542, "Cum % Cust": 0.46951219512195125}, {"Cum % Spend": 0.16646219789981842, "Cum % Cust": 0.46989329268292684}, {"Cum % Spend": 0.16671748459339142, "Cum % Cust": 0.47027439024390244}, {"Cum % Spend": 0.16697277128696442, "Cum % Cust": 0.47065548780487804}, {"Cum % Spend": 0.16722925007343292, "Cum % Cust": 0.4710365853658537}, {"Cum % Spend": 0.16748632490634918, "Cum % Cust": 0.4714176829268293}, {"Cum % Spend": 0.16774457693099976, "Cum % Cust": 0.4717987804878049}, {"Cum % Spend": 0.16800282895565033, "Cum % Cust": 0.4721798780487805}, {"Cum % Spend": 0.1682610809803009, "Cum % Cust": 0.4725609756097561}, {"Cum % Spend": 0.16851933300495148, "Cum % Cust": 0.4729420731707317}, {"Cum % Spend": 0.16877758502960205, "Cum % Cust": 0.4733231707317073}, {"Cum % Spend": 0.16903583705425262, "Cum % Cust": 0.4737042682926829}, {"Cum % Spend": 0.16929438710212708, "Cum % Cust": 0.4740853658536585}, {"Cum % Spend": 0.16955532133579254, "Cum % Cust": 0.47446646341463417}, {"Cum % Spend": 0.16981655359268188, "Cum % Cust": 0.47484756097560976}, {"Cum % Spend": 0.17007778584957123, "Cum % Cust": 0.47522865853658536}, {"Cum % Spend": 0.17033901810646057, "Cum % Cust": 0.47560975609756095}, {"Cum % Spend": 0.17060233652591705, "Cum % Cust": 0.4759908536585366}, {"Cum % Spend": 0.1708659529685974, "Cum % Cust": 0.4763719512195122}, {"Cum % Spend": 0.17113016545772552, "Cum % Cust": 0.4767530487804878}, {"Cum % Spend": 0.17139437794685364, "Cum % Cust": 0.4771341463414634}, {"Cum % Spend": 0.17165859043598175, "Cum % Cust": 0.47751524390243905}, {"Cum % Spend": 0.17192280292510986, "Cum % Cust": 0.47789634146341464}, {"Cum % Spend": 0.17218880355358124, "Cum % Cust": 0.47827743902439024}, {"Cum % Spend": 0.17245599627494812, "Cum % Cust": 0.47865853658536583}, {"Cum % Spend": 0.172723188996315, "Cum % Cust": 0.4790396341463415}, {"Cum % Spend": 0.17299038171768188, "Cum % Cust": 0.4794207317073171}, {"Cum % Spend": 0.17325757443904877, "Cum % Cust": 0.4798018292682927}, {"Cum % Spend": 0.17352476716041565, "Cum % Cust": 0.4801829268292683}, {"Cum % Spend": 0.1737949401140213, "Cum % Cust": 0.4805640243902439}, {"Cum % Spend": 0.17406511306762695, "Cum % Cust": 0.4809451219512195}, {"Cum % Spend": 0.1743352860212326, "Cum % Cust": 0.4813262195121951}, {"Cum % Spend": 0.17460545897483826, "Cum % Cust": 0.4817073170731707}, {"Cum % Spend": 0.1748756319284439, "Cum % Cust": 0.48208841463414637}, {"Cum % Spend": 0.17514759302139282, "Cum % Cust": 0.48246951219512196}, {"Cum % Spend": 0.17542044818401337, "Cum % Cust": 0.48285060975609756}, {"Cum % Spend": 0.1756936013698578, "Cum % Cust": 0.48323170731707316}, {"Cum % Spend": 0.1759667545557022, "Cum % Cust": 0.4836128048780488}, {"Cum % Spend": 0.17623990774154663, "Cum % Cust": 0.4839939024390244}, {"Cum % Spend": 0.17651425302028656, "Cum % Cust": 0.484375}, {"Cum % Spend": 0.17678919434547424, "Cum % Cust": 0.4847560975609756}, {"Cum % Spend": 0.1770644336938858, "Cum % Cust": 0.48513719512195125}, {"Cum % Spend": 0.17733997106552124, "Cum % Cust": 0.48551829268292684}, {"Cum % Spend": 0.17761550843715668, "Cum % Cust": 0.48589939024390244}, {"Cum % Spend": 0.17789164185523987, "Cum % Cust": 0.48628048780487804}, {"Cum % Spend": 0.17816777527332306, "Cum % Cust": 0.4866615853658537}, {"Cum % Spend": 0.17844390869140625, "Cum % Cust": 0.4870426829268293}, {"Cum % Spend": 0.17872004210948944, "Cum % Cust": 0.4874237804878049}, {"Cum % Spend": 0.1789964735507965, "Cum % Cust": 0.4878048780487805}, {"Cum % Spend": 0.17927290499210358, "Cum % Cust": 0.4881859756097561}, {"Cum % Spend": 0.17955082654953003, "Cum % Cust": 0.4885670731707317}, {"Cum % Spend": 0.17982934415340424, "Cum % Cust": 0.4889481707317073}, {"Cum % Spend": 0.1801084578037262, "Cum % Cust": 0.4893292682926829}, {"Cum % Spend": 0.18038757145404816, "Cum % Cust": 0.4897103658536585}, {"Cum % Spend": 0.18066668510437012, "Cum % Cust": 0.49009146341463417}, {"Cum % Spend": 0.18094579875469208, "Cum % Cust": 0.49047256097560976}, {"Cum % Spend": 0.1812267005443573, "Cum % Cust": 0.49085365853658536}, {"Cum % Spend": 0.18150879442691803, "Cum % Cust": 0.49123475609756095}, {"Cum % Spend": 0.18179088830947876, "Cum % Cust": 0.4916158536585366}, {"Cum % Spend": 0.1820753663778305, "Cum % Cust": 0.4919969512195122}, {"Cum % Spend": 0.18235984444618225, "Cum % Cust": 0.4923780487804878}, {"Cum % Spend": 0.18264462053775787, "Cum % Cust": 0.4927591463414634}, {"Cum % Spend": 0.1829293966293335, "Cum % Cust": 0.49314024390243905}, {"Cum % Spend": 0.183214470744133, "Cum % Cust": 0.49352134146341464}, {"Cum % Spend": 0.1834995448589325, "Cum % Cust": 0.49390243902439024}, {"Cum % Spend": 0.183784618973732, "Cum % Cust": 0.49428353658536583}, {"Cum % Spend": 0.1840696930885315, "Cum % Cust": 0.4946646341463415}, {"Cum % Spend": 0.184354767203331, "Cum % Cust": 0.4950457317073171}, {"Cum % Spend": 0.1846398413181305, "Cum % Cust": 0.4954268292682927}, {"Cum % Spend": 0.18492491543293, "Cum % Cust": 0.4958079268292683}, {"Cum % Spend": 0.1852099895477295, "Cum % Cust": 0.4961890243902439}, {"Cum % Spend": 0.18549565970897675, "Cum % Cust": 0.4965701219512195}, {"Cum % Spend": 0.18578340113162994, "Cum % Cust": 0.4969512195121951}, {"Cum % Spend": 0.18607144057750702, "Cum % Cust": 0.4973323170731707}, {"Cum % Spend": 0.1863594800233841, "Cum % Cust": 0.49771341463414637}, {"Cum % Spend": 0.18664751946926117, "Cum % Cust": 0.49809451219512196}, {"Cum % Spend": 0.18693555891513824, "Cum % Cust": 0.49847560975609756}, {"Cum % Spend": 0.18722359836101532, "Cum % Cust": 0.49885670731707316}, {"Cum % Spend": 0.1875116378068924, "Cum % Cust": 0.4992378048780488}, {"Cum % Spend": 0.18779967725276947, "Cum % Cust": 0.4996189024390244}, {"Cum % Spend": 0.18808771669864655, "Cum % Cust": 0.5}, {"Cum % Spend": 0.18837575614452362, "Cum % Cust": 0.5003810975609756}, {"Cum % Spend": 0.18866439163684845, "Cum % Cust": 0.5007621951219512}, {"Cum % Spend": 0.18895302712917328, "Cum % Cust": 0.5011432926829268}, {"Cum % Spend": 0.18924285471439362, "Cum % Cust": 0.5015243902439025}, {"Cum % Spend": 0.18953298032283783, "Cum % Cust": 0.5019054878048781}, {"Cum % Spend": 0.18982400000095367, "Cum % Cust": 0.5022865853658537}, {"Cum % Spend": 0.19011501967906952, "Cum % Cust": 0.5026676829268293}, {"Cum % Spend": 0.19040603935718536, "Cum % Cust": 0.5030487804878049}, {"Cum % Spend": 0.1906970590353012, "Cum % Cust": 0.5034298780487805}, {"Cum % Spend": 0.19098897278308868, "Cum % Cust": 0.5038109756097561}, {"Cum % Spend": 0.19128118455410004, "Cum % Cust": 0.5041920731707317}, {"Cum % Spend": 0.1915745884180069, "Cum % Cust": 0.5045731707317073}, {"Cum % Spend": 0.19186829030513763, "Cum % Cust": 0.504954268292683}, {"Cum % Spend": 0.19216229021549225, "Cum % Cust": 0.5053353658536586}, {"Cum % Spend": 0.19245629012584686, "Cum % Cust": 0.5057164634146342}, {"Cum % Spend": 0.19275029003620148, "Cum % Cust": 0.5060975609756098}, {"Cum % Spend": 0.1930442899465561, "Cum % Cust": 0.5064786585365854}, {"Cum % Spend": 0.1933382898569107, "Cum % Cust": 0.506859756097561}, {"Cum % Spend": 0.19363228976726532, "Cum % Cust": 0.5072408536585366}, {"Cum % Spend": 0.19392628967761993, "Cum % Cust": 0.5076219512195121}, {"Cum % Spend": 0.19422028958797455, "Cum % Cust": 0.5080030487804879}, {"Cum % Spend": 0.19451428949832916, "Cum % Cust": 0.5083841463414634}, {"Cum % Spend": 0.19480828940868378, "Cum % Cust": 0.508765243902439}, {"Cum % Spend": 0.1951022893190384, "Cum % Cust": 0.5091463414634146}, {"Cum % Spend": 0.195396289229393, "Cum % Cust": 0.5095274390243902}, {"Cum % Spend": 0.19569267332553864, "Cum % Cust": 0.5099085365853658}, {"Cum % Spend": 0.19598905742168427, "Cum % Cust": 0.5102896341463414}, {"Cum % Spend": 0.1962854415178299, "Cum % Cust": 0.510670731707317}, {"Cum % Spend": 0.19658242166042328, "Cum % Cust": 0.5110518292682927}, {"Cum % Spend": 0.19687940180301666, "Cum % Cust": 0.5114329268292683}, {"Cum % Spend": 0.19717638194561005, "Cum % Cust": 0.5118140243902439}, {"Cum % Spend": 0.19747336208820343, "Cum % Cust": 0.5121951219512195}, {"Cum % Spend": 0.19777034223079681, "Cum % Cust": 0.5125762195121951}, {"Cum % Spend": 0.1980673223733902, "Cum % Cust": 0.5129573170731707}, {"Cum % Spend": 0.19836430251598358, "Cum % Cust": 0.5133384146341463}, {"Cum % Spend": 0.19866128265857697, "Cum % Cust": 0.5137195121951219}, {"Cum % Spend": 0.19895826280117035, "Cum % Cust": 0.5141006097560976}, {"Cum % Spend": 0.19925524294376373, "Cum % Cust": 0.5144817073170732}, {"Cum % Spend": 0.19955222308635712, "Cum % Cust": 0.5148628048780488}, {"Cum % Spend": 0.1998492032289505, "Cum % Cust": 0.5152439024390244}, {"Cum % Spend": 0.20014618337154388, "Cum % Cust": 0.515625}, {"Cum % Spend": 0.20044316351413727, "Cum % Cust": 0.5160060975609756}, {"Cum % Spend": 0.20074014365673065, "Cum % Cust": 0.5163871951219512}, {"Cum % Spend": 0.20103712379932404, "Cum % Cust": 0.5167682926829268}, {"Cum % Spend": 0.20133410394191742, "Cum % Cust": 0.5171493902439025}, {"Cum % Spend": 0.2016310840845108, "Cum % Cust": 0.5175304878048781}, {"Cum % Spend": 0.2019280642271042, "Cum % Cust": 0.5179115853658537}, {"Cum % Spend": 0.20222623646259308, "Cum % Cust": 0.5182926829268293}, {"Cum % Spend": 0.20252619683742523, "Cum % Cust": 0.5186737804878049}, {"Cum % Spend": 0.20282615721225739, "Cum % Cust": 0.5190548780487805}, {"Cum % Spend": 0.20312611758708954, "Cum % Cust": 0.5194359756097561}, {"Cum % Spend": 0.2034260779619217, "Cum % Cust": 0.5198170731707317}, {"Cum % Spend": 0.20372603833675385, "Cum % Cust": 0.5201981707317074}, {"Cum % Spend": 0.204025998711586, "Cum % Cust": 0.520579268292683}, {"Cum % Spend": 0.20432595908641815, "Cum % Cust": 0.5209603658536586}, {"Cum % Spend": 0.2046259194612503, "Cum % Cust": 0.5213414634146342}, {"Cum % Spend": 0.20492587983608246, "Cum % Cust": 0.5217225609756098}, {"Cum % Spend": 0.2052258402109146, "Cum % Cust": 0.5221036585365854}, {"Cum % Spend": 0.20552580058574677, "Cum % Cust": 0.522484756097561}, {"Cum % Spend": 0.20582576096057892, "Cum % Cust": 0.5228658536585366}, {"Cum % Spend": 0.20612572133541107, "Cum % Cust": 0.5232469512195121}, {"Cum % Spend": 0.20642568171024323, "Cum % Cust": 0.5236280487804879}, {"Cum % Spend": 0.20672564208507538, "Cum % Cust": 0.5240091463414634}, {"Cum % Spend": 0.20702560245990753, "Cum % Cust": 0.524390243902439}, {"Cum % Spend": 0.20732556283473969, "Cum % Cust": 0.5247713414634146}, {"Cum % Spend": 0.20762552320957184, "Cum % Cust": 0.5251524390243902}, {"Cum % Spend": 0.207925483584404, "Cum % Cust": 0.5255335365853658}, {"Cum % Spend": 0.20822544395923615, "Cum % Cust": 0.5259146341463414}, {"Cum % Spend": 0.2085254043340683, "Cum % Cust": 0.526295731707317}, {"Cum % Spend": 0.20882536470890045, "Cum % Cust": 0.5266768292682927}, {"Cum % Spend": 0.2091253250837326, "Cum % Cust": 0.5270579268292683}, {"Cum % Spend": 0.20942528545856476, "Cum % Cust": 0.5274390243902439}, {"Cum % Spend": 0.2097252458333969, "Cum % Cust": 0.5278201219512195}, {"Cum % Spend": 0.21002639830112457, "Cum % Cust": 0.5282012195121951}, {"Cum % Spend": 0.2103281468153, "Cum % Cust": 0.5285823170731707}, {"Cum % Spend": 0.21063019335269928, "Cum % Cust": 0.5289634146341463}, {"Cum % Spend": 0.21093223989009857, "Cum % Cust": 0.5293445121951219}, {"Cum % Spend": 0.21123428642749786, "Cum % Cust": 0.5297256097560976}, {"Cum % Spend": 0.21153633296489716, "Cum % Cust": 0.5301067073170732}, {"Cum % Spend": 0.21183837950229645, "Cum % Cust": 0.5304878048780488}, {"Cum % Spend": 0.21214042603969574, "Cum % Cust": 0.5308689024390244}, {"Cum % Spend": 0.21244247257709503, "Cum % Cust": 0.53125}, {"Cum % Spend": 0.21274451911449432, "Cum % Cust": 0.5316310975609756}, {"Cum % Spend": 0.21304656565189362, "Cum % Cust": 0.5320121951219512}, {"Cum % Spend": 0.21334891021251678, "Cum % Cust": 0.5323932926829268}, {"Cum % Spend": 0.21365155279636383, "Cum % Cust": 0.5327743902439025}, {"Cum % Spend": 0.21395449340343475, "Cum % Cust": 0.5331554878048781}, {"Cum % Spend": 0.21425743401050568, "Cum % Cust": 0.5335365853658537}, {"Cum % Spend": 0.2145603746175766, "Cum % Cust": 0.5339176829268293}, {"Cum % Spend": 0.21486331522464752, "Cum % Cust": 0.5342987804878049}, {"Cum % Spend": 0.21516625583171844, "Cum % Cust": 0.5346798780487805}, {"Cum % Spend": 0.21546919643878937, "Cum % Cust": 0.5350609756097561}, {"Cum % Spend": 0.2157721370458603, "Cum % Cust": 0.5354420731707317}, {"Cum % Spend": 0.2160750776529312, "Cum % Cust": 0.5358231707317074}, {"Cum % Spend": 0.21637801826000214, "Cum % Cust": 0.536204268292683}, {"Cum % Spend": 0.21668095886707306, "Cum % Cust": 0.5365853658536586}, {"Cum % Spend": 0.21698389947414398, "Cum % Cust": 0.5369664634146342}, {"Cum % Spend": 0.2172868400812149, "Cum % Cust": 0.5373475609756098}, {"Cum % Spend": 0.21758978068828583, "Cum % Cust": 0.5377286585365854}, {"Cum % Spend": 0.21789272129535675, "Cum % Cust": 0.538109756097561}, {"Cum % Spend": 0.21819566190242767, "Cum % Cust": 0.5384908536585366}, {"Cum % Spend": 0.2184986025094986, "Cum % Cust": 0.5388719512195121}, {"Cum % Spend": 0.21880154311656952, "Cum % Cust": 0.5392530487804879}, {"Cum % Spend": 0.21910448372364044, "Cum % Cust": 0.5396341463414634}, {"Cum % Spend": 0.21940742433071136, "Cum % Cust": 0.540015243902439}, {"Cum % Spend": 0.2197103649377823, "Cum % Cust": 0.5403963414634146}, {"Cum % Spend": 0.2200133055448532, "Cum % Cust": 0.5407774390243902}, {"Cum % Spend": 0.22031624615192413, "Cum % Cust": 0.5411585365853658}, {"Cum % Spend": 0.22062037885189056, "Cum % Cust": 0.5415396341463414}, {"Cum % Spend": 0.22092600166797638, "Cum % Cust": 0.541920731707317}, {"Cum % Spend": 0.2212316244840622, "Cum % Cust": 0.5423018292682927}, {"Cum % Spend": 0.2215375453233719, "Cum % Cust": 0.5426829268292683}, {"Cum % Spend": 0.22184346616268158, "Cum % Cust": 0.5430640243902439}, {"Cum % Spend": 0.22214938700199127, "Cum % Cust": 0.5434451219512195}, {"Cum % Spend": 0.22245530784130096, "Cum % Cust": 0.5438262195121951}, {"Cum % Spend": 0.22276122868061066, "Cum % Cust": 0.5442073170731707}, {"Cum % Spend": 0.22306714951992035, "Cum % Cust": 0.5445884146341463}, {"Cum % Spend": 0.22337307035923004, "Cum % Cust": 0.5449695121951219}, {"Cum % Spend": 0.22367899119853973, "Cum % Cust": 0.5453506097560976}, {"Cum % Spend": 0.22398491203784943, "Cum % Cust": 0.5457317073170732}, {"Cum % Spend": 0.22429083287715912, "Cum % Cust": 0.5461128048780488}, {"Cum % Spend": 0.2245967537164688, "Cum % Cust": 0.5464939024390244}, {"Cum % Spend": 0.2249026745557785, "Cum % Cust": 0.546875}, {"Cum % Spend": 0.2252085953950882, "Cum % Cust": 0.5472560975609756}, {"Cum % Spend": 0.2255145162343979, "Cum % Cust": 0.5476371951219512}, {"Cum % Spend": 0.22582043707370758, "Cum % Cust": 0.5480182926829268}, {"Cum % Spend": 0.22612635791301727, "Cum % Cust": 0.5483993902439025}, {"Cum % Spend": 0.22643227875232697, "Cum % Cust": 0.5487804878048781}, {"Cum % Spend": 0.22673819959163666, "Cum % Cust": 0.5491615853658537}, {"Cum % Spend": 0.22704412043094635, "Cum % Cust": 0.5495426829268293}, {"Cum % Spend": 0.22735004127025604, "Cum % Cust": 0.5499237804878049}, {"Cum % Spend": 0.22765596210956573, "Cum % Cust": 0.5503048780487805}, {"Cum % Spend": 0.22796188294887543, "Cum % Cust": 0.5506859756097561}, {"Cum % Spend": 0.22826780378818512, "Cum % Cust": 0.5510670731707317}, {"Cum % Spend": 0.2285740226507187, "Cum % Cust": 0.5514481707317074}, {"Cum % Spend": 0.22888053953647614, "Cum % Cust": 0.551829268292683}, {"Cum % Spend": 0.2291882485151291, "Cum % Cust": 0.5522103658536586}, {"Cum % Spend": 0.22949685156345367, "Cum % Cust": 0.5525914634146342}, {"Cum % Spend": 0.22980545461177826, "Cum % Cust": 0.5529725609756098}, {"Cum % Spend": 0.23011435568332672, "Cum % Cust": 0.5533536585365854}, {"Cum % Spend": 0.23042325675487518, "Cum % Cust": 0.553734756097561}, {"Cum % Spend": 0.23073215782642365, "Cum % Cust": 0.5541158536585366}, {"Cum % Spend": 0.2310410588979721, "Cum % Cust": 0.5544969512195121}, {"Cum % Spend": 0.23134995996952057, "Cum % Cust": 0.5548780487804879}, {"Cum % Spend": 0.23165886104106903, "Cum % Cust": 0.5552591463414634}, {"Cum % Spend": 0.2319677621126175, "Cum % Cust": 0.555640243902439}, {"Cum % Spend": 0.23227666318416595, "Cum % Cust": 0.5560213414634146}, {"Cum % Spend": 0.23258556425571442, "Cum % Cust": 0.5564024390243902}, {"Cum % Spend": 0.23289446532726288, "Cum % Cust": 0.5567835365853658}, {"Cum % Spend": 0.23320336639881134, "Cum % Cust": 0.5571646341463414}, {"Cum % Spend": 0.2335122674703598, "Cum % Cust": 0.557545731707317}, {"Cum % Spend": 0.23382116854190826, "Cum % Cust": 0.5579268292682927}, {"Cum % Spend": 0.23413006961345673, "Cum % Cust": 0.5583079268292683}, {"Cum % Spend": 0.2344389706850052, "Cum % Cust": 0.5586890243902439}, {"Cum % Spend": 0.23474787175655365, "Cum % Cust": 0.5590701219512195}, {"Cum % Spend": 0.2350567728281021, "Cum % Cust": 0.5594512195121951}, {"Cum % Spend": 0.23536567389965057, "Cum % Cust": 0.5598323170731707}, {"Cum % Spend": 0.23567457497119904, "Cum % Cust": 0.5602134146341463}, {"Cum % Spend": 0.2359834760427475, "Cum % Cust": 0.5605945121951219}, {"Cum % Spend": 0.23629237711429596, "Cum % Cust": 0.5609756097560976}, {"Cum % Spend": 0.23660247027873993, "Cum % Cust": 0.5613567073170732}, {"Cum % Spend": 0.2369125634431839, "Cum % Cust": 0.5617378048780488}, {"Cum % Spend": 0.23722295463085175, "Cum % Cust": 0.5621189024390244}, {"Cum % Spend": 0.23753423988819122, "Cum % Cust": 0.5625}, {"Cum % Spend": 0.2378455251455307, "Cum % Cust": 0.5628810975609756}, {"Cum % Spend": 0.23815681040287018, "Cum % Cust": 0.5632621951219512}, {"Cum % Spend": 0.23846809566020966, "Cum % Cust": 0.5636432926829268}, {"Cum % Spend": 0.238779678940773, "Cum % Cust": 0.5640243902439025}, {"Cum % Spend": 0.23909156024456024, "Cum % Cust": 0.5644054878048781}, {"Cum % Spend": 0.23940344154834747, "Cum % Cust": 0.5647865853658537}, {"Cum % Spend": 0.2397153228521347, "Cum % Cust": 0.5651676829268293}, {"Cum % Spend": 0.24002720415592194, "Cum % Cust": 0.5655487804878049}, {"Cum % Spend": 0.24033908545970917, "Cum % Cust": 0.5659298780487805}, {"Cum % Spend": 0.2406509667634964, "Cum % Cust": 0.5663109756097561}, {"Cum % Spend": 0.24096284806728363, "Cum % Cust": 0.5666920731707317}, {"Cum % Spend": 0.24127472937107086, "Cum % Cust": 0.5670731707317074}, {"Cum % Spend": 0.2415866106748581, "Cum % Cust": 0.567454268292683}, {"Cum % Spend": 0.24189849197864532, "Cum % Cust": 0.5678353658536586}, {"Cum % Spend": 0.24221037328243256, "Cum % Cust": 0.5682164634146342}, {"Cum % Spend": 0.2425222545862198, "Cum % Cust": 0.5685975609756098}, {"Cum % Spend": 0.24283413589000702, "Cum % Cust": 0.5689786585365854}, {"Cum % Spend": 0.24314601719379425, "Cum % Cust": 0.569359756097561}, {"Cum % Spend": 0.24345789849758148, "Cum % Cust": 0.5697408536585366}, {"Cum % Spend": 0.2437697798013687, "Cum % Cust": 0.5701219512195121}, {"Cum % Spend": 0.24408166110515594, "Cum % Cust": 0.5705030487804879}, {"Cum % Spend": 0.24439413845539093, "Cum % Cust": 0.5708841463414634}, {"Cum % Spend": 0.24470661580562592, "Cum % Cust": 0.571265243902439}, {"Cum % Spend": 0.2450202852487564, "Cum % Cust": 0.5716463414634146}, {"Cum % Spend": 0.24533455073833466, "Cum % Cust": 0.5720274390243902}, {"Cum % Spend": 0.2456488162279129, "Cum % Cust": 0.5724085365853658}, {"Cum % Spend": 0.24596308171749115, "Cum % Cust": 0.5727896341463414}, {"Cum % Spend": 0.2462773472070694, "Cum % Cust": 0.573170731707317}, {"Cum % Spend": 0.24659161269664764, "Cum % Cust": 0.5735518292682927}, {"Cum % Spend": 0.2469058781862259, "Cum % Cust": 0.5739329268292683}, {"Cum % Spend": 0.24722014367580414, "Cum % Cust": 0.5743140243902439}, {"Cum % Spend": 0.24753440916538239, "Cum % Cust": 0.5746951219512195}, {"Cum % Spend": 0.2478489726781845, "Cum % Cust": 0.5750762195121951}, {"Cum % Spend": 0.24816353619098663, "Cum % Cust": 0.5754573170731707}, {"Cum % Spend": 0.24847809970378876, "Cum % Cust": 0.5758384146341463}, {"Cum % Spend": 0.24879266321659088, "Cum % Cust": 0.5762195121951219}, {"Cum % Spend": 0.24910752475261688, "Cum % Cust": 0.5766006097560976}, {"Cum % Spend": 0.24942238628864288, "Cum % Cust": 0.5769817073170732}, {"Cum % Spend": 0.24973724782466888, "Cum % Cust": 0.5773628048780488}, {"Cum % Spend": 0.2500529885292053, "Cum % Cust": 0.5777439024390244}, {"Cum % Spend": 0.25036904215812683, "Cum % Cust": 0.578125}, {"Cum % Spend": 0.2506856918334961, "Cum % Cust": 0.5785060975609756}, {"Cum % Spend": 0.25100234150886536, "Cum % Cust": 0.5788871951219512}, {"Cum % Spend": 0.2513195872306824, "Cum % Cust": 0.5792682926829268}, {"Cum % Spend": 0.25163713097572327, "Cum % Cust": 0.5796493902439025}, {"Cum % Spend": 0.25195497274398804, "Cum % Cust": 0.5800304878048781}, {"Cum % Spend": 0.2522728145122528, "Cum % Cust": 0.5804115853658537}, {"Cum % Spend": 0.2525906562805176, "Cum % Cust": 0.5807926829268293}, {"Cum % Spend": 0.25290849804878235, "Cum % Cust": 0.5811737804878049}, {"Cum % Spend": 0.2532263398170471, "Cum % Cust": 0.5815548780487805}, {"Cum % Spend": 0.25354477763175964, "Cum % Cust": 0.5819359756097561}, {"Cum % Spend": 0.25386321544647217, "Cum % Cust": 0.5823170731707317}, {"Cum % Spend": 0.2541816532611847, "Cum % Cust": 0.5826981707317074}, {"Cum % Spend": 0.25450068712234497, "Cum % Cust": 0.583079268292683}, {"Cum % Spend": 0.25482091307640076, "Cum % Cust": 0.5834603658536586}, {"Cum % Spend": 0.25514113903045654, "Cum % Cust": 0.5838414634146342}, {"Cum % Spend": 0.2554616630077362, "Cum % Cust": 0.5842225609756098}, {"Cum % Spend": 0.25578218698501587, "Cum % Cust": 0.5846036585365854}, {"Cum % Spend": 0.2561030089855194, "Cum % Cust": 0.584984756097561}, {"Cum % Spend": 0.2564244270324707, "Cum % Cust": 0.5853658536585366}, {"Cum % Spend": 0.25674644112586975, "Cum % Cust": 0.5857469512195123}, {"Cum % Spend": 0.25706905126571655, "Cum % Cust": 0.5861280487804879}, {"Cum % Spend": 0.25739166140556335, "Cum % Cust": 0.5865091463414634}, {"Cum % Spend": 0.2577151656150818, "Cum % Cust": 0.586890243902439}, {"Cum % Spend": 0.2580386698246002, "Cum % Cust": 0.5872713414634146}, {"Cum % Spend": 0.25836247205734253, "Cum % Cust": 0.5876524390243902}, {"Cum % Spend": 0.25868627429008484, "Cum % Cust": 0.5880335365853658}, {"Cum % Spend": 0.25901007652282715, "Cum % Cust": 0.5884146341463414}, {"Cum % Spend": 0.25933536887168884, "Cum % Cust": 0.588795731707317}, {"Cum % Spend": 0.25966155529022217, "Cum % Cust": 0.5891768292682927}, {"Cum % Spend": 0.2599877417087555, "Cum % Cust": 0.5895579268292683}, {"Cum % Spend": 0.2603139281272888, "Cum % Cust": 0.5899390243902439}, {"Cum % Spend": 0.26064011454582214, "Cum % Cust": 0.5903201219512195}, {"Cum % Spend": 0.26096630096435547, "Cum % Cust": 0.5907012195121951}, {"Cum % Spend": 0.26129308342933655, "Cum % Cust": 0.5910823170731707}, {"Cum % Spend": 0.26162225008010864, "Cum % Cust": 0.5914634146341463}, {"Cum % Spend": 0.26195141673088074, "Cum % Cust": 0.5918445121951219}, {"Cum % Spend": 0.26228058338165283, "Cum % Cust": 0.5922256097560976}, {"Cum % Spend": 0.2626100480556488, "Cum % Cust": 0.5926067073170732}, {"Cum % Spend": 0.2629395127296448, "Cum % Cust": 0.5929878048780488}, {"Cum % Spend": 0.2632692754268646, "Cum % Cust": 0.5933689024390244}, {"Cum % Spend": 0.2635990381240845, "Cum % Cust": 0.59375}, {"Cum % Spend": 0.2639288008213043, "Cum % Cust": 0.5941310975609756}, {"Cum % Spend": 0.26425856351852417, "Cum % Cust": 0.5945121951219512}, {"Cum % Spend": 0.2645898163318634, "Cum % Cust": 0.5948932926829268}, {"Cum % Spend": 0.26492106914520264, "Cum % Cust": 0.5952743902439025}, {"Cum % Spend": 0.2652535140514374, "Cum % Cust": 0.5956554878048781}, {"Cum % Spend": 0.2655859589576721, "Cum % Cust": 0.5960365853658537}, {"Cum % Spend": 0.26591840386390686, "Cum % Cust": 0.5964176829268293}, {"Cum % Spend": 0.2662508487701416, "Cum % Cust": 0.5967987804878049}, {"Cum % Spend": 0.2665835916996002, "Cum % Cust": 0.5971798780487805}, {"Cum % Spend": 0.26691633462905884, "Cum % Cust": 0.5975609756097561}, {"Cum % Spend": 0.26724907755851746, "Cum % Cust": 0.5979420731707317}, {"Cum % Spend": 0.2675829827785492, "Cum % Cust": 0.5983231707317074}, {"Cum % Spend": 0.2679183781147003, "Cum % Cust": 0.598704268292683}, {"Cum % Spend": 0.26825377345085144, "Cum % Cust": 0.5990853658536586}, {"Cum % Spend": 0.26858916878700256, "Cum % Cust": 0.5994664634146342}, {"Cum % Spend": 0.2689245641231537, "Cum % Cust": 0.5998475609756098}, {"Cum % Spend": 0.2692599594593048, "Cum % Cust": 0.6002286585365854}, {"Cum % Spend": 0.2695983350276947, "Cum % Cust": 0.600609756097561}, {"Cum % Spend": 0.2699367105960846, "Cum % Cust": 0.6009908536585366}, {"Cum % Spend": 0.2702750861644745, "Cum % Cust": 0.6013719512195123}, {"Cum % Spend": 0.2706134617328644, "Cum % Cust": 0.6017530487804879}, {"Cum % Spend": 0.2709539234638214, "Cum % Cust": 0.6021341463414634}, {"Cum % Spend": 0.2712952792644501, "Cum % Cust": 0.602515243902439}, {"Cum % Spend": 0.27163663506507874, "Cum % Cust": 0.6028963414634146}, {"Cum % Spend": 0.2719803750514984, "Cum % Cust": 0.6032774390243902}, {"Cum % Spend": 0.27232471108436584, "Cum % Cust": 0.6036585365853658}, {"Cum % Spend": 0.27267053723335266, "Cum % Cust": 0.6040396341463414}, {"Cum % Spend": 0.2730163633823395, "Cum % Cust": 0.604420731707317}, {"Cum % Spend": 0.27336278557777405, "Cum % Cust": 0.6048018292682927}, {"Cum % Spend": 0.273710697889328, "Cum % Cust": 0.6051829268292683}, {"Cum % Spend": 0.274060994386673, "Cum % Cust": 0.6055640243902439}, {"Cum % Spend": 0.27441129088401794, "Cum % Cust": 0.6059451219512195}, {"Cum % Spend": 0.2747618854045868, "Cum % Cust": 0.6063262195121951}, {"Cum % Spend": 0.27511516213417053, "Cum % Cust": 0.6067073170731707}, {"Cum % Spend": 0.2754684388637543, "Cum % Cust": 0.6070884146341463}, {"Cum % Spend": 0.2758246958255768, "Cum % Cust": 0.6074695121951219}, {"Cum % Spend": 0.27618125081062317, "Cum % Cust": 0.6078506097560976}, {"Cum % Spend": 0.27653929591178894, "Cum % Cust": 0.6082317073170732}, {"Cum % Spend": 0.2768973410129547, "Cum % Cust": 0.6086128048780488}, {"Cum % Spend": 0.2772562801837921, "Cum % Cust": 0.6089939024390244}, {"Cum % Spend": 0.27761581540107727, "Cum % Cust": 0.609375}, {"Cum % Spend": 0.2779753506183624, "Cum % Cust": 0.6097560975609756}, {"Cum % Spend": 0.2783360779285431, "Cum % Cust": 0.6101371951219512}, {"Cum % Spend": 0.27869680523872375, "Cum % Cust": 0.6105182926829268}, {"Cum % Spend": 0.27905842661857605, "Cum % Cust": 0.6108993902439025}, {"Cum % Spend": 0.2794206440448761, "Cum % Cust": 0.6112804878048781}, {"Cum % Spend": 0.27978286147117615, "Cum % Cust": 0.6116615853658537}, {"Cum % Spend": 0.2801462709903717, "Cum % Cust": 0.6120426829268293}, {"Cum % Spend": 0.280510276556015, "Cum % Cust": 0.6124237804878049}, {"Cum % Spend": 0.28087547421455383, "Cum % Cust": 0.6128048780487805}, {"Cum % Spend": 0.28124067187309265, "Cum % Cust": 0.6131859756097561}, {"Cum % Spend": 0.28160884976387024, "Cum % Cust": 0.6135670731707317}, {"Cum % Spend": 0.2819770276546478, "Cum % Cust": 0.6139481707317074}, {"Cum % Spend": 0.2823455035686493, "Cum % Cust": 0.614329268292683}, {"Cum % Spend": 0.282715767621994, "Cum % Cust": 0.6147103658536586}, {"Cum % Spend": 0.2830869257450104, "Cum % Cust": 0.6150914634146342}, {"Cum % Spend": 0.28345808386802673, "Cum % Cust": 0.6154725609756098}, {"Cum % Spend": 0.2838307321071625, "Cum % Cust": 0.6158536585365854}, {"Cum % Spend": 0.2842048704624176, "Cum % Cust": 0.616234756097561}, {"Cum % Spend": 0.28457900881767273, "Cum % Cust": 0.6166158536585366}, {"Cum % Spend": 0.28495314717292786, "Cum % Cust": 0.6169969512195123}, {"Cum % Spend": 0.285327285528183, "Cum % Cust": 0.6173780487804879}, {"Cum % Spend": 0.2857014238834381, "Cum % Cust": 0.6177591463414634}, {"Cum % Spend": 0.28607556223869324, "Cum % Cust": 0.618140243902439}, {"Cum % Spend": 0.28644970059394836, "Cum % Cust": 0.6185213414634146}, {"Cum % Spend": 0.28682592511177063, "Cum % Cust": 0.6189024390243902}, {"Cum % Spend": 0.28720274567604065, "Cum % Cust": 0.6192835365853658}, {"Cum % Spend": 0.28757986426353455, "Cum % Cust": 0.6196646341463414}, {"Cum % Spend": 0.28795698285102844, "Cum % Cust": 0.620045731707317}, {"Cum % Spend": 0.28833410143852234, "Cum % Cust": 0.6204268292682927}, {"Cum % Spend": 0.2887130081653595, "Cum % Cust": 0.6208079268292683}, {"Cum % Spend": 0.28909191489219666, "Cum % Cust": 0.6211890243902439}, {"Cum % Spend": 0.28947171568870544, "Cum % Cust": 0.6215701219512195}, {"Cum % Spend": 0.2898518145084381, "Cum % Cust": 0.6219512195121951}, {"Cum % Spend": 0.2902319133281708, "Cum % Cust": 0.6223323170731707}, {"Cum % Spend": 0.2906138002872467, "Cum % Cust": 0.6227134146341463}, {"Cum % Spend": 0.29099658131599426, "Cum % Cust": 0.6230945121951219}, {"Cum % Spend": 0.2913793623447418, "Cum % Cust": 0.6234756097560976}, {"Cum % Spend": 0.2917621433734894, "Cum % Cust": 0.6238567073170732}, {"Cum % Spend": 0.2921452224254608, "Cum % Cust": 0.6242378048780488}, {"Cum % Spend": 0.29252830147743225, "Cum % Cust": 0.6246189024390244}, {"Cum % Spend": 0.2929113805294037, "Cum % Cust": 0.625}, {"Cum % Spend": 0.2932944595813751, "Cum % Cust": 0.6253810975609756}, {"Cum % Spend": 0.29367753863334656, "Cum % Cust": 0.6257621951219512}, {"Cum % Spend": 0.294060617685318, "Cum % Cust": 0.6261432926829268}, {"Cum % Spend": 0.29444369673728943, "Cum % Cust": 0.6265243902439025}, {"Cum % Spend": 0.29482796788215637, "Cum % Cust": 0.6269054878048781}, {"Cum % Spend": 0.2952122390270233, "Cum % Cust": 0.6272865853658537}, {"Cum % Spend": 0.29559800028800964, "Cum % Cust": 0.6276676829268293}, {"Cum % Spend": 0.29598405957221985, "Cum % Cust": 0.6280487804878049}, {"Cum % Spend": 0.29637011885643005, "Cum % Cust": 0.6284298780487805}, {"Cum % Spend": 0.29675617814064026, "Cum % Cust": 0.6288109756097561}, {"Cum % Spend": 0.29714223742485046, "Cum % Cust": 0.6291920731707317}, {"Cum % Spend": 0.29752829670906067, "Cum % Cust": 0.6295731707317074}, {"Cum % Spend": 0.2979155480861664, "Cum % Cust": 0.629954268292683}, {"Cum % Spend": 0.29830309748649597, "Cum % Cust": 0.6303353658536586}, {"Cum % Spend": 0.29869094491004944, "Cum % Cust": 0.6307164634146342}, {"Cum % Spend": 0.2990790903568268, "Cum % Cust": 0.6310975609756098}, {"Cum % Spend": 0.29946812987327576, "Cum % Cust": 0.6314786585365854}, {"Cum % Spend": 0.29985716938972473, "Cum % Cust": 0.631859756097561}, {"Cum % Spend": 0.3002462089061737, "Cum % Cust": 0.6322408536585366}, {"Cum % Spend": 0.3006352484226227, "Cum % Cust": 0.6326219512195123}, {"Cum % Spend": 0.3010248839855194, "Cum % Cust": 0.6330030487804879}, {"Cum % Spend": 0.30141541361808777, "Cum % Cust": 0.6333841463414634}, {"Cum % Spend": 0.30180713534355164, "Cum % Cust": 0.633765243902439}, {"Cum % Spend": 0.3021988570690155, "Cum % Cust": 0.6341463414634146}, {"Cum % Spend": 0.30259087681770325, "Cum % Cust": 0.6345274390243902}, {"Cum % Spend": 0.302982896566391, "Cum % Cust": 0.6349085365853658}, {"Cum % Spend": 0.30337491631507874, "Cum % Cust": 0.6352896341463414}, {"Cum % Spend": 0.3037669360637665, "Cum % Cust": 0.635670731707317}, {"Cum % Spend": 0.3041589558124542, "Cum % Cust": 0.6360518292682927}, {"Cum % Spend": 0.30455097556114197, "Cum % Cust": 0.6364329268292683}, {"Cum % Spend": 0.30494388937950134, "Cum % Cust": 0.6368140243902439}, {"Cum % Spend": 0.30533739924430847, "Cum % Cust": 0.6371951219512195}, {"Cum % Spend": 0.30573147535324097, "Cum % Cust": 0.6375762195121951}, {"Cum % Spend": 0.3061264455318451, "Cum % Cust": 0.6379573170731707}, {"Cum % Spend": 0.3065214157104492, "Cum % Cust": 0.6383384146341463}, {"Cum % Spend": 0.30691638588905334, "Cum % Cust": 0.6387195121951219}, {"Cum % Spend": 0.30731135606765747, "Cum % Cust": 0.6391006097560976}, {"Cum % Spend": 0.3077063262462616, "Cum % Cust": 0.6394817073170732}, {"Cum % Spend": 0.3081012964248657, "Cum % Cust": 0.6398628048780488}, {"Cum % Spend": 0.30849626660346985, "Cum % Cust": 0.6402439024390244}, {"Cum % Spend": 0.308891236782074, "Cum % Cust": 0.640625}, {"Cum % Spend": 0.30928680300712585, "Cum % Cust": 0.6410060975609756}, {"Cum % Spend": 0.3096829652786255, "Cum % Cust": 0.6413871951219512}, {"Cum % Spend": 0.31008031964302063, "Cum % Cust": 0.6417682926829268}, {"Cum % Spend": 0.31047797203063965, "Cum % Cust": 0.6421493902439025}, {"Cum % Spend": 0.31087592244148254, "Cum % Cust": 0.6425304878048781}, {"Cum % Spend": 0.31127387285232544, "Cum % Cust": 0.6429115853658537}, {"Cum % Spend": 0.31167182326316833, "Cum % Cust": 0.6432926829268293}, {"Cum % Spend": 0.31206977367401123, "Cum % Cust": 0.6436737804878049}, {"Cum % Spend": 0.3124677240848541, "Cum % Cust": 0.6440548780487805}, {"Cum % Spend": 0.312865674495697, "Cum % Cust": 0.6444359756097561}, {"Cum % Spend": 0.3132636249065399, "Cum % Cust": 0.6448170731707317}, {"Cum % Spend": 0.3136615753173828, "Cum % Cust": 0.6451981707317074}, {"Cum % Spend": 0.3140595257282257, "Cum % Cust": 0.645579268292683}, {"Cum % Spend": 0.3144577741622925, "Cum % Cust": 0.6459603658536586}, {"Cum % Spend": 0.31485632061958313, "Cum % Cust": 0.6463414634146342}, {"Cum % Spend": 0.31525546312332153, "Cum % Cust": 0.6467225609756098}, {"Cum % Spend": 0.3156549036502838, "Cum % Cust": 0.6471036585365854}, {"Cum % Spend": 0.3160558342933655, "Cum % Cust": 0.647484756097561}, {"Cum % Spend": 0.31645676493644714, "Cum % Cust": 0.6478658536585366}, {"Cum % Spend": 0.3168576955795288, "Cum % Cust": 0.6482469512195123}, {"Cum % Spend": 0.3172586262226105, "Cum % Cust": 0.6486280487804879}, {"Cum % Spend": 0.31765955686569214, "Cum % Cust": 0.6490091463414634}, {"Cum % Spend": 0.3180604875087738, "Cum % Cust": 0.649390243902439}, {"Cum % Spend": 0.31846141815185547, "Cum % Cust": 0.6497713414634146}, {"Cum % Spend": 0.31886234879493713, "Cum % Cust": 0.6501524390243902}, {"Cum % Spend": 0.3192632794380188, "Cum % Cust": 0.6505335365853658}, {"Cum % Spend": 0.31966421008110046, "Cum % Cust": 0.6509146341463414}, {"Cum % Spend": 0.32006514072418213, "Cum % Cust": 0.651295731707317}, {"Cum % Spend": 0.3204660713672638, "Cum % Cust": 0.6516768292682927}, {"Cum % Spend": 0.32086700201034546, "Cum % Cust": 0.6520579268292683}, {"Cum % Spend": 0.3212679326534271, "Cum % Cust": 0.6524390243902439}, {"Cum % Spend": 0.3216700553894043, "Cum % Cust": 0.6528201219512195}, {"Cum % Spend": 0.3220727741718292, "Cum % Cust": 0.6532012195121951}, {"Cum % Spend": 0.32247549295425415, "Cum % Cust": 0.6535823170731707}, {"Cum % Spend": 0.3228782117366791, "Cum % Cust": 0.6539634146341463}, {"Cum % Spend": 0.323280930519104, "Cum % Cust": 0.6543445121951219}, {"Cum % Spend": 0.32368364930152893, "Cum % Cust": 0.6547256097560976}, {"Cum % Spend": 0.32408636808395386, "Cum % Cust": 0.6551067073170732}, {"Cum % Spend": 0.3244899809360504, "Cum % Cust": 0.6554878048780488}, {"Cum % Spend": 0.324893593788147, "Cum % Cust": 0.6558689024390244}, {"Cum % Spend": 0.3252975046634674, "Cum % Cust": 0.65625}, {"Cum % Spend": 0.32570141553878784, "Cum % Cust": 0.6566310975609756}, {"Cum % Spend": 0.3261053264141083, "Cum % Cust": 0.6570121951219512}, {"Cum % Spend": 0.3265092372894287, "Cum % Cust": 0.6573932926829268}, {"Cum % Spend": 0.32691314816474915, "Cum % Cust": 0.6577743902439025}, {"Cum % Spend": 0.3273170590400696, "Cum % Cust": 0.6581554878048781}, {"Cum % Spend": 0.32772096991539, "Cum % Cust": 0.6585365853658537}, {"Cum % Spend": 0.32812488079071045, "Cum % Cust": 0.6589176829268293}, {"Cum % Spend": 0.3285287916660309, "Cum % Cust": 0.6592987804878049}, {"Cum % Spend": 0.3289327025413513, "Cum % Cust": 0.6596798780487805}, {"Cum % Spend": 0.32933661341667175, "Cum % Cust": 0.6600609756097561}, {"Cum % Spend": 0.3297405242919922, "Cum % Cust": 0.6604420731707317}, {"Cum % Spend": 0.3301444351673126, "Cum % Cust": 0.6608231707317074}, {"Cum % Spend": 0.33054834604263306, "Cum % Cust": 0.661204268292683}, {"Cum % Spend": 0.3309522569179535, "Cum % Cust": 0.6615853658536586}, {"Cum % Spend": 0.33135735988616943, "Cum % Cust": 0.6619664634146342}, {"Cum % Spend": 0.33176276087760925, "Cum % Cust": 0.6623475609756098}, {"Cum % Spend": 0.3321687579154968, "Cum % Cust": 0.6627286585365854}, {"Cum % Spend": 0.3325750529766083, "Cum % Cust": 0.663109756097561}, {"Cum % Spend": 0.3329816460609436, "Cum % Cust": 0.6634908536585366}, {"Cum % Spend": 0.33338823914527893, "Cum % Cust": 0.6638719512195123}, {"Cum % Spend": 0.33379513025283813, "Cum % Cust": 0.6642530487804879}, {"Cum % Spend": 0.33420202136039734, "Cum % Cust": 0.6646341463414634}, {"Cum % Spend": 0.33460891246795654, "Cum % Cust": 0.665015243902439}, {"Cum % Spend": 0.33501580357551575, "Cum % Cust": 0.6653963414634146}, {"Cum % Spend": 0.33542269468307495, "Cum % Cust": 0.6657774390243902}, {"Cum % Spend": 0.33582958579063416, "Cum % Cust": 0.6661585365853658}, {"Cum % Spend": 0.33623647689819336, "Cum % Cust": 0.6665396341463414}, {"Cum % Spend": 0.33664336800575256, "Cum % Cust": 0.6669207317073171}, {"Cum % Spend": 0.33705025911331177, "Cum % Cust": 0.6673018292682927}, {"Cum % Spend": 0.33745715022087097, "Cum % Cust": 0.6676829268292683}, {"Cum % Spend": 0.3378640413284302, "Cum % Cust": 0.6680640243902439}, {"Cum % Spend": 0.3382709324359894, "Cum % Cust": 0.6684451219512195}, {"Cum % Spend": 0.3386778235435486, "Cum % Cust": 0.6688262195121951}, {"Cum % Spend": 0.3390847146511078, "Cum % Cust": 0.6692073170731707}, {"Cum % Spend": 0.339491605758667, "Cum % Cust": 0.6695884146341463}, {"Cum % Spend": 0.3398999869823456, "Cum % Cust": 0.6699695121951219}, {"Cum % Spend": 0.3403095602989197, "Cum % Cust": 0.6703506097560976}, {"Cum % Spend": 0.34071943163871765, "Cum % Cust": 0.6707317073170732}, {"Cum % Spend": 0.3411293029785156, "Cum % Cust": 0.6711128048780488}, {"Cum % Spend": 0.3415391743183136, "Cum % Cust": 0.6714939024390244}, {"Cum % Spend": 0.3419490456581116, "Cum % Cust": 0.671875}, {"Cum % Spend": 0.34235891699790955, "Cum % Cust": 0.6722560975609756}, {"Cum % Spend": 0.3427687883377075, "Cum % Cust": 0.6726371951219512}, {"Cum % Spend": 0.3431786596775055, "Cum % Cust": 0.6730182926829268}, {"Cum % Spend": 0.34358853101730347, "Cum % Cust": 0.6733993902439025}, {"Cum % Spend": 0.34399840235710144, "Cum % Cust": 0.6737804878048781}, {"Cum % Spend": 0.3444082736968994, "Cum % Cust": 0.6741615853658537}, {"Cum % Spend": 0.3448181450366974, "Cum % Cust": 0.6745426829268293}, {"Cum % Spend": 0.34522801637649536, "Cum % Cust": 0.6749237804878049}, {"Cum % Spend": 0.34563788771629333, "Cum % Cust": 0.6753048780487805}, {"Cum % Spend": 0.3460489511489868, "Cum % Cust": 0.6756859756097561}, {"Cum % Spend": 0.3464600145816803, "Cum % Cust": 0.6760670731707317}, {"Cum % Spend": 0.3468722701072693, "Cum % Cust": 0.6764481707317074}, {"Cum % Spend": 0.34728482365608215, "Cum % Cust": 0.676829268292683}, {"Cum % Spend": 0.347697377204895, "Cum % Cust": 0.6772103658536586}, {"Cum % Spend": 0.34811022877693176, "Cum % Cust": 0.6775914634146342}, {"Cum % Spend": 0.3485230803489685, "Cum % Cust": 0.6779725609756098}, {"Cum % Spend": 0.34893593192100525, "Cum % Cust": 0.6783536585365854}, {"Cum % Spend": 0.349348783493042, "Cum % Cust": 0.678734756097561}, {"Cum % Spend": 0.34976163506507874, "Cum % Cust": 0.6791158536585366}, {"Cum % Spend": 0.3501744866371155, "Cum % Cust": 0.6794969512195123}, {"Cum % Spend": 0.35058853030204773, "Cum % Cust": 0.6798780487804879}, {"Cum % Spend": 0.3510037660598755, "Cum % Cust": 0.6802591463414634}, {"Cum % Spend": 0.3514192998409271, "Cum % Cust": 0.680640243902439}, {"Cum % Spend": 0.35183483362197876, "Cum % Cust": 0.6810213414634146}, {"Cum % Spend": 0.3522503674030304, "Cum % Cust": 0.6814024390243902}, {"Cum % Spend": 0.3526661992073059, "Cum % Cust": 0.6817835365853658}, {"Cum % Spend": 0.3530820310115814, "Cum % Cust": 0.6821646341463414}, {"Cum % Spend": 0.35349786281585693, "Cum % Cust": 0.6825457317073171}, {"Cum % Spend": 0.35391369462013245, "Cum % Cust": 0.6829268292682927}, {"Cum % Spend": 0.3543301224708557, "Cum % Cust": 0.6833079268292683}, {"Cum % Spend": 0.35474684834480286, "Cum % Cust": 0.6836890243902439}, {"Cum % Spend": 0.3551638722419739, "Cum % Cust": 0.6840701219512195}, {"Cum % Spend": 0.35558268427848816, "Cum % Cust": 0.6844512195121951}, {"Cum % Spend": 0.35600149631500244, "Cum % Cust": 0.6848323170731707}, {"Cum % Spend": 0.3564203083515167, "Cum % Cust": 0.6852134146341463}, {"Cum % Spend": 0.356839120388031, "Cum % Cust": 0.6855945121951219}, {"Cum % Spend": 0.35725972056388855, "Cum % Cust": 0.6859756097560976}, {"Cum % Spend": 0.3576815128326416, "Cum % Cust": 0.6863567073170732}, {"Cum % Spend": 0.35810330510139465, "Cum % Cust": 0.6867378048780488}, {"Cum % Spend": 0.35852569341659546, "Cum % Cust": 0.6871189024390244}, {"Cum % Spend": 0.35894808173179626, "Cum % Cust": 0.6875}, {"Cum % Spend": 0.3593713641166687, "Cum % Cust": 0.6878810975609756}, {"Cum % Spend": 0.3597961366176605, "Cum % Cust": 0.6882621951219512}, {"Cum % Spend": 0.36022090911865234, "Cum % Cust": 0.6886432926829268}, {"Cum % Spend": 0.36064568161964417, "Cum % Cust": 0.6890243902439025}, {"Cum % Spend": 0.3610716462135315, "Cum % Cust": 0.6894054878048781}, {"Cum % Spend": 0.3614976108074188, "Cum % Cust": 0.6897865853658537}, {"Cum % Spend": 0.3619241714477539, "Cum % Cust": 0.6901676829268293}, {"Cum % Spend": 0.36235132813453674, "Cum % Cust": 0.6905487804878049}, {"Cum % Spend": 0.3627784848213196, "Cum % Cust": 0.6909298780487805}, {"Cum % Spend": 0.3632059395313263, "Cum % Cust": 0.6913109756097561}, {"Cum % Spend": 0.3636336922645569, "Cum % Cust": 0.6916920731707317}, {"Cum % Spend": 0.36406204104423523, "Cum % Cust": 0.6920731707317074}, {"Cum % Spend": 0.3644903898239136, "Cum % Cust": 0.692454268292683}, {"Cum % Spend": 0.3649187386035919, "Cum % Cust": 0.6928353658536586}, {"Cum % Spend": 0.36534708738327026, "Cum % Cust": 0.6932164634146342}, {"Cum % Spend": 0.3657754361629486, "Cum % Cust": 0.6935975609756098}, {"Cum % Spend": 0.36620378494262695, "Cum % Cust": 0.6939786585365854}, {"Cum % Spend": 0.36663392186164856, "Cum % Cust": 0.694359756097561}, {"Cum % Spend": 0.3670646548271179, "Cum % Cust": 0.6947408536585366}, {"Cum % Spend": 0.3674953877925873, "Cum % Cust": 0.6951219512195123}, {"Cum % Spend": 0.36792612075805664, "Cum % Cust": 0.6955030487804879}, {"Cum % Spend": 0.36835744976997375, "Cum % Cust": 0.6958841463414634}, {"Cum % Spend": 0.36878877878189087, "Cum % Cust": 0.696265243902439}, {"Cum % Spend": 0.3692221939563751, "Cum % Cust": 0.6966463414634146}, {"Cum % Spend": 0.3696556091308594, "Cum % Cust": 0.6970274390243902}, {"Cum % Spend": 0.3700893223285675, "Cum % Cust": 0.6974085365853658}, {"Cum % Spend": 0.37052303552627563, "Cum % Cust": 0.6977896341463414}, {"Cum % Spend": 0.3709591329097748, "Cum % Cust": 0.6981707317073171}, {"Cum % Spend": 0.3713985085487366, "Cum % Cust": 0.6985518292682927}, {"Cum % Spend": 0.3718384802341461, "Cum % Cust": 0.6989329268292683}, {"Cum % Spend": 0.37227845191955566, "Cum % Cust": 0.6993140243902439}, {"Cum % Spend": 0.37271931767463684, "Cum % Cust": 0.6996951219512195}, {"Cum % Spend": 0.3731619715690613, "Cum % Cust": 0.7000762195121951}, {"Cum % Spend": 0.3736046254634857, "Cum % Cust": 0.7004573170731707}, {"Cum % Spend": 0.3740490674972534, "Cum % Cust": 0.7008384146341463}, {"Cum % Spend": 0.37449440360069275, "Cum % Cust": 0.7012195121951219}, {"Cum % Spend": 0.3749397397041321, "Cum % Cust": 0.7016006097560976}, {"Cum % Spend": 0.3753853738307953, "Cum % Cust": 0.7019817073170732}, {"Cum % Spend": 0.37583309412002563, "Cum % Cust": 0.7023628048780488}, {"Cum % Spend": 0.37628141045570374, "Cum % Cust": 0.7027439024390244}, {"Cum % Spend": 0.3767300248146057, "Cum % Cust": 0.703125}, {"Cum % Spend": 0.37717893719673157, "Cum % Cust": 0.7035060975609756}, {"Cum % Spend": 0.3776284456253052, "Cum % Cust": 0.7038871951219512}, {"Cum % Spend": 0.37807944416999817, "Cum % Cust": 0.7042682926829268}, {"Cum % Spend": 0.37853342294692993, "Cum % Cust": 0.7046493902439025}, {"Cum % Spend": 0.3789876699447632, "Cum % Cust": 0.7050304878048781}, {"Cum % Spend": 0.3794419467449188, "Cum % Cust": 0.7054115853658537}, {"Cum % Spend": 0.37989649176597595, "Cum % Cust": 0.7057926829268293}, {"Cum % Spend": 0.3803531229496002, "Cum % Cust": 0.7061737804878049}, {"Cum % Spend": 0.38081035017967224, "Cum % Cust": 0.7065548780487805}, {"Cum % Spend": 0.38126757740974426, "Cum % Cust": 0.7069359756097561}, {"Cum % Spend": 0.3817248046398163, "Cum % Cust": 0.7073170731707317}, {"Cum % Spend": 0.3821820318698883, "Cum % Cust": 0.7076981707317074}, {"Cum % Spend": 0.3826398551464081, "Cum % Cust": 0.708079268292683}, {"Cum % Spend": 0.38310006260871887, "Cum % Cust": 0.7084603658536586}, {"Cum % Spend": 0.38356027007102966, "Cum % Cust": 0.7088414634146342}, {"Cum % Spend": 0.38402047753334045, "Cum % Cust": 0.7092225609756098}, {"Cum % Spend": 0.3844809830188751, "Cum % Cust": 0.7096036585365854}, {"Cum % Spend": 0.3849426805973053, "Cum % Cust": 0.709984756097561}, {"Cum % Spend": 0.3854049742221832, "Cum % Cust": 0.7103658536585366}, {"Cum % Spend": 0.3858681619167328, "Cum % Cust": 0.7107469512195123}, {"Cum % Spend": 0.38633134961128235, "Cum % Cust": 0.7111280487804879}, {"Cum % Spend": 0.3867945373058319, "Cum % Cust": 0.7115091463414634}, {"Cum % Spend": 0.38726040720939636, "Cum % Cust": 0.711890243902439}, {"Cum % Spend": 0.3877265751361847, "Cum % Cust": 0.7122713414634146}, {"Cum % Spend": 0.388192743062973, "Cum % Cust": 0.7126524390243902}, {"Cum % Spend": 0.38865920901298523, "Cum % Cust": 0.7130335365853658}, {"Cum % Spend": 0.38912805914878845, "Cum % Cust": 0.7134146341463414}, {"Cum % Spend": 0.38959720730781555, "Cum % Cust": 0.7137957317073171}, {"Cum % Spend": 0.39006665349006653, "Cum % Cust": 0.7141768292682927}, {"Cum % Spend": 0.39053699374198914, "Cum % Cust": 0.7145579268292683}, {"Cum % Spend": 0.3910079300403595, "Cum % Cust": 0.7149390243902439}, {"Cum % Spend": 0.39147886633872986, "Cum % Cust": 0.7153201219512195}, {"Cum % Spend": 0.3919509947299957, "Cum % Cust": 0.7157012195121951}, {"Cum % Spend": 0.3924231231212616, "Cum % Cust": 0.7160823170731707}, {"Cum % Spend": 0.39289554953575134, "Cum % Cust": 0.7164634146341463}, {"Cum % Spend": 0.39336976408958435, "Cum % Cust": 0.7168445121951219}, {"Cum % Spend": 0.3938445746898651, "Cum % Cust": 0.7172256097560976}, {"Cum % Spend": 0.394321471452713, "Cum % Cust": 0.7176067073170732}, {"Cum % Spend": 0.39479926228523254, "Cum % Cust": 0.7179878048780488}, {"Cum % Spend": 0.39527735114097595, "Cum % Cust": 0.7183689024390244}, {"Cum % Spend": 0.39575812220573425, "Cum % Cust": 0.71875}, {"Cum % Spend": 0.39623889327049255, "Cum % Cust": 0.7191310975609756}, {"Cum % Spend": 0.39671996235847473, "Cum % Cust": 0.7195121951219512}, {"Cum % Spend": 0.3972010314464569, "Cum % Cust": 0.7198932926829268}, {"Cum % Spend": 0.3976821005344391, "Cum % Cust": 0.7202743902439025}, {"Cum % Spend": 0.39816316962242126, "Cum % Cust": 0.7206554878048781}, {"Cum % Spend": 0.3986472189426422, "Cum % Cust": 0.7210365853658537}, {"Cum % Spend": 0.39913126826286316, "Cum % Cust": 0.7214176829268293}, {"Cum % Spend": 0.39961740374565125, "Cum % Cust": 0.7217987804878049}, {"Cum % Spend": 0.4001038372516632, "Cum % Cust": 0.7221798780487805}, {"Cum % Spend": 0.40059056878089905, "Cum % Cust": 0.7225609756097561}, {"Cum % Spend": 0.40107759833335876, "Cum % Cust": 0.7229420731707317}, {"Cum % Spend": 0.4015646278858185, "Cum % Cust": 0.7233231707317074}, {"Cum % Spend": 0.4020516574382782, "Cum % Cust": 0.723704268292683}, {"Cum % Spend": 0.4025386869907379, "Cum % Cust": 0.7240853658536586}, {"Cum % Spend": 0.40302571654319763, "Cum % Cust": 0.7244664634146342}, {"Cum % Spend": 0.40351274609565735, "Cum % Cust": 0.7248475609756098}, {"Cum % Spend": 0.4040015637874603, "Cum % Cust": 0.7252286585365854}, {"Cum % Spend": 0.40449097752571106, "Cum % Cust": 0.725609756097561}, {"Cum % Spend": 0.40498098731040955, "Cum % Cust": 0.7259908536585366}, {"Cum % Spend": 0.40547099709510803, "Cum % Cust": 0.7263719512195123}, {"Cum % Spend": 0.4059610068798065, "Cum % Cust": 0.7267530487804879}, {"Cum % Spend": 0.4064539968967438, "Cum % Cust": 0.7271341463414634}, {"Cum % Spend": 0.40694698691368103, "Cum % Cust": 0.727515243902439}, {"Cum % Spend": 0.4074399769306183, "Cum % Cust": 0.7278963414634146}, {"Cum % Spend": 0.40793296694755554, "Cum % Cust": 0.7282774390243902}, {"Cum % Spend": 0.40842774510383606, "Cum % Cust": 0.7286585365853658}, {"Cum % Spend": 0.4089234173297882, "Cum % Cust": 0.7290396341463414}, {"Cum % Spend": 0.40941908955574036, "Cum % Cust": 0.7294207317073171}, {"Cum % Spend": 0.4099150598049164, "Cum % Cust": 0.7298018292682927}, {"Cum % Spend": 0.4104110300540924, "Cum % Cust": 0.7301829268292683}, {"Cum % Spend": 0.4109072983264923, "Cum % Cust": 0.7305640243902439}, {"Cum % Spend": 0.4114038646221161, "Cum % Cust": 0.7309451219512195}, {"Cum % Spend": 0.41190221905708313, "Cum % Cust": 0.7313262195121951}, {"Cum % Spend": 0.41240087151527405, "Cum % Cust": 0.7317073170731707}, {"Cum % Spend": 0.41289952397346497, "Cum % Cust": 0.7320884146341463}, {"Cum % Spend": 0.41339847445487976, "Cum % Cust": 0.7324695121951219}, {"Cum % Spend": 0.41389742493629456, "Cum % Cust": 0.7328506097560976}, {"Cum % Spend": 0.41439637541770935, "Cum % Cust": 0.7332317073170732}, {"Cum % Spend": 0.41489532589912415, "Cum % Cust": 0.7336128048780488}, {"Cum % Spend": 0.41539427638053894, "Cum % Cust": 0.7339939024390244}, {"Cum % Spend": 0.41589322686195374, "Cum % Cust": 0.734375}, {"Cum % Spend": 0.41639217734336853, "Cum % Cust": 0.7347560975609756}, {"Cum % Spend": 0.4168911278247833, "Cum % Cust": 0.7351371951219512}, {"Cum % Spend": 0.4173900783061981, "Cum % Cust": 0.7355182926829268}, {"Cum % Spend": 0.4178917109966278, "Cum % Cust": 0.7358993902439025}, {"Cum % Spend": 0.41839364171028137, "Cum % Cust": 0.7362804878048781}, {"Cum % Spend": 0.41889557242393494, "Cum % Cust": 0.7366615853658537}, {"Cum % Spend": 0.4193975031375885, "Cum % Cust": 0.7370426829268293}, {"Cum % Spend": 0.41989943385124207, "Cum % Cust": 0.7374237804878049}, {"Cum % Spend": 0.42040136456489563, "Cum % Cust": 0.7378048780487805}, {"Cum % Spend": 0.4209032952785492, "Cum % Cust": 0.7381859756097561}, {"Cum % Spend": 0.42140522599220276, "Cum % Cust": 0.7385670731707317}, {"Cum % Spend": 0.4219071567058563, "Cum % Cust": 0.7389481707317074}, {"Cum % Spend": 0.4224105775356293, "Cum % Cust": 0.739329268292683}, {"Cum % Spend": 0.4229139983654022, "Cum % Cust": 0.7397103658536586}, {"Cum % Spend": 0.42341741919517517, "Cum % Cust": 0.7400914634146342}, {"Cum % Spend": 0.42392173409461975, "Cum % Cust": 0.7404725609756098}, {"Cum % Spend": 0.4244266450405121, "Cum % Cust": 0.7408536585365854}, {"Cum % Spend": 0.4249315559864044, "Cum % Cust": 0.741234756097561}, {"Cum % Spend": 0.42543646693229675, "Cum % Cust": 0.7416158536585366}, {"Cum % Spend": 0.4259413778781891, "Cum % Cust": 0.7419969512195123}, {"Cum % Spend": 0.4264462888240814, "Cum % Cust": 0.7423780487804879}, {"Cum % Spend": 0.42695119976997375, "Cum % Cust": 0.7427591463414634}, {"Cum % Spend": 0.4274561107158661, "Cum % Cust": 0.743140243902439}, {"Cum % Spend": 0.42796340584754944, "Cum % Cust": 0.7435213414634146}, {"Cum % Spend": 0.42847129702568054, "Cum % Cust": 0.7439024390243902}, {"Cum % Spend": 0.42897918820381165, "Cum % Cust": 0.7442835365853658}, {"Cum % Spend": 0.42948707938194275, "Cum % Cust": 0.7446646341463414}, {"Cum % Spend": 0.42999497056007385, "Cum % Cust": 0.7450457317073171}, {"Cum % Spend": 0.43050286173820496, "Cum % Cust": 0.7454268292682927}, {"Cum % Spend": 0.43101075291633606, "Cum % Cust": 0.7458079268292683}, {"Cum % Spend": 0.43151864409446716, "Cum % Cust": 0.7461890243902439}, {"Cum % Spend": 0.43202653527259827, "Cum % Cust": 0.7465701219512195}, {"Cum % Spend": 0.43253442645072937, "Cum % Cust": 0.7469512195121951}, {"Cum % Spend": 0.4330423176288605, "Cum % Cust": 0.7473323170731707}, {"Cum % Spend": 0.4335502088069916, "Cum % Cust": 0.7477134146341463}, {"Cum % Spend": 0.4340580999851227, "Cum % Cust": 0.748094512195122}, {"Cum % Spend": 0.4345659911632538, "Cum % Cust": 0.7484756097560976}, {"Cum % Spend": 0.43507447838783264, "Cum % Cust": 0.7488567073170732}, {"Cum % Spend": 0.43558356165885925, "Cum % Cust": 0.7492378048780488}, {"Cum % Spend": 0.43609294295310974, "Cum % Cust": 0.7496189024390244}, {"Cum % Spend": 0.43660321831703186, "Cum % Cust": 0.75}, {"Cum % Spend": 0.437113493680954, "Cum % Cust": 0.7503810975609756}, {"Cum % Spend": 0.4376240670681, "Cum % Cust": 0.7507621951219512}, {"Cum % Spend": 0.43813493847846985, "Cum % Cust": 0.7511432926829268}, {"Cum % Spend": 0.4386458098888397, "Cum % Cust": 0.7515243902439025}, {"Cum % Spend": 0.4391566812992096, "Cum % Cust": 0.7519054878048781}, {"Cum % Spend": 0.43966755270957947, "Cum % Cust": 0.7522865853658537}, {"Cum % Spend": 0.44017842411994934, "Cum % Cust": 0.7526676829268293}, {"Cum % Spend": 0.4406892955303192, "Cum % Cust": 0.7530487804878049}, {"Cum % Spend": 0.4412001669406891, "Cum % Cust": 0.7534298780487805}, {"Cum % Spend": 0.44171103835105896, "Cum % Cust": 0.7538109756097561}, {"Cum % Spend": 0.44222190976142883, "Cum % Cust": 0.7541920731707317}, {"Cum % Spend": 0.4427327811717987, "Cum % Cust": 0.7545731707317074}, {"Cum % Spend": 0.4432460367679596, "Cum % Cust": 0.754954268292683}, {"Cum % Spend": 0.44375959038734436, "Cum % Cust": 0.7553353658536586}, {"Cum % Spend": 0.4442731440067291, "Cum % Cust": 0.7557164634146342}, {"Cum % Spend": 0.44478699564933777, "Cum % Cust": 0.7560975609756098}, {"Cum % Spend": 0.4453008472919464, "Cum % Cust": 0.7564786585365854}, {"Cum % Spend": 0.44581469893455505, "Cum % Cust": 0.756859756097561}, {"Cum % Spend": 0.4463285505771637, "Cum % Cust": 0.7572408536585366}, {"Cum % Spend": 0.44684240221977234, "Cum % Cust": 0.7576219512195123}, {"Cum % Spend": 0.447356253862381, "Cum % Cust": 0.7580030487804879}, {"Cum % Spend": 0.4478701055049896, "Cum % Cust": 0.7583841463414634}, {"Cum % Spend": 0.44838395714759827, "Cum % Cust": 0.758765243902439}, {"Cum % Spend": 0.4488978087902069, "Cum % Cust": 0.7591463414634146}, {"Cum % Spend": 0.44941166043281555, "Cum % Cust": 0.7595274390243902}, {"Cum % Spend": 0.44992610812187195, "Cum % Cust": 0.7599085365853658}, {"Cum % Spend": 0.4504411220550537, "Cum % Cust": 0.7602896341463414}, {"Cum % Spend": 0.4509561359882355, "Cum % Cust": 0.7606707317073171}, {"Cum % Spend": 0.4514714479446411, "Cum % Cust": 0.7610518292682927}, {"Cum % Spend": 0.45198675990104675, "Cum % Cust": 0.7614329268292683}, {"Cum % Spend": 0.452502965927124, "Cum % Cust": 0.7618140243902439}, {"Cum % Spend": 0.45301946997642517, "Cum % Cust": 0.7621951219512195}, {"Cum % Spend": 0.4535359740257263, "Cum % Cust": 0.7625762195121951}, {"Cum % Spend": 0.45405277609825134, "Cum % Cust": 0.7629573170731707}, {"Cum % Spend": 0.45456957817077637, "Cum % Cust": 0.7633384146341463}, {"Cum % Spend": 0.4550863802433014, "Cum % Cust": 0.763719512195122}, {"Cum % Spend": 0.45560377836227417, "Cum % Cust": 0.7641006097560976}, {"Cum % Spend": 0.4561229646205902, "Cum % Cust": 0.7644817073170732}, {"Cum % Spend": 0.456642746925354, "Cum % Cust": 0.7648628048780488}, {"Cum % Spend": 0.4571625292301178, "Cum % Cust": 0.7652439024390244}, {"Cum % Spend": 0.4576846957206726, "Cum % Cust": 0.765625}, {"Cum % Spend": 0.4582068622112274, "Cum % Cust": 0.7660060975609756}, {"Cum % Spend": 0.45873022079467773, "Cum % Cust": 0.7663871951219512}, {"Cum % Spend": 0.45925477147102356, "Cum % Cust": 0.7667682926829268}, {"Cum % Spend": 0.4597793221473694, "Cum % Cust": 0.7671493902439025}, {"Cum % Spend": 0.46030476689338684, "Cum % Cust": 0.7675304878048781}, {"Cum % Spend": 0.4608305096626282, "Cum % Cust": 0.7679115853658537}, {"Cum % Spend": 0.4613562524318695, "Cum % Cust": 0.7682926829268293}, {"Cum % Spend": 0.46188199520111084, "Cum % Cust": 0.7686737804878049}, {"Cum % Spend": 0.4624083340167999, "Cum % Cust": 0.7690548780487805}, {"Cum % Spend": 0.4629373550415039, "Cum % Cust": 0.7694359756097561}, {"Cum % Spend": 0.4634672701358795, "Cum % Cust": 0.7698170731707317}, {"Cum % Spend": 0.46399837732315063, "Cum % Cust": 0.7701981707317074}, {"Cum % Spend": 0.4645300805568695, "Cum % Cust": 0.770579268292683}, {"Cum % Spend": 0.46506476402282715, "Cum % Cust": 0.7709603658536586}, {"Cum % Spend": 0.4656009376049042, "Cum % Cust": 0.7713414634146342}, {"Cum % Spend": 0.4661374092102051, "Cum % Cust": 0.7717225609756098}, {"Cum % Spend": 0.46667447686195374, "Cum % Cust": 0.7721036585365854}, {"Cum % Spend": 0.46721184253692627, "Cum % Cust": 0.772484756097561}, {"Cum % Spend": 0.4677518904209137, "Cum % Cust": 0.7728658536585366}, {"Cum % Spend": 0.4682919383049011, "Cum % Cust": 0.7732469512195123}, {"Cum % Spend": 0.4688325822353363, "Cum % Cust": 0.7736280487804879}, {"Cum % Spend": 0.469374418258667, "Cum % Cust": 0.7740091463414634}, {"Cum % Spend": 0.46991774439811707, "Cum % Cust": 0.774390243902439}, {"Cum % Spend": 0.470461368560791, "Cum % Cust": 0.7747713414634146}, {"Cum % Spend": 0.47100499272346497, "Cum % Cust": 0.7751524390243902}, {"Cum % Spend": 0.47155100107192993, "Cum % Cust": 0.7755335365853658}, {"Cum % Spend": 0.4720982015132904, "Cum % Cust": 0.7759146341463414}, {"Cum % Spend": 0.47264599800109863, "Cum % Cust": 0.7762957317073171}, {"Cum % Spend": 0.47319409251213074, "Cum % Cust": 0.7766768292682927}, {"Cum % Spend": 0.47374337911605835, "Cum % Cust": 0.7770579268292683}, {"Cum % Spend": 0.47429296374320984, "Cum % Cust": 0.7774390243902439}, {"Cum % Spend": 0.47484254837036133, "Cum % Cust": 0.7778201219512195}, {"Cum % Spend": 0.4753936231136322, "Cum % Cust": 0.7782012195121951}, {"Cum % Spend": 0.4759455919265747, "Cum % Cust": 0.7785823170731707}, {"Cum % Spend": 0.4764978587627411, "Cum % Cust": 0.7789634146341463}, {"Cum % Spend": 0.47705012559890747, "Cum % Cust": 0.779344512195122}, {"Cum % Spend": 0.477606862783432, "Cum % Cust": 0.7797256097560976}, {"Cum % Spend": 0.4781653881072998, "Cum % Cust": 0.7801067073170732}, {"Cum % Spend": 0.47872450947761536, "Cum % Cust": 0.7804878048780488}, {"Cum % Spend": 0.47928452491760254, "Cum % Cust": 0.7808689024390244}, {"Cum % Spend": 0.47984573245048523, "Cum % Cust": 0.78125}, {"Cum % Spend": 0.4804069399833679, "Cum % Cust": 0.7816310975609756}, {"Cum % Spend": 0.48096993565559387, "Cum % Cust": 0.7820121951219512}, {"Cum % Spend": 0.48153412342071533, "Cum % Cust": 0.7823932926829268}, {"Cum % Spend": 0.4820983111858368, "Cum % Cust": 0.7827743902439025}, {"Cum % Spend": 0.48266369104385376, "Cum % Cust": 0.7831554878048781}, {"Cum % Spend": 0.4832293689250946, "Cum % Cust": 0.7835365853658537}, {"Cum % Spend": 0.48379623889923096, "Cum % Cust": 0.7839176829268293}, {"Cum % Spend": 0.4843634068965912, "Cum % Cust": 0.7842987804878049}, {"Cum % Spend": 0.4849305748939514, "Cum % Cust": 0.7846798780487805}, {"Cum % Spend": 0.48549774289131165, "Cum % Cust": 0.7850609756097561}, {"Cum % Spend": 0.48606520891189575, "Cum % Cust": 0.7854420731707317}, {"Cum % Spend": 0.486634761095047, "Cum % Cust": 0.7858231707317074}, {"Cum % Spend": 0.4872046113014221, "Cum % Cust": 0.786204268292683}, {"Cum % Spend": 0.4877747595310211, "Cum % Cust": 0.7865853658536586}, {"Cum % Spend": 0.48834580183029175, "Cum % Cust": 0.7869664634146342}, {"Cum % Spend": 0.48891714215278625, "Cum % Cust": 0.7873475609756098}, {"Cum % Spend": 0.489490270614624, "Cum % Cust": 0.7877286585365854}, {"Cum % Spend": 0.49006399512290955, "Cum % Cust": 0.788109756097561}, {"Cum % Spend": 0.4906400740146637, "Cum % Cust": 0.7884908536585366}, {"Cum % Spend": 0.49121615290641785, "Cum % Cust": 0.7888719512195123}, {"Cum % Spend": 0.491792231798172, "Cum % Cust": 0.7892530487804879}, {"Cum % Spend": 0.49236831068992615, "Cum % Cust": 0.7896341463414634}, {"Cum % Spend": 0.4929446876049042, "Cum % Cust": 0.790015243902439}, {"Cum % Spend": 0.4935237467288971, "Cum % Cust": 0.7903963414634146}, {"Cum % Spend": 0.49410280585289, "Cum % Cust": 0.7907774390243902}, {"Cum % Spend": 0.49468186497688293, "Cum % Cust": 0.7911585365853658}, {"Cum % Spend": 0.49526092410087585, "Cum % Cust": 0.7915396341463414}, {"Cum % Spend": 0.49584147334098816, "Cum % Cust": 0.7919207317073171}, {"Cum % Spend": 0.49642351269721985, "Cum % Cust": 0.7923018292682927}, {"Cum % Spend": 0.49700555205345154, "Cum % Cust": 0.7926829268292683}, {"Cum % Spend": 0.4975878894329071, "Cum % Cust": 0.7930640243902439}, {"Cum % Spend": 0.49817290902137756, "Cum % Cust": 0.7934451219512195}, {"Cum % Spend": 0.498757928609848, "Cum % Cust": 0.7938262195121951}, {"Cum % Spend": 0.4993429481983185, "Cum % Cust": 0.7942073170731707}, {"Cum % Spend": 0.4999297559261322, "Cum % Cust": 0.7945884146341463}, {"Cum % Spend": 0.5005177855491638, "Cum % Cust": 0.794969512195122}, {"Cum % Spend": 0.5011081695556641, "Cum % Cust": 0.7953506097560976}, {"Cum % Spend": 0.5016988515853882, "Cum % Cust": 0.7957317073170732}, {"Cum % Spend": 0.5022898316383362, "Cum % Cust": 0.7961128048780488}, {"Cum % Spend": 0.5028808116912842, "Cum % Cust": 0.7964939024390244}, {"Cum % Spend": 0.5034717917442322, "Cum % Cust": 0.796875}, {"Cum % Spend": 0.5040648579597473, "Cum % Cust": 0.7972560975609756}, {"Cum % Spend": 0.5046585202217102, "Cum % Cust": 0.7976371951219512}, {"Cum % Spend": 0.505252480506897, "Cum % Cust": 0.7980182926829268}, {"Cum % Spend": 0.5058464407920837, "Cum % Cust": 0.7983993902439025}, {"Cum % Spend": 0.5064427852630615, "Cum % Cust": 0.7987804878048781}, {"Cum % Spend": 0.5070394277572632, "Cum % Cust": 0.7991615853658537}, {"Cum % Spend": 0.5076363682746887, "Cum % Cust": 0.7995426829268293}, {"Cum % Spend": 0.5082333087921143, "Cum % Cust": 0.7999237804878049}, {"Cum % Spend": 0.5088302493095398, "Cum % Cust": 0.8003048780487805}, {"Cum % Spend": 0.5094271898269653, "Cum % Cust": 0.8006859756097561}, {"Cum % Spend": 0.5100241303443909, "Cum % Cust": 0.8010670731707317}, {"Cum % Spend": 0.5106210708618164, "Cum % Cust": 0.8014481707317074}, {"Cum % Spend": 0.5112180113792419, "Cum % Cust": 0.801829268292683}, {"Cum % Spend": 0.5118152499198914, "Cum % Cust": 0.8022103658536586}, {"Cum % Spend": 0.5124139785766602, "Cum % Cust": 0.8025914634146342}, {"Cum % Spend": 0.5130133032798767, "Cum % Cust": 0.8029725609756098}, {"Cum % Spend": 0.5136129260063171, "Cum % Cust": 0.8033536585365854}, {"Cum % Spend": 0.5142128467559814, "Cum % Cust": 0.803734756097561}, {"Cum % Spend": 0.5148127675056458, "Cum % Cust": 0.8041158536585366}, {"Cum % Spend": 0.5154126882553101, "Cum % Cust": 0.8044969512195123}, {"Cum % Spend": 0.5160126090049744, "Cum % Cust": 0.8048780487804879}, {"Cum % Spend": 0.5166125297546387, "Cum % Cust": 0.8052591463414634}, {"Cum % Spend": 0.517212450504303, "Cum % Cust": 0.805640243902439}, {"Cum % Spend": 0.5178123712539673, "Cum % Cust": 0.8060213414634146}, {"Cum % Spend": 0.5184122920036316, "Cum % Cust": 0.8064024390243902}, {"Cum % Spend": 0.5190122127532959, "Cum % Cust": 0.8067835365853658}, {"Cum % Spend": 0.519615113735199, "Cum % Cust": 0.8071646341463414}, {"Cum % Spend": 0.520218014717102, "Cum % Cust": 0.8075457317073171}, {"Cum % Spend": 0.5208209156990051, "Cum % Cust": 0.8079268292682927}, {"Cum % Spend": 0.5214250087738037, "Cum % Cust": 0.8083079268292683}, {"Cum % Spend": 0.5220291018486023, "Cum % Cust": 0.8086890243902439}, {"Cum % Spend": 0.5226343870162964, "Cum % Cust": 0.8090701219512195}, {"Cum % Spend": 0.5232402682304382, "Cum % Cust": 0.8094512195121951}, {"Cum % Spend": 0.5238461494445801, "Cum % Cust": 0.8098323170731707}, {"Cum % Spend": 0.5244520306587219, "Cum % Cust": 0.8102134146341463}, {"Cum % Spend": 0.5250579118728638, "Cum % Cust": 0.810594512195122}, {"Cum % Spend": 0.5256637930870056, "Cum % Cust": 0.8109756097560976}, {"Cum % Spend": 0.5262696743011475, "Cum % Cust": 0.8113567073170732}, {"Cum % Spend": 0.5268755555152893, "Cum % Cust": 0.8117378048780488}, {"Cum % Spend": 0.5274814367294312, "Cum % Cust": 0.8121189024390244}, {"Cum % Spend": 0.528087317943573, "Cum % Cust": 0.8125}, {"Cum % Spend": 0.5286931991577148, "Cum % Cust": 0.8128810975609756}, {"Cum % Spend": 0.5292990803718567, "Cum % Cust": 0.8132621951219512}, {"Cum % Spend": 0.5299073457717896, "Cum % Cust": 0.8136432926829268}, {"Cum % Spend": 0.5305156111717224, "Cum % Cust": 0.8140243902439025}, {"Cum % Spend": 0.531124472618103, "Cum % Cust": 0.8144054878048781}, {"Cum % Spend": 0.5317333340644836, "Cum % Cust": 0.8147865853658537}, {"Cum % Spend": 0.5323421955108643, "Cum % Cust": 0.8151676829268293}, {"Cum % Spend": 0.5329510569572449, "Cum % Cust": 0.8155487804878049}, {"Cum % Spend": 0.5335599184036255, "Cum % Cust": 0.8159298780487805}, {"Cum % Spend": 0.5341687798500061, "Cum % Cust": 0.8163109756097561}, {"Cum % Spend": 0.5347776412963867, "Cum % Cust": 0.8166920731707317}, {"Cum % Spend": 0.5353865027427673, "Cum % Cust": 0.8170731707317074}, {"Cum % Spend": 0.5359956622123718, "Cum % Cust": 0.817454268292683}, {"Cum % Spend": 0.5366066098213196, "Cum % Cust": 0.8178353658536586}, {"Cum % Spend": 0.537218451499939, "Cum % Cust": 0.8182164634146342}, {"Cum % Spend": 0.5378302931785583, "Cum % Cust": 0.8185975609756098}, {"Cum % Spend": 0.5384433269500732, "Cum % Cust": 0.8189786585365854}, {"Cum % Spend": 0.5390575528144836, "Cum % Cust": 0.819359756097561}, {"Cum % Spend": 0.5396723747253418, "Cum % Cust": 0.8197408536585366}, {"Cum % Spend": 0.5402871966362, "Cum % Cust": 0.8201219512195123}, {"Cum % Spend": 0.5409020185470581, "Cum % Cust": 0.8205030487804879}, {"Cum % Spend": 0.5415168404579163, "Cum % Cust": 0.8208841463414634}, {"Cum % Spend": 0.5421316623687744, "Cum % Cust": 0.821265243902439}, {"Cum % Spend": 0.5427464842796326, "Cum % Cust": 0.8216463414634146}, {"Cum % Spend": 0.5433613061904907, "Cum % Cust": 0.8220274390243902}, {"Cum % Spend": 0.5439779162406921, "Cum % Cust": 0.8224085365853658}, {"Cum % Spend": 0.5445957183837891, "Cum % Cust": 0.8227896341463414}, {"Cum % Spend": 0.545213520526886, "Cum % Cust": 0.8231707317073171}, {"Cum % Spend": 0.5458313226699829, "Cum % Cust": 0.8235518292682927}, {"Cum % Spend": 0.5464497208595276, "Cum % Cust": 0.8239329268292683}, {"Cum % Spend": 0.5470696091651917, "Cum % Cust": 0.8243140243902439}, {"Cum % Spend": 0.5476897954940796, "Cum % Cust": 0.8246951219512195}, {"Cum % Spend": 0.5483105778694153, "Cum % Cust": 0.8250762195121951}, {"Cum % Spend": 0.548931360244751, "Cum % Cust": 0.8254573170731707}, {"Cum % Spend": 0.5495521426200867, "Cum % Cust": 0.8258384146341463}, {"Cum % Spend": 0.5501729249954224, "Cum % Cust": 0.826219512195122}, {"Cum % Spend": 0.5507954955101013, "Cum % Cust": 0.8266006097560976}, {"Cum % Spend": 0.5514189600944519, "Cum % Cust": 0.8269817073170732}, {"Cum % Spend": 0.5520427227020264, "Cum % Cust": 0.8273628048780488}, {"Cum % Spend": 0.5526697635650635, "Cum % Cust": 0.8277439024390244}, {"Cum % Spend": 0.5532979965209961, "Cum % Cust": 0.828125}, {"Cum % Spend": 0.5539271235466003, "Cum % Cust": 0.8285060975609756}, {"Cum % Spend": 0.5545568466186523, "Cum % Cust": 0.8288871951219512}, {"Cum % Spend": 0.5551865696907043, "Cum % Cust": 0.8292682926829269}, {"Cum % Spend": 0.5558174848556519, "Cum % Cust": 0.8296493902439025}, {"Cum % Spend": 0.5564498901367188, "Cum % Cust": 0.8300304878048781}, {"Cum % Spend": 0.5570831894874573, "Cum % Cust": 0.8304115853658537}, {"Cum % Spend": 0.5577182769775391, "Cum % Cust": 0.8307926829268293}, {"Cum % Spend": 0.5583566427230835, "Cum % Cust": 0.8311737804878049}, {"Cum % Spend": 0.5589953064918518, "Cum % Cust": 0.8315548780487805}, {"Cum % Spend": 0.5596345663070679, "Cum % Cust": 0.8319359756097561}, {"Cum % Spend": 0.5602750182151794, "Cum % Cust": 0.8323170731707317}, {"Cum % Spend": 0.5609160661697388, "Cum % Cust": 0.8326981707317074}, {"Cum % Spend": 0.5615612864494324, "Cum % Cust": 0.833079268292683}, {"Cum % Spend": 0.5622076988220215, "Cum % Cust": 0.8334603658536586}, {"Cum % Spend": 0.5628550052642822, "Cum % Cust": 0.8338414634146342}, {"Cum % Spend": 0.5635026097297668, "Cum % Cust": 0.8342225609756098}, {"Cum % Spend": 0.564151406288147, "Cum % Cust": 0.8346036585365854}, {"Cum % Spend": 0.5648016929626465, "Cum % Cust": 0.834984756097561}, {"Cum % Spend": 0.565451979637146, "Cum % Cust": 0.8353658536585366}, {"Cum % Spend": 0.5661031603813171, "Cum % Cust": 0.8357469512195123}, {"Cum % Spend": 0.5667564272880554, "Cum % Cust": 0.8361280487804879}, {"Cum % Spend": 0.5674096941947937, "Cum % Cust": 0.8365091463414634}, {"Cum % Spend": 0.5680635571479797, "Cum % Cust": 0.836890243902439}, {"Cum % Spend": 0.5687186121940613, "Cum % Cust": 0.8372713414634146}, {"Cum % Spend": 0.5693739652633667, "Cum % Cust": 0.8376524390243902}, {"Cum % Spend": 0.5700302124023438, "Cum % Cust": 0.8380335365853658}, {"Cum % Spend": 0.5706867575645447, "Cum % Cust": 0.8384146341463414}, {"Cum % Spend": 0.5713489651679993, "Cum % Cust": 0.8387957317073171}, {"Cum % Spend": 0.5720138549804688, "Cum % Cust": 0.8391768292682927}, {"Cum % Spend": 0.5726790428161621, "Cum % Cust": 0.8395579268292683}, {"Cum % Spend": 0.5733468532562256, "Cum % Cust": 0.8399390243902439}, {"Cum % Spend": 0.5740152597427368, "Cum % Cust": 0.8403201219512195}, {"Cum % Spend": 0.5746869444847107, "Cum % Cust": 0.8407012195121951}, {"Cum % Spend": 0.5753589272499084, "Cum % Cust": 0.8410823170731707}, {"Cum % Spend": 0.5760312080383301, "Cum % Cust": 0.8414634146341463}, {"Cum % Spend": 0.5767046809196472, "Cum % Cust": 0.841844512195122}, {"Cum % Spend": 0.577379047870636, "Cum % Cust": 0.8422256097560976}, {"Cum % Spend": 0.5780534148216248, "Cum % Cust": 0.8426067073170732}, {"Cum % Spend": 0.5787298679351807, "Cum % Cust": 0.8429878048780488}, {"Cum % Spend": 0.5794069170951843, "Cum % Cust": 0.8433689024390244}, {"Cum % Spend": 0.580083966255188, "Cum % Cust": 0.84375}, {"Cum % Spend": 0.5807610154151917, "Cum % Cust": 0.8441310975609756}, {"Cum % Spend": 0.5814392566680908, "Cum % Cust": 0.8445121951219512}, {"Cum % Spend": 0.5821186900138855, "Cum % Cust": 0.8448932926829269}, {"Cum % Spend": 0.5827987194061279, "Cum % Cust": 0.8452743902439025}, {"Cum % Spend": 0.5834790468215942, "Cum % Cust": 0.8456554878048781}, {"Cum % Spend": 0.5841608643531799, "Cum % Cust": 0.8460365853658537}, {"Cum % Spend": 0.5848438739776611, "Cum % Cust": 0.8464176829268293}, {"Cum % Spend": 0.5855268836021423, "Cum % Cust": 0.8467987804878049}, {"Cum % Spend": 0.5862098932266235, "Cum % Cust": 0.8471798780487805}, {"Cum % Spend": 0.5868952870368958, "Cum % Cust": 0.8475609756097561}, {"Cum % Spend": 0.5875812768936157, "Cum % Cust": 0.8479420731707317}, {"Cum % Spend": 0.5882672667503357, "Cum % Cust": 0.8483231707317074}, {"Cum % Spend": 0.5889532566070557, "Cum % Cust": 0.848704268292683}, {"Cum % Spend": 0.5896422266960144, "Cum % Cust": 0.8490853658536586}, {"Cum % Spend": 0.5903311967849731, "Cum % Cust": 0.8494664634146342}, {"Cum % Spend": 0.5910201668739319, "Cum % Cust": 0.8498475609756098}, {"Cum % Spend": 0.5917094349861145, "Cum % Cust": 0.8502286585365854}, {"Cum % Spend": 0.5924007892608643, "Cum % Cust": 0.850609756097561}, {"Cum % Spend": 0.593092143535614, "Cum % Cust": 0.8509908536585366}, {"Cum % Spend": 0.5937840938568115, "Cum % Cust": 0.8513719512195123}, {"Cum % Spend": 0.594476044178009, "Cum % Cust": 0.8517530487804879}, {"Cum % Spend": 0.5951679944992065, "Cum % Cust": 0.8521341463414634}, {"Cum % Spend": 0.595859944820404, "Cum % Cust": 0.852515243902439}, {"Cum % Spend": 0.5965521931648254, "Cum % Cust": 0.8528963414634146}, {"Cum % Spend": 0.5972459316253662, "Cum % Cust": 0.8532774390243902}, {"Cum % Spend": 0.597939670085907, "Cum % Cust": 0.8536585365853658}, {"Cum % Spend": 0.5986340045928955, "Cum % Cust": 0.8540396341463414}, {"Cum % Spend": 0.5993289351463318, "Cum % Cust": 0.8544207317073171}, {"Cum % Spend": 0.6000238656997681, "Cum % Cust": 0.8548018292682927}, {"Cum % Spend": 0.6007217764854431, "Cum % Cust": 0.8551829268292683}, {"Cum % Spend": 0.6014196872711182, "Cum % Cust": 0.8555640243902439}, {"Cum % Spend": 0.6021175980567932, "Cum % Cust": 0.8559451219512195}, {"Cum % Spend": 0.6028155088424683, "Cum % Cust": 0.8563262195121951}, {"Cum % Spend": 0.6035134196281433, "Cum % Cust": 0.8567073170731707}, {"Cum % Spend": 0.6042113304138184, "Cum % Cust": 0.8570884146341463}, {"Cum % Spend": 0.6049092411994934, "Cum % Cust": 0.857469512195122}, {"Cum % Spend": 0.6056071519851685, "Cum % Cust": 0.8578506097560976}, {"Cum % Spend": 0.6063074469566345, "Cum % Cust": 0.8582317073170732}, {"Cum % Spend": 0.6070083379745483, "Cum % Cust": 0.8586128048780488}, {"Cum % Spend": 0.6077092289924622, "Cum % Cust": 0.8589939024390244}, {"Cum % Spend": 0.608410120010376, "Cum % Cust": 0.859375}, {"Cum % Spend": 0.6091110110282898, "Cum % Cust": 0.8597560975609756}, {"Cum % Spend": 0.6098119020462036, "Cum % Cust": 0.8601371951219512}, {"Cum % Spend": 0.6105127930641174, "Cum % Cust": 0.8605182926829269}, {"Cum % Spend": 0.6112136840820312, "Cum % Cust": 0.8608993902439025}, {"Cum % Spend": 0.6119175553321838, "Cum % Cust": 0.8612804878048781}, {"Cum % Spend": 0.6126214265823364, "Cum % Cust": 0.8616615853658537}, {"Cum % Spend": 0.613325297832489, "Cum % Cust": 0.8620426829268293}, {"Cum % Spend": 0.6140291690826416, "Cum % Cust": 0.8624237804878049}, {"Cum % Spend": 0.6147330403327942, "Cum % Cust": 0.8628048780487805}, {"Cum % Spend": 0.6154378056526184, "Cum % Cust": 0.8631859756097561}, {"Cum % Spend": 0.6161434650421143, "Cum % Cust": 0.8635670731707317}, {"Cum % Spend": 0.6168503165245056, "Cum % Cust": 0.8639481707317074}, {"Cum % Spend": 0.617557168006897, "Cum % Cust": 0.864329268292683}, {"Cum % Spend": 0.6182640194892883, "Cum % Cust": 0.8647103658536586}, {"Cum % Spend": 0.6189738512039185, "Cum % Cust": 0.8650914634146342}, {"Cum % Spend": 0.6196836829185486, "Cum % Cust": 0.8654725609756098}, {"Cum % Spend": 0.6203935146331787, "Cum % Cust": 0.8658536585365854}, {"Cum % Spend": 0.6211033463478088, "Cum % Cust": 0.866234756097561}, {"Cum % Spend": 0.6218143701553345, "Cum % Cust": 0.8666158536585366}, {"Cum % Spend": 0.6225265860557556, "Cum % Cust": 0.8669969512195123}, {"Cum % Spend": 0.6232393980026245, "Cum % Cust": 0.8673780487804879}, {"Cum % Spend": 0.6239522099494934, "Cum % Cust": 0.8677591463414634}, {"Cum % Spend": 0.6246650218963623, "Cum % Cust": 0.868140243902439}, {"Cum % Spend": 0.6253778338432312, "Cum % Cust": 0.8685213414634146}, {"Cum % Spend": 0.6260930299758911, "Cum % Cust": 0.8689024390243902}, {"Cum % Spend": 0.6268088221549988, "Cum % Cust": 0.8692835365853658}, {"Cum % Spend": 0.6275275945663452, "Cum % Cust": 0.8696646341463414}, {"Cum % Spend": 0.6282463669776917, "Cum % Cust": 0.8700457317073171}, {"Cum % Spend": 0.6289651393890381, "Cum % Cust": 0.8704268292682927}, {"Cum % Spend": 0.6296845078468323, "Cum % Cust": 0.8708079268292683}, {"Cum % Spend": 0.6304056644439697, "Cum % Cust": 0.8711890243902439}, {"Cum % Spend": 0.6311268210411072, "Cum % Cust": 0.8715701219512195}, {"Cum % Spend": 0.6318482756614685, "Cum % Cust": 0.8719512195121951}, {"Cum % Spend": 0.6325700283050537, "Cum % Cust": 0.8723323170731707}, {"Cum % Spend": 0.6332917809486389, "Cum % Cust": 0.8727134146341463}, {"Cum % Spend": 0.6340135335922241, "Cum % Cust": 0.873094512195122}, {"Cum % Spend": 0.6347376704216003, "Cum % Cust": 0.8734756097560976}, {"Cum % Spend": 0.6354618072509766, "Cum % Cust": 0.8738567073170732}, {"Cum % Spend": 0.6361895203590393, "Cum % Cust": 0.8742378048780488}, {"Cum % Spend": 0.6369175314903259, "Cum % Cust": 0.8746189024390244}, {"Cum % Spend": 0.6376464366912842, "Cum % Cust": 0.875}, {"Cum % Spend": 0.6383771300315857, "Cum % Cust": 0.8753810975609756}, {"Cum % Spend": 0.6391102075576782, "Cum % Cust": 0.8757621951219512}, {"Cum % Spend": 0.6398432850837708, "Cum % Cust": 0.8761432926829269}, {"Cum % Spend": 0.6405763626098633, "Cum % Cust": 0.8765243902439025}, {"Cum % Spend": 0.6413097381591797, "Cum % Cust": 0.8769054878048781}, {"Cum % Spend": 0.6420431137084961, "Cum % Cust": 0.8772865853658537}, {"Cum % Spend": 0.6427785754203796, "Cum % Cust": 0.8776676829268293}, {"Cum % Spend": 0.6435152292251587, "Cum % Cust": 0.8780487804878049}, {"Cum % Spend": 0.6442554593086243, "Cum % Cust": 0.8784298780487805}, {"Cum % Spend": 0.6449968814849854, "Cum % Cust": 0.8788109756097561}, {"Cum % Spend": 0.6457383036613464, "Cum % Cust": 0.8791920731707317}, {"Cum % Spend": 0.6464803218841553, "Cum % Cust": 0.8795731707317074}, {"Cum % Spend": 0.647222638130188, "Cum % Cust": 0.879954268292683}, {"Cum % Spend": 0.6479655504226685, "Cum % Cust": 0.8803353658536586}, {"Cum % Spend": 0.6487117409706116, "Cum % Cust": 0.8807164634146342}, {"Cum % Spend": 0.6494600176811218, "Cum % Cust": 0.8810975609756098}, {"Cum % Spend": 0.6502112746238708, "Cum % Cust": 0.8814786585365854}, {"Cum % Spend": 0.6509625315666199, "Cum % Cust": 0.881859756097561}, {"Cum % Spend": 0.6517140865325928, "Cum % Cust": 0.8822408536585366}, {"Cum % Spend": 0.6524668335914612, "Cum % Cust": 0.8826219512195123}, {"Cum % Spend": 0.6532240509986877, "Cum % Cust": 0.8830030487804879}, {"Cum % Spend": 0.6539821624755859, "Cum % Cust": 0.8833841463414634}, {"Cum % Spend": 0.6547438502311707, "Cum % Cust": 0.883765243902439}, {"Cum % Spend": 0.6555070281028748, "Cum % Cust": 0.8841463414634146}, {"Cum % Spend": 0.656272292137146, "Cum % Cust": 0.8845274390243902}, {"Cum % Spend": 0.6570384502410889, "Cum % Cust": 0.8849085365853658}, {"Cum % Spend": 0.6578049063682556, "Cum % Cust": 0.8852896341463414}, {"Cum % Spend": 0.6585713624954224, "Cum % Cust": 0.8856707317073171}, {"Cum % Spend": 0.659340500831604, "Cum % Cust": 0.8860518292682927}, {"Cum % Spend": 0.6601120233535767, "Cum % Cust": 0.8864329268292683}, {"Cum % Spend": 0.6608838438987732, "Cum % Cust": 0.8868140243902439}, {"Cum % Spend": 0.6616592407226562, "Cum % Cust": 0.8871951219512195}, {"Cum % Spend": 0.6624373197555542, "Cum % Cust": 0.8875762195121951}, {"Cum % Spend": 0.6632183790206909, "Cum % Cust": 0.8879573170731707}, {"Cum % Spend": 0.6640053987503052, "Cum % Cust": 0.8883384146341463}, {"Cum % Spend": 0.6647924184799194, "Cum % Cust": 0.888719512195122}, {"Cum % Spend": 0.6655835509300232, "Cum % Cust": 0.8891006097560976}, {"Cum % Spend": 0.6663758754730225, "Cum % Cust": 0.8894817073170732}, {"Cum % Spend": 0.6671687960624695, "Cum % Cust": 0.8898628048780488}, {"Cum % Spend": 0.667962908744812, "Cum % Cust": 0.8902439024390244}, {"Cum % Spend": 0.6687570214271545, "Cum % Cust": 0.890625}, {"Cum % Spend": 0.6695526242256165, "Cum % Cust": 0.8910060975609756}, {"Cum % Spend": 0.67034912109375, "Cum % Cust": 0.8913871951219512}, {"Cum % Spend": 0.6711480021476746, "Cum % Cust": 0.8917682926829269}, {"Cum % Spend": 0.6719468832015991, "Cum % Cust": 0.8921493902439025}, {"Cum % Spend": 0.6727487444877625, "Cum % Cust": 0.8925304878048781}, {"Cum % Spend": 0.6735506057739258, "Cum % Cust": 0.8929115853658537}, {"Cum % Spend": 0.6743584275245667, "Cum % Cust": 0.8932926829268293}, {"Cum % Spend": 0.6751662492752075, "Cum % Cust": 0.8936737804878049}, {"Cum % Spend": 0.6759740710258484, "Cum % Cust": 0.8940548780487805}, {"Cum % Spend": 0.6767818927764893, "Cum % Cust": 0.8944359756097561}, {"Cum % Spend": 0.6775897145271301, "Cum % Cust": 0.8948170731707317}, {"Cum % Spend": 0.6783990263938904, "Cum % Cust": 0.8951981707317074}, {"Cum % Spend": 0.67920982837677, "Cum % Cust": 0.895579268292683}, {"Cum % Spend": 0.6800206303596497, "Cum % Cust": 0.8959603658536586}, {"Cum % Spend": 0.6808314323425293, "Cum % Cust": 0.8963414634146342}, {"Cum % Spend": 0.6816455125808716, "Cum % Cust": 0.8967225609756098}, {"Cum % Spend": 0.6824610829353333, "Cum % Cust": 0.8971036585365854}, {"Cum % Spend": 0.6832778453826904, "Cum % Cust": 0.897484756097561}, {"Cum % Spend": 0.6840975880622864, "Cum % Cust": 0.8978658536585366}, {"Cum % Spend": 0.6849173307418823, "Cum % Cust": 0.8982469512195123}, {"Cum % Spend": 0.6857370734214783, "Cum % Cust": 0.8986280487804879}, {"Cum % Spend": 0.6865594983100891, "Cum % Cust": 0.8990091463414634}, {"Cum % Spend": 0.6873822212219238, "Cum % Cust": 0.899390243902439}, {"Cum % Spend": 0.6882049441337585, "Cum % Cust": 0.8997713414634146}, {"Cum % Spend": 0.6890276670455933, "Cum % Cust": 0.9001524390243902}, {"Cum % Spend": 0.6898509860038757, "Cum % Cust": 0.9005335365853658}, {"Cum % Spend": 0.6906760931015015, "Cum % Cust": 0.9009146341463414}, {"Cum % Spend": 0.691501796245575, "Cum % Cust": 0.9012957317073171}, {"Cum % Spend": 0.6923274993896484, "Cum % Cust": 0.9016768292682927}, {"Cum % Spend": 0.6931555867195129, "Cum % Cust": 0.9020579268292683}, {"Cum % Spend": 0.6939842700958252, "Cum % Cust": 0.9024390243902439}, {"Cum % Spend": 0.6948129534721375, "Cum % Cust": 0.9028201219512195}, {"Cum % Spend": 0.6956443190574646, "Cum % Cust": 0.9032012195121951}, {"Cum % Spend": 0.6964819431304932, "Cum % Cust": 0.9035823170731707}, {"Cum % Spend": 0.6973219513893127, "Cum % Cust": 0.9039634146341463}, {"Cum % Spend": 0.6981697082519531, "Cum % Cust": 0.904344512195122}, {"Cum % Spend": 0.6990192532539368, "Cum % Cust": 0.9047256097560976}, {"Cum % Spend": 0.6998714804649353, "Cum % Cust": 0.9051067073170732}, {"Cum % Spend": 0.7007293701171875, "Cum % Cust": 0.9054878048780488}, {"Cum % Spend": 0.7015875577926636, "Cum % Cust": 0.9058689024390244}, {"Cum % Spend": 0.7024514079093933, "Cum % Cust": 0.90625}, {"Cum % Spend": 0.7033158540725708, "Cum % Cust": 0.9066310975609756}, {"Cum % Spend": 0.7041803002357483, "Cum % Cust": 0.9070121951219512}, {"Cum % Spend": 0.7050450444221497, "Cum % Cust": 0.9073932926829269}, {"Cum % Spend": 0.7059127688407898, "Cum % Cust": 0.9077743902439025}, {"Cum % Spend": 0.7067813873291016, "Cum % Cust": 0.9081554878048781}, {"Cum % Spend": 0.7076571583747864, "Cum % Cust": 0.9085365853658537}, {"Cum % Spend": 0.708533525466919, "Cum % Cust": 0.9089176829268293}, {"Cum % Spend": 0.7094119787216187, "Cum % Cust": 0.9092987804878049}, {"Cum % Spend": 0.7102910280227661, "Cum % Cust": 0.9096798780487805}, {"Cum % Spend": 0.7111700773239136, "Cum % Cust": 0.9100609756097561}, {"Cum % Spend": 0.7120494246482849, "Cum % Cust": 0.9104420731707318}, {"Cum % Spend": 0.7129314541816711, "Cum % Cust": 0.9108231707317074}, {"Cum % Spend": 0.7138137817382812, "Cum % Cust": 0.911204268292683}, {"Cum % Spend": 0.7146984934806824, "Cum % Cust": 0.9115853658536586}, {"Cum % Spend": 0.7155835032463074, "Cum % Cust": 0.9119664634146342}, {"Cum % Spend": 0.7164685130119324, "Cum % Cust": 0.9123475609756098}, {"Cum % Spend": 0.7173565030097961, "Cum % Cust": 0.9127286585365854}, {"Cum % Spend": 0.7182471752166748, "Cum % Cust": 0.913109756097561}, {"Cum % Spend": 0.7191384434700012, "Cum % Cust": 0.9134908536585366}, {"Cum % Spend": 0.7200323939323425, "Cum % Cust": 0.9138719512195123}, {"Cum % Spend": 0.7209263443946838, "Cum % Cust": 0.9142530487804879}, {"Cum % Spend": 0.7218232750892639, "Cum % Cust": 0.9146341463414634}, {"Cum % Spend": 0.722720205783844, "Cum % Cust": 0.915015243902439}, {"Cum % Spend": 0.723619818687439, "Cum % Cust": 0.9153963414634146}, {"Cum % Spend": 0.7245197296142578, "Cum % Cust": 0.9157774390243902}, {"Cum % Spend": 0.7254196405410767, "Cum % Cust": 0.9161585365853658}, {"Cum % Spend": 0.7263195514678955, "Cum % Cust": 0.9165396341463414}, {"Cum % Spend": 0.7272212505340576, "Cum % Cust": 0.9169207317073171}, {"Cum % Spend": 0.7281241416931152, "Cum % Cust": 0.9173018292682927}, {"Cum % Spend": 0.7290270328521729, "Cum % Cust": 0.9176829268292683}, {"Cum % Spend": 0.7299308180809021, "Cum % Cust": 0.9180640243902439}, {"Cum % Spend": 0.7308366894721985, "Cum % Cust": 0.9184451219512195}, {"Cum % Spend": 0.7317425608634949, "Cum % Cust": 0.9188262195121951}, {"Cum % Spend": 0.7326484322547913, "Cum % Cust": 0.9192073170731707}, {"Cum % Spend": 0.7335546016693115, "Cum % Cust": 0.9195884146341463}, {"Cum % Spend": 0.7344633936882019, "Cum % Cust": 0.919969512195122}, {"Cum % Spend": 0.7353721857070923, "Cum % Cust": 0.9203506097560976}, {"Cum % Spend": 0.7362812757492065, "Cum % Cust": 0.9207317073170732}, {"Cum % Spend": 0.7371918559074402, "Cum % Cust": 0.9211128048780488}, {"Cum % Spend": 0.7381036281585693, "Cum % Cust": 0.9214939024390244}, {"Cum % Spend": 0.7390154004096985, "Cum % Cust": 0.921875}, {"Cum % Spend": 0.7399271726608276, "Cum % Cust": 0.9222560975609756}, {"Cum % Spend": 0.7408419251441956, "Cum % Cust": 0.9226371951219512}, {"Cum % Spend": 0.7417566776275635, "Cum % Cust": 0.9230182926829269}, {"Cum % Spend": 0.7426714301109314, "Cum % Cust": 0.9233993902439025}, {"Cum % Spend": 0.7435861825942993, "Cum % Cust": 0.9237804878048781}, {"Cum % Spend": 0.744503915309906, "Cum % Cust": 0.9241615853658537}, {"Cum % Spend": 0.7454216480255127, "Cum % Cust": 0.9245426829268293}, {"Cum % Spend": 0.7463393807411194, "Cum % Cust": 0.9249237804878049}, {"Cum % Spend": 0.7472600936889648, "Cum % Cust": 0.9253048780487805}, {"Cum % Spend": 0.7481837868690491, "Cum % Cust": 0.9256859756097561}, {"Cum % Spend": 0.7491074800491333, "Cum % Cust": 0.9260670731707318}, {"Cum % Spend": 0.7500341534614563, "Cum % Cust": 0.9264481707317074}, {"Cum % Spend": 0.7509632110595703, "Cum % Cust": 0.926829268292683}, {"Cum % Spend": 0.7518928647041321, "Cum % Cust": 0.9272103658536586}, {"Cum % Spend": 0.7528225183486938, "Cum % Cust": 0.9275914634146342}, {"Cum % Spend": 0.7537530660629272, "Cum % Cust": 0.9279725609756098}, {"Cum % Spend": 0.7546845078468323, "Cum % Cust": 0.9283536585365854}, {"Cum % Spend": 0.7556171417236328, "Cum % Cust": 0.928734756097561}, {"Cum % Spend": 0.7565497756004333, "Cum % Cust": 0.9291158536585366}, {"Cum % Spend": 0.7574824094772339, "Cum % Cust": 0.9294969512195123}, {"Cum % Spend": 0.7584153413772583, "Cum % Cust": 0.9298780487804879}, {"Cum % Spend": 0.7593503594398499, "Cum % Cust": 0.9302591463414634}, {"Cum % Spend": 0.7602859735488892, "Cum % Cust": 0.930640243902439}, {"Cum % Spend": 0.7612224817276001, "Cum % Cust": 0.9310213414634146}, {"Cum % Spend": 0.7621637582778931, "Cum % Cust": 0.9314024390243902}, {"Cum % Spend": 0.7631112933158875, "Cum % Cust": 0.9317835365853658}, {"Cum % Spend": 0.7640641927719116, "Cum % Cust": 0.9321646341463414}, {"Cum % Spend": 0.7650212645530701, "Cum % Cust": 0.9325457317073171}, {"Cum % Spend": 0.765979528427124, "Cum % Cust": 0.9329268292682927}, {"Cum % Spend": 0.7669419646263123, "Cum % Cust": 0.9333079268292683}, {"Cum % Spend": 0.7679044008255005, "Cum % Cust": 0.9336890243902439}, {"Cum % Spend": 0.768868625164032, "Cum % Cust": 0.9340701219512195}, {"Cum % Spend": 0.7698376178741455, "Cum % Cust": 0.9344512195121951}, {"Cum % Spend": 0.7708086967468262, "Cum % Cust": 0.9348323170731707}, {"Cum % Spend": 0.771781861782074, "Cum % Cust": 0.9352134146341463}, {"Cum % Spend": 0.7727550268173218, "Cum % Cust": 0.935594512195122}, {"Cum % Spend": 0.7737317681312561, "Cum % Cust": 0.9359756097560976}, {"Cum % Spend": 0.774712085723877, "Cum % Cust": 0.9363567073170732}, {"Cum % Spend": 0.7756932973861694, "Cum % Cust": 0.9367378048780488}, {"Cum % Spend": 0.7766762971878052, "Cum % Cust": 0.9371189024390244}, {"Cum % Spend": 0.777664065361023, "Cum % Cust": 0.9375}, {"Cum % Spend": 0.7786527276039124, "Cum % Cust": 0.9378810975609756}, {"Cum % Spend": 0.7796416878700256, "Cum % Cust": 0.9382621951219512}, {"Cum % Spend": 0.7806306481361389, "Cum % Cust": 0.9386432926829269}, {"Cum % Spend": 0.781622588634491, "Cum % Cust": 0.9390243902439025}, {"Cum % Spend": 0.782614529132843, "Cum % Cust": 0.9394054878048781}, {"Cum % Spend": 0.78360915184021, "Cum % Cust": 0.9397865853658537}, {"Cum % Spend": 0.7846040725708008, "Cum % Cust": 0.9401676829268293}, {"Cum % Spend": 0.7855989933013916, "Cum % Cust": 0.9405487804878049}, {"Cum % Spend": 0.7865960001945496, "Cum % Cust": 0.9409298780487805}, {"Cum % Spend": 0.7875936031341553, "Cum % Cust": 0.9413109756097561}, {"Cum % Spend": 0.7885944843292236, "Cum % Cust": 0.9416920731707318}, {"Cum % Spend": 0.789595365524292, "Cum % Cust": 0.9420731707317074}, {"Cum % Spend": 0.7905962467193604, "Cum % Cust": 0.942454268292683}, {"Cum % Spend": 0.7916001081466675, "Cum % Cust": 0.9428353658536586}, {"Cum % Spend": 0.7926039695739746, "Cum % Cust": 0.9432164634146342}, {"Cum % Spend": 0.7936149835586548, "Cum % Cust": 0.9435975609756098}, {"Cum % Spend": 0.7946289777755737, "Cum % Cust": 0.9439786585365854}, {"Cum % Spend": 0.7956447601318359, "Cum % Cust": 0.944359756097561}, {"Cum % Spend": 0.7966605424880981, "Cum % Cust": 0.9447408536585366}, {"Cum % Spend": 0.7976793050765991, "Cum % Cust": 0.9451219512195123}, {"Cum % Spend": 0.7987004518508911, "Cum % Cust": 0.9455030487804879}, {"Cum % Spend": 0.7997245788574219, "Cum % Cust": 0.9458841463414634}, {"Cum % Spend": 0.8007493019104004, "Cum % Cust": 0.946265243902439}, {"Cum % Spend": 0.8017740249633789, "Cum % Cust": 0.9466463414634146}, {"Cum % Spend": 0.8027987480163574, "Cum % Cust": 0.9470274390243902}, {"Cum % Spend": 0.8038290739059448, "Cum % Cust": 0.9474085365853658}, {"Cum % Spend": 0.8048650622367859, "Cum % Cust": 0.9477896341463414}, {"Cum % Spend": 0.8059067130088806, "Cum % Cust": 0.9481707317073171}, {"Cum % Spend": 0.8069552183151245, "Cum % Cust": 0.9485518292682927}, {"Cum % Spend": 0.8080037236213684, "Cum % Cust": 0.9489329268292683}, {"Cum % Spend": 0.8090546131134033, "Cum % Cust": 0.9493140243902439}, {"Cum % Spend": 0.8101090788841248, "Cum % Cust": 0.9496951219512195}, {"Cum % Spend": 0.811166524887085, "Cum % Cust": 0.9500762195121951}, {"Cum % Spend": 0.8122263550758362, "Cum % Cust": 0.9504573170731707}, {"Cum % Spend": 0.8133013844490051, "Cum % Cust": 0.9508384146341463}, {"Cum % Spend": 0.8143773078918457, "Cum % Cust": 0.951219512195122}, {"Cum % Spend": 0.8154568076133728, "Cum % Cust": 0.9516006097560976}, {"Cum % Spend": 0.8165380954742432, "Cum % Cust": 0.9519817073170732}, {"Cum % Spend": 0.8176238536834717, "Cum % Cust": 0.9523628048780488}, {"Cum % Spend": 0.8187137842178345, "Cum % Cust": 0.9527439024390244}, {"Cum % Spend": 0.819804310798645, "Cum % Cust": 0.953125}, {"Cum % Spend": 0.8208960294723511, "Cum % Cust": 0.9535060975609756}, {"Cum % Spend": 0.8219889402389526, "Cum % Cust": 0.9538871951219512}, {"Cum % Spend": 0.8230818510055542, "Cum % Cust": 0.9542682926829269}, {"Cum % Spend": 0.8241753578186035, "Cum % Cust": 0.9546493902439025}, {"Cum % Spend": 0.8252772092819214, "Cum % Cust": 0.9550304878048781}, {"Cum % Spend": 0.826379656791687, "Cum % Cust": 0.9554115853658537}, {"Cum % Spend": 0.8274844884872437, "Cum % Cust": 0.9557926829268293}, {"Cum % Spend": 0.8285920023918152, "Cum % Cust": 0.9561737804878049}, {"Cum % Spend": 0.8296995162963867, "Cum % Cust": 0.9565548780487805}, {"Cum % Spend": 0.8308073282241821, "Cum % Cust": 0.9569359756097561}, {"Cum % Spend": 0.8319234848022461, "Cum % Cust": 0.9573170731707318}, {"Cum % Spend": 0.8330402374267578, "Cum % Cust": 0.9576981707317074}, {"Cum % Spend": 0.8341599702835083, "Cum % Cust": 0.958079268292683}, {"Cum % Spend": 0.8352826833724976, "Cum % Cust": 0.9584603658536586}, {"Cum % Spend": 0.8364056944847107, "Cum % Cust": 0.9588414634146342}, {"Cum % Spend": 0.8375373482704163, "Cum % Cust": 0.9592225609756098}, {"Cum % Spend": 0.8386701941490173, "Cum % Cust": 0.9596036585365854}, {"Cum % Spend": 0.8398036360740662, "Cum % Cust": 0.959984756097561}, {"Cum % Spend": 0.8409376740455627, "Cum % Cust": 0.9603658536585366}, {"Cum % Spend": 0.8420723080635071, "Cum % Cust": 0.9607469512195123}, {"Cum % Spend": 0.8432087302207947, "Cum % Cust": 0.9611280487804879}, {"Cum % Spend": 0.84434574842453, "Cum % Cust": 0.9615091463414634}, {"Cum % Spend": 0.8454830646514893, "Cum % Cust": 0.961890243902439}, {"Cum % Spend": 0.8466218709945679, "Cum % Cust": 0.9622713414634146}, {"Cum % Spend": 0.8477737307548523, "Cum % Cust": 0.9626524390243902}, {"Cum % Spend": 0.8489375114440918, "Cum % Cust": 0.9630335365853658}, {"Cum % Spend": 0.8501015901565552, "Cum % Cust": 0.9634146341463414}, {"Cum % Spend": 0.8512775897979736, "Cum % Cust": 0.9637957317073171}, {"Cum % Spend": 0.8524535894393921, "Cum % Cust": 0.9641768292682927}, {"Cum % Spend": 0.8536316752433777, "Cum % Cust": 0.9645579268292683}, {"Cum % Spend": 0.8548133373260498, "Cum % Cust": 0.9649390243902439}, {"Cum % Spend": 0.8559952974319458, "Cum % Cust": 0.9653201219512195}, {"Cum % Spend": 0.8571829199790955, "Cum % Cust": 0.9657012195121951}, {"Cum % Spend": 0.8583720326423645, "Cum % Cust": 0.9660823170731707}, {"Cum % Spend": 0.8595700860023499, "Cum % Cust": 0.9664634146341463}, {"Cum % Spend": 0.8607729077339172, "Cum % Cust": 0.966844512195122}, {"Cum % Spend": 0.8619810938835144, "Cum % Cust": 0.9672256097560976}, {"Cum % Spend": 0.8631958365440369, "Cum % Cust": 0.9676067073170732}, {"Cum % Spend": 0.8644198179244995, "Cum % Cust": 0.9679878048780488}, {"Cum % Spend": 0.8656452894210815, "Cum % Cust": 0.9683689024390244}, {"Cum % Spend": 0.8668719530105591, "Cum % Cust": 0.96875}, {"Cum % Spend": 0.8681063652038574, "Cum % Cust": 0.9691310975609756}, {"Cum % Spend": 0.8693443536758423, "Cum % Cust": 0.9695121951219512}, {"Cum % Spend": 0.8705829381942749, "Cum % Cust": 0.9698932926829269}, {"Cum % Spend": 0.8718215227127075, "Cum % Cust": 0.9702743902439025}, {"Cum % Spend": 0.873060405254364, "Cum % Cust": 0.9706554878048781}, {"Cum % Spend": 0.8743079304695129, "Cum % Cust": 0.9710365853658537}, {"Cum % Spend": 0.8755590319633484, "Cum % Cust": 0.9714176829268293}, {"Cum % Spend": 0.8768113255500793, "Cum % Cust": 0.9717987804878049}, {"Cum % Spend": 0.8780671954154968, "Cum % Cust": 0.9721798780487805}, {"Cum % Spend": 0.8793320059776306, "Cum % Cust": 0.9725609756097561}, {"Cum % Spend": 0.8805994987487793, "Cum % Cust": 0.9729420731707318}, {"Cum % Spend": 0.8818734884262085, "Cum % Cust": 0.9733231707317074}, {"Cum % Spend": 0.8831766843795776, "Cum % Cust": 0.973704268292683}, {"Cum % Spend": 0.8844813704490662, "Cum % Cust": 0.9740853658536586}, {"Cum % Spend": 0.8857911229133606, "Cum % Cust": 0.9744664634146342}, {"Cum % Spend": 0.8871029615402222, "Cum % Cust": 0.9748475609756098}, {"Cum % Spend": 0.8884156942367554, "Cum % Cust": 0.9752286585365854}, {"Cum % Spend": 0.8897331953048706, "Cum % Cust": 0.975609756097561}, {"Cum % Spend": 0.8910614252090454, "Cum % Cust": 0.9759908536585366}, {"Cum % Spend": 0.89239501953125, "Cum % Cust": 0.9763719512195123}, {"Cum % Spend": 0.8937411308288574, "Cum % Cust": 0.9767530487804879}, {"Cum % Spend": 0.8950979709625244, "Cum % Cust": 0.9771341463414634}, {"Cum % Spend": 0.8964551091194153, "Cum % Cust": 0.977515243902439}, {"Cum % Spend": 0.8978158235549927, "Cum % Cust": 0.9778963414634146}, {"Cum % Spend": 0.8992087244987488, "Cum % Cust": 0.9782774390243902}, {"Cum % Spend": 0.9006033539772034, "Cum % Cust": 0.9786585365853658}, {"Cum % Spend": 0.9020021557807922, "Cum % Cust": 0.9790396341463414}, {"Cum % Spend": 0.9034042358398438, "Cum % Cust": 0.9794207317073171}, {"Cum % Spend": 0.9048149585723877, "Cum % Cust": 0.9798018292682927}, {"Cum % Spend": 0.9062316417694092, "Cum % Cust": 0.9801829268292683}, {"Cum % Spend": 0.9076590538024902, "Cum % Cust": 0.9805640243902439}, {"Cum % Spend": 0.9090906381607056, "Cum % Cust": 0.9809451219512195}, {"Cum % Spend": 0.9105222225189209, "Cum % Cust": 0.9813262195121951}, {"Cum % Spend": 0.9119839072227478, "Cum % Cust": 0.9817073170731707}, {"Cum % Spend": 0.9134467840194702, "Cum % Cust": 0.9820884146341463}, {"Cum % Spend": 0.9149376749992371, "Cum % Cust": 0.982469512195122}, {"Cum % Spend": 0.916440486907959, "Cum % Cust": 0.9828506097560976}, {"Cum % Spend": 0.9179447889328003, "Cum % Cust": 0.9832317073170732}, {"Cum % Spend": 0.9194559454917908, "Cum % Cust": 0.9836128048780488}, {"Cum % Spend": 0.920970618724823, "Cum % Cust": 0.9839939024390244}, {"Cum % Spend": 0.9224912524223328, "Cum % Cust": 0.984375}, {"Cum % Spend": 0.9240166544914246, "Cum % Cust": 0.9847560975609756}, {"Cum % Spend": 0.9255456328392029, "Cum % Cust": 0.9851371951219512}, {"Cum % Spend": 0.927075207233429, "Cum % Cust": 0.9855182926829269}, {"Cum % Spend": 0.9286187887191772, "Cum % Cust": 0.9858993902439025}, {"Cum % Spend": 0.9301626682281494, "Cum % Cust": 0.9862804878048781}, {"Cum % Spend": 0.9317095279693604, "Cum % Cust": 0.9866615853658537}, {"Cum % Spend": 0.9332587718963623, "Cum % Cust": 0.9870426829268293}, {"Cum % Spend": 0.9348121881484985, "Cum % Cust": 0.9874237804878049}, {"Cum % Spend": 0.9363745450973511, "Cum % Cust": 0.9878048780487805}, {"Cum % Spend": 0.937972366809845, "Cum % Cust": 0.9881859756097561}, {"Cum % Spend": 0.9395886659622192, "Cum % Cust": 0.9885670731707318}, {"Cum % Spend": 0.9412278532981873, "Cum % Cust": 0.9889481707317074}, {"Cum % Spend": 0.9428959488868713, "Cum % Cust": 0.989329268292683}, {"Cum % Spend": 0.9445646405220032, "Cum % Cust": 0.9897103658536586}, {"Cum % Spend": 0.9462336301803589, "Cum % Cust": 0.9900914634146342}, {"Cum % Spend": 0.9479166269302368, "Cum % Cust": 0.9904725609756098}, {"Cum % Spend": 0.9496005177497864, "Cum % Cust": 0.9908536585365854}, {"Cum % Spend": 0.9512954354286194, "Cum % Cust": 0.991234756097561}, {"Cum % Spend": 0.9530031681060791, "Cum % Cust": 0.9916158536585367}, {"Cum % Spend": 0.9547275900840759, "Cum % Cust": 0.9919969512195123}, {"Cum % Spend": 0.9564529061317444, "Cum % Cust": 0.9923780487804879}, {"Cum % Spend": 0.9582053422927856, "Cum % Cust": 0.9927591463414634}, {"Cum % Spend": 0.9600051045417786, "Cum % Cust": 0.993140243902439}, {"Cum % Spend": 0.96184241771698, "Cum % Cust": 0.9935213414634146}, {"Cum % Spend": 0.963699996471405, "Cum % Cust": 0.9939024390243902}, {"Cum % Spend": 0.9655653238296509, "Cum % Cust": 0.9942835365853658}, {"Cum % Spend": 0.9674544334411621, "Cum % Cust": 0.9946646341463414}, {"Cum % Spend": 0.9693664908409119, "Cum % Cust": 0.9950457317073171}, {"Cum % Spend": 0.97129225730896, "Cum % Cust": 0.9954268292682927}, {"Cum % Spend": 0.9732198119163513, "Cum % Cust": 0.9958079268292683}, {"Cum % Spend": 0.9752393960952759, "Cum % Cust": 0.9961890243902439}, {"Cum % Spend": 0.9772741794586182, "Cum % Cust": 0.9965701219512195}, {"Cum % Spend": 0.9795189499855042, "Cum % Cust": 0.9969512195121951}, {"Cum % Spend": 0.9817914366722107, "Cum % Cust": 0.9973323170731707}, {"Cum % Spend": 0.9840657114982605, "Cum % Cust": 0.9977134146341463}, {"Cum % Spend": 0.986367404460907, "Cum % Cust": 0.998094512195122}, {"Cum % Spend": 0.988765299320221, "Cum % Cust": 0.9984756097560976}, {"Cum % Spend": 0.9912680387496948, "Cum % Cust": 0.9988567073170732}, {"Cum % Spend": 0.9940093755722046, "Cum % Cust": 0.9992378048780488}, {"Cum % Spend": 0.9968451857566833, "Cum % Cust": 0.9996189024390244}, {"Cum % Spend": 0.9999997019767761, "Cum % Cust": 1.0}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Looking at <code>alpha_spend_dist</code>, we see that the "bottom" 80% of Alpha buyers account for 50.8% of its revenue in year 1, which is equivalent to 49/20. This is higher than the 46/20 we observed for transactions.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [74]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">xp</span><span class="o">=</span><span class="n">alpha_lorenz_plot</span><span class="p">[</span><span class="s1">'Cum % Cust'</span><span class="p">],</span> <span class="n">fp</span><span class="o">=</span><span class="n">alpha_lorenz_plot</span><span class="p">[</span><span class="s1">'Cum % Spend'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[74]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>0.5083526968955995</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Garbage-Collect">Garbage Collect<a class="anchor-link" href="#Garbage-Collect">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [75]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'grocery_lf'</span><span class="p">,</span> <span class="s1">'sku_lf'</span><span class="p">,</span> <span class="s1">'kiwi_lf'</span><span class="p">,</span> <span class="s1">'In'</span><span class="p">,</span> <span class="s1">'exceptions'</span><span class="p">,</span> <span class="s1">'active_variables'</span><span class="p">,</span>
              <span class="s1">'penetration'</span><span class="p">,</span> <span class="s1">'ppb'</span><span class="p">,</span> <span class="s1">'panel_size'</span><span class="p">]</span>

<span class="n">active_variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">var</span> <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)</span>   <span class="c1"># Exclude variables that start with "_"</span>
    <span class="ow">and</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exceptions</span>    <span class="c1"># Exclude variables in the exceptions list</span>
    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">LayerChart</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>  <span class="c1"># Remove these types only</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">active_variables</span><span class="p">:</span>
    <span class="k">del</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">var</span><span class="p">]</span>
<span class="k">del</span> <span class="n">active_variables</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">,</span> <span class="n">var</span>

<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[75]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>134</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Exploring-Multibrand-Buying-Behaviour"><span style="color:#956bbf">Exploring Multibrand Buying Behaviour</span><a class="anchor-link" href="#Exploring-Multibrand-Buying-Behaviour">¶</a></h3><hr/>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>So far, we have explored purchasing at the level of the individual brand or overall category. We now step back and consider panellists’ purchasing of multiple brands (in a given time period).</p>
<p>To set the scene, let us first determine the percentage of category buyers that bought 1, 2, 3, 4, or 5 different brands in the course of year 1. (Note that we only have five brands in the dataset, with Other being an aggregation of several very small share brands).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [76]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">brand_purchases</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'Brands Purchased'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Category Buyer'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Category Buyer'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Category Buyer'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'% Category Buyers'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'Brands Purchased'</span><span class="p">)</span>
 <span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">brand_purchases</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands Purchased'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Category Buyers That Bought Different Brands'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Distribution of the number of separate brands purchased by category buyers in year 1'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands Purchased"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Category Buyer'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'% Category Buyers'</span><span class="p">],</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'% Category Buyers'</span><span class="p">],</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[76]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="gmgkgrkzwp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#gmgkgrkzwp table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#gmgkgrkzwp thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#gmgkgrkzwp p { margin: 0 !important; padding: 0 !important; }
 #gmgkgrkzwp .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #gmgkgrkzwp .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #gmgkgrkzwp .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #gmgkgrkzwp .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #gmgkgrkzwp .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #gmgkgrkzwp .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #gmgkgrkzwp .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #gmgkgrkzwp .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #gmgkgrkzwp .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #gmgkgrkzwp .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #gmgkgrkzwp .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #gmgkgrkzwp .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #gmgkgrkzwp .gt_spanner_row { border-bottom-style: hidden !important; }
 #gmgkgrkzwp .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #gmgkgrkzwp .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #gmgkgrkzwp .gt_from_md> :first-child { margin-top: 0 !important; }
 #gmgkgrkzwp .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #gmgkgrkzwp .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #gmgkgrkzwp .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #gmgkgrkzwp .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #gmgkgrkzwp .gt_row_group_first td { border-top-width: 2px !important; }
 #gmgkgrkzwp .gt_row_group_first th { border-top-width: 2px !important; }
 #gmgkgrkzwp .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #gmgkgrkzwp .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #gmgkgrkzwp .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #gmgkgrkzwp .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #gmgkgrkzwp .gt_left { text-align: left !important; }
 #gmgkgrkzwp .gt_center { text-align: center !important; }
 #gmgkgrkzwp .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #gmgkgrkzwp .gt_font_normal { font-weight: normal !important; }
 #gmgkgrkzwp .gt_font_bold { font-weight: bold !important; }
 #gmgkgrkzwp .gt_font_italic { font-style: italic !important; }
 #gmgkgrkzwp .gt_super { font-size: 65% !important; }
 #gmgkgrkzwp .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #gmgkgrkzwp .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="3">Category Buyers That Bought Different Brands</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="3">Distribution of the number of separate brands purchased by category buyers in year 1</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands Purchased" rowspan="1" scope="col">Brands Purchased</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Category Buyer" rowspan="1" scope="col">Category Buyer</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Category Buyers" rowspan="1" scope="col">% Category Buyers</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">1</th>
<td class="gt_row gt_center">2,964</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7142a1;">65%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">2</th>
<td class="gt_row gt_center">1,278</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #c2aed6;">28%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">3</th>
<td class="gt_row gt_center">293</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1ecf6;">6%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">4</th>
<td class="gt_row gt_center">39</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">1%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We note that over two-thirds of the category buyers only ever bought one brand. This is despite the fact that 86% of category buyers made two or more category purchases in the course of the year. No household purchased all five brands that year.</p>
<p>Note: We know from analyzing the distribution of category purchase frequency that 8.9% of the panel made zero category purchases and 13.2% made one category purchase. 1 − 0.132/(1 − 0.089) = 0.855, which means 86% of year 1 category buyers made more than one category purchase that year.</p>
<p>Can also be computed as: (1 - 0.132 - 0.089)/(1 - 0.089) [% of panellists that more than 1 purchase] / [% of category buyers]</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<blockquote>
<p>How does the number of different brands purchased in the year vary as a function of the number of category purchases made during the year?</p>
</blockquote>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [77]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># number of category purchases made by each household and number of brands purchased by each household</span>
<span class="n">brand_loyalty</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">,</span> <span class="s1">'Brands Purchased'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Count'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'Brands Purchased'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'Count'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">,</span> <span class="s1">'2'</span><span class="p">,</span> <span class="s1">'3'</span><span class="p">,</span> <span class="s1">'4'</span><span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">brand_loyalty</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'# of Purchase Occasions Vs. Brands Purchased '</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Brands purchased as function of the number of category purchases made in year 1'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">700</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
        <span class="n">na_color</span><span class="o">=</span><span class="s1">'white'</span>
    <span class="p">)</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[77]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="gtwlusloiq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#gtwlusloiq table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#gtwlusloiq thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#gtwlusloiq p { margin: 0 !important; padding: 0 !important; }
 #gtwlusloiq .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #gtwlusloiq .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #gtwlusloiq .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #gtwlusloiq .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #gtwlusloiq .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #gtwlusloiq .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #gtwlusloiq .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #gtwlusloiq .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #gtwlusloiq .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #gtwlusloiq .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #gtwlusloiq .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #gtwlusloiq .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #gtwlusloiq .gt_spanner_row { border-bottom-style: hidden !important; }
 #gtwlusloiq .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #gtwlusloiq .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #gtwlusloiq .gt_from_md> :first-child { margin-top: 0 !important; }
 #gtwlusloiq .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #gtwlusloiq .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #gtwlusloiq .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #gtwlusloiq .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #gtwlusloiq .gt_row_group_first td { border-top-width: 2px !important; }
 #gtwlusloiq .gt_row_group_first th { border-top-width: 2px !important; }
 #gtwlusloiq .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #gtwlusloiq .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #gtwlusloiq .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #gtwlusloiq .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #gtwlusloiq .gt_left { text-align: left !important; }
 #gtwlusloiq .gt_center { text-align: center !important; }
 #gtwlusloiq .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #gtwlusloiq .gt_font_normal { font-weight: normal !important; }
 #gtwlusloiq .gt_font_bold { font-weight: bold !important; }
 #gtwlusloiq .gt_font_italic { font-style: italic !important; }
 #gtwlusloiq .gt_super { font-size: 65% !important; }
 #gtwlusloiq .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #gtwlusloiq .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="5"># of Purchase Occasions Vs. Brands Purchased </td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="5">Brands purchased as function of the number of category purchases made in year 1</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="# of Purchases" rowspan="1" scope="col"># of Purchases</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="1" rowspan="1" scope="col">1</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="2" rowspan="1" scope="col">2</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="3" rowspan="1" scope="col">3</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="4" rowspan="1" scope="col">4</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ffffff;">1</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #7040a0;">655</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfcfd;">12</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fffeff;">2</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8258ac;">573</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d7c9e4;">184</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fefeff;">3</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #8e69b4;">516</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d0c0e0;">216</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">24</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fefefe;">4</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ae93c9;">370</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d5c7e3;">193</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f5f1f8;">47</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">2</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fefefe;">5</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #c2aed6;">278</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d6c8e3;">189</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f6f2f9;">43</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">4</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fefdfe;">6</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #d4c6e2;">196</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e4dbed;">124</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f3f0f7;">53</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">8</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fdfdfe;">7</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #e5dced;">121</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ebe4f1;">93</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f7fb;">28</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">5</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fdfdfe;">8</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ece6f2;">87</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae4f1;">94</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fb;">25</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fdfcfe;">9</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f0f8;">51</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f0f8;">51</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf9fc;">22</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fdfcfe;">10</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f6f3f9;">42</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f5fa;">34</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fdfcfd;">11</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">24</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">24</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fcfcfd;">12</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">16</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf9fc;">21</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">4</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fcfbfd;">13</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">11</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fcfbfd;">14</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">13</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fcfbfd;">15</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fcfafd;">16</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fbfafd;">17</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fbfafc;">18</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fbf9fc;">19</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #fbf9fc;">20</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #faf9fc;">22</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #faf8fb;">25</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #f9f7fb;">27</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #FFFFFF;"></td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Looking at the resulting table output, we see that there is quite a high level of sole-brand loyalty (i.e., only buying one brand), even as the number of category purchases increases. We have two panellists that made 20 category purchases, all with the same brand. That’s some level of
loyalty!</p>
<p>We can compute the (weighted) average number of different brands purchased for each level of category purchasing.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [78]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">wa_brands_purchased</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trans_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">,</span> <span class="s1">'Brands Purchased'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Count'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Brands Purchased'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Count'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Product'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Product'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Count'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span> <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Weighted Average'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">wa_brands_purchased</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# of Purchases'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'W.A. # of Different Brands Purchased'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"# of Purchases"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">({</span><span class="s1">'Weighted Average'</span><span class="p">:</span> <span class="s1">'Weighted Average Brands'</span><span class="p">})</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[78]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="sylbpmaict" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#sylbpmaict table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#sylbpmaict thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#sylbpmaict p { margin: 0 !important; padding: 0 !important; }
 #sylbpmaict .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #sylbpmaict .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #sylbpmaict .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #sylbpmaict .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #sylbpmaict .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #sylbpmaict .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #sylbpmaict .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #sylbpmaict .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #sylbpmaict .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #sylbpmaict .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #sylbpmaict .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #sylbpmaict .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #sylbpmaict .gt_spanner_row { border-bottom-style: hidden !important; }
 #sylbpmaict .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #sylbpmaict .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #sylbpmaict .gt_from_md> :first-child { margin-top: 0 !important; }
 #sylbpmaict .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #sylbpmaict .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #sylbpmaict .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #sylbpmaict .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #sylbpmaict .gt_row_group_first td { border-top-width: 2px !important; }
 #sylbpmaict .gt_row_group_first th { border-top-width: 2px !important; }
 #sylbpmaict .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #sylbpmaict .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #sylbpmaict .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #sylbpmaict .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #sylbpmaict .gt_left { text-align: left !important; }
 #sylbpmaict .gt_center { text-align: center !important; }
 #sylbpmaict .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #sylbpmaict .gt_font_normal { font-weight: normal !important; }
 #sylbpmaict .gt_font_bold { font-weight: bold !important; }
 #sylbpmaict .gt_font_italic { font-style: italic !important; }
 #sylbpmaict .gt_super { font-size: 65% !important; }
 #sylbpmaict .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #sylbpmaict .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="2">W.A. # of Different Brands Purchased</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="# of Purchases" rowspan="1" scope="col"># of Purchases</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Weighted Average Brands" rowspan="1" scope="col">Weighted Average Brands</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ffffff;">1</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefefe;">1.02</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #ccbbdd;">2</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f2eef7;">1.25</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #9977bb;">3</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ede7f3;">1.35</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #FFFFFF; background-color: #663399;">4</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e7deef;">1.48</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">5</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e3d9ec;">1.56</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">6</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ddd2e8;">1.67</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">7</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ddd2e8;">1.66</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">8</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dacde6;">1.73</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">9</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d5c7e3;">1.82</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">10</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #e0d5ea;">1.61</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">11</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d7c9e4;">1.79</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">12</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #cbbadc;">2.02</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">13</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d2c3e1;">1.89</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">14</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d1c2e0;">1.90</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">15</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #cfc0df;">1.93</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">16</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b69dce;">2.44</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">17</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #bda8d3;">2.29</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">18</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d9cce6;">1.75</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">19</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbbdd;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">20</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d9cce6;">1.75</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">22</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbbdd;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">25</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbbdd;">2.00</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">27</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #663399;">4.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We note that the average number of brands purchased does increase as a function of category purchasing. This should not come as a surprise, as more category purchases equals more opportunities to buy different brands. We saw in earlier that two brands (Alpha and Bravo) had a combined value market share of 86%. As such, the relatively low number of different brands purchased in the year is not too surprising.</p>
<p>We now consider three common analyses designed to give insight into the nature of multibrand buying behaviour.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Duplication-of-Purchase">Duplication of Purchase<a class="anchor-link" href="#Duplication-of-Purchase">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We know from our analysis of penetration and PPB earlier that 52% of households purchased Alpha and 51% of households purchased Bravo. What percentage of Alpha buyers also purchased Bravo during the year (and vice-versa)? The answer to these (and similar) questions is provided by a duplication of purchase analysis.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Before performing this analysis on our dataset, let us consider a toy example. The following table summarizes the purchasing of four brands by six households.</p>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>HH01</td>
<td><strong>1</strong></td>
<td>0</td>
<td><strong>2</strong></td>
<td>0</td>
</tr>
<tr>
<td>HH02</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH03</td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH04</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>HH05</td>
<td><strong>1</strong></td>
<td><strong>1</strong></td>
<td>0</td>
<td><strong>1</strong></td>
</tr>
<tr>
<td>HH06</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>We see that three households made at least one purchase of brand A, three households made at least one purchase of brand B, and so on. How many brand A buyers also purchased brand B? Two (HH03 and HH05). How many brand A buyers also purchased brand C? One (HH01). Repeating this for all brands gives us the following table, which we will call a <strong>duplication count table</strong>.</p>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>A</strong></td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td><strong>B</strong></td>
<td>2</td>
<td>3</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td><strong>C</strong></td>
<td>1</td>
<td>0</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td><strong>D</strong></td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>For any given row, the number in each cell is the number of buyers of the brand associated with that row that also purchased the brand associated with that column. (The diagonal is obviously the number of buyers of each brand.) Looking at the row for brand A, we see that three households
purchased that brand. Two of these households (67%) also made at least one purchase of brand B, and one of these three households (33%) also made at least one purchase of brand C. These row percentages are reported in the following table, which we call the <strong>duplication of purchase table</strong>. (By convention, we leave the diagonal blank.)</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>A</strong></td>
<td style="text-align:center"></td>
<td style="text-align:center">67%</td>
<td style="text-align:center">33%</td>
<td style="text-align:center">33%</td>
</tr>
<tr>
<td style="text-align:center"><strong>B</strong></td>
<td style="text-align:center">67%</td>
<td style="text-align:center"></td>
<td style="text-align:center">0%</td>
<td style="text-align:center">33%</td>
</tr>
<tr>
<td style="text-align:center"><strong>C</strong></td>
<td style="text-align:center">50%</td>
<td style="text-align:center">0%</td>
<td style="text-align:center"></td>
<td style="text-align:center">50%</td>
</tr>
<tr>
<td style="text-align:center"><strong>D</strong></td>
<td style="text-align:center">33%</td>
<td style="text-align:center">33%</td>
<td style="text-align:center">33%</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>How can we create this table efficiently when we have a large number of panellists? One approach, which makes use of matrix multiplication, is as follows:</p>
<ul>
<li>We create what we will call an “<strong>ever buyers</strong>” matrix (or <strong>incidence matrix</strong>), which is a matrix of size (number of panellists) × (number of brands), where each cell takes on a value of 1 if the panellist (row) ever purchased the brand (column) in the period of interest; 0 otherwise.</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>HH01</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>HH02</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH03</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH04</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>HH05</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>HH06</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul>
<li>Pre-multiplying the “ever buyers” matrix by its own transpose gives us the <strong>duplication count table</strong> which we created above: $A^{T}\cdot A=B$. (Evaluate the example below.)</li>
</ul>
<p>Transposed "ever buyer" matrix:</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">HH01</th>
<th style="text-align:center">HH02</th>
<th style="text-align:center">HH03</th>
<th style="text-align:center">HH04</th>
<th style="text-align:center">HH05</th>
<th style="text-align:center">HH06</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">B</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">C</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>Matrix Multiply By:</p>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>HH01</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>HH02</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH03</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH04</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>HH05</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>HH06</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul>
<li>The 'ever buyer' matrix (<strong>incidence matrix</strong>) effectively creates a binary of 1 (Yes) or 0 (No) to factor in the required inclusions or exclusions of intersection between buyers of different brands. In this case, when we multiply the binary matrix and its transposed form together, we are computing a matrix that records the count of existing intersection of buyers of a brand who also purchased other brands.</li>
<li>Dividing each cell by the number of buyers of the brand associated with each row gives us the <strong>duplication of purchase table</strong>.</li>
</ul>
<p><a href="http://matrixmultiplication.xyz">Matrix Multiplication Visualizer</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [79]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># m x n matrix where m = # of panellists, n = # of brands and value is number of purchases</span>
<span class="n">brand_purch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">])</span>

<span class="c1"># m x n matrix where value is 1 if buyer ever purchased, 0 if never purchased</span>
<span class="n">ever_buyers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">brand_purch</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># n x n square matrix representing count of row/column brand buyers who also purchased column/row brands</span>
<span class="n">dup_count</span> <span class="o">=</span> <span class="n">ever_buyers</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">ever_buyers</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Duplication Count Matrix:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dup_count</span><span class="p">,</span> <span class="n">dup_count</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>
<span class="c1"># Diagonal vector of dup_count matrix representing the number of buyers of each ROW brand</span>
<span class="n">brand_buyers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">dup_count</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Number of Buyers of Each Brand:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">brand_buyers</span><span class="p">,</span> <span class="n">brand_buyers</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># n x n square matrix representing the proportion of brand buyers for each ROW brand that also purchased other COLUMN brands</span>
<span class="n">dup_purchase</span> <span class="o">=</span> <span class="n">dup_count</span> <span class="o">/</span> <span class="n">brand_buyers</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Duplication of Purchase Matrix:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dup_purchase</span><span class="p">,</span> <span class="n">dup_purchase</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Duplication Count Matrix:
[[3 2 1 1]
 [2 3 0 1]
 [1 0 2 1]
 [1 1 1 3]] (4, 4)

Number of Buyers of Each Brand:
[[3]
 [3]
 [2]
 [3]] (4, 1)
Duplication of Purchase Matrix:
[[1.         0.66666667 0.33333333 0.33333333]
 [0.66666667 1.         0.         0.33333333]
 [0.5        0.         1.         0.5       ]
 [0.33333333 0.33333333 0.33333333 1.        ]] (4, 4)
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [80]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">brand_purchases</span> <span class="o">=</span> <span class="n">trans_pivot</span><span class="p">(</span><span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">)</span>

<span class="c1"># Step 1: Create ever buyers matrix</span>
<span class="n">ever_buyers</span> <span class="o">=</span> <span class="n">brand_purchases</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="c1"># Step 2: Compute duplication count matrix</span>
<span class="n">dup_count</span> <span class="o">=</span> <span class="n">ever_buyers</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">ever_buyers</span>
<span class="n">brand_buyers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">dup_count</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Step 3: Compute duplication of purchase matrix</span>
<span class="n">dup_purchase</span> <span class="o">=</span> <span class="n">dup_count</span> <span class="o">/</span> <span class="n">brand_buyers</span>

<span class="c1"># DataFrame conversion for tabular view</span>
<span class="n">dup_count_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">dup_count</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">dup_purchase_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">dup_purchase</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [81]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">dup_count_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Duplication Count Matrix'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Count of buyers who purchased row AND column brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">900</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'lightgrey'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">([</span><span class="s1">'Alpha'</span><span class="p">],[</span><span class="s1">'Alpha'</span><span class="p">]),</span> 
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">([</span><span class="s1">'Bravo'</span><span class="p">],[</span><span class="s1">'Bravo'</span><span class="p">]),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">([</span><span class="s1">'Charlie'</span><span class="p">],[</span><span class="s1">'Charlie'</span><span class="p">]),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">([</span><span class="s1">'Delta'</span><span class="p">],[</span><span class="s1">'Delta'</span><span class="p">]),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">([</span><span class="s1">'Other'</span><span class="p">],[</span><span class="s1">'Other'</span><span class="p">])</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _# of People who Purchased [Brand] / Who also Purchased [Brand]_"""</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[81]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="kyovcoqbqq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#kyovcoqbqq table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#kyovcoqbqq thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#kyovcoqbqq p { margin: 0 !important; padding: 0 !important; }
 #kyovcoqbqq .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #kyovcoqbqq .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #kyovcoqbqq .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #kyovcoqbqq .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #kyovcoqbqq .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kyovcoqbqq .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kyovcoqbqq .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kyovcoqbqq .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #kyovcoqbqq .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #kyovcoqbqq .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #kyovcoqbqq .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #kyovcoqbqq .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #kyovcoqbqq .gt_spanner_row { border-bottom-style: hidden !important; }
 #kyovcoqbqq .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #kyovcoqbqq .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #kyovcoqbqq .gt_from_md> :first-child { margin-top: 0 !important; }
 #kyovcoqbqq .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #kyovcoqbqq .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #kyovcoqbqq .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #kyovcoqbqq .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #kyovcoqbqq .gt_row_group_first td { border-top-width: 2px !important; }
 #kyovcoqbqq .gt_row_group_first th { border-top-width: 2px !important; }
 #kyovcoqbqq .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #kyovcoqbqq .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kyovcoqbqq .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #kyovcoqbqq .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #kyovcoqbqq .gt_left { text-align: left !important; }
 #kyovcoqbqq .gt_center { text-align: center !important; }
 #kyovcoqbqq .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #kyovcoqbqq .gt_font_normal { font-weight: normal !important; }
 #kyovcoqbqq .gt_font_bold { font-weight: bold !important; }
 #kyovcoqbqq .gt_font_italic { font-style: italic !important; }
 #kyovcoqbqq .gt_super { font-size: 65% !important; }
 #kyovcoqbqq .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #kyovcoqbqq .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Duplication Count Matrix</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Count of buyers who purchased row AND column brands</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: lightgrey;">2,624</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #673499;">896</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #baa4d1;">403</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d6c9e4;">239</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">69</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #673499;">896</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: lightgrey;">2,562</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bea8d4;">382</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e7dfef;">140</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ece6f3;">110</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #baa4d1;">403</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bea8d4;">382</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7547a3; color: white; background-color: lightgrey;">813</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe5f2;">116</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fbf9fc;">26</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d6c9e4;">239</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e7dfef;">140</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe5f2;">116</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bea9d4; color: white; background-color: lightgrey;">380</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">10</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">69</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ece6f3;">110</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fbf9fc;">26</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">10</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e1d7eb; color: white; background-color: lightgrey;">176</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="6"><strong>Read Row/Column as</strong>: <em># of People who Purchased [Brand] / Who also Purchased [Brand]</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [82]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">dup_purchase_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Duplication of Purchase Matrix'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f brand buyers that also purchased other brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'white'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _</span><span class="si">% o</span><span class="s2">f People who Purchased [Brand] / Who also Purchased [Brand]_"""</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[82]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="yxghtugwjn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#yxghtugwjn table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#yxghtugwjn thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#yxghtugwjn p { margin: 0 !important; padding: 0 !important; }
 #yxghtugwjn .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #yxghtugwjn .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #yxghtugwjn .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #yxghtugwjn .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #yxghtugwjn .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #yxghtugwjn .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #yxghtugwjn .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #yxghtugwjn .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #yxghtugwjn .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #yxghtugwjn .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #yxghtugwjn .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #yxghtugwjn .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #yxghtugwjn .gt_spanner_row { border-bottom-style: hidden !important; }
 #yxghtugwjn .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #yxghtugwjn .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #yxghtugwjn .gt_from_md> :first-child { margin-top: 0 !important; }
 #yxghtugwjn .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #yxghtugwjn .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #yxghtugwjn .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #yxghtugwjn .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #yxghtugwjn .gt_row_group_first td { border-top-width: 2px !important; }
 #yxghtugwjn .gt_row_group_first th { border-top-width: 2px !important; }
 #yxghtugwjn .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #yxghtugwjn .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #yxghtugwjn .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #yxghtugwjn .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #yxghtugwjn .gt_left { text-align: left !important; }
 #yxghtugwjn .gt_center { text-align: center !important; }
 #yxghtugwjn .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #yxghtugwjn .gt_font_normal { font-weight: normal !important; }
 #yxghtugwjn .gt_font_bold { font-weight: bold !important; }
 #yxghtugwjn .gt_font_italic { font-style: italic !important; }
 #yxghtugwjn .gt_super { font-size: 65% !important; }
 #yxghtugwjn .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #yxghtugwjn .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Duplication of Purchase Matrix</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">% of brand buyers that also purchased other brands</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">100%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #b49bcd;">34%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ddd2e9;">15%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f2;">9%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f9f7fb;">3%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #b399cc;">35%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">100%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ded4e9;">15%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">5%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f2f9;">4%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #936fb7;">50%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #9876bb;">47%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">100%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e0d5ea;">14%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f8f6fa;">3%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7648a3;">63%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ae94c9;">37%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bca6d3;">31%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">100%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f9f7fb;">3%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #a98dc6;">39%</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7649a4;">62%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dfd4e9;">15%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eef7;">6%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">100%</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="6"><strong>Read Row/Column as</strong>: <em>% of People who Purchased [Brand] / Who also Purchased [Brand]</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The duplication of purchase matrix for year 1 is computed above. We see that 34% of those panellists that purchased Alpha in year 1 also made at least one purchase of Bravo that year. We see that 15% of Alpha buyers also bought Charlie, whereas 50% of Charlie buyers also bought Alpha. This asymmetry is not surprising given the relative size of the two brands.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Share-of-Category-Requirements-(SCR)">Share of Category Requirements (SCR)<a class="anchor-link" href="#Share-of-Category-Requirements-(SCR)">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The duplication of purchase table tells use that 34% of Alpha buyers also purchased Bravo, 15% also purchased Charlie, and so on. This “polygamous purchasing” leads to an obvious question: How “loyal” are they to Alpha? The answer to this question obviously depends on what we mean by “loyal”. One commonly used measure of loyalty is <strong>share of category requirements (SCR)</strong>, which is the percentage of category volume that the brand represents among its buyers.</p>
<p>The SCR numbers for each brand are reported below. We see that Alpha has a share of category requirements of 69%. This means that 69% of the <em>total category volume purchased by buyers of Alpha goes to Alpha</em>. Contrast this to Delta, which has an SCR of 40%. This means that 40% of the volume purchased in the category by buyers of Delta goes to that brand.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [83]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># List of brands</span>
<span class="n">brands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="s1">'Bravo'</span><span class="p">,</span> <span class="s1">'Charlie'</span><span class="p">,</span> <span class="s1">'Delta'</span><span class="p">,</span> <span class="s1">'Other'</span><span class="p">]</span>

<span class="c1"># Initialize results list</span>
<span class="n">scr_results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">with</span> <span class="n">pl</span><span class="o">.</span><span class="n">StringCache</span><span class="p">():</span>
    <span class="c1"># Compute total category volume</span>
    <span class="n">total_vol</span> <span class="o">=</span> <span class="n">vol_summary</span><span class="p">(</span><span class="s1">'Category'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">brand</span> <span class="ow">in</span> <span class="n">brands</span><span class="p">:</span>
        <span class="c1"># Join brand-specific volume to total category volume to get total category volume for panelists who purchased the brand</span>
        <span class="n">scr_lf</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">total_vol</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">other</span><span class="o">=</span><span class="n">vol_summary</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">on</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
                <span class="n">how</span><span class="o">=</span><span class="s1">'inner'</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="c1"># Compute total brand and category volumes</span>
                <span class="c1"># Total purchasing of each brand</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume_right'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Brand Volume'</span><span class="p">),</span>
                <span class="c1"># The total amount of category purchasing conditioned on the fact that at least one purchase of the brand of interest was made.</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Category Volume'</span><span class="p">),</span>          
            <span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="c1"># Compute SCR - ratio of brand purchasing to category purchasing</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Brand Volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Category Volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'SCR'</span><span class="p">)</span>          
            <span class="p">)</span>
            <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'Brand Volume'</span><span class="p">,</span> <span class="s1">'Category Volume'</span><span class="p">,</span> <span class="s1">'SCR'</span><span class="p">)</span>
            <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="p">)</span>
        
        <span class="c1"># Append results</span>
        <span class="n">scr_results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">"Brands"</span><span class="p">:</span> <span class="n">brand</span><span class="p">,</span>
            <span class="s2">"Brand Purchasing"</span><span class="p">:</span> <span class="n">scr_lf</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"Brand Volume"</span><span class="p">),</span>
            <span class="s2">"Category Purchasing"</span><span class="p">:</span> <span class="n">scr_lf</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"Category Volume"</span><span class="p">),</span>
            <span class="s2">"SCR"</span><span class="p">:</span> <span class="n">scr_lf</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"SCR"</span><span class="p">)</span>
        <span class="p">})</span>

<span class="c1"># Create final DataFrame</span>
<span class="n">scr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scr_results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [84]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">scr</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Share of Category Requirements (SCR)'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f category volume that the brand represents among its buyers'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Brand Purchasing'</span><span class="p">,</span> <span class="s1">'Category Purchasing'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'SCR'</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
        <span class="n">columns</span><span class="o">=</span><span class="s1">'SCR'</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[84]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="nlwtxkdqhv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#nlwtxkdqhv table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#nlwtxkdqhv thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#nlwtxkdqhv p { margin: 0 !important; padding: 0 !important; }
 #nlwtxkdqhv .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #nlwtxkdqhv .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #nlwtxkdqhv .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #nlwtxkdqhv .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #nlwtxkdqhv .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #nlwtxkdqhv .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #nlwtxkdqhv .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #nlwtxkdqhv .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #nlwtxkdqhv .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #nlwtxkdqhv .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #nlwtxkdqhv .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #nlwtxkdqhv .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #nlwtxkdqhv .gt_spanner_row { border-bottom-style: hidden !important; }
 #nlwtxkdqhv .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #nlwtxkdqhv .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #nlwtxkdqhv .gt_from_md> :first-child { margin-top: 0 !important; }
 #nlwtxkdqhv .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #nlwtxkdqhv .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #nlwtxkdqhv .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #nlwtxkdqhv .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #nlwtxkdqhv .gt_row_group_first td { border-top-width: 2px !important; }
 #nlwtxkdqhv .gt_row_group_first th { border-top-width: 2px !important; }
 #nlwtxkdqhv .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #nlwtxkdqhv .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #nlwtxkdqhv .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #nlwtxkdqhv .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #nlwtxkdqhv .gt_left { text-align: left !important; }
 #nlwtxkdqhv .gt_center { text-align: center !important; }
 #nlwtxkdqhv .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #nlwtxkdqhv .gt_font_normal { font-weight: normal !important; }
 #nlwtxkdqhv .gt_font_bold { font-weight: bold !important; }
 #nlwtxkdqhv .gt_font_italic { font-style: italic !important; }
 #nlwtxkdqhv .gt_super { font-size: 65% !important; }
 #nlwtxkdqhv .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #nlwtxkdqhv .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="4">Share of Category Requirements (SCR)</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="4">% of category volume that the brand represents among its buyers</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Brand Purchasing" rowspan="1" scope="col">Brand Purchasing</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Category Purchasing" rowspan="1" scope="col">Category Purchasing</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="SCR" rowspan="1" scope="col">SCR</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">Alpha</th>
<td class="gt_row gt_right">9,166</td>
<td class="gt_row gt_right">13,315</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #69369b;">69%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Bravo</th>
<td class="gt_row gt_right">8,240</td>
<td class="gt_row gt_right">12,121</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #6a399c;">68%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Charlie</th>
<td class="gt_row gt_right">2,171</td>
<td class="gt_row gt_right">4,780</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #9c7bbd;">45%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Delta</th>
<td class="gt_row gt_right">921</td>
<td class="gt_row gt_right">2,277</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #a789c4;">40%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Other</th>
<td class="gt_row gt_right">286</td>
<td class="gt_row gt_right">980</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bfaad4;">29%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [85]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Method 2</span>

<span class="n">brand_vol</span> <span class="o">=</span> <span class="n">vol_pivot</span><span class="p">(</span><span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ever_buyers</span> <span class="o">=</span> <span class="n">brand_vol</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">brand_vol</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="n">brand_vol</span> <span class="o">=</span> <span class="n">brand_vol</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="n">cross_purchasing</span> <span class="o">=</span> <span class="n">ever_buyers</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">brand_vol</span>
<span class="n">brand_purchasing</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">cross_purchasing</span><span class="p">)</span>
<span class="n">category_purchasing</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">cross_purchasing</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">scr</span> <span class="o">=</span> <span class="n">brand_purchasing</span> <span class="o">/</span> <span class="n">category_purchasing</span>
<span class="n">scr</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[85]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>array([0.68841532, 0.67982815, 0.45424589, 0.40440854, 0.29217697])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Cross-Purchasing">Cross Purchasing<a class="anchor-link" href="#Cross-Purchasing">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Cross-Purchasing---By-Volume-Purchase">Cross Purchasing - <em>By Volume Purchase</em><a class="anchor-link" href="#Cross-Purchasing---By-Volume-Purchase">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We have just seen that 69% of total category volume purchasing by the buyers of Alpha went to that brand. We know from the duplication of purchase analysis that 15% of Alpha buyers also purchased Charlie. How much of their category <em>volume</em> purchasing went to Charlie? This is answered via <strong>cross purchase analysis</strong> (sometimes called a <strong>combination purchase analysis</strong>).</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>To illustrate the logic of the associated calculations, let us revisit the toy problem introduced earlier. We have the following summary of the purchasing of four brands by six households and the associated “ever buyers” matrix. We will assume the "ever buyers" matrix reports volume purchasing in kilograms.</p>
<p><strong>Brand Purchasing</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">Total</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HH01</td>
<td style="text-align:center"><strong>1</strong></td>
<td style="text-align:center">0</td>
<td style="text-align:center"><strong>2</strong></td>
<td style="text-align:center">0</td>
<td style="text-align:center"><strong>3</strong></td>
</tr>
<tr>
<td style="text-align:center">HH02</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">HH03</td>
<td style="text-align:center"><strong>1</strong></td>
<td style="text-align:center"><strong>3</strong></td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center"><strong>4</strong></td>
</tr>
<tr>
<td style="text-align:center">HH04</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">HH05</td>
<td style="text-align:center"><strong>1</strong></td>
<td style="text-align:center"><strong>1</strong></td>
<td style="text-align:center">0</td>
<td style="text-align:center"><strong>1</strong></td>
<td style="text-align:center"><strong>3</strong></td>
</tr>
<tr>
<td style="text-align:center">HH06</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p><strong>Ever Buyers Matrix</strong> (<em>Incidence Matrix</em>)</p>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>HH01</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>HH02</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH03</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>HH04</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>HH05</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>HH06</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>We see that buyers of brand A purchased 3 kg (1 + 1 + 1, from A column) of brand A and a total of 10 kg (3 + 4 + 3, from total column) in the category (i.e., SCR = 30%). We see that they also purchased 4 kg (3 + 1, from B column) of brand B, 2 kg (2, from C column) of brand C and 1 kg (1, from D column) of brand D. The associated numbers for all brands are given in the following table:</p>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>A</strong></td>
<td>3</td>
<td>4</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td><strong>B</strong></td>
<td>2</td>
<td>5</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td><strong>C</strong></td>
<td>1</td>
<td>0</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><strong>D</strong></td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>The sum of the elements of each row gives us the total amount of category purchasing by buyers of the brand of that row. Dividing each row entry by the sum of that row’s elements gives us the following <strong>cross purchasing table</strong>, the <em>diagonal of which is obviously SCR</em>.</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>A</strong></td>
<td style="text-align:center">30%</td>
<td style="text-align:center">40%</td>
<td style="text-align:center">20%</td>
<td style="text-align:center">10%</td>
</tr>
<tr>
<td style="text-align:center"><strong>B</strong></td>
<td style="text-align:center">25%</td>
<td style="text-align:center">63%</td>
<td style="text-align:center">0%</td>
<td style="text-align:center">13%</td>
</tr>
<tr>
<td style="text-align:center"><strong>C</strong></td>
<td style="text-align:center">13%</td>
<td style="text-align:center">0%</td>
<td style="text-align:center">38%</td>
<td style="text-align:center">50%</td>
</tr>
<tr>
<td style="text-align:center"><strong>D</strong></td>
<td style="text-align:center">11%</td>
<td style="text-align:center">11%</td>
<td style="text-align:center">11%</td>
<td style="text-align:center">67%</td>
</tr>
</tbody>
</table>
<p>How do we create the table efficiently when we have a large number of panellists? One approach is to pre-multiply the panellist × brand volume purchasing summary table by the transpose of the “ever buyers” matrix $A^{T}\cdot B$:</p>
<p>Transposed "ever buyer" matrix:</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">HH01</th>
<th style="text-align:center">HH02</th>
<th style="text-align:center">HH03</th>
<th style="text-align:center">HH04</th>
<th style="text-align:center">HH05</th>
<th style="text-align:center">HH06</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">B</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">C</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>Multiplied by Brand Volume Purchasing:</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HH01</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">2</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">HH02</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">HH03</td>
<td style="text-align:center">1</td>
<td style="text-align:center">3</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">HH04</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">HH05</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">HH06</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>The 'ever buyer' matrix creates a binary of 1 (buyer) or 0 (non-buyer) to help factor in the inclusions/exclusions and overlaps between brands purchased by all buyers. In this case, as we multiply the transposed form of the binary matrix with the quantity/volume matrix representing the quantity of purchase of different brands by each buyer, we are solving for a matrix that represents the total volume of purchasing for a set of brands by a set of buyers and their purchases of other brands.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [86]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># m x n matrix where m = # of panellists, n = # of brands and value is volume of purchases </span>
<span class="n">brand_purch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">])</span>

<span class="c1"># m x n matrix where value is 1 if buyer ever purchased, 0 if never purchased</span>
<span class="n">ever_buyers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">brand_purch</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># n x n square matrix representing row brand buyers and their volume/unit purchases from row brand and column brands</span>
<span class="n">cross_purch_matrix</span> <span class="o">=</span> <span class="n">ever_buyers</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">brand_purch</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Cross Purchasing Matrix:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cross_purch_matrix</span><span class="p">,</span> <span class="n">cross_purch_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>
<span class="c1"># The sum of the elements of each row gives us the total amount of category purchasing (volume) by buyers of the brand of that row</span>
<span class="n">category_purch</span> <span class="o">=</span> <span class="n">cross_purch_matrix</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Total Amount of Category Purchasing by Buyers of the Row Brand:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">brand_buyers</span><span class="p">,</span> <span class="n">brand_buyers</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>
<span class="c1"># n x n square matrix representing the proportion of volume purchased by row brand buyers for each COLUMN brands relative to total purchased of the row brand buyer</span>
<span class="n">cross_purch</span> <span class="o">=</span> <span class="n">cross_purch_matrix</span> <span class="o">/</span> <span class="n">category_purch</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Cross Purchasing Matrix as a </span><span class="si">% o</span><span class="s1">f Total Volume Purchased of Each Brand:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cross_purch</span><span class="p">,</span> <span class="n">cross_purch</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Cross Purchasing Matrix:
[[3 4 2 1]
 [2 5 0 1]
 [1 0 3 4]
 [1 1 1 6]] (4, 4)

Total Amount of Category Purchasing by Buyers of the Row Brand:
[[2624]
 [2562]
 [ 813]
 [ 380]
 [ 176]] (5, 1)

Cross Purchasing Matrix as a % of Total Volume Purchased of Each Brand:
[[0.3        0.4        0.2        0.1       ]
 [0.25       0.625      0.         0.125     ]
 [0.125      0.         0.375      0.5       ]
 [0.11111111 0.11111111 0.11111111 0.66666667]] (4, 4)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The cross purchasing analysis for year 1 is computed and reported below. We see that for those panellists that purchased Alpha at least once in year 1, 69% of their category volume purchased went to Alpha, 18% went to Bravo, 8% to Charlie, and so on.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [87]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">brand_vol_purchases</span> <span class="o">=</span> <span class="n">vol_pivot</span><span class="p">(</span><span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Step 1: Create ever buyers matrix</span>
<span class="n">ever_buyers</span> <span class="o">=</span> <span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="c1"># Step 2: Compute cross purchase matrix</span>
<span class="n">cross_purch_matrix</span> <span class="o">=</span> <span class="n">ever_buyers</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">brand_vol_purchases</span>
<span class="n">total_volume_purchases</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">cross_purch_matrix</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Step 3: Compute cross purchase matrix as a % of total volume purchased of each brand</span>
<span class="n">cross_purch</span> <span class="o">=</span> <span class="n">cross_purch_matrix</span> <span class="o">/</span> <span class="n">total_volume_purchases</span>

<span class="c1"># DataFrame conversion for tabular view</span>
<span class="n">cross_purch_matrix_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">cross_purch_matrix</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">cross_purch_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">cross_purch</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [88]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">cross_purch_matrix_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Cross Purchasing Analysis'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Total Volume of Category Purchasing by Buyers of the Brand (by row)'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3000</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'lightgrey'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _Purchasers of [Brands] / Total Volume Purchased of [Brands]_"""</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[88]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="lqxfwzvnoi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#lqxfwzvnoi table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#lqxfwzvnoi thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#lqxfwzvnoi p { margin: 0 !important; padding: 0 !important; }
 #lqxfwzvnoi .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #lqxfwzvnoi .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #lqxfwzvnoi .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #lqxfwzvnoi .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #lqxfwzvnoi .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #lqxfwzvnoi .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #lqxfwzvnoi .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #lqxfwzvnoi .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #lqxfwzvnoi .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #lqxfwzvnoi .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #lqxfwzvnoi .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #lqxfwzvnoi .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #lqxfwzvnoi .gt_spanner_row { border-bottom-style: hidden !important; }
 #lqxfwzvnoi .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #lqxfwzvnoi .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #lqxfwzvnoi .gt_from_md> :first-child { margin-top: 0 !important; }
 #lqxfwzvnoi .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #lqxfwzvnoi .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #lqxfwzvnoi .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #lqxfwzvnoi .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #lqxfwzvnoi .gt_row_group_first td { border-top-width: 2px !important; }
 #lqxfwzvnoi .gt_row_group_first th { border-top-width: 2px !important; }
 #lqxfwzvnoi .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #lqxfwzvnoi .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #lqxfwzvnoi .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #lqxfwzvnoi .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #lqxfwzvnoi .gt_left { text-align: left !important; }
 #lqxfwzvnoi .gt_center { text-align: center !important; }
 #lqxfwzvnoi .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #lqxfwzvnoi .gt_font_normal { font-weight: normal !important; }
 #lqxfwzvnoi .gt_font_bold { font-weight: bold !important; }
 #lqxfwzvnoi .gt_font_italic { font-style: italic !important; }
 #lqxfwzvnoi .gt_super { font-size: 65% !important; }
 #lqxfwzvnoi .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #lqxfwzvnoi .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Cross Purchasing Analysis</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Total Volume of Category Purchasing by Buyers of the Brand (by row)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: lightgrey;">9,166</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #8158ab;">2,461</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #c8b6da;">1,076</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e5ddee;">504</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf8fb;">108</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7e54a9;">2,522</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: lightgrey;">8,240</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d1c1e0;">907</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f1ecf5;">282</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f3f9;">170</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c1acd5;">1,221</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #c5b2d9;">1,131</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #906bb5; color: white; background-color: lightgrey;">2,171</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f0f8;">220</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">36</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #dbcfe7;">701</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efeaf4;">311</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #eee8f4;">332</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d0c0e0; color: white; background-color: lightgrey;">921</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefeff;">13</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f0f7;">223</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f1;">398</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fcfbfd;">53</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefefe;">20</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f0ecf5; color: white; background-color: lightgrey;">286</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="6"><strong>Read Row/Column as</strong>: <em>Purchasers of [Brands] / Total Volume Purchased of [Brands]</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [89]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">cross_purch_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Cross Purchasing Analysis'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total Volume of Category Purchasing by Buyers of the Brand (by row)'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _Purchasers of [Brands] / % Total Volume Purchased of [Brands]_"""</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[89]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="pfcwjrfanw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#pfcwjrfanw table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#pfcwjrfanw thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#pfcwjrfanw p { margin: 0 !important; padding: 0 !important; }
 #pfcwjrfanw .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #pfcwjrfanw .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #pfcwjrfanw .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #pfcwjrfanw .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #pfcwjrfanw .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #pfcwjrfanw .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #pfcwjrfanw .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #pfcwjrfanw .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #pfcwjrfanw .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #pfcwjrfanw .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #pfcwjrfanw .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #pfcwjrfanw .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #pfcwjrfanw .gt_spanner_row { border-bottom-style: hidden !important; }
 #pfcwjrfanw .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #pfcwjrfanw .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #pfcwjrfanw .gt_from_md> :first-child { margin-top: 0 !important; }
 #pfcwjrfanw .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #pfcwjrfanw .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #pfcwjrfanw .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #pfcwjrfanw .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #pfcwjrfanw .gt_row_group_first td { border-top-width: 2px !important; }
 #pfcwjrfanw .gt_row_group_first th { border-top-width: 2px !important; }
 #pfcwjrfanw .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #pfcwjrfanw .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #pfcwjrfanw .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #pfcwjrfanw .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #pfcwjrfanw .gt_left { text-align: left !important; }
 #pfcwjrfanw .gt_center { text-align: center !important; }
 #pfcwjrfanw .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #pfcwjrfanw .gt_font_normal { font-weight: normal !important; }
 #pfcwjrfanw .gt_font_bold { font-weight: bold !important; }
 #pfcwjrfanw .gt_font_italic { font-style: italic !important; }
 #pfcwjrfanw .gt_super { font-size: 65% !important; }
 #pfcwjrfanw .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #pfcwjrfanw .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Cross Purchasing Analysis</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">% of Total Volume of Category Purchasing by Buyers of the Brand (by row)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #69369b;">69%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d7c9e4;">18%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ede7f3;">8%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f4f9;">4%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d2c2e1;">21%</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #6a399c;">68%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efe9f4;">7%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf8fc;">2%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fcfbfd;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c7b5da;">26%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #cbbadd;">24%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #9c7bbd;">45%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f5f2f8;">5%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #bca5d2;">31%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e1d7eb;">14%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dfd5ea;">15%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #a789c4;">40%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefdfe;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #cdbdde;">23%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #a689c4;">41%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">5%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fbf9fc;">2%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bfaad4;">29%</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="6"><strong>Read Row/Column as</strong>: <em>Purchasers of [Brands] / % Total Volume Purchased of [Brands]</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Importance-of-Competition-Plot---By-Volume-Purchase">Importance of Competition Plot - <em>By Volume Purchase</em><a class="anchor-link" href="#Importance-of-Competition-Plot---By-Volume-Purchase">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>For a given brand, we can plot the associated row entries as a pie chart, for example, see the <em>Importance of competition plot</em>, which plots the percentage of total volume of category purchasing by buyers of Alpha.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [90]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cross_purch_plot</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">cross_purch</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">'row'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">cross_purch_plot</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Theta</span><span class="p">(</span><span class="s2">"Alpha:Q"</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">"Brands:N"</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s1">'text'</span><span class="p">:</span> <span class="s1">'Importance of Competition to Buyers of Alpha'</span><span class="p">,</span>
           <span class="s1">'subtitle'</span><span class="p">:</span> <span class="s1">'</span><span class="si">% o</span><span class="s1">f Total Volume of Category Purchasing by Buyers of Alpha'</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">pie</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_arc</span><span class="p">(</span><span class="n">outerRadius</span><span class="o">=</span><span class="mi">145</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mi">165</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s2">"Alpha:N"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">".0%"</span><span class="p">))</span>

<span class="n">pie</span> <span class="o">+</span> <span class="n">text</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[90]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-0eb0e5023920476489350f9b40f53b1d.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-0eb0e5023920476489350f9b40f53b1d.vega-embed details,
  #altair-viz-0eb0e5023920476489350f9b40f53b1d.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-0eb0e5023920476489350f9b40f53b1d"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0eb0e5023920476489350f9b40f53b1d") {
      outputDiv = document.getElementById("altair-viz-0eb0e5023920476489350f9b40f53b1d");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "layer": [{"mark": {"type": "arc", "outerRadius": 145}, "encoding": {"color": {"field": "Brands", "type": "nominal"}, "theta": {"field": "Alpha", "stack": true, "type": "quantitative"}}, "title": {"text": "Importance of Competition to Buyers of Alpha", "subtitle": "% of Total Volume of Category Purchasing by Buyers of Alpha"}}, {"mark": {"type": "text", "radius": 165, "size": 15}, "encoding": {"color": {"field": "Brands", "type": "nominal"}, "text": {"field": "Alpha", "format": ".0%", "type": "nominal"}, "theta": {"field": "Alpha", "stack": true, "type": "quantitative"}}, "title": {"text": "Importance of Competition to Buyers of Alpha", "subtitle": "% of Total Volume of Category Purchasing by Buyers of Alpha"}}], "data": {"name": "data-f9a8650f7e9497ca534ccb9a3b50c801"}, "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-f9a8650f7e9497ca534ccb9a3b50c801": [{"Alpha": 0.6884153210664664, "Bravo": 0.20804827894870362, "Charlie": 0.2555639825300102, "Delta": 0.30760955475542284, "Other": 0.22749540722596448, "Brands": "Alpha"}, {"Alpha": 0.18485918137438972, "Bravo": 0.6798281526825879, "Charlie": 0.23657713732771923, "Delta": 0.1364055501888118, "Other": 0.40569503980404165, "Brands": "Bravo"}, {"Alpha": 0.08083552384528728, "Bravo": 0.07485010797176028, "Charlie": 0.45424588749117345, "Delta": 0.14574734346184243, "Other": 0.05447540314349868, "Brands": "Charlie"}, {"Alpha": 0.03781449493052947, "Bravo": 0.023223725324791843, "Charlie": 0.04608102100060152, "Delta": 0.4044085360498814, "Other": 0.02015717493365993, "Brands": "Delta"}, {"Alpha": 0.008075478783327074, "Bravo": 0.014049735072156485, "Charlie": 0.007531971650495595, "Delta": 0.005829015544041451, "Other": 0.2921769748928353, "Brands": "Other"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Importance-Against-Expectation---By-Volume-Purchase">Importance Against Expectation - <em>By Volume Purchase</em><a class="anchor-link" href="#Importance-Against-Expectation---By-Volume-Purchase">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>As previously noted when we computed SCR, we see that Alpha accounts for 69% of category purchasing by the buyers of Alpha. We see from the cross purchase analysis see that Bravo accounts for 18% of their category purchasing. Is this large or small? One way of answering this question is to compare actual purchasing against expectation given general purchasing patterns in the category.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [91]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Share of Category Purchasing - Alpha Brand Selected</span>
<span class="n">share_of_cat_purch</span> <span class="o">=</span> <span class="n">cross_purch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Market Share - Volume</span>
<span class="n">market_share</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="c1"># sum all columns -&gt; returns a single row dataframe</span>
    <span class="n">brand_vol_purchases</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># sum of total category volume sales -&gt; retruns a scalar value</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Share of residual purchasing -- Alpha Buyers</span>
<span class="c1"># The percentage of the category purchasing not accounted for by Alpha that goes to each of the other brands</span>
<span class="n">residual_purch_brand</span> <span class="o">=</span> <span class="n">share_of_cat_purch</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">share_of_cat_purch</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Share of residual purchasing -- Category Buyers</span>
<span class="c1"># Residual share of category purchasing (across all category buyers) once Alpha is removed</span>
<span class="c1"># when we exclude Alpha, what percentage of (the remaining) category purchasing goes to each of the other brands)</span>
<span class="n">residual_purch_category</span> <span class="o">=</span> <span class="n">market_share</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">market_share</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Index against expectation</span>
<span class="n">index_against_expect</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">residual_purch_brand</span><span class="o">/</span><span class="n">residual_purch_category</span>

<span class="c1"># Importance Against Expectations - Create DataFrame</span>
<span class="n">stack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">share_of_cat_purch</span><span class="p">,</span> 
                   <span class="n">market_share</span><span class="p">,</span> 
                   <span class="n">residual_purch_brand</span><span class="p">,</span> 
                   <span class="n">residual_purch_category</span><span class="p">,</span> 
                   <span class="n">index_against_expect</span><span class="p">))</span>

<span class="n">cols</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Col'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Share of Category Purchasing'</span><span class="p">,</span> 
        <span class="s1">'Volume Market Share'</span><span class="p">,</span> 
        <span class="s1">'Share of Residual Purchasing - Alpha Buyers'</span><span class="p">,</span> 
        <span class="s1">'Share of Residual Purchasing - Category Buyers'</span><span class="p">,</span>
        <span class="s1">'Index Against Expectation'</span><span class="p">]})</span>

<span class="n">rows</span> <span class="o">=</span> <span class="n">cross_purch_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">importance_against_expect</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">rows</span><span class="p">)</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [92]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">importance_against_expect</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Col'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Importance Against Expectation'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Compare Actual Purchasing against Expectation Given General Purchasing Patterns'</span><span class="p">)</span>    
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">170</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'white'</span><span class="p">),</span> 
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])]</span>
    <span class="p">)</span>    
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[92]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="kjdxinyxwe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#kjdxinyxwe table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#kjdxinyxwe thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#kjdxinyxwe p { margin: 0 !important; padding: 0 !important; }
 #kjdxinyxwe .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #kjdxinyxwe .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #kjdxinyxwe .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #kjdxinyxwe .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #kjdxinyxwe .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kjdxinyxwe .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kjdxinyxwe .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #kjdxinyxwe .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #kjdxinyxwe .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #kjdxinyxwe .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #kjdxinyxwe .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #kjdxinyxwe .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #kjdxinyxwe .gt_spanner_row { border-bottom-style: hidden !important; }
 #kjdxinyxwe .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #kjdxinyxwe .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #kjdxinyxwe .gt_from_md> :first-child { margin-top: 0 !important; }
 #kjdxinyxwe .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #kjdxinyxwe .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #kjdxinyxwe .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #kjdxinyxwe .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #kjdxinyxwe .gt_row_group_first td { border-top-width: 2px !important; }
 #kjdxinyxwe .gt_row_group_first th { border-top-width: 2px !important; }
 #kjdxinyxwe .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #kjdxinyxwe .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #kjdxinyxwe .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #kjdxinyxwe .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #kjdxinyxwe .gt_left { text-align: left !important; }
 #kjdxinyxwe .gt_center { text-align: center !important; }
 #kjdxinyxwe .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #kjdxinyxwe .gt_font_normal { font-weight: normal !important; }
 #kjdxinyxwe .gt_font_bold { font-weight: bold !important; }
 #kjdxinyxwe .gt_font_italic { font-style: italic !important; }
 #kjdxinyxwe .gt_super { font-size: 65% !important; }
 #kjdxinyxwe .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #kjdxinyxwe .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Importance Against Expectation</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Compare Actual Purchasing against Expectation Given General Purchasing Patterns</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">Share of Category Purchasing</th>
<td class="gt_row gt_right">69%</td>
<td class="gt_row gt_right">18%</td>
<td class="gt_row gt_right">8%</td>
<td class="gt_row gt_right">4%</td>
<td class="gt_row gt_right">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Volume Market Share</th>
<td class="gt_row gt_right">44%</td>
<td class="gt_row gt_right">40%</td>
<td class="gt_row gt_right">10%</td>
<td class="gt_row gt_right">4%</td>
<td class="gt_row gt_right">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Share of Residual Purchasing - Alpha Buyers</th>
<td class="gt_row gt_right" style="color: white; background-color: white;">221%</td>
<td class="gt_row gt_right">59%</td>
<td class="gt_row gt_right">26%</td>
<td class="gt_row gt_right">12%</td>
<td class="gt_row gt_right">3%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Share of Residual Purchasing - Category Buyers</th>
<td class="gt_row gt_right" style="color: white; background-color: white;">79%</td>
<td class="gt_row gt_right">71%</td>
<td class="gt_row gt_right">19%</td>
<td class="gt_row gt_right">8%</td>
<td class="gt_row gt_right">2%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Index Against Expectation</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">280</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f9f7fb;">84</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #9b7abc;">139</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #8359ac;">153</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d4c6e2;">105</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [93]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">index_ae</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Index Against Expectation - By Volume Purchase'</span><span class="p">:</span> <span class="n">index_against_expect</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                         <span class="s1">'Brands'</span><span class="p">:</span> <span class="n">cross_purch_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]})</span>

<span class="c1"># Create the Altair chart</span>
<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">index_ae</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"Index Against Expectation - By Volume Purchase:Q"</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Brands:N"</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s2">"text"</span><span class="p">:</span> <span class="s1">'Importance Against Expectation'</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[93]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-5dc3cdc285e74cd58017445e101f300d.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5dc3cdc285e74cd58017445e101f300d.vega-embed details,
  #altair-viz-5dc3cdc285e74cd58017445e101f300d.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5dc3cdc285e74cd58017445e101f300d"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5dc3cdc285e74cd58017445e101f300d") {
      outputDiv = document.getElementById("altair-viz-5dc3cdc285e74cd58017445e101f300d");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-e362666dc59423712962b6af6d3c143d"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "Index Against Expectation - By Volume Purchase", "type": "quantitative"}, "y": {"field": "Brands", "type": "nominal"}}, "height": 250, "title": {"text": "Importance Against Expectation"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-e362666dc59423712962b6af6d3c143d": [{"Index Against Expectation - By Volume Purchase": 83.65245282121546, "Brands": "Bravo"}, {"Index Against Expectation - By Volume Purchase": 138.8355679898548, "Brands": "Charlie"}, {"Index Against Expectation - By Volume Purchase": 153.10239567599962, "Brands": "Delta"}, {"Index Against Expectation - By Volume Purchase": 105.1884776006569, "Brands": "Other"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let us consider <em>Charlie</em>. With reference to Charlie's residual share of category purchasing not accounted for by Alpha, we see that it accounted for 26% of the category purchasing by Alpha buyers that did not go to Alpha. If the purchasing of Alpha buyers was consistent with overall market patterns (as reflected in the volume market shares), we would expect Charlie to account for 19% of their purchasing. We can therefore say that Charlie’s share of purchasing amongst the
buyers of Alpha is above expectation (when expectation is based on overall patterns of buying behaviour).</p>
<p>The <strong>Index Against Expectation</strong> essentially captures whether or not and to what extent volume purchases of Alpha's buyers went to its competitors above or below expectations / patterns observed in the overall market.</p>
<p>We see that, relative to market share, Bravo is less of threat to Alpha than we would expect (index = 84). Relative to market share, Charlie and Delta are purchased more by buyers of Alpha than we would expect.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Cross-Purchasing---By-Spend">Cross Purchasing - <em>By Spend</em><a class="anchor-link" href="#Cross-Purchasing---By-Spend">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We can repeat these analyses using spend rather than volume purchasing.</p>
<p>We see, for example, that buyers of Alpha spent 71% of their category spend on Alpha. This is in contrast to the 69% of their category volume requirements satisfied by Alpha.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [94]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">brand_spend_purchases</span> <span class="o">=</span> <span class="n">spend_pivot</span><span class="p">(</span><span class="n">grocery_lf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Step 1: Create ever buyers matrix</span>
<span class="n">ever_buyers</span> <span class="o">=</span> <span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">brand_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="c1"># Step 2: Compute cross purchase matrix</span>
<span class="n">cross_purch_matrix</span> <span class="o">=</span> <span class="n">ever_buyers</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">brand_spend_purchases</span>
<span class="n">total_spend_purchases</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">cross_purch_matrix</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Step 3: Compute cross purchase matrix as a % of total spend of each brand</span>
<span class="n">cross_purch</span> <span class="o">=</span> <span class="n">cross_purch_matrix</span> <span class="o">/</span> <span class="n">total_spend_purchases</span>

<span class="c1"># DataFrame conversion for tabular view</span>
<span class="n">cross_purch_matrix_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">cross_purch_matrix</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">cross_purch_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">cross_purch</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'Brands'</span><span class="p">,</span> <span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [95]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">cross_purch_matrix_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Cross Purchasing Analysis'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Total Category Spend by Buyers of the Brand (by row)'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10_000</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'lightgrey'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _Purchasers of [Brands] / Total Spend on [Brands]_"""</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[95]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="indckprzgc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#indckprzgc table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#indckprzgc thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#indckprzgc p { margin: 0 !important; padding: 0 !important; }
 #indckprzgc .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #indckprzgc .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #indckprzgc .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #indckprzgc .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #indckprzgc .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #indckprzgc .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #indckprzgc .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #indckprzgc .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #indckprzgc .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #indckprzgc .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #indckprzgc .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #indckprzgc .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #indckprzgc .gt_spanner_row { border-bottom-style: hidden !important; }
 #indckprzgc .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #indckprzgc .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #indckprzgc .gt_from_md> :first-child { margin-top: 0 !important; }
 #indckprzgc .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #indckprzgc .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #indckprzgc .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #indckprzgc .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #indckprzgc .gt_row_group_first td { border-top-width: 2px !important; }
 #indckprzgc .gt_row_group_first th { border-top-width: 2px !important; }
 #indckprzgc .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #indckprzgc .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #indckprzgc .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #indckprzgc .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #indckprzgc .gt_left { text-align: left !important; }
 #indckprzgc .gt_center { text-align: center !important; }
 #indckprzgc .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #indckprzgc .gt_font_normal { font-weight: normal !important; }
 #indckprzgc .gt_font_bold { font-weight: bold !important; }
 #indckprzgc .gt_font_italic { font-style: italic !important; }
 #indckprzgc .gt_super { font-size: 65% !important; }
 #indckprzgc .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #indckprzgc .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Cross Purchasing Analysis</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Total Category Spend by Buyers of the Brand (by row)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: lightgrey;">33,571</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7749a4;">8,913</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d7cae4;">2,606</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e3daed;">1,807</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f3f9;">571</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7141a0;">9,292</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: lightgrey;">28,603</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dfd5ea;">2,076</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f0eaf5;">1,008</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efeaf5;">1,022</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #baa4d1;">4,481</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #c4b0d8;">3,854</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #b197cb; color: white; background-color: lightgrey;">5,121</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">793</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfcfe;">129</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d7cae5;">2,597</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ede8f3;">1,149</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f3eff7;">806</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #cdbcde; color: white; background-color: lightgrey;">3,272</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefefe;">57</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #f2eef7;">825</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe4f1;">1,337</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">118</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefdfe;">74</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e8e0ef; color: white; background-color: lightgrey;">1,535</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="6"><strong>Read Row/Column as</strong>: <em>Purchasers of [Brands] / Total Spend on [Brands]</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [96]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">cross_purch_df</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Brands'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Cross Purchasing Analysis'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total Category Spend by Buyers of the Brand (by row)'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Brands"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sub_missing</span><span class="p">(</span><span class="n">missing_text</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _Purchasers of [Brands] / % Total Spend on [Brands]_"""</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[96]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="pebluowgxs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#pebluowgxs table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#pebluowgxs thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#pebluowgxs p { margin: 0 !important; padding: 0 !important; }
 #pebluowgxs .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #pebluowgxs .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #pebluowgxs .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #pebluowgxs .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #pebluowgxs .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #pebluowgxs .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #pebluowgxs .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #pebluowgxs .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #pebluowgxs .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #pebluowgxs .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #pebluowgxs .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #pebluowgxs .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #pebluowgxs .gt_spanner_row { border-bottom-style: hidden !important; }
 #pebluowgxs .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #pebluowgxs .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #pebluowgxs .gt_from_md> :first-child { margin-top: 0 !important; }
 #pebluowgxs .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #pebluowgxs .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #pebluowgxs .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #pebluowgxs .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #pebluowgxs .gt_row_group_first td { border-top-width: 2px !important; }
 #pebluowgxs .gt_row_group_first th { border-top-width: 2px !important; }
 #pebluowgxs .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #pebluowgxs .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #pebluowgxs .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #pebluowgxs .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #pebluowgxs .gt_left { text-align: left !important; }
 #pebluowgxs .gt_center { text-align: center !important; }
 #pebluowgxs .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #pebluowgxs .gt_font_normal { font-weight: normal !important; }
 #pebluowgxs .gt_font_bold { font-weight: bold !important; }
 #pebluowgxs .gt_font_italic { font-style: italic !important; }
 #pebluowgxs .gt_super { font-size: 65% !important; }
 #pebluowgxs .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #pebluowgxs .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Cross Purchasing Analysis</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">% of Total Category Spend by Buyers of the Brand (by row)</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Brands" rowspan="1" scope="col">Brands</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Alpha</th>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #784ba5;">71%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #dbcfe7;">19%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f1f8;">5%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f8f5fa;">4%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfcfd;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Bravo</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d5c7e3;">22%</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #7d51a8;">68%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f6f2f9;">5%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf9fc;">2%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf9fc;">2%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Charlie</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c3b0d7;">31%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ccbbdd;">27%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bba4d2;">36%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f1f8;">6%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fdfdfe;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Delta</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #c0abd5;">33%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #e3daec;">15%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe5f2;">10%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #b095ca;">42%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fefdfe;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Other</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #d6c9e4;">21%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #bda7d3;">34%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f9f7fb;">3%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fbfafd;">2%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #b49acd;">39%</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="6"><strong>Read Row/Column as</strong>: <em>Purchasers of [Brands] / % Total Spend on [Brands]</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Importance-Against-Expectation---By-Spend">Importance Against Expectation - <em>By Spend</em><a class="anchor-link" href="#Importance-Against-Expectation---By-Spend">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We can create a spend-based importance against expectation plot, using value market share as the reference.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [97]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Share of Category Purchasing - Alpha Brand Selected</span>
<span class="n">share_of_cat_purch</span> <span class="o">=</span> <span class="n">cross_purch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Market Share - Volume</span>
<span class="n">market_share</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="c1"># sum all columns -&gt; returns a single row dataframe</span>
    <span class="n">brand_spend_purchases</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># sum of total category volume sales -&gt; retruns a scalar value</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Share of residual purchasing -- Alpha Buyers</span>
<span class="c1"># The percentage of the category purchasing not accounted for by Alpha that goes to each of the other brands</span>
<span class="n">residual_purch_brand</span> <span class="o">=</span> <span class="n">share_of_cat_purch</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">share_of_cat_purch</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Share of residual purchasing -- Category Buyers</span>
<span class="c1"># Residual share of category purchasing (across all category buyers) once Alpha is removed</span>
<span class="c1"># when we exclude Alpha, what percentage of (the remaining) category purchasing goes to each of the other brands)</span>
<span class="n">residual_purch_category</span> <span class="o">=</span> <span class="n">market_share</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">market_share</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Index against expectation</span>
<span class="n">index_against_expect</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">residual_purch_brand</span><span class="o">/</span><span class="n">residual_purch_category</span>

<span class="c1"># Importance Against Expectations - Create DataFrame</span>
<span class="n">stack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">share_of_cat_purch</span><span class="p">,</span> 
                   <span class="n">market_share</span><span class="p">,</span> 
                   <span class="n">residual_purch_brand</span><span class="p">,</span> 
                   <span class="n">residual_purch_category</span><span class="p">,</span> 
                   <span class="n">index_against_expect</span><span class="p">))</span>

<span class="n">cols</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Col'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Share of Category Purchasing'</span><span class="p">,</span> 
        <span class="s1">'Volume Market Share'</span><span class="p">,</span> 
        <span class="s1">'Share of Residual Purchasing - Alpha Buyers'</span><span class="p">,</span> 
        <span class="s1">'Share of Residual Purchasing - Category Buyers'</span><span class="p">,</span>
        <span class="s1">'Index Against Expectation'</span><span class="p">]})</span>

<span class="n">rows</span> <span class="o">=</span> <span class="n">cross_purch_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">importance_against_expect</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">rows</span><span class="p">)</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [98]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">importance_against_expect</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Col'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Importance Against Expectation'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Compare Actual Purchasing against Expectation Given General Purchasing Patterns'</span><span class="p">)</span>    
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">170</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'white'</span><span class="p">),</span> 
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])]</span>
    <span class="p">)</span>    
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[98]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="nwtvsbzqgs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#nwtvsbzqgs table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#nwtvsbzqgs thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#nwtvsbzqgs p { margin: 0 !important; padding: 0 !important; }
 #nwtvsbzqgs .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #nwtvsbzqgs .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #nwtvsbzqgs .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #nwtvsbzqgs .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #nwtvsbzqgs .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #nwtvsbzqgs .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #nwtvsbzqgs .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #nwtvsbzqgs .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #nwtvsbzqgs .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #nwtvsbzqgs .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #nwtvsbzqgs .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #nwtvsbzqgs .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #nwtvsbzqgs .gt_spanner_row { border-bottom-style: hidden !important; }
 #nwtvsbzqgs .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #nwtvsbzqgs .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #nwtvsbzqgs .gt_from_md> :first-child { margin-top: 0 !important; }
 #nwtvsbzqgs .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #nwtvsbzqgs .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #nwtvsbzqgs .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #nwtvsbzqgs .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #nwtvsbzqgs .gt_row_group_first td { border-top-width: 2px !important; }
 #nwtvsbzqgs .gt_row_group_first th { border-top-width: 2px !important; }
 #nwtvsbzqgs .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #nwtvsbzqgs .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #nwtvsbzqgs .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #nwtvsbzqgs .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #nwtvsbzqgs .gt_left { text-align: left !important; }
 #nwtvsbzqgs .gt_center { text-align: center !important; }
 #nwtvsbzqgs .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #nwtvsbzqgs .gt_font_normal { font-weight: normal !important; }
 #nwtvsbzqgs .gt_font_bold { font-weight: bold !important; }
 #nwtvsbzqgs .gt_font_italic { font-style: italic !important; }
 #nwtvsbzqgs .gt_super { font-size: 65% !important; }
 #nwtvsbzqgs .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #nwtvsbzqgs .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Importance Against Expectation</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Compare Actual Purchasing against Expectation Given General Purchasing Patterns</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Alpha" rowspan="1" scope="col">Alpha</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Bravo" rowspan="1" scope="col">Bravo</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Charlie" rowspan="1" scope="col">Charlie</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Delta" rowspan="1" scope="col">Delta</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Other" rowspan="1" scope="col">Other</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub">Share of Category Purchasing</th>
<td class="gt_row gt_right">71%</td>
<td class="gt_row gt_right">19%</td>
<td class="gt_row gt_right">5%</td>
<td class="gt_row gt_right">4%</td>
<td class="gt_row gt_right">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Volume Market Share</th>
<td class="gt_row gt_right">47%</td>
<td class="gt_row gt_right">40%</td>
<td class="gt_row gt_right">7%</td>
<td class="gt_row gt_right">5%</td>
<td class="gt_row gt_right">2%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Share of Residual Purchasing - Alpha Buyers</th>
<td class="gt_row gt_right" style="color: white; background-color: white;">242%</td>
<td class="gt_row gt_right">64%</td>
<td class="gt_row gt_right">19%</td>
<td class="gt_row gt_right">13%</td>
<td class="gt_row gt_right">4%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Share of Residual Purchasing - Category Buyers</th>
<td class="gt_row gt_right" style="color: white; background-color: white;">87%</td>
<td class="gt_row gt_right">74%</td>
<td class="gt_row gt_right">13%</td>
<td class="gt_row gt_right">8%</td>
<td class="gt_row gt_right">4%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Index Against Expectation</th>
<td class="gt_row gt_right" style="color: #000000; background-color: #808080; color: white; background-color: white;">277</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f4f1f8;">86</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #9774ba;">141</td>
<td class="gt_row gt_right" style="color: #FFFFFF; background-color: #8359ac;">153</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #d8cae5;">103</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [99]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">index_ae</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Index Against Expectation - By Spend'</span><span class="p">:</span> <span class="n">index_against_expect</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                         <span class="s1">'Brands'</span><span class="p">:</span> <span class="n">cross_purch_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]})</span>

<span class="c1"># Create the Altair chart</span>
<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">index_ae</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"Index Against Expectation - By Spend:Q"</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Brands:N"</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s2">"text"</span><span class="p">:</span> <span class="s1">'Importance Against Expectation'</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[99]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-dfa3e965dc2749b48b277e3fa4193908.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-dfa3e965dc2749b48b277e3fa4193908.vega-embed details,
  #altair-viz-dfa3e965dc2749b48b277e3fa4193908.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-dfa3e965dc2749b48b277e3fa4193908"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-dfa3e965dc2749b48b277e3fa4193908") {
      outputDiv = document.getElementById("altair-viz-dfa3e965dc2749b48b277e3fa4193908");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-0dd5ceea450ce839da41183f1794163e"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "Index Against Expectation - By Spend", "type": "quantitative"}, "y": {"field": "Brands", "type": "nominal"}}, "height": 250, "title": {"text": "Importance Against Expectation"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-0dd5ceea450ce839da41183f1794163e": [{"Index Against Expectation - By Spend": 86.39242439316773, "Brands": "Bravo"}, {"Index Against Expectation - By Spend": 141.10587879276463, "Brands": "Charlie"}, {"Index Against Expectation - By Spend": 153.13013873869224, "Brands": "Delta"}, {"Index Against Expectation - By Spend": 103.19712803392078, "Brands": "Other"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Garbage-Collect">Garbage Collect<a class="anchor-link" href="#Garbage-Collect">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [100]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'grocery_lf'</span><span class="p">,</span> <span class="s1">'sku_lf'</span><span class="p">,</span> <span class="s1">'kiwi_lf'</span><span class="p">,</span> <span class="s1">'In'</span><span class="p">,</span> <span class="s1">'exceptions'</span><span class="p">,</span> <span class="s1">'active_variables'</span><span class="p">,</span>
              <span class="s1">'penetration'</span><span class="p">,</span> <span class="s1">'ppb'</span><span class="p">,</span> <span class="s1">'panel_size'</span><span class="p">]</span>

<span class="n">active_variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">var</span> <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)</span>   <span class="c1"># Exclude variables that start with "_"</span>
    <span class="ow">and</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exceptions</span>    <span class="c1"># Exclude variables in the exceptions list</span>
    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">LayerChart</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>  <span class="c1"># Remove these types only</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">active_variables</span><span class="p">:</span>
    <span class="k">del</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">var</span><span class="p">]</span>
<span class="k">del</span> <span class="n">active_variables</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">,</span> <span class="n">var</span>

<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[100]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>469</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Exploring-Dynamics-in-Buyer-Behaviour"><span style="color:#956bbf">Exploring Dynamics in Buyer Behaviour</span><a class="anchor-link" href="#Exploring-Dynamics-in-Buyer-Behaviour">¶</a></h3><hr/>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Up to now, we have been characterizing buyer behavior in a given time period (i.e., one year), be it focusing on one brand or multiple brands. We now consider some standard analyses that give insight into the dynamics of buyer behavior from period to period. We first consider the case of established products and then turn our attention to the analysis of new product buying behavior.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Established-Products">Established Products<a class="anchor-link" href="#Established-Products">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We are interested in summarizing how buyer behavior varies across consecutive periods. We first consider how <strong>temporal variations in total sales</strong> can be understood by <strong>decomposing total sales</strong>. Next we explore <strong>temporal variations in customer-level purchasing</strong> by examining how the distribution of purchasing in one period varies as a function of the level of purchasing in the previous period. Finally, we consider a summary measure of period-to-period purchasing called the <strong>repeat rate</strong>.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Understanding-Temporal-Variations-in-Sales">Understanding Temporal Variations in Sales<a class="anchor-link" href="#Understanding-Temporal-Variations-in-Sales">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Most firms have systems that will report sales over time. As we try to make sense of any observed changes, it is helpful to note a <strong>fundamental (multiplicative) sales decomposition</strong>. For any time period,</p>
<p>$$
  \begin{aligned}
    \text{Sales}   &amp;= \text{\# households (HHs) in the country} \\
                   &amp;= \times \text{proportion of HHs buying the brand (penetration)} \\
                   &amp;= \times \text{\# purchase occasions per buyer (PPB)} \\
                   &amp;= \times \text{\# packs per purchase} \\
                   &amp;= \times \text{weight or price per pack} \\
  \end{aligned}
$$</p>
<p>There is nothing magical about this specific decomposition. We can create variations on a theme that are more relevant for the specific analysis setting at hand. For example, suppose we are doing an analysis at the brand level, where the SKUs associated with the brand come in different sizes. Furthermore, suppose the time period is sufficiently small that households make only one purchase per period, if at all. (In other words, PPB = 1). A more relevant decomposition would be</p>
<p>$$
  \begin{aligned}
    \text{Sales (\$)}   &amp;= \text{\# households (HHs) in the country} \\
                   &amp;= \times \text{proportion of HHs buying the brand (penetration)} \\
                   &amp;= \times \text{average volume per purchase} \\
                   &amp;= \times \text{average price per unit of volume} \\
  \end{aligned}
$$</p>
<p>The product of the last two quantities is often called <strong>average order value (AOV)</strong>.</p>
<p>$$AOV = \text{average volume per purchase} \times \text{average price per unit of volume}$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Recall the plot of Alpha's revenue we created earlier:</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [101]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">weekly_spend_summary</span><span class="p">(</span><span class="s1">'Alpha'</span><span class="p">,</span> <span class="n">grocery_lf</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'Weekly Spend'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Plot of weekly revenue for Alpha'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Spend ($)'</span><span class="p">,</span>
            <span class="n">pct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[101]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-00b079de31154fdf93a43c5c7fd761d7.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-00b079de31154fdf93a43c5c7fd761d7.vega-embed details,
  #altair-viz-00b079de31154fdf93a43c5c7fd761d7.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-00b079de31154fdf93a43c5c7fd761d7"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-00b079de31154fdf93a43c5c7fd761d7") {
      outputDiv = document.getElementById("altair-viz-00b079de31154fdf93a43c5c7fd761d7");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {}}, "data": {"name": "data-d30e90f8f3f3f0bb3e2f040b912a493a"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.0f"}, "field": "Weekly Spend", "title": "Spend ($)", "type": "quantitative"}}, "height": 250, "title": "Plot of weekly revenue for Alpha", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-d30e90f8f3f3f0bb3e2f040b912a493a": [{"week": 1, "brand": "Alpha", "Weekly Spend": 331.4601135253906}, {"week": 2, "brand": "Alpha", "Weekly Spend": 567.2499389648438}, {"week": 3, "brand": "Alpha", "Weekly Spend": 497.9699401855469}, {"week": 4, "brand": "Alpha", "Weekly Spend": 1389.95751953125}, {"week": 5, "brand": "Alpha", "Weekly Spend": 358.2402038574219}, {"week": 6, "brand": "Alpha", "Weekly Spend": 364.0600280761719}, {"week": 7, "brand": "Alpha", "Weekly Spend": 412.34014892578125}, {"week": 8, "brand": "Alpha", "Weekly Spend": 307.6201171875}, {"week": 9, "brand": "Alpha", "Weekly Spend": 290.580078125}, {"week": 10, "brand": "Alpha", "Weekly Spend": 442.64019775390625}, {"week": 11, "brand": "Alpha", "Weekly Spend": 258.6200256347656}, {"week": 12, "brand": "Alpha", "Weekly Spend": 912.5907592773438}, {"week": 13, "brand": "Alpha", "Weekly Spend": 443.6502380371094}, {"week": 14, "brand": "Alpha", "Weekly Spend": 853.830322265625}, {"week": 15, "brand": "Alpha", "Weekly Spend": 446.1503601074219}, {"week": 16, "brand": "Alpha", "Weekly Spend": 579.4600830078125}, {"week": 17, "brand": "Alpha", "Weekly Spend": 410.93023681640625}, {"week": 18, "brand": "Alpha", "Weekly Spend": 703.3102416992188}, {"week": 19, "brand": "Alpha", "Weekly Spend": 607.4000244140625}, {"week": 20, "brand": "Alpha", "Weekly Spend": 801.2600708007812}, {"week": 21, "brand": "Alpha", "Weekly Spend": 903.2706298828125}, {"week": 22, "brand": "Alpha", "Weekly Spend": 672.1006469726562}, {"week": 23, "brand": "Alpha", "Weekly Spend": 620.7203369140625}, {"week": 24, "brand": "Alpha", "Weekly Spend": 702.7504272460938}, {"week": 25, "brand": "Alpha", "Weekly Spend": 509.1305236816406}, {"week": 26, "brand": "Alpha", "Weekly Spend": 1977.66455078125}, {"week": 27, "brand": "Alpha", "Weekly Spend": 1180.6121826171875}, {"week": 28, "brand": "Alpha", "Weekly Spend": 486.72039794921875}, {"week": 29, "brand": "Alpha", "Weekly Spend": 507.5603332519531}, {"week": 30, "brand": "Alpha", "Weekly Spend": 596.3203125}, {"week": 31, "brand": "Alpha", "Weekly Spend": 604.0001831054688}, {"week": 32, "brand": "Alpha", "Weekly Spend": 611.1402587890625}, {"week": 33, "brand": "Alpha", "Weekly Spend": 614.9400634765625}, {"week": 34, "brand": "Alpha", "Weekly Spend": 1535.922119140625}, {"week": 35, "brand": "Alpha", "Weekly Spend": 1571.509521484375}, {"week": 36, "brand": "Alpha", "Weekly Spend": 587.4197387695312}, {"week": 37, "brand": "Alpha", "Weekly Spend": 426.87005615234375}, {"week": 38, "brand": "Alpha", "Weekly Spend": 383.8000793457031}, {"week": 39, "brand": "Alpha", "Weekly Spend": 465.72003173828125}, {"week": 40, "brand": "Alpha", "Weekly Spend": 447.0300598144531}, {"week": 41, "brand": "Alpha", "Weekly Spend": 421.7700500488281}, {"week": 42, "brand": "Alpha", "Weekly Spend": 364.6600036621094}, {"week": 43, "brand": "Alpha", "Weekly Spend": 389.4200744628906}, {"week": 44, "brand": "Alpha", "Weekly Spend": 408.33001708984375}, {"week": 45, "brand": "Alpha", "Weekly Spend": 311.08013916015625}, {"week": 46, "brand": "Alpha", "Weekly Spend": 575.3999633789062}, {"week": 47, "brand": "Alpha", "Weekly Spend": 1188.458740234375}, {"week": 48, "brand": "Alpha", "Weekly Spend": 434.8900451660156}, {"week": 49, "brand": "Alpha", "Weekly Spend": 365.0300598144531}, {"week": 50, "brand": "Alpha", "Weekly Spend": 1164.7088623046875}, {"week": 51, "brand": "Alpha", "Weekly Spend": 773.2094116210938}, {"week": 52, "brand": "Alpha", "Weekly Spend": 789.46923828125}, {"week": 53, "brand": "Alpha", "Weekly Spend": 386.7501525878906}, {"week": 54, "brand": "Alpha", "Weekly Spend": 586.9396362304688}, {"week": 55, "brand": "Alpha", "Weekly Spend": 1045.8380126953125}, {"week": 56, "brand": "Alpha", "Weekly Spend": 939.5099487304688}, {"week": 57, "brand": "Alpha", "Weekly Spend": 1040.8994140625}, {"week": 58, "brand": "Alpha", "Weekly Spend": 308.9900817871094}, {"week": 59, "brand": "Alpha", "Weekly Spend": 547.6300048828125}, {"week": 60, "brand": "Alpha", "Weekly Spend": 363.9002380371094}, {"week": 61, "brand": "Alpha", "Weekly Spend": 476.6103515625}, {"week": 62, "brand": "Alpha", "Weekly Spend": 484.7003173828125}, {"week": 63, "brand": "Alpha", "Weekly Spend": 359.43017578125}, {"week": 64, "brand": "Alpha", "Weekly Spend": 472.2302551269531}, {"week": 65, "brand": "Alpha", "Weekly Spend": 665.6598510742188}, {"week": 66, "brand": "Alpha", "Weekly Spend": 413.5800476074219}, {"week": 67, "brand": "Alpha", "Weekly Spend": 364.3900146484375}, {"week": 68, "brand": "Alpha", "Weekly Spend": 636.039794921875}, {"week": 69, "brand": "Alpha", "Weekly Spend": 356.2501525878906}, {"week": 70, "brand": "Alpha", "Weekly Spend": 433.2401428222656}, {"week": 71, "brand": "Alpha", "Weekly Spend": 507.04010009765625}, {"week": 72, "brand": "Alpha", "Weekly Spend": 1328.038330078125}, {"week": 73, "brand": "Alpha", "Weekly Spend": 2070.157958984375}, {"week": 74, "brand": "Alpha", "Weekly Spend": 606.7600708007812}, {"week": 75, "brand": "Alpha", "Weekly Spend": 629.2600708007812}, {"week": 76, "brand": "Alpha", "Weekly Spend": 611.8903198242188}, {"week": 77, "brand": "Alpha", "Weekly Spend": 1198.6287841796875}, {"week": 78, "brand": "Alpha", "Weekly Spend": 2345.435791015625}, {"week": 79, "brand": "Alpha", "Weekly Spend": 1447.2288818359375}, {"week": 80, "brand": "Alpha", "Weekly Spend": 531.5003662109375}, {"week": 81, "brand": "Alpha", "Weekly Spend": 570.05029296875}, {"week": 82, "brand": "Alpha", "Weekly Spend": 431.1202087402344}, {"week": 83, "brand": "Alpha", "Weekly Spend": 529.820068359375}, {"week": 84, "brand": "Alpha", "Weekly Spend": 582.5802001953125}, {"week": 85, "brand": "Alpha", "Weekly Spend": 802.8195190429688}, {"week": 86, "brand": "Alpha", "Weekly Spend": 985.1090698242188}, {"week": 87, "brand": "Alpha", "Weekly Spend": 1304.2593994140625}, {"week": 88, "brand": "Alpha", "Weekly Spend": 991.0695190429688}, {"week": 89, "brand": "Alpha", "Weekly Spend": 309.98016357421875}, {"week": 90, "brand": "Alpha", "Weekly Spend": 477.5602722167969}, {"week": 91, "brand": "Alpha", "Weekly Spend": 406.980224609375}, {"week": 92, "brand": "Alpha", "Weekly Spend": 390.3000793457031}, {"week": 93, "brand": "Alpha", "Weekly Spend": 306.7400817871094}, {"week": 94, "brand": "Alpha", "Weekly Spend": 376.9102478027344}, {"week": 95, "brand": "Alpha", "Weekly Spend": 383.11016845703125}, {"week": 96, "brand": "Alpha", "Weekly Spend": 674.090087890625}, {"week": 97, "brand": "Alpha", "Weekly Spend": 840.3900756835938}, {"week": 98, "brand": "Alpha", "Weekly Spend": 1079.0780029296875}, {"week": 99, "brand": "Alpha", "Weekly Spend": 384.9902038574219}, {"week": 100, "brand": "Alpha", "Weekly Spend": 692.4799194335938}, {"week": 101, "brand": "Alpha", "Weekly Spend": 265.77008056640625}, {"week": 102, "brand": "Alpha", "Weekly Spend": 379.61016845703125}, {"week": 103, "brand": "Alpha", "Weekly Spend": 532.5}, {"week": 104, "brand": "Alpha", "Weekly Spend": 394.8899841308594}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We observe some weeks where this is a massive increase in revenue. How much of this is due to an increase in penetration versus, say, buyers simply buying more product on a given purchase occasion? Let us explore this using the second decomposition given above.</p>
<ol>
<li>We start by computing Alpha’s <strong>weekly penetration numbers</strong>:<ul>
<li>Check whether purchase purchase occasions per buyer (PPB) = 1.</li>
<li>We do this by grouping the panel data by '<code>week</code>' and aggregating to get the number of unique '<code>trans_id</code>' and '<code>panel_id</code>' per week. If the '<code>num_trans</code>' and '<code>num_buyers</code>' is the same for each week, then no panellist made more than one purchase in any given week, which means PPB = 1.</li>
<li>We produce a new dataframe that is grouped by 104 weeks and aggregates the count of unique number of panellists (<em>weekly penetration</em>) and number of transaction IDs each week.</li>
<li>Output: The number of panellists that made at least one purchase of Alpha; the total number of category purchase occasions on which Alpha was purchased, for each week.</li>
</ul>
</li>
<li>The next step is to add the <strong>weekly volume and revenue</strong> numbers:<ul>
<li>Join SKU weights data with panel data, group panel data by <code>week</code>, compute <code>volume</code> and <code>spend</code>.</li>
<li>Output: Alpha’s (dollar and volume) sales.</li>
</ul>
</li>
<li>Next we compute the numbers associated with the <strong>revenue decomposition</strong>:<ul>
<li><strong>Weekly penetration</strong> is simply the number of panellists active in any given week divided by the size of the panel.</li>
<li><strong>Average order value</strong> is simply total revenue for any given week divided by the number of panellists that made at least one purchase of Alpha in that week.<ul>
<li>As noted above, the AOV quantity can be decomposed into <em>average order volume</em> and <em>average price per unit volume</em> (in this case, kg).</li>
</ul>
</li>
<li><strong>Average order volume</strong> is simply (total) volume sold in any given week divided by the number of panellists that made at least one purchase of Alpha in that week.</li>
<li><strong>Average price per unit volume</strong> is simply total revenue for any given week divided by (total) volume sold in that week.</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [102]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">"week"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"trans_id"</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"num_trans"</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"panel_id"</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"num_buyers"</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_buyers'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'ppb'</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'ppb'</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
    
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[102]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (104, 4)</small><table border="1" class="dataframe"><thead><tr><th>week</th><th>num_trans</th><th>num_buyers</th><th>ppb</th></tr><tr><td>u16</td><td>u32</td><td>u32</td><td>f64</td></tr></thead><tbody><tr><td>1</td><td>93</td><td>93</td><td>1.0</td></tr><tr><td>2</td><td>166</td><td>166</td><td>1.0</td></tr><tr><td>3</td><td>143</td><td>143</td><td>1.0</td></tr><tr><td>4</td><td>304</td><td>304</td><td>1.0</td></tr><tr><td>5</td><td>107</td><td>107</td><td>1.0</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>100</td><td>206</td><td>206</td><td>1.0</td></tr><tr><td>101</td><td>75</td><td>75</td><td>1.0</td></tr><tr><td>102</td><td>105</td><td>105</td><td>1.0</td></tr><tr><td>103</td><td>151</td><td>151</td><td>1.0</td></tr><tr><td>104</td><td>114</td><td>114</td><td>1.0</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We note that the number of transactions (<code>num_trans</code>) associated with each week equals the number of panellists (<code>num_buyers</code>) associated with each week. In other words, no panellist made more than one purchase in any given week, which means PPB = 1 (<code>num_trans</code> / <code>num_buyers</code>), as assumed above.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [103]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Filter for rows where the brand is "Alpha"</span>
<span class="n">alpha_lf</span> <span class="o">=</span> <span class="n">grocery_lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"brand"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"Alpha"</span><span class="p">)</span>

<span class="c1"># Aggregating to get the number of unique trans_id and panel_id per week</span>
<span class="n">alpha_weekly_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_lf</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">"week"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"trans_id"</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"num_trans"</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"panel_id"</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"num_buyers"</span><span class="p">)</span>
    <span class="p">)</span>    
<span class="p">)</span>

<span class="c1"># Aggregating to get the sum of spend and volume per week</span>
<span class="n">alpha_weekly_spend_vol</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_lf</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">sku_lf</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">))</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"spend"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"spend"</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">"volume"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"volume"</span><span class="p">)</span>        
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># The alpha_weekly_trans &amp; alpha_weekly_spend_vol are joined.</span>
<span class="c1"># alpha_weekly_summary now contains week, num_trans, num_buyers, spend, and volume</span>
<span class="n">alpha_weekly_summary</span> <span class="o">=</span> <span class="n">alpha_weekly_trans</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">alpha_weekly_spend_vol</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">"week"</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span>

<span class="n">alpha_weekly</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_weekly_summary</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="c1"># Weekly penetration = num_buyer / panel_sizes</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_buyers'</span><span class="p">)</span> <span class="o">/</span> <span class="n">panel_size</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'penet'</span><span class="p">),</span>
        <span class="c1"># PPB = num_trans / num_buyer</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_buyers'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'ppb'</span><span class="p">),</span>
        <span class="c1"># Average Order Value = spend / num_trans</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'aov'</span><span class="p">),</span>
        <span class="c1"># Average Order Value = spend / num_trans</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'aovol'</span><span class="p">),</span>
        <span class="c1"># Average price per unit volume = spend / volume</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'avg_price_kg'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
        <span class="s1">'week'</span><span class="p">,</span> <span class="s1">'spend'</span><span class="p">,</span> <span class="s1">'penet'</span><span class="p">,</span> <span class="s1">'aov'</span><span class="p">,</span> <span class="s1">'aovol'</span><span class="p">,</span> <span class="s1">'avg_price_kg'</span>
        
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Now we compute the correlations between weekly revenue and the components of its (multiplicative) decomposition across the two years.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Correlations between Weekly Revenue &amp; its Components - Over 2 Years</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [104]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'week'</span><span class="p">))</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'Revenue'</span><span class="p">,</span> <span class="s1">'Penetration'</span><span class="p">,</span> <span class="s1">'AOV'</span><span class="p">,</span> <span class="s1">'AOVOL'</span><span class="p">,</span> <span class="s1">'Price/Unit'</span><span class="p">])</span>

<span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">corr_matrix</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">relabel</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Decomposition"</span><span class="p">))</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Correlation Matrix of Revenue and the Components of its Decomposition'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Correlations between weekly revenue and the components of its (multiplicative) decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span>
        <span class="n">spend</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">penet</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">aov</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="n">aovol</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
        <span class="n">avg_price_kg</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">cols_align</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'lightgrey'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[104]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="juoxmktnxl" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#juoxmktnxl table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#juoxmktnxl thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#juoxmktnxl p { margin: 0 !important; padding: 0 !important; }
 #juoxmktnxl .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #juoxmktnxl .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #juoxmktnxl .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #juoxmktnxl .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #juoxmktnxl .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #juoxmktnxl .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #juoxmktnxl .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #juoxmktnxl .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #juoxmktnxl .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #juoxmktnxl .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #juoxmktnxl .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #juoxmktnxl .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #juoxmktnxl .gt_spanner_row { border-bottom-style: hidden !important; }
 #juoxmktnxl .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #juoxmktnxl .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #juoxmktnxl .gt_from_md> :first-child { margin-top: 0 !important; }
 #juoxmktnxl .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #juoxmktnxl .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #juoxmktnxl .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #juoxmktnxl .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #juoxmktnxl .gt_row_group_first td { border-top-width: 2px !important; }
 #juoxmktnxl .gt_row_group_first th { border-top-width: 2px !important; }
 #juoxmktnxl .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #juoxmktnxl .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #juoxmktnxl .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #juoxmktnxl .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #juoxmktnxl .gt_left { text-align: left !important; }
 #juoxmktnxl .gt_center { text-align: center !important; }
 #juoxmktnxl .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #juoxmktnxl .gt_font_normal { font-weight: normal !important; }
 #juoxmktnxl .gt_font_bold { font-weight: bold !important; }
 #juoxmktnxl .gt_font_italic { font-style: italic !important; }
 #juoxmktnxl .gt_super { font-size: 65% !important; }
 #juoxmktnxl .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #juoxmktnxl .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Correlation Matrix of Revenue and the Components of its Decomposition</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Correlations between weekly revenue and the components of its (multiplicative) decomposition</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Revenue" rowspan="1" scope="col">Revenue</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Penetration" rowspan="1" scope="col">Penetration</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="AOV" rowspan="1" scope="col">AOV</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="AOVOL" rowspan="1" scope="col">AOVOL</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Price/Unit" rowspan="1" scope="col">Price/Unit</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Revenue</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #69379b;">0.982</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ac90c8;">0.542</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8b64b2;">0.758</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffca69;">−0.590</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Penetration</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #69379b;">0.982</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #c4b0d8;">0.387</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #936fb7;">0.703</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffc458;">−0.654</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">AOV</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ac90c8;">0.542</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #c4b0d8;">0.387</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #9572b8;">0.691</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fff8ec;">−0.073</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">AOVOL</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8b64b2;">0.758</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #936fb7;">0.703</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #9572b8;">0.691</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffbb3f;">−0.754</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Price/Unit</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffca69;">−0.590</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffc458;">−0.654</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fff8ec;">−0.073</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffbb3f;">−0.754</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Below is a plot of the penetration numbers. Comparing this with Alpha's weekly revenue plot over the two years, we see that the fluctuations in revenue go hand-in-hand with fluctuations in penetration. To make this comparison clearer, we overlay the two series of numbers as well. The correlation between these to quantities is 0.98. It would appear that the key driver of revenue increases is simply more people buying the brand that week.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [105]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'penet'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'penet'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Weekly Penetration'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Penetration'</span><span class="p">,</span>
            <span class="n">pct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[105]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-b11f2bce24274fe8bb7e41a7964bb6ed.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b11f2bce24274fe8bb7e41a7964bb6ed.vega-embed details,
  #altair-viz-b11f2bce24274fe8bb7e41a7964bb6ed.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b11f2bce24274fe8bb7e41a7964bb6ed"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b11f2bce24274fe8bb7e41a7964bb6ed") {
      outputDiv = document.getElementById("altair-viz-b11f2bce24274fe8bb7e41a7964bb6ed");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {}}, "data": {"name": "data-3c048bc026b612220b720a44d06edfae"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": ",.0%"}, "field": "penet", "title": "Penetration", "type": "quantitative"}}, "height": 250, "title": "Alpha - Weekly Penetration", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-3c048bc026b612220b720a44d06edfae": [{"week": 1, "penet": 0.018522206731726748}, {"week": 2, "penet": 0.03306114319856602}, {"week": 3, "penet": 0.02848038239394543}, {"week": 4, "penet": 0.060545708026289585}, {"week": 5, "penet": 0.021310495917147978}, {"week": 6, "penet": 0.021111332403903605}, {"week": 7, "penet": 0.024895439155546702}, {"week": 8, "penet": 0.018522206731726748}, {"week": 9, "penet": 0.017924716191993626}, {"week": 10, "penet": 0.022306313483369845}, {"week": 11, "penet": 0.015534754033061144}, {"week": 12, "penet": 0.04799840669189404}, {"week": 13, "penet": 0.02628958374825732}, {"week": 14, "penet": 0.04720175263891655}, {"week": 15, "penet": 0.027086237801234814}, {"week": 16, "penet": 0.03405696076478789}, {"week": 17, "penet": 0.024895439155546702}, {"week": 18, "penet": 0.04142601075482971}, {"week": 19, "penet": 0.03385779725154352}, {"week": 20, "penet": 0.04720175263891655}, {"week": 21, "penet": 0.046604262099183426}, {"week": 22, "penet": 0.03883688508265286}, {"week": 23, "penet": 0.034455287791276636}, {"week": 24, "penet": 0.040231029675363475}, {"week": 25, "penet": 0.030472017526389165}, {"week": 26, "penet": 0.0928101971718781}, {"week": 27, "penet": 0.058952399920334596}, {"week": 28, "penet": 0.028281218880701054}, {"week": 29, "penet": 0.028679545907189803}, {"week": 30, "penet": 0.03465445130452101}, {"week": 31, "penet": 0.03385779725154352}, {"week": 32, "penet": 0.03485361481776539}, {"week": 33, "penet": 0.034455287791276636}, {"week": 34, "penet": 0.07388966341366261}, {"week": 35, "penet": 0.07886875124477195}, {"week": 36, "penet": 0.03226448914558853}, {"week": 37, "penet": 0.024297948615813584}, {"week": 38, "penet": 0.022306313483369845}, {"week": 39, "penet": 0.024497112129057957}, {"week": 40, "penet": 0.024895439155546702}, {"week": 41, "penet": 0.02509460266879108}, {"week": 42, "penet": 0.02150965943039235}, {"week": 43, "penet": 0.022903804023102967}, {"week": 44, "penet": 0.022903804023102967}, {"week": 45, "penet": 0.01712806213901613}, {"week": 46, "penet": 0.030073690499900416}, {"week": 47, "penet": 0.05516829316869149}, {"week": 48, "penet": 0.023700458076080462}, {"week": 49, "penet": 0.020912168890659232}, {"week": 50, "penet": 0.05337582154949213}, {"week": 51, "penet": 0.0430193188607847}, {"week": 52, "penet": 0.03823939454291973}, {"week": 53, "penet": 0.023302131049591713}, {"week": 54, "penet": 0.02848038239394543}, {"week": 55, "penet": 0.05457080262895837}, {"week": 56, "penet": 0.04700258912567218}, {"week": 57, "penet": 0.03565026887074288}, {"week": 58, "penet": 0.018323043218482375}, {"week": 59, "penet": 0.03306114319856602}, {"week": 60, "penet": 0.02031467835092611}, {"week": 61, "penet": 0.02310296753634734}, {"week": 62, "penet": 0.027285401314479187}, {"week": 63, "penet": 0.020713005377414856}, {"week": 64, "penet": 0.024895439155546702}, {"week": 65, "penet": 0.03983270264887472}, {"week": 66, "penet": 0.024297948615813584}, {"week": 67, "penet": 0.020513841864170483}, {"week": 68, "penet": 0.03465445130452101}, {"week": 69, "penet": 0.020713005377414856}, {"week": 70, "penet": 0.023899621589324835}, {"week": 71, "penet": 0.02808205536745668}, {"week": 72, "penet": 0.05516829316869149}, {"week": 73, "penet": 0.10854411471818362}, {"week": 74, "penet": 0.030472017526389165}, {"week": 75, "penet": 0.03226448914558853}, {"week": 76, "penet": 0.0324636526588329}, {"week": 77, "penet": 0.057956582354112725}, {"week": 78, "penet": 0.11133240390360485}, {"week": 79, "penet": 0.08105954989046006}, {"week": 80, "penet": 0.02589125672176857}, {"week": 81, "penet": 0.02688707428799044}, {"week": 82, "penet": 0.023899621589324835}, {"week": 83, "penet": 0.030073690499900416}, {"week": 84, "penet": 0.030671181039633538}, {"week": 85, "penet": 0.04560844453296156}, {"week": 86, "penet": 0.05257916749651464}, {"week": 87, "penet": 0.07369049990041825}, {"week": 88, "penet": 0.03823939454291973}, {"week": 89, "penet": 0.01752638916550488}, {"week": 90, "penet": 0.027086237801234814}, {"week": 91, "penet": 0.02469627564230233}, {"week": 92, "penet": 0.022505476996614218}, {"week": 93, "penet": 0.017924716191993626}, {"week": 94, "penet": 0.020115514837681737}, {"week": 95, "penet": 0.022903804023102967}, {"week": 96, "penet": 0.03345947022505477}, {"week": 97, "penet": 0.04082852021509659}, {"week": 98, "penet": 0.05775741884086835}, {"week": 99, "penet": 0.02031467835092611}, {"week": 100, "penet": 0.041027683728340966}, {"week": 101, "penet": 0.014937263493328022}, {"week": 102, "penet": 0.020912168890659232}, {"week": 103, "penet": 0.030073690499900416}, {"week": 104, "penet": 0.022704640509858594}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [106]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Method 1: Fold Transformation- convert wide-form data to long-form data directly without any preprocessing</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'spend'</span><span class="p">,</span> <span class="s1">'penet'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">transform_fold</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">'Penetration'</span><span class="p">,</span> <span class="s1">'Revenue'</span><span class="p">],</span>
    <span class="n">as_</span><span class="o">=</span><span class="p">[</span><span class="s1">'Legend'</span><span class="p">,</span> <span class="s1">'Value'</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">'Legend:N'</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">104</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="c1"># Explicitly specify quarter-end weeks</span>
        <span class="n">labelExpr</span><span class="o">=</span><span class="s2">"datum.value"</span><span class="p">,</span> <span class="c1"># Show only these labels</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">'Week'</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">spend_line</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="o">.</span><span class="n">Legend</span> <span class="o">==</span> <span class="s1">'Revenue'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
            <span class="s1">'spend:Q'</span><span class="p">,</span> <span class="c1"># Q = a continuous real-valued quantity</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">"$,.0f"</span><span class="p">))</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Revenue ($)'</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">penet_line</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="o">.</span><span class="n">Legend</span> <span class="o">==</span> <span class="s1">'Penetration'</span>
<span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
        <span class="s1">'penet:Q'</span><span class="p">,</span> <span class="c1"># Q = a continuous real-valued quantity</span>
        <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">",.0%"</span><span class="p">))</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Penetration'</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span><span class="n">spend_line</span><span class="p">,</span> <span class="n">penet_line</span><span class="p">)</span><span class="o">.</span><span class="n">resolve_scale</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'independent'</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">'Weekly Revenue &amp; Penetration for Alpha'</span>    
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">configure_axisY</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[106]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-fc83900bd65f42d5992480780c24aa92.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-fc83900bd65f42d5992480780c24aa92.vega-embed details,
  #altair-viz-fc83900bd65f42d5992480780c24aa92.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-fc83900bd65f42d5992480780c24aa92"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-fc83900bd65f42d5992480780c24aa92") {
      outputDiv = document.getElementById("altair-viz-fc83900bd65f42d5992480780c24aa92");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {"grid": true}}, "layer": [{"mark": {"type": "line"}, "encoding": {"color": {"field": "Legend", "type": "nominal"}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.0f"}, "field": "spend", "title": "Revenue ($)", "type": "quantitative"}}, "transform": [{"fold": ["Penetration", "Revenue"], "as": ["Legend", "Value"]}, {"filter": "(datum.Legend === 'Revenue')"}]}, {"mark": {"type": "line"}, "encoding": {"color": {"field": "Legend", "type": "nominal"}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": ",.0%"}, "field": "penet", "title": "Penetration", "type": "quantitative"}}, "transform": [{"fold": ["Penetration", "Revenue"], "as": ["Legend", "Value"]}, {"filter": "(datum.Legend === 'Penetration')"}]}], "data": {"name": "data-85e8deba42bc30350eb132e7e6096442"}, "height": 250, "resolve": {"scale": {"y": "independent"}}, "title": "Weekly Revenue & Penetration for Alpha", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-85e8deba42bc30350eb132e7e6096442": [{"week": 1, "spend": 331.4601135253906, "penet": 0.018522206731726748}, {"week": 2, "spend": 567.2499389648438, "penet": 0.03306114319856602}, {"week": 3, "spend": 497.9699401855469, "penet": 0.02848038239394543}, {"week": 4, "spend": 1389.95751953125, "penet": 0.060545708026289585}, {"week": 5, "spend": 358.2402038574219, "penet": 0.021310495917147978}, {"week": 6, "spend": 364.0600280761719, "penet": 0.021111332403903605}, {"week": 7, "spend": 412.34014892578125, "penet": 0.024895439155546702}, {"week": 8, "spend": 307.6201171875, "penet": 0.018522206731726748}, {"week": 9, "spend": 290.580078125, "penet": 0.017924716191993626}, {"week": 10, "spend": 442.64019775390625, "penet": 0.022306313483369845}, {"week": 11, "spend": 258.6200256347656, "penet": 0.015534754033061144}, {"week": 12, "spend": 912.5907592773438, "penet": 0.04799840669189404}, {"week": 13, "spend": 443.6502380371094, "penet": 0.02628958374825732}, {"week": 14, "spend": 853.830322265625, "penet": 0.04720175263891655}, {"week": 15, "spend": 446.1503601074219, "penet": 0.027086237801234814}, {"week": 16, "spend": 579.4600830078125, "penet": 0.03405696076478789}, {"week": 17, "spend": 410.93023681640625, "penet": 0.024895439155546702}, {"week": 18, "spend": 703.3102416992188, "penet": 0.04142601075482971}, {"week": 19, "spend": 607.4000244140625, "penet": 0.03385779725154352}, {"week": 20, "spend": 801.2600708007812, "penet": 0.04720175263891655}, {"week": 21, "spend": 903.2706298828125, "penet": 0.046604262099183426}, {"week": 22, "spend": 672.1006469726562, "penet": 0.03883688508265286}, {"week": 23, "spend": 620.7203369140625, "penet": 0.034455287791276636}, {"week": 24, "spend": 702.7504272460938, "penet": 0.040231029675363475}, {"week": 25, "spend": 509.1305236816406, "penet": 0.030472017526389165}, {"week": 26, "spend": 1977.66455078125, "penet": 0.0928101971718781}, {"week": 27, "spend": 1180.6121826171875, "penet": 0.058952399920334596}, {"week": 28, "spend": 486.72039794921875, "penet": 0.028281218880701054}, {"week": 29, "spend": 507.5603332519531, "penet": 0.028679545907189803}, {"week": 30, "spend": 596.3203125, "penet": 0.03465445130452101}, {"week": 31, "spend": 604.0001831054688, "penet": 0.03385779725154352}, {"week": 32, "spend": 611.1402587890625, "penet": 0.03485361481776539}, {"week": 33, "spend": 614.9400634765625, "penet": 0.034455287791276636}, {"week": 34, "spend": 1535.922119140625, "penet": 0.07388966341366261}, {"week": 35, "spend": 1571.509521484375, "penet": 0.07886875124477195}, {"week": 36, "spend": 587.4197387695312, "penet": 0.03226448914558853}, {"week": 37, "spend": 426.87005615234375, "penet": 0.024297948615813584}, {"week": 38, "spend": 383.8000793457031, "penet": 0.022306313483369845}, {"week": 39, "spend": 465.72003173828125, "penet": 0.024497112129057957}, {"week": 40, "spend": 447.0300598144531, "penet": 0.024895439155546702}, {"week": 41, "spend": 421.7700500488281, "penet": 0.02509460266879108}, {"week": 42, "spend": 364.6600036621094, "penet": 0.02150965943039235}, {"week": 43, "spend": 389.4200744628906, "penet": 0.022903804023102967}, {"week": 44, "spend": 408.33001708984375, "penet": 0.022903804023102967}, {"week": 45, "spend": 311.08013916015625, "penet": 0.01712806213901613}, {"week": 46, "spend": 575.3999633789062, "penet": 0.030073690499900416}, {"week": 47, "spend": 1188.458740234375, "penet": 0.05516829316869149}, {"week": 48, "spend": 434.8900451660156, "penet": 0.023700458076080462}, {"week": 49, "spend": 365.0300598144531, "penet": 0.020912168890659232}, {"week": 50, "spend": 1164.7088623046875, "penet": 0.05337582154949213}, {"week": 51, "spend": 773.2094116210938, "penet": 0.0430193188607847}, {"week": 52, "spend": 789.46923828125, "penet": 0.03823939454291973}, {"week": 53, "spend": 386.7501525878906, "penet": 0.023302131049591713}, {"week": 54, "spend": 586.9396362304688, "penet": 0.02848038239394543}, {"week": 55, "spend": 1045.8380126953125, "penet": 0.05457080262895837}, {"week": 56, "spend": 939.5099487304688, "penet": 0.04700258912567218}, {"week": 57, "spend": 1040.8994140625, "penet": 0.03565026887074288}, {"week": 58, "spend": 308.9900817871094, "penet": 0.018323043218482375}, {"week": 59, "spend": 547.6300048828125, "penet": 0.03306114319856602}, {"week": 60, "spend": 363.9002380371094, "penet": 0.02031467835092611}, {"week": 61, "spend": 476.6103515625, "penet": 0.02310296753634734}, {"week": 62, "spend": 484.7003173828125, "penet": 0.027285401314479187}, {"week": 63, "spend": 359.43017578125, "penet": 0.020713005377414856}, {"week": 64, "spend": 472.2302551269531, "penet": 0.024895439155546702}, {"week": 65, "spend": 665.6598510742188, "penet": 0.03983270264887472}, {"week": 66, "spend": 413.5800476074219, "penet": 0.024297948615813584}, {"week": 67, "spend": 364.3900146484375, "penet": 0.020513841864170483}, {"week": 68, "spend": 636.039794921875, "penet": 0.03465445130452101}, {"week": 69, "spend": 356.2501525878906, "penet": 0.020713005377414856}, {"week": 70, "spend": 433.2401428222656, "penet": 0.023899621589324835}, {"week": 71, "spend": 507.04010009765625, "penet": 0.02808205536745668}, {"week": 72, "spend": 1328.038330078125, "penet": 0.05516829316869149}, {"week": 73, "spend": 2070.157958984375, "penet": 0.10854411471818362}, {"week": 74, "spend": 606.7600708007812, "penet": 0.030472017526389165}, {"week": 75, "spend": 629.2600708007812, "penet": 0.03226448914558853}, {"week": 76, "spend": 611.8903198242188, "penet": 0.0324636526588329}, {"week": 77, "spend": 1198.6287841796875, "penet": 0.057956582354112725}, {"week": 78, "spend": 2345.435791015625, "penet": 0.11133240390360485}, {"week": 79, "spend": 1447.2288818359375, "penet": 0.08105954989046006}, {"week": 80, "spend": 531.5003662109375, "penet": 0.02589125672176857}, {"week": 81, "spend": 570.05029296875, "penet": 0.02688707428799044}, {"week": 82, "spend": 431.1202087402344, "penet": 0.023899621589324835}, {"week": 83, "spend": 529.820068359375, "penet": 0.030073690499900416}, {"week": 84, "spend": 582.5802001953125, "penet": 0.030671181039633538}, {"week": 85, "spend": 802.8195190429688, "penet": 0.04560844453296156}, {"week": 86, "spend": 985.1090698242188, "penet": 0.05257916749651464}, {"week": 87, "spend": 1304.2593994140625, "penet": 0.07369049990041825}, {"week": 88, "spend": 991.0695190429688, "penet": 0.03823939454291973}, {"week": 89, "spend": 309.98016357421875, "penet": 0.01752638916550488}, {"week": 90, "spend": 477.5602722167969, "penet": 0.027086237801234814}, {"week": 91, "spend": 406.980224609375, "penet": 0.02469627564230233}, {"week": 92, "spend": 390.3000793457031, "penet": 0.022505476996614218}, {"week": 93, "spend": 306.7400817871094, "penet": 0.017924716191993626}, {"week": 94, "spend": 376.9102478027344, "penet": 0.020115514837681737}, {"week": 95, "spend": 383.11016845703125, "penet": 0.022903804023102967}, {"week": 96, "spend": 674.090087890625, "penet": 0.03345947022505477}, {"week": 97, "spend": 840.3900756835938, "penet": 0.04082852021509659}, {"week": 98, "spend": 1079.0780029296875, "penet": 0.05775741884086835}, {"week": 99, "spend": 384.9902038574219, "penet": 0.02031467835092611}, {"week": 100, "spend": 692.4799194335938, "penet": 0.041027683728340966}, {"week": 101, "spend": 265.77008056640625, "penet": 0.014937263493328022}, {"week": 102, "spend": 379.61016845703125, "penet": 0.020912168890659232}, {"week": 103, "spend": 532.5, "penet": 0.030073690499900416}, {"week": 104, "spend": 394.8899841308594, "penet": 0.022704640509858594}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [107]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Method 2: Pre-processed - Wide-form to long-form conversion</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'spend'</span><span class="p">,</span> <span class="s1">'penet'</span><span class="p">)</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">'week'</span><span class="p">,</span>
    <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">'spend'</span><span class="p">,</span> <span class="s1">'penet'</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">'variable:N'</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">104</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="c1"># Explicitly specify quarter-end weeks</span>
        <span class="n">labelExpr</span><span class="o">=</span><span class="s2">"datum.value"</span><span class="p">,</span> <span class="c1"># Show only these labels</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">'Week'</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">spend_line</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="o">.</span><span class="n">variable</span> <span class="o">==</span> <span class="s1">'spend'</span>
    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
            <span class="s1">'value:Q'</span><span class="p">,</span> <span class="c1"># Q = a continuous real-valued quantity</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">"$,.0f"</span><span class="p">))</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Revenue ($)'</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">penet_line</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">datum</span><span class="o">.</span><span class="n">variable</span> <span class="o">==</span> <span class="s1">'penet'</span>
<span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
        <span class="s1">'value:Q'</span><span class="p">,</span> <span class="c1"># Q = a continuous real-valued quantity</span>
        <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">",.0%"</span><span class="p">))</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Penetration'</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span><span class="n">spend_line</span><span class="p">,</span> <span class="n">penet_line</span><span class="p">)</span><span class="o">.</span><span class="n">resolve_scale</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'independent'</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">'Weekly Revenue &amp; Penetration for Alpha'</span>    
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">configure_axisY</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[107]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-70e2a330452e487182d10a9f47c96da4.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-70e2a330452e487182d10a9f47c96da4.vega-embed details,
  #altair-viz-70e2a330452e487182d10a9f47c96da4.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-70e2a330452e487182d10a9f47c96da4"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-70e2a330452e487182d10a9f47c96da4") {
      outputDiv = document.getElementById("altair-viz-70e2a330452e487182d10a9f47c96da4");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axisY": {"grid": true}}, "layer": [{"mark": {"type": "line"}, "encoding": {"color": {"field": "variable", "type": "nominal"}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.0f"}, "field": "value", "title": "Revenue ($)", "type": "quantitative"}}, "transform": [{"filter": "(datum.variable === 'spend')"}]}, {"mark": {"type": "line"}, "encoding": {"color": {"field": "variable", "type": "nominal"}, "x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": ",.0%"}, "field": "value", "title": "Penetration", "type": "quantitative"}}, "transform": [{"filter": "(datum.variable === 'penet')"}]}], "data": {"name": "data-542efb1e83886aff6aeb63d07bd0ee2c"}, "height": 250, "resolve": {"scale": {"y": "independent"}}, "title": "Weekly Revenue & Penetration for Alpha", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-542efb1e83886aff6aeb63d07bd0ee2c": [{"week": 1, "variable": "spend", "value": 331.4601135253906}, {"week": 2, "variable": "spend", "value": 567.2499389648438}, {"week": 3, "variable": "spend", "value": 497.9699401855469}, {"week": 4, "variable": "spend", "value": 1389.95751953125}, {"week": 5, "variable": "spend", "value": 358.2402038574219}, {"week": 6, "variable": "spend", "value": 364.0600280761719}, {"week": 7, "variable": "spend", "value": 412.34014892578125}, {"week": 8, "variable": "spend", "value": 307.6201171875}, {"week": 9, "variable": "spend", "value": 290.580078125}, {"week": 10, "variable": "spend", "value": 442.64019775390625}, {"week": 11, "variable": "spend", "value": 258.6200256347656}, {"week": 12, "variable": "spend", "value": 912.5907592773438}, {"week": 13, "variable": "spend", "value": 443.6502380371094}, {"week": 14, "variable": "spend", "value": 853.830322265625}, {"week": 15, "variable": "spend", "value": 446.1503601074219}, {"week": 16, "variable": "spend", "value": 579.4600830078125}, {"week": 17, "variable": "spend", "value": 410.93023681640625}, {"week": 18, "variable": "spend", "value": 703.3102416992188}, {"week": 19, "variable": "spend", "value": 607.4000244140625}, {"week": 20, "variable": "spend", "value": 801.2600708007812}, {"week": 21, "variable": "spend", "value": 903.2706298828125}, {"week": 22, "variable": "spend", "value": 672.1006469726562}, {"week": 23, "variable": "spend", "value": 620.7203369140625}, {"week": 24, "variable": "spend", "value": 702.7504272460938}, {"week": 25, "variable": "spend", "value": 509.1305236816406}, {"week": 26, "variable": "spend", "value": 1977.66455078125}, {"week": 27, "variable": "spend", "value": 1180.6121826171875}, {"week": 28, "variable": "spend", "value": 486.72039794921875}, {"week": 29, "variable": "spend", "value": 507.5603332519531}, {"week": 30, "variable": "spend", "value": 596.3203125}, {"week": 31, "variable": "spend", "value": 604.0001831054688}, {"week": 32, "variable": "spend", "value": 611.1402587890625}, {"week": 33, "variable": "spend", "value": 614.9400634765625}, {"week": 34, "variable": "spend", "value": 1535.922119140625}, {"week": 35, "variable": "spend", "value": 1571.509521484375}, {"week": 36, "variable": "spend", "value": 587.4197387695312}, {"week": 37, "variable": "spend", "value": 426.87005615234375}, {"week": 38, "variable": "spend", "value": 383.8000793457031}, {"week": 39, "variable": "spend", "value": 465.72003173828125}, {"week": 40, "variable": "spend", "value": 447.0300598144531}, {"week": 41, "variable": "spend", "value": 421.7700500488281}, {"week": 42, "variable": "spend", "value": 364.6600036621094}, {"week": 43, "variable": "spend", "value": 389.4200744628906}, {"week": 44, "variable": "spend", "value": 408.33001708984375}, {"week": 45, "variable": "spend", "value": 311.08013916015625}, {"week": 46, "variable": "spend", "value": 575.3999633789062}, {"week": 47, "variable": "spend", "value": 1188.458740234375}, {"week": 48, "variable": "spend", "value": 434.8900451660156}, {"week": 49, "variable": "spend", "value": 365.0300598144531}, {"week": 50, "variable": "spend", "value": 1164.7088623046875}, {"week": 51, "variable": "spend", "value": 773.2094116210938}, {"week": 52, "variable": "spend", "value": 789.46923828125}, {"week": 53, "variable": "spend", "value": 386.7501525878906}, {"week": 54, "variable": "spend", "value": 586.9396362304688}, {"week": 55, "variable": "spend", "value": 1045.8380126953125}, {"week": 56, "variable": "spend", "value": 939.5099487304688}, {"week": 57, "variable": "spend", "value": 1040.8994140625}, {"week": 58, "variable": "spend", "value": 308.9900817871094}, {"week": 59, "variable": "spend", "value": 547.6300048828125}, {"week": 60, "variable": "spend", "value": 363.9002380371094}, {"week": 61, "variable": "spend", "value": 476.6103515625}, {"week": 62, "variable": "spend", "value": 484.7003173828125}, {"week": 63, "variable": "spend", "value": 359.43017578125}, {"week": 64, "variable": "spend", "value": 472.2302551269531}, {"week": 65, "variable": "spend", "value": 665.6598510742188}, {"week": 66, "variable": "spend", "value": 413.5800476074219}, {"week": 67, "variable": "spend", "value": 364.3900146484375}, {"week": 68, "variable": "spend", "value": 636.039794921875}, {"week": 69, "variable": "spend", "value": 356.2501525878906}, {"week": 70, "variable": "spend", "value": 433.2401428222656}, {"week": 71, "variable": "spend", "value": 507.04010009765625}, {"week": 72, "variable": "spend", "value": 1328.038330078125}, {"week": 73, "variable": "spend", "value": 2070.157958984375}, {"week": 74, "variable": "spend", "value": 606.7600708007812}, {"week": 75, "variable": "spend", "value": 629.2600708007812}, {"week": 76, "variable": "spend", "value": 611.8903198242188}, {"week": 77, "variable": "spend", "value": 1198.6287841796875}, {"week": 78, "variable": "spend", "value": 2345.435791015625}, {"week": 79, "variable": "spend", "value": 1447.2288818359375}, {"week": 80, "variable": "spend", "value": 531.5003662109375}, {"week": 81, "variable": "spend", "value": 570.05029296875}, {"week": 82, "variable": "spend", "value": 431.1202087402344}, {"week": 83, "variable": "spend", "value": 529.820068359375}, {"week": 84, "variable": "spend", "value": 582.5802001953125}, {"week": 85, "variable": "spend", "value": 802.8195190429688}, {"week": 86, "variable": "spend", "value": 985.1090698242188}, {"week": 87, "variable": "spend", "value": 1304.2593994140625}, {"week": 88, "variable": "spend", "value": 991.0695190429688}, {"week": 89, "variable": "spend", "value": 309.98016357421875}, {"week": 90, "variable": "spend", "value": 477.5602722167969}, {"week": 91, "variable": "spend", "value": 406.980224609375}, {"week": 92, "variable": "spend", "value": 390.3000793457031}, {"week": 93, "variable": "spend", "value": 306.7400817871094}, {"week": 94, "variable": "spend", "value": 376.9102478027344}, {"week": 95, "variable": "spend", "value": 383.11016845703125}, {"week": 96, "variable": "spend", "value": 674.090087890625}, {"week": 97, "variable": "spend", "value": 840.3900756835938}, {"week": 98, "variable": "spend", "value": 1079.0780029296875}, {"week": 99, "variable": "spend", "value": 384.9902038574219}, {"week": 100, "variable": "spend", "value": 692.4799194335938}, {"week": 101, "variable": "spend", "value": 265.77008056640625}, {"week": 102, "variable": "spend", "value": 379.61016845703125}, {"week": 103, "variable": "spend", "value": 532.5}, {"week": 104, "variable": "spend", "value": 394.8899841308594}, {"week": 1, "variable": "penet", "value": 0.018522206731726748}, {"week": 2, "variable": "penet", "value": 0.03306114319856602}, {"week": 3, "variable": "penet", "value": 0.02848038239394543}, {"week": 4, "variable": "penet", "value": 0.060545708026289585}, {"week": 5, "variable": "penet", "value": 0.021310495917147978}, {"week": 6, "variable": "penet", "value": 0.021111332403903605}, {"week": 7, "variable": "penet", "value": 0.024895439155546702}, {"week": 8, "variable": "penet", "value": 0.018522206731726748}, {"week": 9, "variable": "penet", "value": 0.017924716191993626}, {"week": 10, "variable": "penet", "value": 0.022306313483369845}, {"week": 11, "variable": "penet", "value": 0.015534754033061144}, {"week": 12, "variable": "penet", "value": 0.04799840669189404}, {"week": 13, "variable": "penet", "value": 0.02628958374825732}, {"week": 14, "variable": "penet", "value": 0.04720175263891655}, {"week": 15, "variable": "penet", "value": 0.027086237801234814}, {"week": 16, "variable": "penet", "value": 0.03405696076478789}, {"week": 17, "variable": "penet", "value": 0.024895439155546702}, {"week": 18, "variable": "penet", "value": 0.04142601075482971}, {"week": 19, "variable": "penet", "value": 0.03385779725154352}, {"week": 20, "variable": "penet", "value": 0.04720175263891655}, {"week": 21, "variable": "penet", "value": 0.046604262099183426}, {"week": 22, "variable": "penet", "value": 0.03883688508265286}, {"week": 23, "variable": "penet", "value": 0.034455287791276636}, {"week": 24, "variable": "penet", "value": 0.040231029675363475}, {"week": 25, "variable": "penet", "value": 0.030472017526389165}, {"week": 26, "variable": "penet", "value": 0.0928101971718781}, {"week": 27, "variable": "penet", "value": 0.058952399920334596}, {"week": 28, "variable": "penet", "value": 0.028281218880701054}, {"week": 29, "variable": "penet", "value": 0.028679545907189803}, {"week": 30, "variable": "penet", "value": 0.03465445130452101}, {"week": 31, "variable": "penet", "value": 0.03385779725154352}, {"week": 32, "variable": "penet", "value": 0.03485361481776539}, {"week": 33, "variable": "penet", "value": 0.034455287791276636}, {"week": 34, "variable": "penet", "value": 0.07388966341366261}, {"week": 35, "variable": "penet", "value": 0.07886875124477195}, {"week": 36, "variable": "penet", "value": 0.03226448914558853}, {"week": 37, "variable": "penet", "value": 0.024297948615813584}, {"week": 38, "variable": "penet", "value": 0.022306313483369845}, {"week": 39, "variable": "penet", "value": 0.024497112129057957}, {"week": 40, "variable": "penet", "value": 0.024895439155546702}, {"week": 41, "variable": "penet", "value": 0.02509460266879108}, {"week": 42, "variable": "penet", "value": 0.02150965943039235}, {"week": 43, "variable": "penet", "value": 0.022903804023102967}, {"week": 44, "variable": "penet", "value": 0.022903804023102967}, {"week": 45, "variable": "penet", "value": 0.01712806213901613}, {"week": 46, "variable": "penet", "value": 0.030073690499900416}, {"week": 47, "variable": "penet", "value": 0.05516829316869149}, {"week": 48, "variable": "penet", "value": 0.023700458076080462}, {"week": 49, "variable": "penet", "value": 0.020912168890659232}, {"week": 50, "variable": "penet", "value": 0.05337582154949213}, {"week": 51, "variable": "penet", "value": 0.0430193188607847}, {"week": 52, "variable": "penet", "value": 0.03823939454291973}, {"week": 53, "variable": "penet", "value": 0.023302131049591713}, {"week": 54, "variable": "penet", "value": 0.02848038239394543}, {"week": 55, "variable": "penet", "value": 0.05457080262895837}, {"week": 56, "variable": "penet", "value": 0.04700258912567218}, {"week": 57, "variable": "penet", "value": 0.03565026887074288}, {"week": 58, "variable": "penet", "value": 0.018323043218482375}, {"week": 59, "variable": "penet", "value": 0.03306114319856602}, {"week": 60, "variable": "penet", "value": 0.02031467835092611}, {"week": 61, "variable": "penet", "value": 0.02310296753634734}, {"week": 62, "variable": "penet", "value": 0.027285401314479187}, {"week": 63, "variable": "penet", "value": 0.020713005377414856}, {"week": 64, "variable": "penet", "value": 0.024895439155546702}, {"week": 65, "variable": "penet", "value": 0.03983270264887472}, {"week": 66, "variable": "penet", "value": 0.024297948615813584}, {"week": 67, "variable": "penet", "value": 0.020513841864170483}, {"week": 68, "variable": "penet", "value": 0.03465445130452101}, {"week": 69, "variable": "penet", "value": 0.020713005377414856}, {"week": 70, "variable": "penet", "value": 0.023899621589324835}, {"week": 71, "variable": "penet", "value": 0.02808205536745668}, {"week": 72, "variable": "penet", "value": 0.05516829316869149}, {"week": 73, "variable": "penet", "value": 0.10854411471818362}, {"week": 74, "variable": "penet", "value": 0.030472017526389165}, {"week": 75, "variable": "penet", "value": 0.03226448914558853}, {"week": 76, "variable": "penet", "value": 0.0324636526588329}, {"week": 77, "variable": "penet", "value": 0.057956582354112725}, {"week": 78, "variable": "penet", "value": 0.11133240390360485}, {"week": 79, "variable": "penet", "value": 0.08105954989046006}, {"week": 80, "variable": "penet", "value": 0.02589125672176857}, {"week": 81, "variable": "penet", "value": 0.02688707428799044}, {"week": 82, "variable": "penet", "value": 0.023899621589324835}, {"week": 83, "variable": "penet", "value": 0.030073690499900416}, {"week": 84, "variable": "penet", "value": 0.030671181039633538}, {"week": 85, "variable": "penet", "value": 0.04560844453296156}, {"week": 86, "variable": "penet", "value": 0.05257916749651464}, {"week": 87, "variable": "penet", "value": 0.07369049990041825}, {"week": 88, "variable": "penet", "value": 0.03823939454291973}, {"week": 89, "variable": "penet", "value": 0.01752638916550488}, {"week": 90, "variable": "penet", "value": 0.027086237801234814}, {"week": 91, "variable": "penet", "value": 0.02469627564230233}, {"week": 92, "variable": "penet", "value": 0.022505476996614218}, {"week": 93, "variable": "penet", "value": 0.017924716191993626}, {"week": 94, "variable": "penet", "value": 0.020115514837681737}, {"week": 95, "variable": "penet", "value": 0.022903804023102967}, {"week": 96, "variable": "penet", "value": 0.03345947022505477}, {"week": 97, "variable": "penet", "value": 0.04082852021509659}, {"week": 98, "variable": "penet", "value": 0.05775741884086835}, {"week": 99, "variable": "penet", "value": 0.02031467835092611}, {"week": 100, "variable": "penet", "value": 0.041027683728340966}, {"week": 101, "variable": "penet", "value": 0.014937263493328022}, {"week": 102, "variable": "penet", "value": 0.020912168890659232}, {"week": 103, "variable": "penet", "value": 0.030073690499900416}, {"week": 104, "variable": "penet", "value": 0.022704640509858594}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>However, the lack of a perfect correlation means there is some variability in average order value that is not highly correlated with penetration. We plot this quantity below. (The correlation between penetration and average order value is 0.39.) In order to get a sense of what lies behind the variability in average order value, we also plot weekly average order volume and average price per kg, respectively.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [108]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">'currency'</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s1">'currency'</span><span class="p">:</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="s2">"$,.1f"</span>
    <span class="k">elif</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s1">'percent'</span><span class="p">:</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="s2">",.0%"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="s2">",.1f"</span>
    
    <span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">strokeWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span>
            <span class="s1">'week'</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span>
                <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">year</span><span class="o">*</span><span class="mi">52</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="c1"># Explicitly specify quarter-end weeks</span>
                <span class="n">labelExpr</span><span class="o">=</span><span class="s2">"datum.value"</span><span class="p">,</span> <span class="c1"># Show only these labels</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">'Week'</span>
            <span class="p">)</span>
        <span class="p">),</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">:Q'</span><span class="p">,</span> <span class="c1"># Q = a continuous real-valued quantity</span>
            <span class="n">title</span><span class="o">=</span><span class="n">y_axis_label</span><span class="p">,</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span>
    <span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span>
        <span class="n">stroke</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">chart</span> 
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [109]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'aov'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'aov'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Weekly Average Order Value'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Average Order Value ($)'</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s1">'currency'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[109]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-d563895d80ec4fac969bcb76017e659f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d563895d80ec4fac969bcb76017e659f.vega-embed details,
  #altair-viz-d563895d80ec4fac969bcb76017e659f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d563895d80ec4fac969bcb76017e659f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d563895d80ec4fac969bcb76017e659f") {
      outputDiv = document.getElementById("altair-viz-d563895d80ec4fac969bcb76017e659f");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"name": "data-67358efe2a9fbc191aa11a8be087d8d1"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.1f"}, "field": "aov", "title": "Average Order Value ($)", "type": "quantitative"}}, "height": 250, "title": "Alpha - Weekly Average Order Value", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-67358efe2a9fbc191aa11a8be087d8d1": [{"week": 1, "aov": 3.5640872422085015}, {"week": 2, "aov": 3.417168307017131}, {"week": 3, "aov": 3.4823072740248033}, {"week": 4, "aov": 4.572228682668586}, {"week": 5, "aov": 3.3480392883871204}, {"week": 6, "aov": 3.4345285667563386}, {"week": 7, "aov": 3.29872119140625}, {"week": 8, "aov": 3.307743195564516}, {"week": 9, "aov": 3.2286675347222222}, {"week": 10, "aov": 3.9521446228027344}, {"week": 11, "aov": 3.315641354291867}, {"week": 12, "aov": 3.7866836484537085}, {"week": 13, "aov": 3.360986651796283}, {"week": 14, "aov": 3.6026595876186707}, {"week": 15, "aov": 3.2805173537310433}, {"week": 16, "aov": 3.388655456186038}, {"week": 17, "aov": 3.28744189453125}, {"week": 18, "aov": 3.381299238938552}, {"week": 19, "aov": 3.5729413200827205}, {"week": 20, "aov": 3.3808441805940137}, {"week": 21, "aov": 3.8601308969350963}, {"week": 22, "aov": 3.44666998447516}, {"week": 23, "aov": 3.5879788260928467}, {"week": 24, "aov": 3.478962511119276}, {"week": 25, "aov": 3.3276504815793504}, {"week": 26, "aov": 4.243915345024142}, {"week": 27, "aov": 3.9885546710040116}, {"week": 28, "aov": 3.427608436262104}, {"week": 29, "aov": 3.5247245364718967}, {"week": 30, "aov": 3.4271282327586206}, {"week": 31, "aov": 3.552942253561581}, {"week": 32, "aov": 3.492230050223214}, {"week": 33, "aov": 3.5545668409049855}, {"week": 34, "aov": 4.1399518036135445}, {"week": 35, "aov": 3.9684583875868054}, {"week": 36, "aov": 3.6260477701822915}, {"week": 37, "aov": 3.498934886494621}, {"week": 38, "aov": 3.426786422729492}, {"week": 39, "aov": 3.7863417214494413}, {"week": 40, "aov": 3.576240478515625}, {"week": 41, "aov": 3.347381349593874}, {"week": 42, "aov": 3.3764815153899015}, {"week": 43, "aov": 3.3862615170686143}, {"week": 44, "aov": 3.55069580078125}, {"week": 45, "aov": 3.617210920466933}, {"week": 46, "aov": 3.8105957839662667}, {"week": 47, "aov": 4.290464766189079}, {"week": 48, "aov": 3.6545381946724}, {"week": 49, "aov": 3.4764767601376487}, {"week": 50, "aov": 4.345928590689132}, {"week": 51, "aov": 3.579673201949508}, {"week": 52, "aov": 4.111818949381511}, {"week": 53, "aov": 3.3055568597255607}, {"week": 54, "aov": 4.104472980632648}, {"week": 55, "aov": 3.8169270536325275}, {"week": 56, "aov": 3.98097435902741}, {"week": 57, "aov": 5.815080525488827}, {"week": 58, "aov": 3.3585878455120586}, {"week": 59, "aov": 3.298975933028991}, {"week": 60, "aov": 3.5676493925206803}, {"week": 61, "aov": 4.108709927262931}, {"week": 62, "aov": 3.537958521042427}, {"week": 63, "aov": 3.456059382512019}, {"week": 64, "aov": 3.777842041015625}, {"week": 65, "aov": 3.328299255371094}, {"week": 66, "aov": 3.3900003902247695}, {"week": 67, "aov": 3.537767132509102}, {"week": 68, "aov": 3.655401120240661}, {"week": 69, "aov": 3.425482236422025}, {"week": 70, "aov": 3.61033452351888}, {"week": 71, "aov": 3.596029078706782}, {"week": 72, "aov": 4.794362202448105}, {"week": 73, "aov": 3.798454970613532}, {"week": 74, "aov": 3.9657520967371322}, {"week": 75, "aov": 3.8843214246961804}, {"week": 76, "aov": 3.7539283424798695}, {"week": 77, "aov": 4.118999258349442}, {"week": 78, "aov": 4.195770645824016}, {"week": 79, "aov": 3.5558449185158167}, {"week": 80, "aov": 4.08846435546875}, {"week": 81, "aov": 4.2225947627314815}, {"week": 82, "aov": 3.59266840616862}, {"week": 83, "aov": 3.5087421745653975}, {"week": 84, "aov": 3.782988312956575}, {"week": 85, "aov": 3.505762091890693}, {"week": 86, "aov": 3.731473749334162}, {"week": 87, "aov": 3.5250254038217905}, {"week": 88, "aov": 5.161820411682129}, {"week": 89, "aov": 3.5225018587979404}, {"week": 90, "aov": 3.511472589829389}, {"week": 91, "aov": 3.282098585559476}, {"week": 92, "aov": 3.4539830030593195}, {"week": 93, "aov": 3.408223130967882}, {"week": 94, "aov": 3.731784631710241}, {"week": 95, "aov": 3.331392769191576}, {"week": 96, "aov": 4.012440999348958}, {"week": 97, "aov": 4.099463783822409}, {"week": 98, "aov": 3.7209586307920257}, {"week": 99, "aov": 3.7744137633080577}, {"week": 100, "aov": 3.361553006959193}, {"week": 101, "aov": 3.54360107421875}, {"week": 102, "aov": 3.6153349376860118}, {"week": 103, "aov": 3.5264900662251657}, {"week": 104, "aov": 3.4639472292180646}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [110]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'aovol'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'aovol'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Weekly Average Order Volume (kg)'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Average Order Volume (kg)'</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s1">'number'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[110]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-4e8e0a9a25904d0d9bd94528e3922528.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-4e8e0a9a25904d0d9bd94528e3922528.vega-embed details,
  #altair-viz-4e8e0a9a25904d0d9bd94528e3922528.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-4e8e0a9a25904d0d9bd94528e3922528"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-4e8e0a9a25904d0d9bd94528e3922528") {
      outputDiv = document.getElementById("altair-viz-4e8e0a9a25904d0d9bd94528e3922528");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"name": "data-cd16cf519e93d974df86e4f0701d533d"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": ",.1f"}, "field": "aovol", "title": "Average Order Volume (kg)", "type": "quantitative"}}, "height": 250, "title": "Alpha - Weekly Average Order Volume (kg)", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-cd16cf519e93d974df86e4f0701d533d": [{"week": 1, "aovol": 0.9704301075268815}, {"week": 2, "aovol": 0.958433734939759}, {"week": 3, "aovol": 0.9423076923076923}, {"week": 4, "aovol": 1.2748355263157898}, {"week": 5, "aovol": 0.8728971962616822}, {"week": 6, "aovol": 0.9400943396226414}, {"week": 7, "aovol": 0.8931999999999999}, {"week": 8, "aovol": 0.9209677419354836}, {"week": 9, "aovol": 0.8344444444444444}, {"week": 10, "aovol": 1.0544642857142856}, {"week": 11, "aovol": 0.9032051282051281}, {"week": 12, "aovol": 1.0437759336099586}, {"week": 13, "aovol": 0.9257575757575756}, {"week": 14, "aovol": 1.0481012658227848}, {"week": 15, "aovol": 0.8911764705882352}, {"week": 16, "aovol": 0.9652046783625732}, {"week": 17, "aovol": 0.9135999999999999}, {"week": 18, "aovol": 0.9336538461538463}, {"week": 19, "aovol": 1.0017647058823531}, {"week": 20, "aovol": 0.9592827004219409}, {"week": 21, "aovol": 1.1111111111111114}, {"week": 22, "aovol": 0.9425641025641026}, {"week": 23, "aovol": 0.9751445086705204}, {"week": 24, "aovol": 0.9252475247524752}, {"week": 25, "aovol": 0.881045751633987}, {"week": 26, "aovol": 1.1996781115879829}, {"week": 27, "aovol": 1.1307432432432434}, {"week": 28, "aovol": 0.9059859154929576}, {"week": 29, "aovol": 0.9302083333333333}, {"week": 30, "aovol": 0.8908045977011493}, {"week": 31, "aovol": 0.9602941176470589}, {"week": 32, "aovol": 0.9154285714285715}, {"week": 33, "aovol": 0.9335260115606938}, {"week": 34, "aovol": 1.1668463611859843}, {"week": 35, "aovol": 1.0925505050505053}, {"week": 36, "aovol": 0.9398148148148148}, {"week": 37, "aovol": 0.9274590163934425}, {"week": 38, "aovol": 0.8790178571428571}, {"week": 39, "aovol": 1.0109756097560976}, {"week": 40, "aovol": 0.9343999999999997}, {"week": 41, "aovol": 0.8837301587301587}, {"week": 42, "aovol": 0.876388888888889}, {"week": 43, "aovol": 0.8647826086956518}, {"week": 44, "aovol": 0.9430434782608694}, {"week": 45, "aovol": 0.9529069767441859}, {"week": 46, "aovol": 1.0281456953642385}, {"week": 47, "aovol": 1.1815884476534297}, {"week": 48, "aovol": 0.9516806722689074}, {"week": 49, "aovol": 0.897142857142857}, {"week": 50, "aovol": 1.1930970149253735}, {"week": 51, "aovol": 0.9430555555555556}, {"week": 52, "aovol": 1.1239583333333336}, {"week": 53, "aovol": 0.8397435897435898}, {"week": 54, "aovol": 1.0999999999999996}, {"week": 55, "aovol": 1.345255474452555}, {"week": 56, "aovol": 1.7305084745762713}, {"week": 57, "aovol": 1.5114525139664807}, {"week": 58, "aovol": 0.8331521739130434}, {"week": 59, "aovol": 0.9581325301204818}, {"week": 60, "aovol": 0.8818627450980391}, {"week": 61, "aovol": 1.0086206896551722}, {"week": 62, "aovol": 1.0711678832116789}, {"week": 63, "aovol": 0.8548076923076923}, {"week": 64, "aovol": 1.0375999999999999}, {"week": 65, "aovol": 1.0354999999999999}, {"week": 66, "aovol": 0.8905737704918032}, {"week": 67, "aovol": 0.9213592233009706}, {"week": 68, "aovol": 0.9543103448275863}, {"week": 69, "aovol": 0.8932692307692306}, {"week": 70, "aovol": 0.9666666666666667}, {"week": 71, "aovol": 0.9460992907801417}, {"week": 72, "aovol": 1.2678700361010835}, {"week": 73, "aovol": 1.4431192660550451}, {"week": 74, "aovol": 1.0248366013071895}, {"week": 75, "aovol": 1.01141975308642}, {"week": 76, "aovol": 1.0049079754601227}, {"week": 77, "aovol": 1.1204467353951895}, {"week": 78, "aovol": 1.3716457960644002}, {"week": 79, "aovol": 1.2411547911547915}, {"week": 80, "aovol": 1.0346153846153843}, {"week": 81, "aovol": 1.0940740740740738}, {"week": 82, "aovol": 0.9049999999999998}, {"week": 83, "aovol": 0.8609271523178801}, {"week": 84, "aovol": 0.9590909090909089}, {"week": 85, "aovol": 0.9272925764192144}, {"week": 86, "aovol": 1.104166666666667}, {"week": 87, "aovol": 1.4487837837837834}, {"week": 88, "aovol": 1.3471354166666671}, {"week": 89, "aovol": 0.8789772727272726}, {"week": 90, "aovol": 0.8474264705882352}, {"week": 91, "aovol": 0.7959677419354838}, {"week": 92, "aovol": 0.8606194690265484}, {"week": 93, "aovol": 0.8177777777777777}, {"week": 94, "aovol": 0.8673267326732673}, {"week": 95, "aovol": 0.7634782608695649}, {"week": 96, "aovol": 1.0068452380952382}, {"week": 97, "aovol": 1.054878048780488}, {"week": 98, "aovol": 1.3587931034482759}, {"week": 99, "aovol": 0.963235294117647}, {"week": 100, "aovol": 1.050485436893204}, {"week": 101, "aovol": 0.8733333333333333}, {"week": 102, "aovol": 0.9114285714285711}, {"week": 103, "aovol": 0.894701986754967}, {"week": 104, "aovol": 0.887719298245614}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [111]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">weekly_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">alpha_weekly</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'week'</span><span class="p">,</span> <span class="s1">'avg_price_kg'</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> 
            <span class="n">y</span><span class="o">=</span><span class="s1">'avg_price_kg'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Weekly Average Price/kg'</span><span class="p">,</span> 
            <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">'Average $/kg '</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s1">'currency'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[111]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-dbbbee26aec0493884c297d2d16d41ee.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-dbbbee26aec0493884c297d2d16d41ee.vega-embed details,
  #altair-viz-dbbbee26aec0493884c297d2d16d41ee.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-dbbbee26aec0493884c297d2d16d41ee"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-dbbbee26aec0493884c297d2d16d41ee") {
      outputDiv = document.getElementById("altair-viz-dbbbee26aec0493884c297d2d16d41ee");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"name": "data-96f65147d84f478756f08714fbdc7e2f"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"x": {"axis": {"labelExpr": "datum.value", "title": "Week", "values": [0.0, 13.0, 26.0, 39.0, 52.0, 65.0, 78.0, 91.0, 104.0]}, "field": "week", "type": "quantitative"}, "y": {"axis": {"format": "$,.1f"}, "field": "avg_price_kg", "title": "Average $/kg ", "type": "quantitative"}}, "height": 250, "title": "Alpha - Weekly Average Price/kg", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-96f65147d84f478756f08714fbdc7e2f": [{"week": 1, "avg_price_kg": 3.672688238508484}, {"week": 2, "avg_price_kg": 3.565367309647038}, {"week": 3, "avg_price_kg": 3.695509760189587}, {"week": 4, "avg_price_kg": 3.586524369839375}, {"week": 5, "avg_price_kg": 3.835548221171541}, {"week": 6, "avg_price_kg": 3.6533871357367977}, {"week": 7, "avg_price_kg": 3.6931495649420625}, {"week": 8, "avg_price_kg": 3.591595063485115}, {"week": 9, "avg_price_kg": 3.869242052263649}, {"week": 10, "avg_price_kg": 3.748011835342136}, {"week": 11, "avg_price_kg": 3.6709726846666526}, {"week": 12, "avg_price_kg": 3.627870241611384}, {"week": 13, "avg_price_kg": 3.630525679518081}, {"week": 14, "avg_price_kg": 3.43732013794535}, {"week": 15, "avg_price_kg": 3.681108581744405}, {"week": 16, "avg_price_kg": 3.510815407499621}, {"week": 17, "avg_price_kg": 3.598338325887971}, {"week": 18, "avg_price_kg": 3.621576939748809}, {"week": 19, "avg_price_kg": 3.566647236723796}, {"week": 20, "avg_price_kg": 3.5243460338719212}, {"week": 21, "avg_price_kg": 3.4741178072415857}, {"week": 22, "avg_price_kg": 3.65669557656505}, {"week": 23, "avg_price_kg": 3.6794329396209986}, {"week": 24, "avg_price_kg": 3.7600343886896406}, {"week": 25, "avg_price_kg": 3.776932668261429}, {"week": 26, "avg_price_kg": 3.53754503314775}, {"week": 27, "avg_price_kg": 3.527374313167575}, {"week": 28, "avg_price_kg": 3.783291083942626}, {"week": 29, "avg_price_kg": 3.7891775532060707}, {"week": 30, "avg_price_kg": 3.847227822580646}, {"week": 31, "avg_price_kg": 3.699847982269334}, {"week": 32, "avg_price_kg": 3.8148580448755456}, {"week": 33, "avg_price_kg": 3.807678411619581}, {"week": 34, "avg_price_kg": 3.547983643198486}, {"week": 35, "avg_price_kg": 3.6322882733950643}, {"week": 36, "avg_price_kg": 3.8582577259082513}, {"week": 37, "avg_price_kg": 3.7726032359906654}, {"week": 38, "avg_price_kg": 3.898426402698864}, {"week": 39, "avg_price_kg": 3.7452354783938984}, {"week": 40, "avg_price_kg": 3.8273121559456618}, {"week": 41, "avg_price_kg": 3.7877867090150708}, {"week": 42, "avg_price_kg": 3.852720588083564}, {"week": 43, "avg_price_kg": 3.915737299777685}, {"week": 44, "avg_price_kg": 3.7651453857984674}, {"week": 45, "avg_price_kg": 3.795974852472926}, {"week": 46, "avg_price_kg": 3.706279957352053}, {"week": 47, "avg_price_kg": 3.631099114678811}, {"week": 48, "avg_price_kg": 3.840088699037666}, {"week": 49, "avg_price_kg": 3.8750537135292267}, {"week": 50, "avg_price_kg": 3.642560945440773}, {"week": 51, "avg_price_kg": 3.7958243084000673}, {"week": 52, "avg_price_kg": 3.6583375267898512}, {"week": 53, "avg_price_kg": 3.936388321505248}, {"week": 54, "avg_price_kg": 3.7313390733024088}, {"week": 55, "avg_price_kg": 2.837325048006816}, {"week": 56, "avg_price_kg": 2.3004651046289633}, {"week": 57, "avg_price_kg": 3.8473458290981326}, {"week": 58, "avg_price_kg": 4.031181758475008}, {"week": 59, "avg_price_kg": 3.4431311215517924}, {"week": 60, "avg_price_kg": 4.045583524592656}, {"week": 61, "avg_price_kg": 4.073592748397437}, {"week": 62, "avg_price_kg": 3.30289824451661}, {"week": 63, "avg_price_kg": 4.043084092027559}, {"week": 64, "avg_price_kg": 3.6409425992825994}, {"week": 65, "avg_price_kg": 3.214195321459289}, {"week": 66, "avg_price_kg": 3.806535182765043}, {"week": 67, "avg_price_kg": 3.8397261817538206}, {"week": 68, "avg_price_kg": 3.8304112913090935}, {"week": 69, "avg_price_kg": 3.8347702108492006}, {"week": 70, "avg_price_kg": 3.7348288174333244}, {"week": 71, "avg_price_kg": 3.8009003005821316}, {"week": 72, "avg_price_kg": 3.781430324823817}, {"week": 73, "avg_price_kg": 2.6321143788739683}, {"week": 74, "avg_price_kg": 3.869643308678452}, {"week": 75, "avg_price_kg": 3.840464270984322}, {"week": 76, "avg_price_kg": 3.735594138120994}, {"week": 77, "avg_price_kg": 3.676211575462926}, {"week": 78, "avg_price_kg": 3.0589315826744388}, {"week": 79, "avg_price_kg": 2.8649487911233043}, {"week": 80, "avg_price_kg": 3.951675585211433}, {"week": 81, "avg_price_kg": 3.8595145089285725}, {"week": 82, "avg_price_kg": 3.96979934383273}, {"week": 83, "avg_price_kg": 4.075538987379812}, {"week": 84, "avg_price_kg": 3.944348004030553}, {"week": 85, "avg_price_kg": 3.780642896364344}, {"week": 86, "avg_price_kg": 3.379447923925278}, {"week": 87, "avg_price_kg": 2.4330928074136047}, {"week": 88, "avg_price_kg": 3.831701214161873}, {"week": 89, "avg_price_kg": 4.007500498697076}, {"week": 90, "avg_price_kg": 4.143689997542706}, {"week": 91, "avg_price_kg": 4.123406530996708}, {"week": 92, "avg_price_kg": 4.013368425148619}, {"week": 93, "avg_price_kg": 4.16766415471616}, {"week": 94, "avg_price_kg": 4.302628399574593}, {"week": 95, "avg_price_kg": 4.363441554180312}, {"week": 96, "avg_price_kg": 3.9851616192174104}, {"week": 97, "avg_price_kg": 3.886196881773843}, {"week": 98, "avg_price_kg": 2.738429140793522}, {"week": 99, "avg_price_kg": 3.91847535732745}, {"week": 100, "avg_price_kg": 3.1999996276968283}, {"week": 101, "avg_price_kg": 4.057558481929866}, {"week": 102, "avg_price_kg": 3.9666684269282273}, {"week": 103, "avg_price_kg": 3.9415247964470757}, {"week": 104, "avg_price_kg": 3.902074942004539}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Looking at the weekly average price per kg plot, there was much less variability in price/kg in weeks 1–52 compared to weeks 53–104. It would appear that there was some change in promotion policy between years 1 and 2. We do not have the data to explore this further, however.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Correlations between Weekly Revenue &amp; its Components - Year 1</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [112]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">alpha_weekly</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">52</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'week'</span><span class="p">))</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'Revenue'</span><span class="p">,</span> <span class="s1">'Penetration'</span><span class="p">,</span> <span class="s1">'AOV'</span><span class="p">,</span> <span class="s1">'AOVOL'</span><span class="p">,</span> <span class="s1">'Price/Unit'</span><span class="p">])</span>

<span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">corr_matrix</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">relabel</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Decomposition"</span><span class="p">))</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Correlation Matrix of Revenue and the Components of its Decomposition'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Correlations between weekly revenue and the components of its (multiplicative) decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span>
        <span class="n">spend</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">penet</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">aov</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="n">aovol</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
        <span class="n">avg_price_kg</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">cols_align</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'lightgrey'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[112]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="jqrrjisgbs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#jqrrjisgbs table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#jqrrjisgbs thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#jqrrjisgbs p { margin: 0 !important; padding: 0 !important; }
 #jqrrjisgbs .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #jqrrjisgbs .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #jqrrjisgbs .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #jqrrjisgbs .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #jqrrjisgbs .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #jqrrjisgbs .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #jqrrjisgbs .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #jqrrjisgbs .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #jqrrjisgbs .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #jqrrjisgbs .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #jqrrjisgbs .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #jqrrjisgbs .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #jqrrjisgbs .gt_spanner_row { border-bottom-style: hidden !important; }
 #jqrrjisgbs .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #jqrrjisgbs .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #jqrrjisgbs .gt_from_md> :first-child { margin-top: 0 !important; }
 #jqrrjisgbs .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #jqrrjisgbs .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #jqrrjisgbs .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #jqrrjisgbs .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #jqrrjisgbs .gt_row_group_first td { border-top-width: 2px !important; }
 #jqrrjisgbs .gt_row_group_first th { border-top-width: 2px !important; }
 #jqrrjisgbs .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #jqrrjisgbs .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #jqrrjisgbs .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #jqrrjisgbs .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #jqrrjisgbs .gt_left { text-align: left !important; }
 #jqrrjisgbs .gt_center { text-align: center !important; }
 #jqrrjisgbs .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #jqrrjisgbs .gt_font_normal { font-weight: normal !important; }
 #jqrrjisgbs .gt_font_bold { font-weight: bold !important; }
 #jqrrjisgbs .gt_font_italic { font-style: italic !important; }
 #jqrrjisgbs .gt_super { font-size: 65% !important; }
 #jqrrjisgbs .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #jqrrjisgbs .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Correlation Matrix of Revenue and the Components of its Decomposition</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Correlations between weekly revenue and the components of its (multiplicative) decomposition</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Revenue" rowspan="1" scope="col">Revenue</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Penetration" rowspan="1" scope="col">Penetration</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="AOV" rowspan="1" scope="col">AOV</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="AOVOL" rowspan="1" scope="col">AOVOL</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Price/Unit" rowspan="1" scope="col">Price/Unit</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Revenue</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #68359a;">0.990</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #865eaf;">0.788</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #7f54a9;">0.840</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffcf77;">−0.534</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Penetration</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #68359a;">0.990</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #936fb7;">0.707</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8860b0;">0.778</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffcd72;">−0.553</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">AOV</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #865eaf;">0.788</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #936fb7;">0.707</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #6d3c9d;">0.956</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffe0a6;">−0.349</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">AOVOL</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #7f54a9;">0.840</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8860b0;">0.778</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #6d3c9d;">0.956</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffc864;">−0.606</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Price/Unit</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffcf77;">−0.534</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffcd72;">−0.553</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffe0a6;">−0.349</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffc864;">−0.606</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Correlations between Weekly Revenue &amp; its Components - Year 2</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [113]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">alpha_weekly</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">53</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'week'</span><span class="p">))</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'Revenue'</span><span class="p">,</span> <span class="s1">'Penetration'</span><span class="p">,</span> <span class="s1">'AOV'</span><span class="p">,</span> <span class="s1">'AOVOL'</span><span class="p">,</span> <span class="s1">'Price/Unit'</span><span class="p">])</span>

<span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">corr_matrix</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">relabel</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">"Decomposition"</span><span class="p">))</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Correlation Matrix of Revenue and the Components of its Decomposition'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Correlations between weekly revenue and the components of its (multiplicative) decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">(</span>
        <span class="n">spend</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">penet</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">aov</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="n">aovol</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
        <span class="n">avg_price_kg</span><span class="o">=</span><span class="n">relabel</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">cols_align</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span> 
    <span class="o">.</span><span class="n">tab_style</span><span class="p">(</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span>
            <span class="n">style</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s1">'lightgrey'</span><span class="p">),</span>
            
        <span class="p">],</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
            <span class="n">loc</span><span class="o">.</span><span class="n">body</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[113]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="ijbjxjzytp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#ijbjxjzytp table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#ijbjxjzytp thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#ijbjxjzytp p { margin: 0 !important; padding: 0 !important; }
 #ijbjxjzytp .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #ijbjxjzytp .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #ijbjxjzytp .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #ijbjxjzytp .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #ijbjxjzytp .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #ijbjxjzytp .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #ijbjxjzytp .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #ijbjxjzytp .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #ijbjxjzytp .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #ijbjxjzytp .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #ijbjxjzytp .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #ijbjxjzytp .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #ijbjxjzytp .gt_spanner_row { border-bottom-style: hidden !important; }
 #ijbjxjzytp .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #ijbjxjzytp .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #ijbjxjzytp .gt_from_md> :first-child { margin-top: 0 !important; }
 #ijbjxjzytp .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #ijbjxjzytp .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #ijbjxjzytp .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #ijbjxjzytp .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #ijbjxjzytp .gt_row_group_first td { border-top-width: 2px !important; }
 #ijbjxjzytp .gt_row_group_first th { border-top-width: 2px !important; }
 #ijbjxjzytp .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #ijbjxjzytp .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #ijbjxjzytp .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #ijbjxjzytp .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #ijbjxjzytp .gt_left { text-align: left !important; }
 #ijbjxjzytp .gt_center { text-align: center !important; }
 #ijbjxjzytp .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #ijbjxjzytp .gt_font_normal { font-weight: normal !important; }
 #ijbjxjzytp .gt_font_bold { font-weight: bold !important; }
 #ijbjxjzytp .gt_font_italic { font-style: italic !important; }
 #ijbjxjzytp .gt_super { font-size: 65% !important; }
 #ijbjxjzytp .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #ijbjxjzytp .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="6">Correlation Matrix of Revenue and the Components of its Decomposition</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="6">Correlations between weekly revenue and the components of its (multiplicative) decomposition</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Revenue" rowspan="1" scope="col">Revenue</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Penetration" rowspan="1" scope="col">Penetration</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="AOV" rowspan="1" scope="col">AOV</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="AOVOL" rowspan="1" scope="col">AOVOL</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="Price/Unit" rowspan="1" scope="col">Price/Unit</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Revenue</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #69379b;">0.978</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #c0abd5;">0.414</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8962b0;">0.770</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffc150;">−0.685</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Penetration</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #69379b;">0.978</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #dcd1e8;">0.227</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #926eb7;">0.710</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffbc40;">−0.748</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">AOV</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #c0abd5;">0.414</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #dcd1e8;">0.227</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #a384c2;">0.602</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffcf6;">−0.035</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">AOVOL</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #8962b0;">0.770</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #926eb7;">0.710</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #a384c2;">0.602</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffb732;">−0.804</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">Price/Unit</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffc150;">−0.685</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffbc40;">−0.748</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffcf6;">−0.035</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffb732;">−0.804</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #663399; color: white; background-color: lightgrey;">1.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Annual Revenue Decomposition</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>This same logic can be used to analyse change across longer time periods. For example, we note from our analysis earlier that Alpha’s revenue increased from $33,571 in year 1 to $35,251 in year 2, a 5% increase. As we are looking at a <strong>static sample</strong> (i.e., the same group of panellists over the two years), the <strong>increase cannot be due to population growth</strong>. Are we observing this growth because more households are buying the product (increase in buyers), and/or because those that are buying it are buying it more often (increase in frequency), and/or because the average spend per transaction has increased (increase in AOV)?</p>
<p>In order to explore this, we will use the following (multiplicative) sales decomposition:
$$
  \begin{aligned}
    \text{Annual Revenue}   &amp;= \text{\# households (HHs) in the panel} \\
                   &amp;= \times \text{proportion of HHs buying the brand (penetration)} \\
                   &amp;= \times \text{\# purchase occasions per buyer (PPB)} \\
                   &amp;= \times \text{average order volume} \\
                   &amp;= \times \text{average price per unit of volume} \\
  \end{aligned}
$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>In order to perform a similar decomposition of annual revenue, we first need to create a dataset that summarises, for each year, (1) the number of panellists that made at least one purchase of Alpha, (2) the total number of category purchase occasions on which Alpha was purchased, and (3) Alpha’s (dollar and volume) sales. We use the same logic as above, aggregating by year as opposed to week.</p>
<ol>
<li>compute the number of panellists that made at least one transaction</li>
<li>compute total number of category purchase occasions (number of transactions) on which Alpha was purchased</li>
<li>compute total revenue and volume for Alpha by year</li>
<li>compute the components of the revenue decomposition<ul>
<li><strong>Penetration</strong> is the number of households that made at least purchase of Alpha in the year divided by the size of the panel.</li>
<li><strong>PPB</strong> is the total number of transactions associated with Alpha divided by the number of households that made at least purchase of Alpha in the year.</li>
<li><strong>Average Order Value</strong> is annual revenue divided by the total number of transactions associated with Alpha.</li>
<li><strong>Average Order Volume</strong> is annual total volume divided by the total number of transactions associated with Alpha.</li>
<li><strong>Average price/kg</strong> is revenue divided by total volume.</li>
</ul>
</li>
<li>Computing the percentage changes</li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [114]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alpha_yearly_summary</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">sku_lf</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">))</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">/</span> <span class="mi">52</span><span class="p">)</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="c1"># Total number of category purchase occasions each year</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'trans_id'</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">),</span>
        <span class="c1"># The number of panellists that made at least one transaction each year</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'num_buyers'</span><span class="p">),</span>
        <span class="c1"># Total revenue generated each year</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="c1"># Total volume purchased each year</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">alpha_yearly</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_yearly_summary</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="c1"># Yearly penetration = num_buyer / panel_sizes</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_buyers'</span><span class="p">)</span> <span class="o">/</span> <span class="n">panel_size</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'penet'</span><span class="p">),</span>
        <span class="c1"># PPB = num_trans / num_buyer</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_buyers'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'ppb'</span><span class="p">),</span>
        <span class="c1"># Average Order Value = spend / num_trans</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'aov'</span><span class="p">),</span>
        <span class="c1"># Average Order Value = spend / num_trans</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'aovol'</span><span class="p">),</span>
        <span class="c1"># Average price per unit volume = spend / volume</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'avg_price_kg'</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">String</span><span class="p">))</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>

<span class="c1"># Transpose to cross-tabulate summary for presentation</span>
<span class="n">alpha_yearly_T</span> <span class="o">=</span> <span class="n">alpha_yearly</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span>
    <span class="n">include_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">header_name</span><span class="o">=</span><span class="s1">'Summary'</span><span class="p">,</span> <span class="n">column_names</span><span class="o">=</span><span class="s1">'year'</span>
<span class="p">)</span>

<span class="c1"># Compute percentage change for each variable from year 1 to year 2</span>
<span class="n">alpha_yearly_pct_change</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_yearly</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span><span class="o">.</span><span class="n">pct_change</span><span class="p">())</span>
    <span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">include_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">header_name</span><span class="o">=</span><span class="s1">'Summary'</span><span class="p">,</span> <span class="n">column_names</span><span class="o">=</span><span class="s1">'year'</span><span class="p">)</span>  
    <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'Summary'</span> <span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'2'</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'pct_change'</span><span class="p">))</span>  
<span class="p">)</span>
<span class="c1"># Join summary variables and percentage change coss-tabular data for presentation</span>
<span class="n">alpha_yearly_T</span> <span class="o">=</span> <span class="n">alpha_yearly_T</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">alpha_yearly_pct_change</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">'Summary'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [115]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'# of Trans.'</span><span class="p">,</span> 
                     <span class="s1">'# of Buyers'</span><span class="p">,</span>
                     <span class="s1">'Revenue'</span><span class="p">,</span>
                     <span class="s1">'Volume'</span><span class="p">,</span>
                     <span class="s1">'Penetration'</span><span class="p">,</span> 
                     <span class="s1">'PPB'</span><span class="p">,</span>
                     <span class="s1">'AOV'</span><span class="p">,</span> 
                     <span class="s1">'AOVOL'</span><span class="p">,</span> 
                     <span class="s1">'Avg. Price/Unit'</span><span class="p">])</span>

<span class="n">group</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'Sales Summary'</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span> <span class="o">+</span> <span class="p">[</span><span class="s1">'Revenue Decomposition'</span><span class="p">]</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span>

<span class="n">alpha_yearly_T</span> <span class="o">=</span> <span class="n">alpha_yearly_T</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">relabel</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Summary'</span><span class="p">),</span> 
    <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">group</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Group'</span><span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">alpha_yearly_T</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Summary'</span><span class="p">,</span> <span class="n">groupname_col</span><span class="o">=</span><span class="s1">'Group'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Alpha - Annual Summary'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">'Transactions, Buyers, Volume, Revenue &amp; Revenue Decomposition'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">({</span><span class="s1">'1'</span><span class="p">:</span> <span class="s1">'Year 1'</span><span class="p">,</span> 
                 <span class="s1">'2'</span><span class="p">:</span> <span class="s1">'Year 2'</span><span class="p">,</span>
                 <span class="s1">'pct_change'</span><span class="p">:</span> <span class="s1">'% Change'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_currency</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[115]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="khpdiajjsr" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#khpdiajjsr table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#khpdiajjsr thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#khpdiajjsr p { margin: 0 !important; padding: 0 !important; }
 #khpdiajjsr .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #khpdiajjsr .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #khpdiajjsr .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #khpdiajjsr .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #khpdiajjsr .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #khpdiajjsr .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #khpdiajjsr .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #khpdiajjsr .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #khpdiajjsr .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #khpdiajjsr .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #khpdiajjsr .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #khpdiajjsr .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #khpdiajjsr .gt_spanner_row { border-bottom-style: hidden !important; }
 #khpdiajjsr .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #khpdiajjsr .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #khpdiajjsr .gt_from_md> :first-child { margin-top: 0 !important; }
 #khpdiajjsr .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #khpdiajjsr .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #khpdiajjsr .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #khpdiajjsr .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #khpdiajjsr .gt_row_group_first td { border-top-width: 2px !important; }
 #khpdiajjsr .gt_row_group_first th { border-top-width: 2px !important; }
 #khpdiajjsr .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #khpdiajjsr .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #khpdiajjsr .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #khpdiajjsr .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #khpdiajjsr .gt_left { text-align: left !important; }
 #khpdiajjsr .gt_center { text-align: center !important; }
 #khpdiajjsr .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #khpdiajjsr .gt_font_normal { font-weight: normal !important; }
 #khpdiajjsr .gt_font_bold { font-weight: bold !important; }
 #khpdiajjsr .gt_font_italic { font-style: italic !important; }
 #khpdiajjsr .gt_super { font-size: 65% !important; }
 #khpdiajjsr .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #khpdiajjsr .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="4">Alpha - Annual Summary</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="4">Transactions, Buyers, Volume, Revenue &amp; Revenue Decomposition</td>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="" rowspan="1" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Year 1" rowspan="1" scope="col">Year 1</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="Year 2" rowspan="1" scope="col">Year 2</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" colspan="1" id="% Change" rowspan="1" scope="col">% Change</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th class="gt_group_heading" colspan="4">Sales Summary</th>
</tr>
<tr>
<th class="gt_row gt_left gt_stub"># of Trans.</th>
<td class="gt_row gt_right">9,060</td>
<td class="gt_row gt_right">9,240</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fcfbfd;">1.99%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub"># of Buyers</th>
<td class="gt_row gt_right">2,624</td>
<td class="gt_row gt_right">2,759</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f5fa;">5.14%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Revenue</th>
<td class="gt_row gt_right">33,570.94</td>
<td class="gt_row gt_right">35,250.75</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f5fa;">5.00%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Volume</th>
<td class="gt_row gt_right">9,166.25</td>
<td class="gt_row gt_right">10,346.40</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #ebe5f2;">12.87%</td>
</tr>
<tr class="gt_group_heading_row">
<th class="gt_group_heading" colspan="4">Revenue Decomposition</th>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Penetration</th>
<td class="gt_row gt_right">52.26%</td>
<td class="gt_row gt_right">54.95%</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #f7f5fa;">5.14%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">PPB</th>
<td class="gt_row gt_right">3.45</td>
<td class="gt_row gt_right">3.35</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fffcf7;">−3.00%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">AOV</th>
<td class="gt_row gt_right">$3.71</td>
<td class="gt_row gt_right">$3.82</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #faf9fc;">2.96%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">AOVOL</th>
<td class="gt_row gt_right">1.01</td>
<td class="gt_row gt_right">1.12</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #efe9f4;">10.68%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub">Avg. Price/Unit</th>
<td class="gt_row gt_right">$3.66</td>
<td class="gt_row gt_right">$3.41</td>
<td class="gt_row gt_right" style="color: #000000; background-color: #fff9ed;">−6.97%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We note that the <em>5% increase in revenue</em> from year 1 to year 2 is associated with a <em>5% increase in the number of households making at least one purchase</em> of Alpha in the year. While PPB drops, average order value increases, with these two changes effectively cancelling out each other. (The product of these two quantities changes by one cent between the two years. i.e, $(PPB_{2} \times AOV_{2})-(PPB_{1} \times AOV_{1})$.) While the average price/kg drops from year 1 to year 2, this is more than compensated by the increase in average order volume, resulting in a 3% increase in average order value between the two years (AOR = Average Order Volume x Avearge Price/Unit).</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Temporal-Variation-in-Customer-level-Purchasing---by-Brand-Transactions">Temporal Variation in Customer-level Purchasing - by Brand Transactions<a class="anchor-link" href="#Temporal-Variation-in-Customer-level-Purchasing---by-Brand-Transactions">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We have observed that the number of buyers has increased, yet the average number of transactions (PPB) has dropped. Does this mean the “new” buyers are light buyers? Or are the existing buyers buying less?</p>
<p>In order to dig deeper, we need to examine <strong>temporal variation in customer-level purchasing</strong>. A natural starting point is to examine the <strong>joint distribution of purchasing</strong> for two consecutive periods.</p>
<ol>
<li>We first need to process the panel data so it summarizes <em>the number of times Alpha was purchased in years 1 and 2 by each panellist</em> (<code>num_trans</code>).</li>
<li>Then we prepare the <strong>joint distribution</strong> of purchasing table that summarizes customer-level purchasing for all combinations of transaction levels in year 1 and year 2. The values essentially is a count of panellists that made $x_{1}$ transactions in year 1 and $x_{2}$ transactions in year 2.</li>
<li>Next, we compute the <strong>conditional distribution</strong> using the joint distribution matrix computed earlier. We divide each element of the matrix by their respective row total (row percentages). The conditional distribution is essentially the empirical probability of making $𝑥_{2}$ transactions in year 2 given the panellist made $𝑥_{1}$ transactions in year 1.<ul>
<li>Given that we have computed the joint distribution of panellist count for all transaction-levels for years 1 and 2 (or simply: joint distribution of transaction counts), it is a simple exercise to compute the row percentages, giving us the conditional distributions of transaction counts.</li>
</ul>
</li>
<li>Finally, we compute and plot the <strong>marginal distribution</strong> of all transaction levels each year. Marginal distribution is the proportion of panellists who made $x_{t}$ transactions in year 1 and year 2 relative to the count of total panellists.</li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [116]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Summarizes the number of times Alpha was purchased in years 1 and 2 by each panellist</span>
<span class="n">alpha_yearly_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">/</span> <span class="mi">52</span><span class="p">)</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'year'</span><span class="p">))</span>
    <span class="c1"># Aggregate to count unique 'trans_id' by 'panel_id' and 'year'</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">,</span><span class="s1">'year'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'trans_id'</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">alpha_yearly_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># Reshape from long format to wide format</span>
    <span class="c1"># Pivoting the dataframe based on 'year' to create a wide format.</span>
    <span class="n">alpha_yearly_trans</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'year'</span><span class="p">,</span>          <span class="c1"># Each unique year will create a new column</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'num_trans'</span><span class="p">,</span> <span class="c1"># The column to aggregate</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span>    <span class="c1"># Rows will be indexed by 'panel_id'</span>
    <span class="p">)</span>
    <span class="c1"># Rename the columns to 'Year 1' and 'Year 2'</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">'1'</span><span class="p">:</span> <span class="s1">'Year 1'</span><span class="p">,</span> <span class="s1">'2'</span><span class="p">:</span> <span class="s1">'Year 2'</span><span class="p">})</span>   
    <span class="c1"># Replace any null values with 0</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> 
<span class="p">)</span>

<span class="c1"># Create a basic joint distribution</span>
<span class="n">joint_dist_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_yearly_trans</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'Year 1'</span><span class="p">,</span> <span class="s1">'Year 2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Add in the number of panellists that made no purchase of Alpha in either year</span>
<span class="c1"># The processed dataframe so far is a subset of the main panel data containing the purchasing of those that bought Alpha at least once in the two years, there are 3142 such households.</span>
<span class="c1"># The panel contains 5021 panellists. Therefore the correct number of households that made zero purchases of Alpha in years 1 and 2 should be included in the processed dataframe.</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">panel_size</span> <span class="o">-</span> <span class="n">joint_dist_trans</span><span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">zero_purch</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Year 1'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'Year 2'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'count'</span><span class="p">:</span> <span class="n">tmp</span><span class="p">})</span>

<span class="c1"># Right censor the distribution at 10+</span>
<span class="n">joint_dist_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">joint_dist_trans</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 1'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 1'</span><span class="p">))</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Year 1'</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 2'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>    
        <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 2'</span><span class="p">))</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Year 2'</span><span class="p">)</span>   
    <span class="p">)</span>
    <span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">zero_purch</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Unpivot the right censor data to create a year 1 x year 2 distribution matrix of the count of panellists who made x_{1} in year 1 &amp; x_{2} in year 2</span>
<span class="n">joint_dist_trans_pivot</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">joint_dist_trans</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'Year 2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'Year 1'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'Year 2'</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'count'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'sum'</span>  
    <span class="p">)</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">'Year 1'</span><span class="p">:</span> <span class="s1">'Year'</span><span class="p">})</span> 
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'Year'</span><span class="p">)</span>   
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>    
<span class="p">)</span>

<span class="c1"># Compute the row percentages, giving us the conditional distributions of transaction counts (the % of panellists from year 1 and their associated transaction counts in year 2)</span>
<span class="c1"># The conditional probability here is he empirical probability of making 𝑥_{2} transactions in year 2 given the panellist made 𝑥_{1} transactions in year 1</span>
<span class="n">year1_trans_total</span> <span class="o">=</span> <span class="n">joint_dist_trans_pivot</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'Year'</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">()</span>

<span class="n">pct_year1_total</span> <span class="o">=</span> <span class="n">joint_dist_trans_pivot</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'Year'</span><span class="p">)</span> <span class="o">/</span> <span class="n">year1_trans_total</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [117]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Summarizes Alpha transactions by year and panelist</span>
<span class="n">alpha_yearly_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">/</span> <span class="mi">52</span><span class="p">)</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'year'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'year'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'trans_id'</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'num_trans'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'year'</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">'1'</span><span class="p">:</span> <span class="s1">'Year 1 Trans'</span><span class="p">,</span> <span class="s1">'2'</span><span class="p">:</span> <span class="s1">'Year 2 Trans'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Create joint distribution</span>
<span class="n">joint_dist_trans</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">alpha_yearly_trans</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s1">'Year 1 Trans'</span><span class="p">,</span> <span class="s1">'Year 2 Trans'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">len</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Add zero-purchase panellists</span>
<span class="n">zero_purchasers</span> <span class="o">=</span> <span class="n">panel_size</span> <span class="o">-</span> <span class="n">joint_dist_trans</span><span class="p">[</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">joint_dist_trans</span> <span class="o">=</span> <span class="n">joint_dist_trans</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Year 1 Trans'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'Year 2 Trans'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">'count'</span><span class="p">:</span> <span class="p">[</span><span class="n">zero_purchasers</span><span class="p">]})</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Right-censor transactions at 10+</span>
<span class="n">joint_dist_trans</span> <span class="o">=</span> <span class="n">joint_dist_trans</span><span class="o">.</span><span class="n">with_columns</span><span class="p">([</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 1 Trans'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 1 Trans'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Year 1 Trans'</span><span class="p">),</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 2 Trans'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'Year 2 Trans'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Year 2 Trans'</span><span class="p">)</span>
<span class="p">])</span>

<span class="c1"># Create the year 1 x year 2 distribution matrix</span>
<span class="n">joint_dist_trans_pivot</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">joint_dist_trans</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'Year 2 Trans'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'count'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'Year 1 Trans'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'Year 2 Trans'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'sum'</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">'Year 1 Trans'</span><span class="p">:</span> <span class="s1">'# Trans'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Compute conditional distribution (row percentages)</span>
<span class="n">row_totals</span> <span class="o">=</span> <span class="n">joint_dist_trans_pivot</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">))</span><span class="o">.</span><span class="n">sum_horizontal</span><span class="p">()</span>
<span class="n">pct_joint_dist</span> <span class="o">=</span> <span class="n">joint_dist_trans_pivot</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">)</span> <span class="o">/</span> <span class="n">row_totals</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Display final results</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Alpha Yearly Transactions:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">alpha_yearly_trans</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Joint Distribution:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">joint_dist_trans</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Joint Distribution - Year 1 x Year 2 Distribution Matrix:"</span><span class="p">,</span> <span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">joint_dist_trans_pivot</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Conditional Distribution (</span><span class="si">% o</span><span class="s2">f Year 1 Transactions):"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">pct_joint_dist</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Alpha Yearly Transactions:
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (3_142, 3)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>Year 1 Trans</th><th>Year 2 Trans</th></tr><tr><td>u32</td><td>u32</td><td>u32</td></tr></thead><tbody><tr><td>3102694</td><td>2</td><td>1</td></tr><tr><td>3110279</td><td>7</td><td>2</td></tr><tr><td>3107549</td><td>5</td><td>5</td></tr><tr><td>3110455</td><td>2</td><td>1</td></tr><tr><td>3126314</td><td>0</td><td>1</td></tr><tr><td>…</td><td>…</td><td>…</td></tr><tr><td>3113107</td><td>0</td><td>1</td></tr><tr><td>3124309</td><td>0</td><td>1</td></tr><tr><td>3102777</td><td>2</td><td>0</td></tr><tr><td>3105454</td><td>3</td><td>0</td></tr><tr><td>3106401</td><td>0</td><td>1</td></tr></tbody></table></div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Joint Distribution:
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (173, 3)</small><table border="1" class="dataframe"><thead><tr><th>Year 1 Trans</th><th>Year 2 Trans</th><th>count</th></tr><tr><td>u32</td><td>u32</td><td>u32</td></tr></thead><tbody><tr><td>10</td><td>6</td><td>3</td></tr><tr><td>10</td><td>7</td><td>4</td></tr><tr><td>5</td><td>1</td><td>13</td></tr><tr><td>4</td><td>1</td><td>28</td></tr><tr><td>3</td><td>5</td><td>54</td></tr><tr><td>…</td><td>…</td><td>…</td></tr><tr><td>8</td><td>7</td><td>6</td></tr><tr><td>3</td><td>0</td><td>25</td></tr><tr><td>9</td><td>2</td><td>3</td></tr><tr><td>5</td><td>4</td><td>49</td></tr><tr><td>0</td><td>0</td><td>1879</td></tr></tbody></table></div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Joint Distribution - Year 1 x Year 2 Distribution Matrix:
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (11, 12)</small><table border="1" class="dataframe"><thead><tr><th># Trans</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th></tr><tr><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td></tr></thead><tbody><tr><td>0</td><td>1879</td><td>342</td><td>105</td><td>39</td><td>18</td><td>9</td><td>4</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>259</td><td>201</td><td>128</td><td>79</td><td>40</td><td>14</td><td>6</td><td>3</td><td>2</td><td>0</td><td>1</td></tr><tr><td>2</td><td>83</td><td>120</td><td>108</td><td>80</td><td>75</td><td>27</td><td>11</td><td>9</td><td>3</td><td>1</td><td>0</td></tr><tr><td>3</td><td>25</td><td>60</td><td>78</td><td>83</td><td>65</td><td>54</td><td>21</td><td>9</td><td>3</td><td>1</td><td>1</td></tr><tr><td>4</td><td>8</td><td>28</td><td>62</td><td>45</td><td>54</td><td>34</td><td>26</td><td>8</td><td>3</td><td>6</td><td>3</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>6</td><td>1</td><td>6</td><td>15</td><td>17</td><td>24</td><td>31</td><td>20</td><td>13</td><td>11</td><td>3</td><td>3</td></tr><tr><td>7</td><td>0</td><td>2</td><td>7</td><td>5</td><td>15</td><td>15</td><td>16</td><td>14</td><td>8</td><td>4</td><td>15</td></tr><tr><td>8</td><td>1</td><td>1</td><td>3</td><td>5</td><td>9</td><td>9</td><td>16</td><td>6</td><td>10</td><td>8</td><td>3</td></tr><tr><td>9</td><td>1</td><td>0</td><td>3</td><td>4</td><td>4</td><td>4</td><td>7</td><td>8</td><td>4</td><td>5</td><td>7</td></tr><tr><td>10</td><td>0</td><td>1</td><td>3</td><td>0</td><td>3</td><td>8</td><td>12</td><td>14</td><td>12</td><td>5</td><td>49</td></tr></tbody></table></div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Conditional Distribution (% of Year 1 Transactions):
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (11, 12)</small><table border="1" class="dataframe"><thead><tr><th># Trans</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th></tr><tr><td>u32</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td><td>f64</td></tr></thead><tbody><tr><td>0</td><td>0.783897</td><td>0.142678</td><td>0.043805</td><td>0.01627</td><td>0.007509</td><td>0.003755</td><td>0.001669</td><td>0.000417</td><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><td>1</td><td>0.353342</td><td>0.274216</td><td>0.174625</td><td>0.107776</td><td>0.05457</td><td>0.0191</td><td>0.008186</td><td>0.004093</td><td>0.002729</td><td>0.0</td><td>0.001364</td></tr><tr><td>2</td><td>0.160542</td><td>0.232108</td><td>0.208897</td><td>0.154739</td><td>0.145068</td><td>0.052224</td><td>0.021277</td><td>0.017408</td><td>0.005803</td><td>0.001934</td><td>0.0</td></tr><tr><td>3</td><td>0.0625</td><td>0.15</td><td>0.195</td><td>0.2075</td><td>0.1625</td><td>0.135</td><td>0.0525</td><td>0.0225</td><td>0.0075</td><td>0.0025</td><td>0.0025</td></tr><tr><td>4</td><td>0.028881</td><td>0.101083</td><td>0.223827</td><td>0.162455</td><td>0.194946</td><td>0.122744</td><td>0.093863</td><td>0.028881</td><td>0.01083</td><td>0.021661</td><td>0.01083</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>6</td><td>0.006944</td><td>0.041667</td><td>0.104167</td><td>0.118056</td><td>0.166667</td><td>0.215278</td><td>0.138889</td><td>0.090278</td><td>0.076389</td><td>0.020833</td><td>0.020833</td></tr><tr><td>7</td><td>0.0</td><td>0.019802</td><td>0.069307</td><td>0.049505</td><td>0.148515</td><td>0.148515</td><td>0.158416</td><td>0.138614</td><td>0.079208</td><td>0.039604</td><td>0.148515</td></tr><tr><td>8</td><td>0.014085</td><td>0.014085</td><td>0.042254</td><td>0.070423</td><td>0.126761</td><td>0.126761</td><td>0.225352</td><td>0.084507</td><td>0.140845</td><td>0.112676</td><td>0.042254</td></tr><tr><td>9</td><td>0.021277</td><td>0.0</td><td>0.06383</td><td>0.085106</td><td>0.085106</td><td>0.085106</td><td>0.148936</td><td>0.170213</td><td>0.085106</td><td>0.106383</td><td>0.148936</td></tr><tr><td>10</td><td>0.0</td><td>0.009346</td><td>0.028037</td><td>0.0</td><td>0.028037</td><td>0.074766</td><td>0.11215</td><td>0.130841</td><td>0.11215</td><td>0.046729</td><td>0.457944</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [118]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">'10+'</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)])</span>
<span class="n">joint_dist_trans_pivot</span> <span class="o">=</span> <span class="n">joint_dist_trans_pivot</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">))</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">relabel</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">))</span>
<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">joint_dist_trans_pivot</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# Trans'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Joint Distribution of the Purchasing of Alpha in Year 1 &amp; 2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_spanner</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'# of Transactions in Year 2'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">joint_dist_trans_pivot</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'Y1 / Y2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">({</span><span class="s1">'10'</span><span class="p">:</span> <span class="s1">'10+'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">cols_align</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1900</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _# of Transactions in Year 1 / # of Transactions in Year 2_"""</span><span class="p">))</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[118]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="gvavpgiban" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#gvavpgiban table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#gvavpgiban thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#gvavpgiban p { margin: 0 !important; padding: 0 !important; }
 #gvavpgiban .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #gvavpgiban .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #gvavpgiban .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #gvavpgiban .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #gvavpgiban .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #gvavpgiban .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #gvavpgiban .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #gvavpgiban .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #gvavpgiban .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #gvavpgiban .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #gvavpgiban .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #gvavpgiban .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #gvavpgiban .gt_spanner_row { border-bottom-style: hidden !important; }
 #gvavpgiban .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #gvavpgiban .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #gvavpgiban .gt_from_md> :first-child { margin-top: 0 !important; }
 #gvavpgiban .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #gvavpgiban .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #gvavpgiban .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #gvavpgiban .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #gvavpgiban .gt_row_group_first td { border-top-width: 2px !important; }
 #gvavpgiban .gt_row_group_first th { border-top-width: 2px !important; }
 #gvavpgiban .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #gvavpgiban .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #gvavpgiban .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #gvavpgiban .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #gvavpgiban .gt_left { text-align: left !important; }
 #gvavpgiban .gt_center { text-align: center !important; }
 #gvavpgiban .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #gvavpgiban .gt_font_normal { font-weight: normal !important; }
 #gvavpgiban .gt_font_bold { font-weight: bold !important; }
 #gvavpgiban .gt_font_italic { font-style: italic !important; }
 #gvavpgiban .gt_super { font-size: 65% !important; }
 #gvavpgiban .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #gvavpgiban .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="12">Joint Distribution of the Purchasing of Alpha in Year 1 &amp; 2</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Y1 / Y2" rowspan="2" scope="col">Y1 / Y2</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" colspan="11" id="# of Transactions in Year 2" rowspan="1" scope="colgroup">
<span class="gt_column_spanner"># of Transactions in Year 2</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="0" rowspan="1" scope="col">0</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="1" rowspan="1" scope="col">1</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="2" rowspan="1" scope="col">2</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="3" rowspan="1" scope="col">3</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="4" rowspan="1" scope="col">4</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="5" rowspan="1" scope="col">5</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="6" rowspan="1" scope="col">6</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="7" rowspan="1" scope="col">7</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="8" rowspan="1" scope="col">8</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="9" rowspan="1" scope="col">9</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="10+" rowspan="1" scope="col">10+</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">0</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #68359a;">1,879</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e3daed;">342</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4f9;">105</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">39</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">18</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">1</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae3f1;">259</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #efe9f4;">201</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f5f1f8;">128</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f7fb;">79</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">40</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">14</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">2</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">83</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f5f2f9;">120</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f6f3f9;">108</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f6fb;">80</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f7fb;">75</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">27</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">11</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">3</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">25</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf9fc;">60</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f7fb;">78</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">83</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">65</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">54</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">21</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">4</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">28</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">62</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafd;">45</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">54</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">34</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">26</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">5</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">13</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">28</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">31</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafc;">49</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafd;">46</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">23</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">20</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">6</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">15</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">17</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">24</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">31</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">20</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">13</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">11</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">7</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">15</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">15</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">16</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">14</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">15</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">8</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">16</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">10</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">9</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">7</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">10+</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">12</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">14</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">12</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafc;">49</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="12"><strong>Read Row/Column as</strong>: <em># of Transactions in Year 1 / # of Transactions in Year 2</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>How do we read this table? <em>Year 1</em>, <em>Row 2</em> tell us how many people who bought Alpha once in year 1 bought Alpha 0, 1, 2, . . . times in year 2. For example, 259 households didn’t buy Alpha in year 2, 201 bought Alpha once in year 2, and so on.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [119]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">'10+'</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)])</span>
<span class="n">pct_joint_dist</span> <span class="o">=</span> <span class="n">pct_joint_dist</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">))</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">relabel</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'# Trans'</span><span class="p">))</span>
<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">pct_joint_dist</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'# Trans'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Conditional Distribution of Transaction Counts'</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="n">md</span><span class="p">(</span><span class="s1">'Empirical probability of making year 2 transaction given year 1 transaction'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">tab_spanner</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'# of Transactions in Year 2'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">pct_joint_dist</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'Y1 / Y2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">({</span><span class="s1">'10'</span><span class="p">:</span> <span class="s1">'10+'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">cols_align</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_percent</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _# of Transactions in Year 1 / # of Transactions in Year 2_"""</span><span class="p">))</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[119]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="zyzhuknbmq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#zyzhuknbmq table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#zyzhuknbmq thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#zyzhuknbmq p { margin: 0 !important; padding: 0 !important; }
 #zyzhuknbmq .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #zyzhuknbmq .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #zyzhuknbmq .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #zyzhuknbmq .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #zyzhuknbmq .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #zyzhuknbmq .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #zyzhuknbmq .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #zyzhuknbmq .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #zyzhuknbmq .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #zyzhuknbmq .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #zyzhuknbmq .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #zyzhuknbmq .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #zyzhuknbmq .gt_spanner_row { border-bottom-style: hidden !important; }
 #zyzhuknbmq .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #zyzhuknbmq .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #zyzhuknbmq .gt_from_md> :first-child { margin-top: 0 !important; }
 #zyzhuknbmq .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #zyzhuknbmq .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #zyzhuknbmq .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #zyzhuknbmq .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #zyzhuknbmq .gt_row_group_first td { border-top-width: 2px !important; }
 #zyzhuknbmq .gt_row_group_first th { border-top-width: 2px !important; }
 #zyzhuknbmq .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #zyzhuknbmq .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #zyzhuknbmq .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #zyzhuknbmq .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #zyzhuknbmq .gt_left { text-align: left !important; }
 #zyzhuknbmq .gt_center { text-align: center !important; }
 #zyzhuknbmq .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #zyzhuknbmq .gt_font_normal { font-weight: normal !important; }
 #zyzhuknbmq .gt_font_bold { font-weight: bold !important; }
 #zyzhuknbmq .gt_font_italic { font-style: italic !important; }
 #zyzhuknbmq .gt_super { font-size: 65% !important; }
 #zyzhuknbmq .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #zyzhuknbmq .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="12">Conditional Distribution of Transaction Counts</td>
</tr>
<tr class="gt_heading">
<td class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" colspan="12">Empirical probability of making year 2 transaction given year 1 transaction</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Y1 / Y2" rowspan="2" scope="col">Y1 / Y2</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" colspan="11" id="# of Transactions in Year 2" rowspan="1" scope="colgroup">
<span class="gt_column_spanner"># of Transactions in Year 2</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="0" rowspan="1" scope="col">0</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="1" rowspan="1" scope="col">1</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="2" rowspan="1" scope="col">2</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="3" rowspan="1" scope="col">3</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="4" rowspan="1" scope="col">4</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="5" rowspan="1" scope="col">5</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="6" rowspan="1" scope="col">6</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="7" rowspan="1" scope="col">7</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="8" rowspan="1" scope="col">8</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="9" rowspan="1" scope="col">9</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="10+" rowspan="1" scope="col">10+</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">0</th>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #875faf;">78%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e9e2f0;">14%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">4%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">1</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #c9b7db;">35%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d5c7e3;">27%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e4dbed;">17%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #efe9f4;">11%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4f9;">5%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefeff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">2</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #e6deef;">16%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #dbd0e7;">23%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #dfd4ea;">21%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e7dfef;">15%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e9e1f0;">15%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4fa;">5%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">3</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f5f2f9;">6%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e8e0f0;">15%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e1d7eb;">20%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #dfd5ea;">21%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e6deee;">16%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae3f1;">14%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4fa;">5%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">0%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">4</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">3%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f0eaf5;">10%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ddd1e8;">22%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e6deee;">16%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e1d7eb;">19%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ece6f2;">12%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f1ecf5;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">3%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">1%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">5</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f6f3f9;">6%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ece6f2;">12%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae3f1;">14%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ded3e9;">22%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e0d6ea;">20%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #efeaf5;">10%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2edf6;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">6</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f6fb;">4%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #efeaf4;">10%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ede7f3;">12%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e6ddee;">17%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ded3e9;">22%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae3f1;">14%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f1edf6;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f3eff7;">8%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">7</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f1f8;">7%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f5fa;">5%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e8e1f0;">15%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e8e1f0;">15%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e7dfef;">16%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae3f1;">14%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f3eff7;">8%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f7fb;">4%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e8e1f0;">15%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">8</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f6fb;">4%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f1f8;">7%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ece5f2;">13%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ece5f2;">13%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ddd1e8;">23%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2eef6;">8%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e9e2f1;">14%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eee8f4;">11%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f6fb;">4%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">9</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">2%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f5f2f8;">6%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2eef6;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2eef6;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2eef6;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e8e1f0;">15%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e5dcee;">17%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2eef6;">9%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #efe9f4;">11%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e8e1f0;">15%</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">10+</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">1%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">3%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">3%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f0f7;">7%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eee8f4;">11%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ebe4f2;">13%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eee8f4;">11%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f5fa;">5%</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #b9a2d0;">46%</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="12"><strong>Read Row/Column as</strong>: <em># of Transactions in Year 1 / # of Transactions in Year 2</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>How do we interpret this table? Looking at <em>Year 1</em>, <em>Row 2</em>, we see that 35.3% of the panellists that made one purchase of Alpha in year 1 made no purchases of Alpha in year 2, 27.4% purchased Alpha once, 17.5% purchased Alpha twice, and so on.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [120]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Compute marginal transaction distribution for each year: count of # of panellists who made x_{t} transactions as a % of total panellists</span>
<span class="k">def</span> <span class="nf">marginal_dist</span><span class="p">():</span>
    <span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Year 1 Trans'</span><span class="p">,</span> <span class="s1">'Year 2 Trans'</span><span class="p">]</span>
    <span class="n">dfs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="n">y_dist</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">joint_dist_trans</span>
            <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'count'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">panel_size</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s1">'% of Total - </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">'</span><span class="p">))</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="n">year</span><span class="p">:</span> <span class="s1">'num_trans'</span><span class="p">})</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">)</span>        
        <span class="p">)</span>
        <span class="n">dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_dist</span><span class="p">)</span>
    
    <span class="n">marginal_dist</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">dfs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'num_trans'</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">marginal_dist</span>

<span class="n">marginal_dist</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[120]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (11, 3)</small><table border="1" class="dataframe"><thead><tr><th>num_trans</th><th>% of Total - Year 1 Trans</th><th>% of Total - Year 2 Trans</th></tr><tr><td>u32</td><td>f64</td><td>f64</td></tr></thead><tbody><tr><td>0</td><td>0.477395</td><td>0.450508</td></tr><tr><td>1</td><td>0.145987</td><td>0.154153</td></tr><tr><td>2</td><td>0.102968</td><td>0.107548</td></tr><tr><td>3</td><td>0.079665</td><td>0.077275</td></tr><tr><td>4</td><td>0.055168</td><td>0.070902</td></tr><tr><td>…</td><td>…</td><td>…</td></tr><tr><td>6</td><td>0.02868</td><td>0.032264</td></tr><tr><td>7</td><td>0.020116</td><td>0.020912</td></tr><tr><td>8</td><td>0.014141</td><td>0.012149</td></tr><tr><td>9</td><td>0.009361</td><td>0.00717</td></tr><tr><td>10</td><td>0.02131</td><td>0.017128</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [121]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># marginal distribution for each year and the associated clustered bar chart</span>

<span class="c1"># Step 1a: Compute marginal transaction distribution for each year: count of # of panellists who made x_{t} transactions as a % of total panellists</span>
<span class="c1"># Step 1b: Convert Wide-form data to long-form data</span>
<span class="k">def</span> <span class="nf">marginal_dist</span><span class="p">():</span>
    <span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Year 1 Trans'</span><span class="p">,</span> <span class="s1">'Year 2 Trans'</span><span class="p">]</span>
    <span class="n">dfs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="n">y_dist</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">joint_dist_trans</span>
            <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'count'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">panel_size</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Total'</span><span class="p">))</span>  <span class="c1"># marginal distribution of purchasing of Alpha in the first &amp; second year.</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="n">year</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Year'</span><span class="p">))</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="n">year</span><span class="p">:</span> <span class="s1">'num_trans'</span><span class="p">})</span>        
        <span class="p">)</span>
        <span class="n">dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_dist</span><span class="p">)</span>
    
    <span class="n">marginal_dist</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">dfs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="n">marginal_dist</span>

<span class="c1"># Step 2: Plot long-form data as grouped bar chart</span>
<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">marginal_dist</span><span class="p">())</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"num_trans:O"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Number of Transactions'</span><span class="p">)),</span>
    <span class="n">xOffset</span><span class="o">=</span><span class="s2">"Year:N"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"</span><span class="si">% o</span><span class="s2">f Total:Q"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">".0%"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'</span><span class="si">% o</span><span class="s1">f Households'</span><span class="p">)),</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">'Year:N'</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s2">"text"</span><span class="p">:</span> <span class="s1">'Distribution of Alpha Transactions'</span><span class="p">,</span> <span class="s2">"subtitle"</span><span class="p">:</span> <span class="s1">'Marginal Distribution'</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[121]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-c521de605fa24d7f84864441e0b1fcca.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c521de605fa24d7f84864441e0b1fcca.vega-embed details,
  #altair-viz-c521de605fa24d7f84864441e0b1fcca.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c521de605fa24d7f84864441e0b1fcca"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c521de605fa24d7f84864441e0b1fcca") {
      outputDiv = document.getElementById("altair-viz-c521de605fa24d7f84864441e0b1fcca");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-083cd9a40f26b7373a60fb4aa3d97a8f"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "Year", "type": "nominal"}, "x": {"axis": {"labelAngle": 0, "title": "Number of Transactions"}, "field": "num_trans", "type": "ordinal"}, "xOffset": {"field": "Year", "type": "nominal"}, "y": {"axis": {"format": ".0%", "title": "% of Households"}, "field": "% of Total", "type": "quantitative"}}, "height": 250, "title": {"text": "Distribution of Alpha Transactions", "subtitle": "Marginal Distribution"}, "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-083cd9a40f26b7373a60fb4aa3d97a8f": [{"num_trans": 6, "% of Total": 0.028679545907189803, "Year": "Year 1 Trans"}, {"num_trans": 8, "% of Total": 0.014140609440350527, "Year": "Year 1 Trans"}, {"num_trans": 0, "% of Total": 0.47739494124676357, "Year": "Year 1 Trans"}, {"num_trans": 1, "% of Total": 0.14598685520812588, "Year": "Year 1 Trans"}, {"num_trans": 9, "% of Total": 0.00936068512248556, "Year": "Year 1 Trans"}, {"num_trans": 3, "% of Total": 0.07966540529774944, "Year": "Year 1 Trans"}, {"num_trans": 5, "% of Total": 0.045210117506472816, "Year": "Year 1 Trans"}, {"num_trans": 4, "% of Total": 0.05516829316869149, "Year": "Year 1 Trans"}, {"num_trans": 10, "% of Total": 0.021310495917147978, "Year": "Year 1 Trans"}, {"num_trans": 2, "% of Total": 0.10296753634734117, "Year": "Year 1 Trans"}, {"num_trans": 7, "% of Total": 0.020115514837681737, "Year": "Year 1 Trans"}, {"num_trans": 5, "% of Total": 0.04999004182433778, "Year": "Year 2 Trans"}, {"num_trans": 4, "% of Total": 0.07090221071499701, "Year": "Year 2 Trans"}, {"num_trans": 0, "% of Total": 0.45050786695877315, "Year": "Year 2 Trans"}, {"num_trans": 1, "% of Total": 0.15415255925114518, "Year": "Year 2 Trans"}, {"num_trans": 3, "% of Total": 0.07727544313881697, "Year": "Year 2 Trans"}, {"num_trans": 2, "% of Total": 0.10754829715196176, "Year": "Year 2 Trans"}, {"num_trans": 8, "% of Total": 0.012148974307906792, "Year": "Year 2 Trans"}, {"num_trans": 9, "% of Total": 0.007169886476797451, "Year": "Year 2 Trans"}, {"num_trans": 10, "% of Total": 0.01712806213901613, "Year": "Year 2 Trans"}, {"num_trans": 6, "% of Total": 0.03226448914558853, "Year": "Year 2 Trans"}, {"num_trans": 7, "% of Total": 0.020912168890659232, "Year": "Year 2 Trans"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let us made two immediate observations:</p>
<ul>
<li>The <strong>marginal distribution</strong> of purchasing in the first year is reasonably similar to that for the second year. Some differences that stand out are the smaller percentage of households making zero purchases in year 2, which corresponds to the higher penetration, and the smaller percentage of households buying Alpha ten or more times in year 2.</li>
<li>When first seeing a table that shows the distribution of year 2 purchasing broken down by the level of year 1 purchasing, many expect there to be a strong diagonal in the table and are alarmed by the fact that this is rarely the case. It is important to realize that <strong>buying behaviour is not deterministic</strong>. From the perspective of the analyst, it can be viewed as-if <em>random</em>, bouncing around each <em>person’s underlying propensity to buy</em> the product. Someone who makes one purchase
in year 1 is possibly a light buyer and so is the fact that 35.3% did not buy the product again in the second year that surprising? It does not mean that they are “lost”; most of them will buy Alpha again sometime the following year (year 3). Similarly, are those who did not buy the product in period 1 but did in period 2 new customers? Some probably are. But, for any established product category, most are probably people who have purchased the product in previous years and who, for whatever reason, did not buy it that year. The key to analysing such tables is to <em>compare them to a benchmark that assumes stable underlying purchasing patterns</em>.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Temporal-Variation-in-Customer-level-Spend---by-Category-Spend">Temporal Variation in Customer-level Spend - by Category Spend<a class="anchor-link" href="#Temporal-Variation-in-Customer-level-Spend---by-Category-Spend">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let’s explore how to create the joint distribution of category spend in years 1 and 2. The logic follows that of the binning of spend used to create the distribution of category spend in year 1 in the earlier section.</p>
<p>It is important to note that the initial aggregation by <code>panel_id</code> and <code>year</code> in the long-form DataFrame does not include entries for panellists who made no category purchases in either year 1 or year 2. However, we want to account for panellists who made a category purchase in one year but not the other, as well as those who did not make a category purchase in either year. When the data is pivoted, some spend range combinations for year 1 and year 2 contain <code>null</code> values, indicating that those panellists made a purchase in one year but not the other. Additionally, the DataFrame is missing panellists who made no purchases in both year 1 and year 2. To address the first issue, we replace the <code>null</code> values with <code>float('-inf')</code> (negative infinity) in place of the (-inf, 0] bin. To resolve the second issue, we calculate the total number of panellists in the DataFrame, subtract the count of existing panellists from the total <code>panel_size</code>, and add this difference back to the DataFrame.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [122]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Summarizes Category Spend by year and panelist</span>
<span class="n">joint_dist_spend</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">/</span> <span class="mi">52</span><span class="p">)</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'year'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">))</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float32</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'year'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'spend'</span><span class="p">)</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">breaks</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">include_breaks</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'cut'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'cut'</span><span class="p">))</span><span class="o">.</span><span class="n">unnest</span><span class="p">(</span><span class="s1">'cut'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'breakpoint'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'year'</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">'-inf'</span><span class="p">))</span>
    <span class="c1"># Create joint distribution</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">'1'</span><span class="p">:</span> <span class="s1">'Year 1'</span><span class="p">,</span> <span class="s1">'2'</span><span class="p">:</span> <span class="s1">'Year 2'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s1">'Year 1'</span><span class="p">,</span> <span class="s1">'Year 2'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">len</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span>       
<span class="p">)</span>

<span class="c1"># Add zero-spend panellists</span>
<span class="c1"># The joint distribution of spend so far is for those panellists that made at least one category purchase across the two years. </span>
<span class="c1"># We want to also include those panellists that didn’t make a category purchase</span>
<span class="n">zero_purchasers</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">panel_size</span> <span class="o">-</span> <span class="n">joint_dist_spend</span><span class="p">[</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()])</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt32</span><span class="p">)</span>
<span class="n">joint_dist_spend</span> <span class="o">=</span> <span class="n">joint_dist_spend</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Year 1'</span><span class="p">:</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">'-inf'</span><span class="p">)],</span> <span class="s1">'Year 2'</span><span class="p">:</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">'-inf'</span><span class="p">)],</span> <span class="s1">'count'</span><span class="p">:</span> <span class="n">zero_purchasers</span><span class="p">})</span>
<span class="p">)</span>

<span class="c1"># Create the year 1 x year 2 distribution matrix</span>
<span class="n">joint_dist_spend_pivot</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">joint_dist_spend</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'Year 2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'count'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'Year 1'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'Year 2'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'sum'</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">'Year 1'</span><span class="p">:</span> <span class="s1">'Spend'</span><span class="p">})</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">'Spend'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">'Joint Distribution:'</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">joint_dist_spend</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Joint Distribution - Year 1 x Year 2 Distribution Matrix:'</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">joint_dist_spend_pivot</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Joint Distribution:
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (126, 3)</small><table border="1" class="dataframe"><thead><tr><th>Year 1</th><th>Year 2</th><th>count</th></tr><tr><td>f64</td><td>f64</td><td>u32</td></tr></thead><tbody><tr><td>45.0</td><td>inf</td><td>5</td></tr><tr><td>5.0</td><td>-inf</td><td>129</td></tr><tr><td>10.0</td><td>10.0</td><td>379</td></tr><tr><td>15.0</td><td>35.0</td><td>15</td></tr><tr><td>25.0</td><td>45.0</td><td>9</td></tr><tr><td>…</td><td>…</td><td>…</td></tr><tr><td>20.0</td><td>15.0</td><td>164</td></tr><tr><td>50.0</td><td>30.0</td><td>4</td></tr><tr><td>30.0</td><td>35.0</td><td>22</td></tr><tr><td>30.0</td><td>25.0</td><td>47</td></tr><tr><td>-inf</td><td>-inf</td><td>183</td></tr></tbody></table></div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Joint Distribution - Year 1 x Year 2 Distribution Matrix:
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (12, 13)</small><table border="1" class="dataframe"><thead><tr><th>Spend</th><th>-inf</th><th>5.0</th><th>10.0</th><th>15.0</th><th>20.0</th><th>25.0</th><th>30.0</th><th>35.0</th><th>40.0</th><th>45.0</th><th>50.0</th><th>inf</th></tr><tr><td>f64</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td><td>u32</td></tr></thead><tbody><tr><td>-inf</td><td>183</td><td>125</td><td>88</td><td>38</td><td>9</td><td>2</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>5.0</td><td>129</td><td>260</td><td>211</td><td>103</td><td>30</td><td>5</td><td>9</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>10.0</td><td>87</td><td>217</td><td>379</td><td>196</td><td>113</td><td>52</td><td>17</td><td>7</td><td>2</td><td>0</td><td>0</td><td>3</td></tr><tr><td>15.0</td><td>28</td><td>107</td><td>248</td><td>223</td><td>140</td><td>78</td><td>24</td><td>15</td><td>6</td><td>4</td><td>7</td><td>2</td></tr><tr><td>20.0</td><td>12</td><td>35</td><td>102</td><td>164</td><td>138</td><td>86</td><td>43</td><td>19</td><td>13</td><td>5</td><td>2</td><td>4</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>35.0</td><td>0</td><td>3</td><td>10</td><td>18</td><td>28</td><td>38</td><td>17</td><td>32</td><td>23</td><td>11</td><td>9</td><td>4</td></tr><tr><td>40.0</td><td>0</td><td>0</td><td>3</td><td>7</td><td>22</td><td>13</td><td>14</td><td>17</td><td>19</td><td>9</td><td>8</td><td>10</td></tr><tr><td>45.0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>7</td><td>8</td><td>11</td><td>10</td><td>6</td><td>14</td><td>6</td><td>5</td></tr><tr><td>50.0</td><td>0</td><td>1</td><td>0</td><td>2</td><td>2</td><td>7</td><td>4</td><td>6</td><td>3</td><td>6</td><td>5</td><td>12</td></tr><tr><td>inf</td><td>1</td><td>1</td><td>0</td><td>3</td><td>4</td><td>5</td><td>8</td><td>13</td><td>9</td><td>7</td><td>11</td><td>47</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [123]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">relabel</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span>
    <span class="s1">'-∞ - 0'</span> <span class="k">if</span> <span class="n">lb</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">lb</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="si">}</span><span class="s1">'</span> <span class="k">if</span> <span class="n">lb</span> <span class="o">!=</span> <span class="mi">50</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">lb</span><span class="si">}</span><span class="s1"> - ∞'</span>
    <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">])</span>

<span class="n">joint_dist_spend_pivot</span> <span class="o">=</span> <span class="n">joint_dist_spend_pivot</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s1">'Spend'</span><span class="p">))</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">relabel</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'Spend'</span><span class="p">))</span>

<span class="p">(</span>
    <span class="n">GT</span><span class="p">(</span><span class="n">joint_dist_spend_pivot</span><span class="p">,</span> <span class="n">rowname_col</span><span class="o">=</span><span class="s1">'Spend'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_header</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Joint Distribution of Category Spend in Year 1 &amp; 2'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tab_spanner</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'Range of Spend in Year 2'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">joint_dist_spend_pivot</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">.</span><span class="n">tab_stubhead</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cols_label</span><span class="p">({</span><span class="n">joint_dist_spend_pivot</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]:</span> <span class="n">relabel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">relabel</span><span class="p">))})</span>
    <span class="o">.</span><span class="n">cols_align</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fmt_integer</span><span class="p">()</span>
    <span class="o">.</span><span class="n">data_color</span><span class="p">(</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span>
        <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'rebeccapurple'</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">tab_source_note</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">"""**Read Row/Column as**: _Range of Spend in Year 1 / Range of Spend in Year 2_"""</span><span class="p">))</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[123]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div id="nrmhzacgtq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#nrmhzacgtq table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#nrmhzacgtq thead, tbody, tfoot, tr, td, th { border-style: none !important; }
 tr { background-color: transparent !important; }
#nrmhzacgtq p { margin: 0 !important; padding: 0 !important; }
 #nrmhzacgtq .gt_table { display: table !important; border-collapse: collapse !important; line-height: normal !important; margin-left: auto !important; margin-right: auto !important; color: #333333 !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; background-color: #FFFFFF !important; width: auto !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #A8A8A8 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #A8A8A8 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; }
 #nrmhzacgtq .gt_caption { padding-top: 4px !important; padding-bottom: 4px !important; }
 #nrmhzacgtq .gt_title { color: #333333 !important; font-size: 125% !important; font-weight: initial !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; border-bottom-color: #FFFFFF !important; border-bottom-width: 0 !important; }
 #nrmhzacgtq .gt_subtitle { color: #333333 !important; font-size: 85% !important; font-weight: initial !important; padding-top: 3px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; border-top-color: #FFFFFF !important; border-top-width: 0 !important; }
 #nrmhzacgtq .gt_heading { background-color: #FFFFFF !important; text-align: center !important; border-bottom-color: #FFFFFF !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #nrmhzacgtq .gt_bottom_border { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #nrmhzacgtq .gt_col_headings { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; }
 #nrmhzacgtq .gt_col_heading { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; padding-left: 5px !important; padding-right: 5px !important; overflow-x: hidden !important; }
 #nrmhzacgtq .gt_column_spanner_outer { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: normal !important; text-transform: inherit !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 4px !important; padding-right: 4px !important; }
 #nrmhzacgtq .gt_column_spanner_outer:first-child { padding-left: 0 !important; }
 #nrmhzacgtq .gt_column_spanner_outer:last-child { padding-right: 0 !important; }
 #nrmhzacgtq .gt_column_spanner { border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: bottom !important; padding-top: 5px !important; padding-bottom: 5px !important; overflow-x: hidden !important; display: inline-block !important; width: 100% !important; }
 #nrmhzacgtq .gt_spanner_row { border-bottom-style: hidden !important; }
 #nrmhzacgtq .gt_group_heading { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; text-align: left !important; }
 #nrmhzacgtq .gt_empty_group_heading { padding: 0.5px !important; color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; vertical-align: middle !important; }
 #nrmhzacgtq .gt_from_md> :first-child { margin-top: 0 !important; }
 #nrmhzacgtq .gt_from_md> :last-child { margin-bottom: 0 !important; }
 #nrmhzacgtq .gt_row { padding-top: 8px !important; padding-bottom: 8px !important; padding-left: 5px !important; padding-right: 5px !important; margin: 10px !important; border-top-style: solid !important; border-top-width: 1px !important; border-top-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 1px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 1px !important; border-right-color: #D3D3D3 !important; vertical-align: middle !important; overflow-x: hidden !important; }
 #nrmhzacgtq .gt_stub { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; }
 #nrmhzacgtq .gt_stub_row_group { color: #333333 !important; background-color: #FFFFFF !important; font-size: 100% !important; font-weight: initial !important; text-transform: inherit !important; border-right-style: solid !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; padding-left: 5px !important; padding-right: 5px !important; vertical-align: top !important; }
 #nrmhzacgtq .gt_row_group_first td { border-top-width: 2px !important; }
 #nrmhzacgtq .gt_row_group_first th { border-top-width: 2px !important; }
 #nrmhzacgtq .gt_striped { background-color: rgba(128,128,128,0.05) !important; }
 #nrmhzacgtq .gt_table_body { border-top-style: solid !important; border-top-width: 2px !important; border-top-color: #D3D3D3 !important; border-bottom-style: solid !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; }
 #nrmhzacgtq .gt_sourcenotes { color: #333333 !important; background-color: #FFFFFF !important; border-bottom-style: none !important; border-bottom-width: 2px !important; border-bottom-color: #D3D3D3 !important; border-left-style: none !important; border-left-width: 2px !important; border-left-color: #D3D3D3 !important; border-right-style: none !important; border-right-width: 2px !important; border-right-color: #D3D3D3 !important; }
 #nrmhzacgtq .gt_sourcenote { font-size: 90% !important; padding-top: 4px !important; padding-bottom: 4px !important; padding-left: 5px !important; padding-right: 5px !important; text-align: left !important; }
 #nrmhzacgtq .gt_left { text-align: left !important; }
 #nrmhzacgtq .gt_center { text-align: center !important; }
 #nrmhzacgtq .gt_right { text-align: right !important; font-variant-numeric: tabular-nums !important; }
 #nrmhzacgtq .gt_font_normal { font-weight: normal !important; }
 #nrmhzacgtq .gt_font_bold { font-weight: bold !important; }
 #nrmhzacgtq .gt_font_italic { font-style: italic !important; }
 #nrmhzacgtq .gt_super { font-size: 65% !important; }
 #nrmhzacgtq .gt_footnote_marks { font-size: 75% !important; vertical-align: 0.4em !important; position: initial !important; }
 #nrmhzacgtq .gt_asterisk { font-size: 100% !important; vertical-align: 0 !important; }
 
</style>
<table class="gt_table" data-quarto-bootstrap="false" data-quarto-disable-processing="false">
<thead>
<tr class="gt_heading">
<td class="gt_heading gt_title gt_font_normal" colspan="13">Joint Distribution of Category Spend in Year 1 &amp; 2</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" colspan="1" id="Year" rowspan="2" scope="col">Year</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" colspan="12" id="Range of Spend in Year 2" rowspan="1" scope="colgroup">
<span class="gt_column_spanner">Range of Spend in Year 2</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="-∞ - 0" rowspan="1" scope="col">-∞ - 0</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="0 - 5" rowspan="1" scope="col">0 - 5</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="5 - 10" rowspan="1" scope="col">5 - 10</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="10 - 15" rowspan="1" scope="col">10 - 15</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="15 - 20" rowspan="1" scope="col">15 - 20</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="20 - 25" rowspan="1" scope="col">20 - 25</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="25 - 30" rowspan="1" scope="col">25 - 30</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="30 - 35" rowspan="1" scope="col">30 - 35</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="35 - 40" rowspan="1" scope="col">35 - 40</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="40 - 45" rowspan="1" scope="col">40 - 45</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="45 - 50" rowspan="1" scope="col">45 - 50</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" colspan="1" id="50 - ∞" rowspan="1" scope="col">50 - ∞</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">-∞ - 0</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #b9a2d0;">183</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #cfbfdf;">125</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ddd2e9;">88</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f0ecf5;">38</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">0 - 5</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #cebdde;">129</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #9c7abd;">260</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ae93c9;">211</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d8cae5;">103</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f0f7;">30</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">5 - 10</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ded3e9;">87</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ac90c8;">217</td>
<td class="gt_row gt_center" style="color: #FFFFFF; background-color: #6e3e9e;">379</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #b49bcd;">196</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d4c5e2;">113</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ebe4f2;">52</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">17</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">10 - 15</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f1f8;">28</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d6c8e4;">107</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #a081c0;">248</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #aa8dc6;">223</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #c9b8db;">140</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e1d7eb;">78</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f6f3f9;">24</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f9f7fb;">15</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">15 - 20</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf9fc;">12</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f2edf6;">35</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #d8cbe5;">102</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #c0abd5;">164</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #cab9dc;">138</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ded3e9;">86</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #efe9f4;">43</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f5fa;">19</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">13</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">20 - 25</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f5fa;">19</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ebe4f2;">52</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e0d5ea;">82</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ddd1e8;">90</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e0d6ea;">81</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #e7dfef;">63</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f5f2f9;">25</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">17</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">3</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">25 - 30</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4fa;">21</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f0f8;">29</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eae3f1;">54</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ede7f3;">47</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #eee8f4;">45</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4f9;">22</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4fa;">21</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">30 - 35</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafc;">10</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fa;">18</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f4f1f8;">28</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f0ecf5;">38</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">17</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f3eff7;">32</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f6f3f9;">23</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">11</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">35 - 40</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f7f4f9;">22</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">13</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fb;">14</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f6fb;">17</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #f8f5fa;">19</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafc;">10</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">40 - 45</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">11</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbfafc;">10</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fb;">14</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">45 - 50</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefefe;">2</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfd;">6</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf9fc;">12</td>
</tr>
<tr>
<th class="gt_row gt_left gt_stub" style="color: #000000; background-color: #808080;">50 - ∞</th>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fffeff;">1</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ffffff;">0</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fefdfe;">3</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfdfe;">4</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fdfcfe;">5</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">8</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #faf8fc;">13</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfafd;">9</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fcfbfd;">7</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #fbf9fc;">11</td>
<td class="gt_row gt_center" style="color: #000000; background-color: #ede7f3;">47</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="13"><strong>Read Row/Column as</strong>: <em>Range of Spend in Year 1 / Range of Spend in Year 2</em></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h5 id="Repeat-Rates">Repeat Rates<a class="anchor-link" href="#Repeat-Rates">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>One common summary measure is the <strong>repeat rate</strong> (or <strong>repeat-buying rate</strong>), which is defined as the percentage of the brand’s customers in a given period who also purchase the product in the following period. We now explore how to compute quarter-by-quarter repeat rates.</p>
<p>We will carry out the analysis and plot the results for Alpha.</p>
<ol>
<li>The first thing we do is create a quarterly <strong>incidence matrix</strong> that indicates whether or not each panellist purchased Alpha each quarter, i.e. a table that indicates whether or not each panellist made at least one purchase of Alpha in each of the eight quarters in our dataset (i.e., an <strong>ever-buyers</strong> (by quarter) table for Alpha).<ul>
<li>We create a pivot table where rows represent <code>panel_id</code> and columns represent <code>quarter</code>.</li>
<li>Each cell indicates whether a panelist purchased in that quarter (<code>1</code> for yes, <code>0</code> for no).</li>
</ul>
</li>
<li>Recall that the repeat rate is the percentage of a brand’s customers in a given period who also purchase the product in the following period. We compute the <strong>repeat-buying rate</strong> (RBR) using the function: $$\text{RBR}(q \to q+1) = \frac{\sum_{i=1}^{N} Q_{q,i} \cdot Q_{q+1,i}}{\sum_{i=1}^{N} Q_{q,i}}$$<ul>
<li>where, $Q_{q,i}$ represent the value of quarter $q$ for panellist $i$. It is $1$ if the panellist purchased in quarter $q$, and $0$ otherwise.</li>
<li>$N$ represent the total number of panellists.</li>
<li>$Q_{q,i} \cdot Q_{q+1,i}$ represents element-wise multiplication for panellist $i$. It is $1$ if the panellist purchased in both quarters $q$ and $q+1$, and $0$ otherwise.</li>
<li>$\sum_{i=1}^{N} Q_{q,i} \cdot Q_{q+1,i}$ counts the number of panellists who purchased in <strong>both</strong> quarter $q$ and quarter $q+1$, at least once.</li>
<li>$\sum_{i=1}^{N} Q_{q,i}$ counts the total number of panellists (households) who purchased in quarter $q$.</li>
<li>$\text{RBR}(q \to q+1)$ measures the proportion of buyers in quarter $q$ who purchased again in quarter $q+1$.<ul>
<li>The element-wise operation ensures the calculation is based on individual panellists' purchase patterns.</li>
</ul>
</li>
<li>$Q_{q,i} \cdot Q_{q+1,i}$ leverages the binary nature of $Q$, where the product is $1$ only when both values are $1$. The formula aggregates over all panellists ($i$) to compute both the numerator and denominator.</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [124]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alpha_qtrly_incidence</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">13</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'quarter'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'quarter'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'incidence'</span><span class="p">))</span>  <span class="c1"># Mark 1 for incidence</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'incidence'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'quarter'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'max'</span>  <span class="c1"># Ensures presence is represented as 1</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Replace missing quarters with 0</span>
<span class="p">)</span>

<span class="c1"># Calculate Repeat Buying Rate (RBR)</span>
<span class="n">rbr</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">num_quarters</span> <span class="o">=</span> <span class="n">alpha_qtrly_incidence</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># Exclude 'panel_id' column</span>
<span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_quarters</span><span class="p">):</span>  <span class="c1"># Iterate through quarter pairs dynamically</span>
    <span class="n">prev_col</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
    <span class="n">next_col</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">q</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Compute RBR for each quarter pair</span>
    <span class="n">rbr_value</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">alpha_qtrly_incidence</span><span class="p">[</span><span class="n">prev_col</span><span class="p">]</span> <span class="o">*</span> <span class="n">alpha_qtrly_incidence</span><span class="p">[</span><span class="n">next_col</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span>
        <span class="n">alpha_qtrly_incidence</span><span class="p">[</span><span class="n">prev_col</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">rbr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rbr_value</span><span class="p">)</span>

<span class="c1"># Convert RBR values to a DataFrame for clarity</span>
<span class="n">rbr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Quarter Pair"</span><span class="p">:</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s2">-&gt;</span><span class="si">{</span><span class="n">q</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_quarters</span><span class="p">)],</span> <span class="s2">"RBR"</span><span class="p">:</span> <span class="n">rbr</span><span class="p">})</span>

<span class="n">display</span><span class="p">(</span><span class="n">alpha_qtrly_incidence</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">rbr</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (3_142, 9)</small><table border="1" class="dataframe"><thead><tr><th>panel_id</th><th>4</th><th>2</th><th>7</th><th>3</th><th>8</th><th>6</th><th>5</th><th>1</th></tr><tr><td>u32</td><td>i32</td><td>i32</td><td>i32</td><td>i32</td><td>i32</td><td>i32</td><td>i32</td><td>i32</td></tr></thead><tbody><tr><td>3108787</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td></tr><tr><td>3109100</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>3109801</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>3114262</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>3117795</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>3102129</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>3117523</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>3117174</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>3109034</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>3108403</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr></tbody></table></div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (7, 2)</small><table border="1" class="dataframe"><thead><tr><th>Quarter Pair</th><th>RBR</th></tr><tr><td>str</td><td>f64</td></tr></thead><tbody><tr><td>"1-&gt;2"</td><td>0.656682</td></tr><tr><td>"2-&gt;3"</td><td>0.614922</td></tr><tr><td>"3-&gt;4"</td><td>0.549313</td></tr><tr><td>"4-&gt;5"</td><td>0.593472</td></tr><tr><td>"5-&gt;6"</td><td>0.691401</td></tr><tr><td>"6-&gt;7"</td><td>0.597488</td></tr><tr><td>"7-&gt;8"</td><td>0.525498</td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [125]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Prepare the incidence matrix</span>
<span class="n">alpha_qtrly_incidence</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">13</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'quarter'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'panel_id'</span><span class="p">,</span> <span class="s1">'quarter'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'incidence'</span><span class="p">))</span>  <span class="c1"># Mark 1 for incidence</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">values</span><span class="o">=</span><span class="s1">'incidence'</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="s1">'panel_id'</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">'quarter'</span><span class="p">,</span>
        <span class="n">aggregate_function</span><span class="o">=</span><span class="s1">'max'</span>  <span class="c1"># Ensures presence is represented as 1</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">fill_null</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Replace missing quarters with 0</span>
<span class="p">)</span>

<span class="c1"># Get all quarters dynamically</span>
<span class="n">quarters</span> <span class="o">=</span> <span class="n">alpha_qtrly_incidence</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># Exclude 'panel_id'</span>

<span class="c1"># Compute RBR for all quarter pairs using vectorized operations</span>
<span class="n">rbr</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="sa">f</span><span class="s2">"Q</span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s2"> -&gt; Q</span><span class="si">{</span><span class="n">q</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">(</span>
                    <span class="p">(</span><span class="n">alpha_qtrly_incidence</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">q</span><span class="p">)]</span> <span class="o">*</span> <span class="n">alpha_qtrly_incidence</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">q</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span>
                    <span class="n">alpha_qtrly_incidence</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">q</span><span class="p">)]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">]</span>  <span class="c1"># Wrap in a list for DataFrame creation</span>
            <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">quarters</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">include_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">header_name</span><span class="o">=</span><span class="s1">'Quarter Pair'</span><span class="p">,</span> <span class="n">column_names</span><span class="o">=</span><span class="p">[</span><span class="s1">'RBR'</span><span class="p">])</span>  <span class="c1"># Transpose for desired layout &amp; rename resulting columns</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [126]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">rbr</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">strokeWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">'Quarter Pair:O'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Quarter'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)),</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">'RBR:Q'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Repeat Rate'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">",.0%"</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">]))</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">'Plot of quarterly repeat rates for Alpha'</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[126]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-0fe72b0e24ad4513b1e4094041d595c2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-0fe72b0e24ad4513b1e4094041d595c2.vega-embed details,
  #altair-viz-0fe72b0e24ad4513b1e4094041d595c2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-0fe72b0e24ad4513b1e4094041d595c2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0fe72b0e24ad4513b1e4094041d595c2") {
      outputDiv = document.getElementById("altair-viz-0fe72b0e24ad4513b1e4094041d595c2");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"name": "data-f6bb2b5c3b388c0cbb4971316ba2bcee"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"x": {"axis": {"labelAngle": 0}, "field": "Quarter Pair", "title": "Quarter", "type": "ordinal"}, "y": {"axis": {"format": ",.0%"}, "field": "RBR", "scale": {"domain": [0, 0.8]}, "title": "Repeat Rate", "type": "quantitative"}}, "height": 250, "title": "Plot of quarterly repeat rates for Alpha", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-f6bb2b5c3b388c0cbb4971316ba2bcee": [{"Quarter Pair": "Q1 -> Q2", "RBR": 0.6566820276497696}, {"Quarter Pair": "Q2 -> Q3", "RBR": 0.614921780986763}, {"Quarter Pair": "Q3 -> Q4", "RBR": 0.5493133583021224}, {"Quarter Pair": "Q4 -> Q5", "RBR": 0.5934718100890207}, {"Quarter Pair": "Q5 -> Q6", "RBR": 0.6914008321775312}, {"Quarter Pair": "Q6 -> Q7", "RBR": 0.5974877116329874}, {"Quarter Pair": "Q7 -> Q8", "RBR": 0.525497512437811}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We see that there is some variability in the repeat rate. Is it possibly in decline? One thing to realise is that the variability can be driven by the firm’s promotional activities. Aggressive promotions may attract a segment of consumers that only buy on promotion. If the firm promotes heavily in one quarter and has fewer promotions the following quarter, we could expect to a drop in the repeat rate. (The interested reader could explore this by looking at how Alpha’s promotional activity (as reflected in price/kg) varied across quarters.)</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [127]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">alpha_qtrly_price_avg</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">grocery_lf</span>
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'brand'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'Alpha'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sku_lf</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">'sku_id'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'week'</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">13</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">UInt16</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'quarter'</span><span class="p">),</span>
        <span class="p">(((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'units'</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">))</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">with_columns</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price'</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'volume'</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'price/kg'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'quarter'</span><span class="p">,</span> <span class="s1">'price/kg'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">'quarter'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s1">'price/kg'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">'avg_price_per_kg'</span><span class="p">))</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">alpha_qtrly_price_avg</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">strokeWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">'quarter:O'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Quarter'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)),</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">'avg_price_per_kg:Q'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Price/kg'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">"$,.2f"</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">]))</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s2">"Quarterly Average Price/kg - Alpha"</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[127]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<style>
  #altair-viz-a83eb771c9bf42e78924fc0abac034ae.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-a83eb771c9bf42e78924fc0abac034ae.vega-embed details,
  #altair-viz-a83eb771c9bf42e78924fc0abac034ae.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-a83eb771c9bf42e78924fc0abac034ae"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-a83eb771c9bf42e78924fc0abac034ae") {
      outputDiv = document.getElementById("altair-viz-a83eb771c9bf42e78924fc0abac034ae");
    }

    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      let deps = ["vega-embed"];
      require(deps, displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"name": "data-d97a339a67a834287de4611582824800"}, "mark": {"type": "line", "strokeWidth": 1}, "encoding": {"x": {"axis": {"labelAngle": 0}, "field": "quarter", "title": "Quarter", "type": "ordinal"}, "y": {"axis": {"format": "$,.2f"}, "field": "avg_price_per_kg", "scale": {"domain": [3, 4.5]}, "title": "Price/kg", "type": "quantitative"}}, "height": 250, "title": "Quarterly Average Price/kg - Alpha", "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-d97a339a67a834287de4611582824800": [{"quarter": 4, "avg_price_per_kg": 3.8785047996633244}, {"quarter": 1, "avg_price_per_kg": 3.838641731036805}, {"quarter": 8, "avg_price_per_kg": 4.00581136443434}, {"quarter": 7, "avg_price_per_kg": 3.635128452337406}, {"quarter": 3, "avg_price_per_kg": 3.8839400902102215}, {"quarter": 5, "avg_price_per_kg": 3.494255547253766}, {"quarter": 2, "avg_price_per_kg": 3.790874397354809}, {"quarter": 6, "avg_price_per_kg": 3.484913201739709}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="New-Products">New Products<a class="anchor-link" href="#New-Products">¶</a></h4>
</div>
</div>
</div>
</div>
</main>
</body>
</html>
